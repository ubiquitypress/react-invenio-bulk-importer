"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const y=require("react"),ga=require("react-overridable"),ei=require("axios"),ti=require("qs"),I=require("react-redux"),u=require("semantic-ui-react"),ft=require("redux"),ri=require("redux-thunk"),ai=require("lodash"),te=require("react-invenio-forms"),ni=require("formik"),se=e=>e&&e.__esModule?e:{default:e},i=se(y),b=se(ga),Ae=se(ei),ie=se(ti),si=se(ri),ii=se(ai);var xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function A(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var li=Object.prototype;function oi(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||li;return e===r}var je=oi;function ui(e,t){return function(r){return e(t(r))}}var ma=ui,ci=ma,di=ci(Object.keys,Object),fi=di,pi=je,hi=fi,gi=Object.prototype,mi=gi.hasOwnProperty;function yi(e){if(!pi(e))return hi(e);var t=[];for(var r in Object(e))mi.call(e,r)&&r!="constructor"&&t.push(r);return t}var ya=yi,vi=typeof xe=="object"&&xe&&xe.Object===Object&&xe,va=vi,Ei=va,bi=typeof self=="object"&&self&&self.Object===Object&&self,Si=Ei||bi||Function("return this")(),Q=Si,$i=Q,_i=$i.Symbol,le=_i,or=le,Ea=Object.prototype,Ci=Ea.hasOwnProperty,xi=Ea.toString,pe=or?or.toStringTag:void 0;function Ti(e){var t=Ci.call(e,pe),r=e[pe];try{e[pe]=void 0;var a=!0}catch{}var n=xi.call(e);return a&&(t?e[pe]=r:delete e[pe]),n}var wi=Ti,Fi=Object.prototype,Ii=Fi.toString;function Ai(e){return Ii.call(e)}var Oi=Ai,ur=le,Ri=wi,Pi=Oi,ki="[object Null]",Di="[object Undefined]",cr=ur?ur.toStringTag:void 0;function Li(e){return e==null?e===void 0?Di:ki:cr&&cr in Object(e)?Ri(e):Pi(e)}var K=Li;function Ui(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var V=Ui;const Ni=A(V);var Bi=K,Mi=V,zi="[object AsyncFunction]",Qi="[object Function]",ji="[object GeneratorFunction]",qi="[object Proxy]";function Gi(e){if(!Mi(e))return!1;var t=Bi(e);return t==Qi||t==ji||t==zi||t==qi}var ba=Gi,Vi=Q,Hi=Vi["__core-js_shared__"],Ki=Hi,lt=Ki,dr=function(){var e=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Yi(e){return!!dr&&dr in e}var Wi=Yi,Zi=Function.prototype,Ji=Zi.toString;function Xi(e){if(e!=null){try{return Ji.call(e)}catch{}try{return e+""}catch{}}return""}var Sa=Xi,el=ba,tl=Wi,rl=V,al=Sa,nl=/[\\^$.*+?()[\]{}|]/g,sl=/^\[object .+?Constructor\]$/,il=Function.prototype,ll=Object.prototype,ol=il.toString,ul=ll.hasOwnProperty,cl=RegExp("^"+ol.call(ul).replace(nl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dl(e){if(!rl(e)||tl(e))return!1;var t=el(e)?cl:sl;return t.test(al(e))}var fl=dl;function pl(e,t){return e==null?void 0:e[t]}var hl=pl,gl=fl,ml=hl;function yl(e,t){var r=ml(e,t);return gl(r)?r:void 0}var J=yl,vl=J,El=Q,bl=vl(El,"DataView"),Sl=bl,$l=J,_l=Q,Cl=$l(_l,"Map"),At=Cl,xl=J,Tl=Q,wl=xl(Tl,"Promise"),Fl=wl,Il=J,Al=Q,Ol=Il(Al,"Set"),Rl=Ol,Pl=J,kl=Q,Dl=Pl(kl,"WeakMap"),Ll=Dl,pt=Sl,ht=At,gt=Fl,mt=Rl,yt=Ll,$a=K,oe=Sa,fr="[object Map]",Ul="[object Object]",pr="[object Promise]",hr="[object Set]",gr="[object WeakMap]",mr="[object DataView]",Nl=oe(pt),Bl=oe(ht),Ml=oe(gt),zl=oe(mt),Ql=oe(yt),W=$a;(pt&&W(new pt(new ArrayBuffer(1)))!=mr||ht&&W(new ht)!=fr||gt&&W(gt.resolve())!=pr||mt&&W(new mt)!=hr||yt&&W(new yt)!=gr)&&(W=function(e){var t=$a(e),r=t==Ul?e.constructor:void 0,a=r?oe(r):"";if(a)switch(a){case Nl:return mr;case Bl:return fr;case Ml:return pr;case zl:return hr;case Ql:return gr}return t});var ve=W;function jl(e){return e!=null&&typeof e=="object"}var j=jl,ql=K,Gl=j,Vl="[object Arguments]";function Hl(e){return Gl(e)&&ql(e)==Vl}var Kl=Hl,yr=Kl,Yl=j,_a=Object.prototype,Wl=_a.hasOwnProperty,Zl=_a.propertyIsEnumerable,Jl=yr(function(){return arguments}())?yr:function(e){return Yl(e)&&Wl.call(e,"callee")&&!Zl.call(e,"callee")},qe=Jl,Xl=Array.isArray,k=Xl;const Ca=A(k);var eo=9007199254740991;function to(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=eo}var Ot=to,ro=ba,ao=Ot;function no(e){return e!=null&&ao(e.length)&&!ro(e)}var Ge=no,Pe={exports:{}};function so(){return!1}var io=so;Pe.exports;(function(e,t){var r=Q,a=io,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,l=s&&s.exports===n,o=l?r.Buffer:void 0,c=o?o.isBuffer:void 0,d=c||a;e.exports=d})(Pe,Pe.exports);var Ve=Pe.exports,lo=K,oo=Ot,uo=j,co="[object Arguments]",fo="[object Array]",po="[object Boolean]",ho="[object Date]",go="[object Error]",mo="[object Function]",yo="[object Map]",vo="[object Number]",Eo="[object Object]",bo="[object RegExp]",So="[object Set]",$o="[object String]",_o="[object WeakMap]",Co="[object ArrayBuffer]",xo="[object DataView]",To="[object Float32Array]",wo="[object Float64Array]",Fo="[object Int8Array]",Io="[object Int16Array]",Ao="[object Int32Array]",Oo="[object Uint8Array]",Ro="[object Uint8ClampedArray]",Po="[object Uint16Array]",ko="[object Uint32Array]",x={};x[To]=x[wo]=x[Fo]=x[Io]=x[Ao]=x[Oo]=x[Ro]=x[Po]=x[ko]=!0;x[co]=x[fo]=x[Co]=x[po]=x[xo]=x[ho]=x[go]=x[mo]=x[yo]=x[vo]=x[Eo]=x[bo]=x[So]=x[$o]=x[_o]=!1;function Do(e){return uo(e)&&oo(e.length)&&!!x[lo(e)]}var Lo=Do;function Uo(e){return function(t){return e(t)}}var Rt=Uo,ke={exports:{}};ke.exports;(function(e,t){var r=va,a=t&&!t.nodeType&&t,n=a&&!0&&e&&!e.nodeType&&e,s=n&&n.exports===a,l=s&&r.process,o=function(){try{var c=n&&n.require&&n.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();e.exports=o})(ke,ke.exports);var Pt=ke.exports,No=Lo,Bo=Rt,vr=Pt,Er=vr&&vr.isTypedArray,Mo=Er?Bo(Er):No,kt=Mo,zo=ya,Qo=ve,jo=qe,qo=k,Go=Ge,Vo=Ve,Ho=je,Ko=kt,Yo="[object Map]",Wo="[object Set]",Zo=Object.prototype,Jo=Zo.hasOwnProperty;function Xo(e){if(e==null)return!0;if(Go(e)&&(qo(e)||typeof e=="string"||typeof e.splice=="function"||Vo(e)||Ko(e)||jo(e)))return!e.length;var t=Qo(e);if(t==Yo||t==Wo)return!e.size;if(Ho(e))return!zo(e).length;for(var r in e)if(Jo.call(e,r))return!1;return!0}var eu=Xo;const q=A(eu);var tu=K,ru=j,au="[object Symbol]";function nu(e){return typeof e=="symbol"||ru(e)&&tu(e)==au}var Dt=nu,su=k,iu=Dt,lu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ou=/^\w*$/;function uu(e,t){if(su(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||iu(e)?!0:ou.test(e)||!lu.test(e)||t!=null&&e in Object(t)}var Lt=uu,cu=J,du=cu(Object,"create"),He=du,br=He;function fu(){this.__data__=br?br(null):{},this.size=0}var pu=fu;function hu(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var gu=hu,mu=He,yu="__lodash_hash_undefined__",vu=Object.prototype,Eu=vu.hasOwnProperty;function bu(e){var t=this.__data__;if(mu){var r=t[e];return r===yu?void 0:r}return Eu.call(t,e)?t[e]:void 0}var Su=bu,$u=He,_u=Object.prototype,Cu=_u.hasOwnProperty;function xu(e){var t=this.__data__;return $u?t[e]!==void 0:Cu.call(t,e)}var Tu=xu,wu=He,Fu="__lodash_hash_undefined__";function Iu(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=wu&&t===void 0?Fu:t,this}var Au=Iu,Ou=pu,Ru=gu,Pu=Su,ku=Tu,Du=Au;function ue(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}ue.prototype.clear=Ou;ue.prototype.delete=Ru;ue.prototype.get=Pu;ue.prototype.has=ku;ue.prototype.set=Du;var Lu=ue;function Uu(){this.__data__=[],this.size=0}var Nu=Uu;function Bu(e,t){return e===t||e!==e&&t!==t}var Ke=Bu,Mu=Ke;function zu(e,t){for(var r=e.length;r--;)if(Mu(e[r][0],t))return r;return-1}var Ye=zu,Qu=Ye,ju=Array.prototype,qu=ju.splice;function Gu(e){var t=this.__data__,r=Qu(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():qu.call(t,r,1),--this.size,!0}var Vu=Gu,Hu=Ye;function Ku(e){var t=this.__data__,r=Hu(t,e);return r<0?void 0:t[r][1]}var Yu=Ku,Wu=Ye;function Zu(e){return Wu(this.__data__,e)>-1}var Ju=Zu,Xu=Ye;function ec(e,t){var r=this.__data__,a=Xu(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var tc=ec,rc=Nu,ac=Vu,nc=Yu,sc=Ju,ic=tc;function ce(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}ce.prototype.clear=rc;ce.prototype.delete=ac;ce.prototype.get=nc;ce.prototype.has=sc;ce.prototype.set=ic;var We=ce,Sr=Lu,lc=We,oc=At;function uc(){this.size=0,this.__data__={hash:new Sr,map:new(oc||lc),string:new Sr}}var cc=uc;function dc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var fc=dc,pc=fc;function hc(e,t){var r=e.__data__;return pc(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Ze=hc,gc=Ze;function mc(e){var t=gc(this,e).delete(e);return this.size-=t?1:0,t}var yc=mc,vc=Ze;function Ec(e){return vc(this,e).get(e)}var bc=Ec,Sc=Ze;function $c(e){return Sc(this,e).has(e)}var _c=$c,Cc=Ze;function xc(e,t){var r=Cc(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var Tc=xc,wc=cc,Fc=yc,Ic=bc,Ac=_c,Oc=Tc;function de(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}de.prototype.clear=wc;de.prototype.delete=Fc;de.prototype.get=Ic;de.prototype.has=Ac;de.prototype.set=Oc;var Ut=de,xa=Ut,Rc="Expected a function";function Nt(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Rc);var r=function(){var a=arguments,n=t?t.apply(this,a):a[0],s=r.cache;if(s.has(n))return s.get(n);var l=e.apply(this,a);return r.cache=s.set(n,l)||s,l};return r.cache=new(Nt.Cache||xa),r}Nt.Cache=xa;var Pc=Nt,kc=Pc,Dc=500;function Lc(e){var t=kc(e,function(a){return r.size===Dc&&r.clear(),a}),r=t.cache;return t}var Uc=Lc,Nc=Uc,Bc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mc=/\\(\\)?/g,zc=Nc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Bc,function(r,a,n,s){t.push(n?s.replace(Mc,"$1"):a||r)}),t}),Qc=zc;function jc(e,t){for(var r=-1,a=e==null?0:e.length,n=Array(a);++r<a;)n[r]=t(e[r],r,e);return n}var qc=jc,$r=le,Gc=qc,Vc=k,Hc=Dt,Kc=1/0,_r=$r?$r.prototype:void 0,Cr=_r?_r.toString:void 0;function Ta(e){if(typeof e=="string")return e;if(Vc(e))return Gc(e,Ta)+"";if(Hc(e))return Cr?Cr.call(e):"";var t=e+"";return t=="0"&&1/e==-Kc?"-0":t}var Yc=Ta,Wc=Yc;function Zc(e){return e==null?"":Wc(e)}var Ee=Zc,Jc=k,Xc=Lt,ed=Qc,td=Ee;function rd(e,t){return Jc(e)?e:Xc(e,t)?[e]:ed(td(e))}var Je=rd,ad=Dt,nd=1/0;function sd(e){if(typeof e=="string"||ad(e))return e;var t=e+"";return t=="0"&&1/e==-nd?"-0":t}var be=sd,id=Je,ld=be;function od(e,t){t=id(t,e);for(var r=0,a=t.length;e!=null&&r<a;)e=e[ld(t[r++])];return r&&r==a?e:void 0}var Bt=od,ud=Bt;function cd(e,t,r){var a=e==null?void 0:ud(e,t);return a===void 0?r:a}var wa=cd;const he=A(wa);function dd(e,t){return e!=null&&t in Object(e)}var fd=dd,pd=9007199254740991,hd=/^(?:0|[1-9]\d*)$/;function gd(e,t){var r=typeof e;return t=t??pd,!!t&&(r=="number"||r!="symbol"&&hd.test(e))&&e>-1&&e%1==0&&e<t}var Xe=gd,md=Je,yd=qe,vd=k,Ed=Xe,bd=Ot,Sd=be;function $d(e,t,r){t=md(t,e);for(var a=-1,n=t.length,s=!1;++a<n;){var l=Sd(t[a]);if(!(s=e!=null&&r(e,l)))break;e=e[l]}return s||++a!=n?s:(n=e==null?0:e.length,!!n&&bd(n)&&Ed(l,n)&&(vd(e)||yd(e)))}var Fa=$d,_d=fd,Cd=Fa;function xd(e,t){return e!=null&&Cd(e,t,_d)}var Mt=xd;const Td=A(Mt);var wd=J,Fd=function(){try{var e=wd(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ia=Fd,xr=Ia;function Id(e,t,r){t=="__proto__"&&xr?xr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var et=Id,Ad=et,Od=Ke,Rd=Object.prototype,Pd=Rd.hasOwnProperty;function kd(e,t,r){var a=e[t];(!(Pd.call(e,t)&&Od(a,r))||r===void 0&&!(t in e))&&Ad(e,t,r)}var zt=kd,Dd=zt,Ld=et;function Ud(e,t,r,a){var n=!r;r||(r={});for(var s=-1,l=t.length;++s<l;){var o=t[s],c=a?a(r[o],e[o],o,r,e):void 0;c===void 0&&(c=e[o]),n?Ld(r,o,c):Dd(r,o,c)}return r}var Se=Ud;function Nd(e){return e}var Qt=Nd;function Bd(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Md=Bd,zd=Md,Tr=Math.max;function Qd(e,t,r){return t=Tr(t===void 0?e.length-1:t,0),function(){for(var a=arguments,n=-1,s=Tr(a.length-t,0),l=Array(s);++n<s;)l[n]=a[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=a[n];return o[t]=r(l),zd(e,this,o)}}var Aa=Qd;function jd(e){return function(){return e}}var qd=jd,Gd=qd,wr=Ia,Vd=Qt,Hd=wr?function(e,t){return wr(e,"toString",{configurable:!0,enumerable:!1,value:Gd(t),writable:!0})}:Vd,Kd=Hd,Yd=800,Wd=16,Zd=Date.now;function Jd(e){var t=0,r=0;return function(){var a=Zd(),n=Wd-(a-r);if(r=a,n>0){if(++t>=Yd)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Xd=Jd,ef=Kd,tf=Xd,rf=tf(ef),Oa=rf,af=Qt,nf=Aa,sf=Oa;function lf(e,t){return sf(nf(e,t,af),e+"")}var of=lf,uf=Ke,cf=Ge,df=Xe,ff=V;function pf(e,t,r){if(!ff(r))return!1;var a=typeof t;return(a=="number"?cf(r)&&df(t,r.length):a=="string"&&t in r)?uf(r[t],e):!1}var hf=pf,gf=of,mf=hf;function yf(e){return gf(function(t,r){var a=-1,n=r.length,s=n>1?r[n-1]:void 0,l=n>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,l&&mf(r[0],r[1],l)&&(s=n<3?void 0:s,n=1),t=Object(t);++a<n;){var o=r[a];o&&e(t,o,a,s)}return t})}var vf=yf;function Ef(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}var bf=Ef,Sf=bf,$f=qe,_f=k,Cf=Ve,xf=Xe,Tf=kt,wf=Object.prototype,Ff=wf.hasOwnProperty;function If(e,t){var r=_f(e),a=!r&&$f(e),n=!r&&!a&&Cf(e),s=!r&&!a&&!n&&Tf(e),l=r||a||n||s,o=l?Sf(e.length,String):[],c=o.length;for(var d in e)(t||Ff.call(e,d))&&!(l&&(d=="length"||n&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||xf(d,c)))&&o.push(d);return o}var Ra=If;function Af(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Of=Af,Rf=V,Pf=je,kf=Of,Df=Object.prototype,Lf=Df.hasOwnProperty;function Uf(e){if(!Rf(e))return kf(e);var t=Pf(e),r=[];for(var a in e)a=="constructor"&&(t||!Lf.call(e,a))||r.push(a);return r}var Nf=Uf,Bf=Ra,Mf=Nf,zf=Ge;function Qf(e){return zf(e)?Bf(e,!0):Mf(e)}var tt=Qf,jf=Se,qf=vf,Gf=tt,Vf=qf(function(e,t){jf(t,Gf(t),e)}),Hf=Vf,Kf=Hf;const De=A(Kf);function Yf(e){return e&&e.length?e[0]:void 0}var Wf=Yf;const Zf=A(Wf);var Jf=zt,Xf=Je,ep=Xe,Fr=V,tp=be;function rp(e,t,r,a){if(!Fr(e))return e;t=Xf(t,e);for(var n=-1,s=t.length,l=s-1,o=e;o!=null&&++n<s;){var c=tp(t[n]),d=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(n!=l){var f=o[c];d=a?a(f,c,o):void 0,d===void 0&&(d=Fr(f)?f:ep(t[n+1])?[]:{})}Jf(o,c,d),o=o[c]}return e}var ap=rp,np=Bt,sp=ap,ip=Je;function lp(e,t,r){for(var a=-1,n=t.length,s={};++a<n;){var l=t[a],o=np(e,l);r(o,l)&&sp(s,ip(l,e),o)}return s}var op=lp,up=op,cp=Mt;function dp(e,t){return up(e,t,function(r,a){return cp(e,a)})}var fp=dp;function pp(e,t){for(var r=-1,a=t.length,n=e.length;++r<a;)e[n+r]=t[r];return e}var jt=pp,Ir=le,hp=qe,gp=k,Ar=Ir?Ir.isConcatSpreadable:void 0;function mp(e){return gp(e)||hp(e)||!!(Ar&&e&&e[Ar])}var yp=mp,vp=jt,Ep=yp;function Pa(e,t,r,a,n){var s=-1,l=e.length;for(r||(r=Ep),n||(n=[]);++s<l;){var o=e[s];t>0&&r(o)?t>1?Pa(o,t-1,r,a,n):vp(n,o):a||(n[n.length]=o)}return n}var bp=Pa,Sp=bp;function $p(e){var t=e==null?0:e.length;return t?Sp(e,1):[]}var _p=$p,Cp=_p,xp=Aa,Tp=Oa;function wp(e){return Tp(xp(e,void 0,Cp),e+"")}var Fp=wp,Ip=fp,Ap=Fp,Op=Ap(function(e,t){return e==null?{}:Ip(e,t)}),Rp=Op;const Pp=A(Rp);var kp=We;function Dp(){this.__data__=new kp,this.size=0}var Lp=Dp;function Up(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Np=Up;function Bp(e){return this.__data__.get(e)}var Mp=Bp;function zp(e){return this.__data__.has(e)}var Qp=zp,jp=We,qp=At,Gp=Ut,Vp=200;function Hp(e,t){var r=this.__data__;if(r instanceof jp){var a=r.__data__;if(!qp||a.length<Vp-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new Gp(a)}return r.set(e,t),this.size=r.size,this}var Kp=Hp,Yp=We,Wp=Lp,Zp=Np,Jp=Mp,Xp=Qp,eh=Kp;function fe(e){var t=this.__data__=new Yp(e);this.size=t.size}fe.prototype.clear=Wp;fe.prototype.delete=Zp;fe.prototype.get=Jp;fe.prototype.has=Xp;fe.prototype.set=eh;var qt=fe;function th(e,t){for(var r=-1,a=e==null?0:e.length;++r<a&&t(e[r],r,e)!==!1;);return e}var rh=th,ah=Ra,nh=ya,sh=Ge;function ih(e){return sh(e)?ah(e):nh(e)}var $e=ih,lh=Se,oh=$e;function uh(e,t){return e&&lh(t,oh(t),e)}var ch=uh,dh=Se,fh=tt;function ph(e,t){return e&&dh(t,fh(t),e)}var hh=ph,Le={exports:{}};Le.exports;(function(e,t){var r=Q,a=t&&!t.nodeType&&t,n=a&&!0&&e&&!e.nodeType&&e,s=n&&n.exports===a,l=s?r.Buffer:void 0,o=l?l.allocUnsafe:void 0;function c(d,f){if(f)return d.slice();var p=d.length,h=o?o(p):new d.constructor(p);return d.copy(h),h}e.exports=c})(Le,Le.exports);var gh=Le.exports;function mh(e,t){var r=-1,a=e.length;for(t||(t=Array(a));++r<a;)t[r]=e[r];return t}var yh=mh;function vh(e,t){for(var r=-1,a=e==null?0:e.length,n=0,s=[];++r<a;){var l=e[r];t(l,r,e)&&(s[n++]=l)}return s}var Eh=vh;function bh(){return[]}var ka=bh,Sh=Eh,$h=ka,_h=Object.prototype,Ch=_h.propertyIsEnumerable,Or=Object.getOwnPropertySymbols,xh=Or?function(e){return e==null?[]:(e=Object(e),Sh(Or(e),function(t){return Ch.call(e,t)}))}:$h,Gt=xh,Th=Se,wh=Gt;function Fh(e,t){return Th(e,wh(e),t)}var Ih=Fh,Ah=ma,Oh=Ah(Object.getPrototypeOf,Object),Da=Oh,Rh=jt,Ph=Da,kh=Gt,Dh=ka,Lh=Object.getOwnPropertySymbols,Uh=Lh?function(e){for(var t=[];e;)Rh(t,kh(e)),e=Ph(e);return t}:Dh,La=Uh,Nh=Se,Bh=La;function Mh(e,t){return Nh(e,Bh(e),t)}var zh=Mh,Qh=jt,jh=k;function qh(e,t,r){var a=t(e);return jh(e)?a:Qh(a,r(e))}var Ua=qh,Gh=Ua,Vh=Gt,Hh=$e;function Kh(e){return Gh(e,Hh,Vh)}var Na=Kh,Yh=Ua,Wh=La,Zh=tt;function Jh(e){return Yh(e,Zh,Wh)}var Xh=Jh,eg=Object.prototype,tg=eg.hasOwnProperty;function rg(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&tg.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var ag=rg,ng=Q,sg=ng.Uint8Array,Ba=sg,Rr=Ba;function ig(e){var t=new e.constructor(e.byteLength);return new Rr(t).set(new Rr(e)),t}var Vt=ig,lg=Vt;function og(e,t){var r=t?lg(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var ug=og,cg=/\w*$/;function dg(e){var t=new e.constructor(e.source,cg.exec(e));return t.lastIndex=e.lastIndex,t}var fg=dg,Pr=le,kr=Pr?Pr.prototype:void 0,Dr=kr?kr.valueOf:void 0;function pg(e){return Dr?Object(Dr.call(e)):{}}var hg=pg,gg=Vt;function mg(e,t){var r=t?gg(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var yg=mg,vg=Vt,Eg=ug,bg=fg,Sg=hg,$g=yg,_g="[object Boolean]",Cg="[object Date]",xg="[object Map]",Tg="[object Number]",wg="[object RegExp]",Fg="[object Set]",Ig="[object String]",Ag="[object Symbol]",Og="[object ArrayBuffer]",Rg="[object DataView]",Pg="[object Float32Array]",kg="[object Float64Array]",Dg="[object Int8Array]",Lg="[object Int16Array]",Ug="[object Int32Array]",Ng="[object Uint8Array]",Bg="[object Uint8ClampedArray]",Mg="[object Uint16Array]",zg="[object Uint32Array]";function Qg(e,t,r){var a=e.constructor;switch(t){case Og:return vg(e);case _g:case Cg:return new a(+e);case Rg:return Eg(e,r);case Pg:case kg:case Dg:case Lg:case Ug:case Ng:case Bg:case Mg:case zg:return $g(e,r);case xg:return new a;case Tg:case Ig:return new a(e);case wg:return bg(e);case Fg:return new a;case Ag:return Sg(e)}}var jg=Qg,qg=V,Lr=Object.create,Gg=function(){function e(){}return function(t){if(!qg(t))return{};if(Lr)return Lr(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Vg=Gg,Hg=Vg,Kg=Da,Yg=je;function Wg(e){return typeof e.constructor=="function"&&!Yg(e)?Hg(Kg(e)):{}}var Zg=Wg,Jg=ve,Xg=j,em="[object Map]";function tm(e){return Xg(e)&&Jg(e)==em}var rm=tm,am=rm,nm=Rt,Ur=Pt,Nr=Ur&&Ur.isMap,sm=Nr?nm(Nr):am,im=sm,lm=ve,om=j,um="[object Set]";function cm(e){return om(e)&&lm(e)==um}var dm=cm,fm=dm,pm=Rt,Br=Pt,Mr=Br&&Br.isSet,hm=Mr?pm(Mr):fm,gm=hm,mm=qt,ym=rh,vm=zt,Em=ch,bm=hh,Sm=gh,$m=yh,_m=Ih,Cm=zh,xm=Na,Tm=Xh,wm=ve,Fm=ag,Im=jg,Am=Zg,Om=k,Rm=Ve,Pm=im,km=V,Dm=gm,Lm=$e,Um=tt,Nm=1,Bm=2,Mm=4,Ma="[object Arguments]",zm="[object Array]",Qm="[object Boolean]",jm="[object Date]",qm="[object Error]",za="[object Function]",Gm="[object GeneratorFunction]",Vm="[object Map]",Hm="[object Number]",Qa="[object Object]",Km="[object RegExp]",Ym="[object Set]",Wm="[object String]",Zm="[object Symbol]",Jm="[object WeakMap]",Xm="[object ArrayBuffer]",ey="[object DataView]",ty="[object Float32Array]",ry="[object Float64Array]",ay="[object Int8Array]",ny="[object Int16Array]",sy="[object Int32Array]",iy="[object Uint8Array]",ly="[object Uint8ClampedArray]",oy="[object Uint16Array]",uy="[object Uint32Array]",_={};_[Ma]=_[zm]=_[Xm]=_[ey]=_[Qm]=_[jm]=_[ty]=_[ry]=_[ay]=_[ny]=_[sy]=_[Vm]=_[Hm]=_[Qa]=_[Km]=_[Ym]=_[Wm]=_[Zm]=_[iy]=_[ly]=_[oy]=_[uy]=!0;_[qm]=_[za]=_[Jm]=!1;function Oe(e,t,r,a,n,s){var l,o=t&Nm,c=t&Bm,d=t&Mm;if(r&&(l=n?r(e,a,n,s):r(e)),l!==void 0)return l;if(!km(e))return e;var f=Om(e);if(f){if(l=Fm(e),!o)return $m(e,l)}else{var p=wm(e),h=p==za||p==Gm;if(Rm(e))return Sm(e,o);if(p==Qa||p==Ma||h&&!n){if(l=c||h?{}:Am(e),!o)return c?Cm(e,bm(l,e)):_m(e,Em(l,e))}else{if(!_[p])return n?e:{};l=Im(e,p,o)}}s||(s=new mm);var g=s.get(e);if(g)return g;s.set(e,l),Dm(e)?e.forEach(function(S){l.add(Oe(S,t,r,S,e,s))}):Pm(e)&&e.forEach(function(S,v){l.set(v,Oe(S,t,r,v,e,s))});var E=d?c?Tm:xm:c?Um:Lm,m=f?void 0:E(e);return ym(m||e,function(S,v){m&&(v=S,S=e[v]),vm(l,v,Oe(S,t,r,v,e,s))}),l}var cy=Oe,dy=cy,fy=1,py=4;function hy(e){return dy(e,fy|py)}var gy=hy;const ne=A(gy);var my=K,yy=j,vy="[object Boolean]";function Ey(e){return e===!0||e===!1||yy(e)&&my(e)==vy}var by=Ey;const Sy=A(by);var $y=K,_y=k,Cy=j,xy="[object String]";function Ty(e){return typeof e=="string"||!_y(e)&&Cy(e)&&$y(e)==xy}var wy=Ty;const Fy=A(wy);var Iy=K,Ay=j,Oy="[object Number]";function Ry(e){return typeof e=="number"||Ay(e)&&Iy(e)==Oy}var Py=Ry;const ky=A(Py);function Ht(){}Ht.prototype=new Error;class zr{constructor(){this._addFilter=(t,r)=>{if(!Array.isArray(t))throw new Error(`Filter value "${t}" in query state must be an array.`);if(!(t.length===2||t.length===3))throw new Error(`Filter value "${t}" in query state must be an array of 2 or 3 elements`);const a=t.length===3;var n=t[0],s=t[1];if(a){if(!Array.isArray(t[2]))throw new Error(`Filter value "${t[2]}" in query state must be an array.`);s=s+"::"+t[2][1]}n in r?r[n].push(s):r[n]=[s]},this._addFilters=t=>{if(!Array.isArray(t))throw new Error(`Filters query state "${t}" must be an array.`);const r={};return t.forEach(a=>{this._addFilter(a,r)}),r},this.serialize=this.serialize.bind(this)}serialize(t){const{queryString:r,sortBy:a,sortOrder:n,page:s,size:l,filters:o,hiddenParams:c}=t;let d={};r!==null&&(d.q=r),a!==null&&(d.sort=a,n!==null&&(d.sort=n==="desc"?`-${a}`:a)),s>0&&(d.page=s),l>0&&(d.size=l),q(c)||De(d,this._addFilters(c));const f=this._addFilters(o);return De(d,f),ie.default.stringify(d,{arrayFormat:"repeat"})}}class Dy{constructor(){this.serialize=this.serialize.bind(this)}serialize(t){const{aggregations:r,hits:a,...n}=t;return{aggregations:r||{},hits:a.hits,total:a.total,extras:n}}}function Te(e,t){return e.indexOf(t)===0&&(e.length===t.length||e.indexOf(t+"&")===0)}function ot(e){return ie.default.stringify({q:e})}function Ly(e){return ie.default.parse(e).q}function ja(e){if(e.length===3){const r=[e[0],e[1]],a=ja(e[2]);return a.length&&r.push(a),r}return[]}function Qr(e,t){const r=ot(e),a=t.map(l=>ot(l));let n=!1;const s=a.filter(l=>{const o=Te(l,r),c=Te(r,l);return o&&!n&&(n=!0),!o&&!c});if(!n)s.push(r);else if(e.length===3){const o=ja(e),c=ot(o),d=s.some(f=>{const p=Te(f,c),h=Te(c,f);return p||h});(q(s)||!d)&&s.push(c)}return s.map(l=>Ly(l))}const qa=(e,t)=>{if(q(e))return;if(!Ca(Zf(e)))return Qr(e,t);let r=t;for(const a of e)r=Qr(a,r);return r},Ga=(e,t,r)=>{let a=Pp(t,r);return q(a.filters)||(a.filters=qa(a.filters,e.filters)),a},Ue={queryString:"",suggestions:[],sortBy:null,sortOrder:null,page:-1,size:-1,filters:[],hiddenParams:[],layout:null},Va=Object.keys(Ue),Uy={loading:!1,data:{hits:[],total:0,aggregations:{}},error:{}},Ny={hasUserChangedSorting:!1,initialSortBy:null,initialSortOrder:null};class By{constructor(){this._checkFilter=t=>{if(!Array.isArray(t))throw new Error(`Filter value "${t}" in query state must be an array.`);if(!(t.length===2||t.length===3))throw new Error(`Filter value "${t}" in query state must be an array of 2 or 3 elements`)},this._addFilter=(t,r)=>{this._checkFilter(t);const a=t[0],n=t[1],s=t.length===3;s&&this._checkFilter(t[2]),a in r?s?r[a].push(n+"::"+t[2][1]):r[a].push(n):s?r[a]=[n+"::"+t[2][1]]:r[a]=[n]},this._addFilters=t=>{if(!Array.isArray(t))throw new Error(`Filters query state "${t}" must be an array.`);const r={};return t.forEach(a=>{this._addFilter(a,r)}),r},this.serialize=this.serialize.bind(this)}serialize(t){const{queryString:r,sortBy:a,sortOrder:n,page:s,size:l,filters:o,hiddenParams:c}=t;let d={};r!==null&&(d.q=r),a!==null&&(d.sort=a,n!==null&&(d.sort=n==="desc"?`-${a}`:a)),s>0&&(d.page=s),l>0&&(d.size=l),q(c)||De(d,this._addFilters(c));const f=this._addFilters(o);return De(d,f),ie.default.stringify(d,{arrayFormat:"repeat"})}}class Ha{constructor(t){this.axiosConfig=he(t,"axios",{}),this.validateAxiosConfig(),this.initSerializers(t),this.initInterceptors(t),this.initAxios(),this.search=this.search.bind(this),this.axiosCancelToken=Ae.default.CancelToken}validateAxiosConfig(){if(!Td(this.axiosConfig,"url"))throw new Error("InvenioSearchApi config: `url` field is required.")}initInterceptors(t){this.requestInterceptor=he(t,"interceptors.request",void 0),this.responseInterceptor=he(t,"interceptors.response",void 0)}getSerializer(t){const r={InvenioRecordsResourcesRequestSerializer:By,InvenioRequestSerializer:zr};return typeof t=="string"?r[t]:t||zr}initSerializers(t){var r;const a=this.getSerializer((r=t.invenio)===null||r===void 0?void 0:r.requestSerializer),n=he(t,"invenio.responseSerializer",Dy);this.requestSerializer=new a,this.responseSerializer=new n}initAxios(){const t={paramsSerializer:this.requestSerializer.serialize,...this.axiosConfig};this.http=Ae.default.create(t),this.addInterceptors()}addInterceptors(){this.requestInterceptor&&this.http.interceptors.request.use(this.requestInterceptor.resolve,this.requestInterceptor.reject),this.responseInterceptor&&this.http.interceptors.request.use(this.responseInterceptor.resolve,this.responseInterceptor.reject)}async search(t){this.axiosCancel&&this.axiosCancel.cancel(),this.axiosCancel=this.axiosCancelToken.source();try{let r=await this.http.request({url:this.axiosConfig.url,params:t,cancelToken:this.axiosCancel.token});r=this.responseSerializer.serialize(r.data);const a=Ga(t,r.extras,Va);return q(a)||(r.newQueryState=a),delete r.extras,r}catch(r){throw Ae.default.isCancel(r)?new Ht:r}}}class My{constructor(){this.isValid=(t,r,a)=>{switch(r){case"queryString":case"sortBy":return!0;case"sortOrder":return["asc","desc"].includes(a);case"page":case"size":return ky(a)&&a>0;case"layout":return["grid","list"].includes(a);case"filters":case"hiddenParams":{const n=Ca(a)?a:[a],s=":",l=t.urlFilterSeparator,o=`[^\\${s}\\${l}]*`,c=`${o}\\${s}${o}`,d=`${c}(\\${l}${c})*`,f=new RegExp(`^${d}$`);return n.every(p=>String(p).match(f))}default:return!1}}}}const zy=e=>{window.history.pushState&&window.history.pushState({path:e},"",e)},jr=e=>{window.history.replaceState&&window.history.replaceState({path:e},"",e)};class Qy{constructor(){this._convertValue=(t,r)=>{switch(t){case this.paramsMapping.page:case this.paramsMapping.size:return parseInt(r);default:return r}},this.parse=this.parse.bind(this),this.paramsMapping={}}set urlParamsMapping(t){this.paramsMapping=t}parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const r=ie.default.parse(t,{ignoreQueryPrefix:!0}),a={};return Object.entries(r).forEach(n=>{const s=n[0],l=n[1];a[s]=this._convertValue(s,l)}),a}}class jy{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._filterListToString=r=>{const a=r.length===3?this.urlFilterSeparator.concat(this._filterListToString(r[2])):"";return`${r[0]}:${r[1]}${a}`},this._mapQueryStateToUrlParams=r=>{const a={};Object.keys(r).filter(s=>s in this.urlParamsMapping).filter(s=>(s==="page"||s==="size")&&r[s]<=0||s==="hiddenParams"?!1:r[s]!==null).forEach(s=>{const l=this.urlParamsMapping[s];s==="filters"?a[l]=r[s].map(o=>this._filterListToString(o)):a[l]=r[s]});const n=(s,l)=>{const o="q";return s===o?-1:l===o?1:s.localeCompare(l)};return ie.default.stringify(a,{addQueryPrefix:!0,skipNulls:!0,indices:!1,sort:n})},this._filterStringToList=r=>{const a=r.indexOf(this.urlFilterSeparator),n=a>-1,s=r.indexOf(":");if(s===-1)throw new Error(`Filter "${r}" not parsable. Format expected: "<agg name>:<value>"`);const l=r.slice(0,s),o=n?a:r.length,c=r.slice(s+1,o);let d=[l,c];if(n){const f=r.slice(a+1,r.length);d.push(this._filterStringToList(f))}return d},this._mapUrlParamsToQueryState=r=>{const a={};return Object.keys(r).forEach(n=>{const s=this.fromUrlParamsMapping[n];this.urlParamValidator.isValid(this,s,r[n])?(a[s]=r[n],s==="filters"&&(Array.isArray(r[n])||(r[n]=[r[n]]),a[s]=r[n].map(l=>this._filterStringToList(l)))):console.warn(`URL parameter '${n}' with value '${r[n]}' is incorrect and was ignored.`)}),a},this._mergeParamsIntoState=(r,a)=>{const n=ne(a);return Object.keys(r).forEach(s=>{n[s]=r[s]}),n},this.urlParamsMapping=Ni(t.urlParamsMapping)?t.urlParamsMapping:{queryString:"q",sortBy:"sort",sortOrder:"order",page:"p",size:"s",layout:"l",filters:"f",hiddenParams:"hp"},this.keepHistory=t.keepHistory!==void 0?t.keepHistory:!0,!Sy(this.keepHistory))throw new Error(`"keepHistory configuration must be a boolean, ${this.keepHistory} provided.`);if(this.urlFilterSeparator=t.urlFilterSeparator!==void 0?t.urlFilterSeparator:"+",!Fy(this.urlFilterSeparator))throw new Error(`"urlFilterSeparator configuration must be a string, ${this.urlFilterSeparator} provided.`);this.urlParamValidator=t.urlParamValidator||new My,this.urlParser=t.urlParser||new Qy,this.urlParser.urlParamsMapping=this.urlParamsMapping,this.fromUrlParamsMapping={},Object.keys(this.urlParamsMapping).forEach(r=>{this.fromUrlParamsMapping[this.urlParamsMapping[r]]=r}),this.get=this.get.bind(this),this.set=this.set.bind(this),this.replace=this.replace.bind(this)}get(t){const r=this.urlParser.parse(window.location.search),a=this._mapUrlParamsToQueryState(r),n=this._mergeParamsIntoState(a,t),s=this._mapQueryStateToUrlParams(n);return jr(s),n}set(t){if(this.keepHistory){const r=this._mapQueryStateToUrlParams(t);zy(r)}else this.replace(t)}replace(t){const r=this._mapQueryStateToUrlParams(t);jr(r)}}const qy="SET_QUERY_COMPONENT_INITIAL_STATE",Ka="SET_QUERY_STRING",Kt="SET_QUERY_SORTING",Yt="SET_QUERY_SORT_BY",Wt="SET_QUERY_SORT_ORDER",_e="SET_QUERY_STATE",Ya="SET_QUERY_PAGINATION_PAGE",Wa="SET_QUERY_PAGINATION_SIZE",Za="SET_QUERY_FILTERS",Ja="SET_QUERY_SUGGESTIONS",Xa="SET_SUGGESTION_STRING",en="CLEAR_QUERY_SUGGESTIONS",tn="RESULTS_LOADING",rn="RESULTS_FETCH_SUCCESS",an="RESULTS_FETCH_ERROR",vt="RESULTS_UPDATE_LAYOUT",nn="RESET_QUERY",Gy=e=>t=>{e&&t(M({shouldUpdateUrlQueryString:!1,shouldReplaceUrlQueryString:!0}))},sn=e=>t=>{t({type:_e,payload:e}),t(M())},ln=e=>t=>{t({type:Ka,payload:e}),t(M())},Vy=(e,t)=>r=>{r({type:Kt,payload:{sortBy:e,sortOrder:t}}),r(M())},Hy=e=>t=>{t({type:Yt,payload:e}),t(M())},Ky=e=>t=>{t({type:Wt,payload:e}),t(M())},Yy=e=>t=>{t({type:Ya,payload:e}),t(M())},Wy=e=>t=>{t({type:Wa,payload:e}),t(M())},Zt=e=>t=>{t({type:Za,payload:e}),t(M())},Zy=e=>async(t,r,a)=>{const n=a.urlHandlerApi;if(n){await t({type:vt,payload:e});const s=r().query;n.set(s)}else t({type:vt,payload:e})},Jy=()=>(e,t,r)=>{e({type:nn,payload:{queryString:"",page:1,filters:[],...r.initialQueryState}}),e(M())},Xy=(e,t,r,a)=>{const n=t.urlHandlerApi;n&&(r?n.replace(e):a&&n.set(e))},ev=(e,t,r,a)=>{const n=r().query;t({type:_e,payload:{...n,...e.newQueryState}});const s=ne(r().query),l=a.urlHandlerApi;return l&&l.replace(s),delete e.newStateQuery,e},tv=(e,t,r,a)=>{function n(o,c,d,f){o.queryString===""?(o.sortBy=d.defaultSortingOnEmptyQueryString.sortBy,o.sortOrder=d.defaultSortingOnEmptyQueryString.sortOrder):(o.sortBy=c.initialSortBy,o.sortOrder=c.initialSortOrder),f({type:_e,payload:o})}function s(o,c,d,f){c.hasUserChangedSorting||n(o,c,d,f)}!q(r.defaultSortingOnEmptyQueryString)&&s(e,t,r,a)},M=function(){let{shouldUpdateUrlQueryString:e=!0,shouldReplaceUrlQueryString:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return async(r,a,n)=>{const s=a().app;let l=ne(a().query);tv(l,s,n,r),l=ne(a().query),Xy(l,n,t,e),r({type:tn});try{let c=await n.searchApi.search(l);"newQueryState"in c&&(c=ev(ne(c),r,a,n)),r({type:rn,payload:{aggregations:c.aggregations,hits:c.hits,total:c.total}})}catch(o){if(o instanceof Ht){console.debug(o);return}else console.error(o),r({type:an,payload:{error:o}})}}},rv=e=>t=>{t({type:Xa,payload:e}),t(av())},av=()=>async(e,t,r)=>{const a=ne(t().query),n=r.suggestionApi;try{const s=await n.search(a);e({type:Ja,payload:{suggestions:s.suggestions}})}catch(s){console.error("Could not load suggestions due to: "+s)}},nv=()=>e=>{e({type:en,payload:{suggestions:[]}})},sv=()=>(e,t,r)=>{if(r.urlHandlerApi){const a=r.urlHandlerApi.get(r.initialQueryState);e({type:_e,payload:a}),e(M({shouldReplaceUrlQueryString:!0}))}},C=i.default.createContext({}),iv=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case Kt:return{...e,hasUserChangedSorting:!0};case Yt:return{...e,hasUserChangedSorting:!0};case Wt:return{...e,hasUserChangedSorting:!0};default:return e}},lv=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ka:return{...e,queryString:t.payload,page:1};case Kt:return{...e,sortBy:t.payload.sortBy,sortOrder:t.payload.sortOrder,_sortUserChanged:!0,page:1};case Yt:return{...e,sortBy:t.payload,_sortUserChanged:!0,page:1};case Wt:return{...e,sortOrder:t.payload,_sortUserChanged:!0,page:1};case Ya:return{...e,page:t.payload};case Wa:return{...e,size:t.payload,page:1};case Za:return{...e,page:1,filters:qa(t.payload,e.filters)};case Ja:return{...e,suggestions:t.payload.suggestions};case en:return{...e,suggestions:t.payload.suggestions};case Xa:return{...e,suggestionString:t.payload};case qy:return{...e,...t.payload};case _e:return{...e,...Ue,...Ga(Ue,t.payload,Va)};case vt:return{...e,layout:t.payload};case nn:return{...e,...t.payload};default:return e}},ov=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tn:return{...e,loading:!0,data:{...e.data}};case rn:return{loading:!1,data:{...e.data,aggregations:t.payload.aggregations,hits:t.payload.hits,total:t.payload.total},error:{}};case an:return{loading:!1,data:{...e.data,aggregations:{},hits:[],total:0},error:t.payload.error};default:return e}};var uv=ft.combineReducers({app:iv,query:lv,results:ov});function qr(e,t){let{sortBy:r,sortOrder:a}=e,{sortBy:n,sortOrder:s}=t;return r!==n||a!==s}function cv(e,t,r){const a=qr(r,t),n=!q(e.defaultSortingOnEmptyQueryString);let s=!1;return n&&(s=qr(r,e.defaultSortingOnEmptyQueryString)),a&&s}function dv(e){const t={...Ue,...e.initialQueryState},r=e.urlHandlerApi?e.urlHandlerApi.get(t):t,a=cv(e,t,r),n={...Ny,hasUserChangedSorting:a,initialSortBy:t.sortBy,initialSortOrder:t.sortOrder},s={...Uy,loading:e.searchOnInit};return{app:n,query:r,results:s}}function fv(e){const t=dv(e);return ft.createStore(uv,t,ft.applyMiddleware(si.default.withExtraArgument(e)))}function Gr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const a=t?`.${t}`:"";return`${r?`${r}.`:""}${e}${a}`}class Jt extends y.Component{constructor(t){super(t),this.updateQueryState=r=>{const{updateQueryState:a}=this.props;a(r)},this.onQueryChanged=r=>{let{detail:a}=r;const{appName:n}=this.context;if(!n)this.updateQueryState(a.searchQuery);else{const l=a.appName;l===n?this.updateQueryState(a.searchQuery):console.debug(`React-SearchKit '${n}': ignoring event sent for app '${l}'`)}},this.searchOnInit=t.searchOnInit,this.eventListenerEnabled=t.eventListenerEnabled,this.onAppInitialized=t.onAppInitialized,this.searchOnUrlQueryStringChanged=t.searchOnUrlQueryStringChanged}componentDidMount(){this.eventListenerEnabled&&window.addEventListener("queryChanged",this.onQueryChanged),window.onpopstate=()=>{this.searchOnUrlQueryStringChanged()},this.onAppInitialized(this.searchOnInit)}componentWillUnmount(){window.onpopstate=()=>{},window.removeEventListener("queryChanged",this.onQueryChanged)}render(){const{children:t}=this.props;return t}}Jt.defaultProps={searchOnInit:!0,eventListenerEnabled:!1};Jt.contextType=C;var pv=b.default.component("Bootstrap",Jt);const hv=e=>({onAppInitialized:t=>e(Gy(t)),updateQueryState:t=>e(sn(t)),searchOnUrlQueryStringChanged:()=>e(sv())}),gv=I.connect(null,hv)(pv);class Xt extends y.Component{constructor(t){super(t);const r={searchApi:t.searchApi,suggestionApi:t.suggestionApi,urlHandlerApi:t.urlHandlerApi.enabled?t.urlHandlerApi.customHandler||new jy(t.urlHandlerApi.overrideConfig):null,searchOnInit:t.searchOnInit,initialQueryState:t.initialQueryState,defaultSortingOnEmptyQueryString:t.defaultSortingOnEmptyQueryString};this.store=fv(r),this.appName=t.appName,this.eventListenerEnabled=t.eventListenerEnabled,this.componentIndex=0}render(){const{appName:t,children:r,eventListenerEnabled:a,overridableId:n,searchOnInit:s}=this.props,l={appName:t,buildUID:(c,d)=>Gr(c,d,t),nextComponentIndex:()=>`${this.appName}_${this.componentIndex++}`},o=Gr("ReactSearchKit.children",n,t);return i.default.createElement(C.Provider,{value:l},i.default.createElement(I.Provider,{store:this.store},i.default.createElement(gv,{searchOnInit:s,eventListenerEnabled:a},i.default.createElement(b.default,{id:o},r))))}}Xt.defaultProps={suggestionApi:null,urlHandlerApi:{enabled:!0,overrideConfig:{},customHandler:null},searchOnInit:!0,appName:"",eventListenerEnabled:!1,overridableId:"",initialQueryState:{},defaultSortingOnEmptyQueryString:{}};Xt.contextType=C;var mv=b.default.component("ReactSearchKit",Xt);class on extends y.Component{constructor(t){super(t),this._getLabel=r=>{const a=r[0];let n=r[1],s=[a,n];if(r.length===3){const{label:o,activeFilter:c}=this._getLabel(r[2]);n=`${n}.${o}`,s.push(c)}return{label:n,activeFilter:s}},this.updateQueryFilters=t.updateQueryFilters}render(){const{filters:t,overridableId:r}=this.props;return!!t.length&&i.default.createElement(un,{filters:t,removeActiveFilter:this.updateQueryFilters,getLabel:this._getLabel,overridableId:r})}}on.defaultProps={overridableId:""};const un=e=>{let{overridableId:t,filters:r,removeActiveFilter:a,getLabel:n}=e;const{buildUID:s}=y.useContext(C);return i.default.createElement(b.default,{id:s("ActiveFilters.element",t),filters:r,removeActiveFilter:a,getLabel:n},i.default.createElement(i.default.Fragment,null,r.map((l,o)=>{const{label:c,activeFilter:d}=n(l);return i.default.createElement(u.Label,{image:!0,key:o,onClick:()=>a(d)},c,i.default.createElement(u.Icon,{name:"delete"}))})))};un.defaultProps={overridableId:""};var yv=b.default.component("ActiveFilters",on);const vv=e=>({updateQueryFilters:t=>e(Zt(t))});I.connect(e=>({filters:e.query.filters}),vv)(yv);function Ev(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",r==="top"&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var bv=`.AutoCompleteText{position:relative;z-index:100}.AutoCompleteText .input button,.AutoCompleteText .input input{border:none;border-radius:0}.AutoCompleteText ul{background-color:#fff;border:1px solid #e0e1e2;border-radius:0 0 .3rem .3rem;color:#000;list-style-type:none;margin:0;padding:0;position:absolute;text-align:left;width:100%}.AutoCompleteText ul:before{content:""}.AutoCompleteText li{cursor:pointer;padding:.3em 1em}.AutoCompleteText li:hover{background-color:#e0e1e2;border-radius:.3rem;text-decoration:underline}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vaG9tZS9ydW5uZXIvd29yay9yZWFjdC1zZWFyY2hraXQvcmVhY3Qtc2VhcmNoa2l0L3NyYy9saWIvY29tcG9uZW50cy9BdXRvY29tcGxldGVTZWFyY2hCYXIvQXV0b2NvbXBsZXRlU2VhcmNoQmFyLnNjc3MiLCJBdXRvY29tcGxldGVTZWFyY2hCYXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxrQkFDRSxpQkFBQSxDQUNBLFdDQ0YsQ0RPQSwrREFDRSxXQUFBLENBQ0EsZUNDRixDREVBLHFCQU1FLHFCQUFBLENBR0Esd0JBQUEsQ0FDQSw2QkFBQSxDQUxBLFVBQUEsQ0FGQSxvQkFBQSxDQUlBLFFBQUEsQ0FDQSxTQUFBLENBTkEsaUJBQUEsQ0FFQSxlQUFBLENBSEEsVUNVRixDREVBLDRCQUNFLFVDQ0YsQ0RFQSxxQkFFRSxjQUFBLENBREEsZ0JDRUYsQ0RFQSwyQkFFRSx3QkFBQSxDQUNBLG1CQUFBLENBRkEseUJDR0YiLCJmaWxlIjoiQXV0b2NvbXBsZXRlU2VhcmNoQmFyLnNjc3MifQ== */`;Ev(bv);class cn extends y.Component{constructor(t){super(t),this._handleAutocompleteChange=r=>{r.length>=this.minCharsToAutocomplete&&this.updateSuggestions(r)},this.onInputChange=async r=>{await this.setState({currentValue:r}),this.handleAutocompleteChange(this.state.currentValue)},this.executeSearch=()=>{this.updateQueryString(this.state.currentValue)},this.updateQueryString=this.props.updateQueryString,this.updateSuggestions=this.props.debounce?ii.default.debounce(this.props.updateSuggestions,this.props.debounceTime,{leading:!0}):this.props.updateSuggestions,this.clearSuggestions=this.props.clearSuggestions,this.minCharsToAutocomplete=this.props.minCharsToAutocomplete,this.state={currentValue:this.props.queryString||""},this.handleAutocompleteChange=t.handleAutocompleteChange||this._handleAutocompleteChange}render(){const{placeholder:t,suggestions:r,overridableId:a}=this.props;return i.default.createElement($v,{placeholder:t,queryString:this.state.currentValue,querySuggestions:r,onInputChange:this.onInputChange,executeSearch:this.executeSearch,overridableId:a})}}cn.defaultProps={handleAutocompleteChange:null,placeholder:"Type something",minCharsToAutocomplete:3,overridableId:""};const Sv=e=>i.default.createElement(cn,Object.assign({key:e.queryString},e)),$v=e=>{let{overridableId:t,placeholder:r,queryString:a,querySuggestions:n,onInputChange:s,executeSearch:l,...o}=e;const{buildUID:c}=y.useContext(C),d=(p,h)=>{l()},f=(p,h)=>{p.key==="Enter"&&l()};return i.default.createElement(b.default,Object.assign({id:c("AutocompleteSearchBar.element",t)},o),i.default.createElement("div",{className:"AutoCompleteText"},i.default.createElement(u.Input,{action:{content:"Search",onClick:d},fluid:!0,placeholder:r,onChange:(p,h)=>{let{value:g}=h;s(g)},value:a,onKeyPress:f}),i.default.createElement(_v,{querySuggestions:n,overridableId:t})))},_v=e=>{let{overridableId:t,...r}=e;const{querySuggestions:a}=r,{buildUID:n}=y.useContext(C),s=async l=>{await(void 0).setState({currentValue:l}),(void 0).clearSuggestions(),(void 0).executeSearch()};return a.length===0?null:i.default.createElement(b.default,Object.assign({id:n("AutocompleteSearchBar.suggestions",t)},r),i.default.createElement("ul",null,a.map(l=>i.default.createElement(u.Button,{as:"li",onClick:()=>s(l),key:l},l))))};var Cv=b.default.component("AutocompleteSearchBar",Sv);const xv=e=>({updateQueryString:t=>e(ln(t)),updateSuggestions:t=>e(rv(t)),clearSuggestions:()=>e(nv())}),Tv=e=>({queryString:e.query.queryString,suggestions:e.query.suggestions});I.connect(Tv,xv)(Cv);class rt extends y.Component{constructor(t){super(t),this._isSelected=(r,a,n)=>n.filter(s=>s[0]===r&&s[1]===a).length>=1,this.getChildAggCmps=(r,a)=>{const n=this.childAgg&&this.childAgg.aggName in r;let s=[];if(n){const l=r[this.childAgg.aggName].buckets;a.forEach(c=>{const d=c[0]===this.aggName,f=c[1]===r.key,p=c.length===3;d&&f&&p&&s.push(c[2])});const o=c=>{this.onFilterClicked([this.aggName,r.key,c])};return i.default.createElement(rt,{buckets:l,selectedFilters:s,field:this.childAgg.field,aggName:this.childAgg.aggName,childAgg:this.childAgg.childAgg,onFilterClicked:o})}return null},this.field=t.field,this.aggName=t.aggName,this.childAgg=t.childAgg,this.onFilterClicked=t.onFilterClicked}render(){const{buckets:t,selectedFilters:r,overridableId:a}=this.props,n=t.map(s=>{const l=s.key_as_string?s.key_as_string:s.key,o=this._isSelected(this.aggName,l,r),c=f=>{this.onFilterClicked([this.aggName,f])},d=f=>this.getChildAggCmps(f,r);return i.default.createElement(fn,{key:s.key,bucket:s,keyField:l,isSelected:o,onFilterClicked:c,getChildAggCmps:d,overridableId:a})});return i.default.createElement(dn,{valuesCmp:n,overridableId:a})}}rt.defaultProps={childAgg:null,overridableId:""};const dn=e=>{let{valuesCmp:t,overridableId:r}=e;const{buildUID:a}=y.useContext(C);return i.default.createElement(b.default,{id:a("BucketAggregationContainer.element",r),valuesCmp:t},i.default.createElement(u.List,null,t))};dn.defaultProps={overridableId:""};const fn=e=>{let{bucket:t,isSelected:r,onFilterClicked:a,getChildAggCmps:n,overridableId:s,keyField:l}=e;const{buildUID:o,nextComponentIndex:c}=y.useContext(C),d=t.label?t.label:`${l} (${t.doc_count.toLocaleString("en-US")})`,f=n(t);return i.default.createElement(b.default,{id:o("BucketAggregationValues.element",s),bucket:t,label:d,onFilterClicked:a,isSelected:r,childAggCmps:f},i.default.createElement(u.List.Item,{key:t.key},i.default.createElement(u.Checkbox,{label:d,id:c(),value:t.key,onClick:()=>a(t.key),checked:r}),f))};fn.defaultProps={overridableId:""};var wv=b.default.component("BucketAggregationValues",rt);class pn extends y.Component{constructor(t){super(t),this.onFilterClicked=r=>{this.updateQueryFilters(r)},this._renderValues=(r,a)=>{const{overridableId:n}=this.props;return i.default.createElement(wv,{buckets:r,selectedFilters:a,field:this.agg.field,aggName:this.agg.aggName,childAgg:this.agg.childAgg,onFilterClicked:this.onFilterClicked,overridableId:n})},this._getSelectedFilters=r=>r.filter(a=>a[0]===this.agg.aggName),this._getResultBuckets=r=>{const a=he(r,this.agg.aggName,{});return"buckets"in a?(Array.isArray(a.buckets)||(a.buckets=Object.entries(a.buckets).map(n=>{let[s,l]=n;return{...l,key:s}})),a.buckets):[]},this.title=t.title,this.agg=t.agg,this.updateQueryFilters=t.updateQueryFilters}render(){const{userSelectionFilters:t,resultsAggregations:r,overridableId:a,...n}=this.props,s=this._getSelectedFilters(t),l=this._getResultBuckets(r),o=l.length?this._renderValues(l,s):null;return i.default.createElement(hn,Object.assign({title:this.title,containerCmp:o,overridableId:a},n))}}pn.defaultProps={overridableId:""};const hn=e=>{let{overridableId:t,agg:r,title:a,containerCmp:n,updateQueryFilters:s}=e;const{buildUID:l}=y.useContext(C);return n&&i.default.createElement(b.default,{id:l("BucketAggregation.element",t),agg:r,title:a,containerCmp:n,updateQueryFilters:s},i.default.createElement(u.Card,null,i.default.createElement(u.Card.Content,null,i.default.createElement(u.Card.Header,null,a)),i.default.createElement(u.Card.Content,null,n)))};hn.defaultProps={containerCmp:null,overridableId:""};var Fv=b.default.component("BucketAggregation",pn);const Iv=e=>({updateQueryFilters:t=>e(Zt(t))});I.connect(e=>({userSelectionFilters:e.query.filters,resultsAggregations:e.results.data.aggregations}),Iv)(Fv);class gn extends y.Component{render(){const{children:t,condition:r}=this.props;return r?t:null}}gn.defaultProps={condition:!0};var U=b.default.component("ShouldRender",gn);class mn extends y.Component{render(){const{loading:t,totalResults:r,label:a,overridableId:n}=this.props;return i.default.createElement(U,{condition:!t&&r>0},a(i.default.createElement(yn,{totalResults:r,overridableId:n})))}}mn.defaultProps={label:e=>e,overridableId:""};const yn=e=>{let{totalResults:t,overridableId:r}=e;const{buildUID:a}=y.useContext(C),n=a("Count.element",r);return i.default.createElement(b.default,{id:n,totalResults:t},i.default.createElement(u.Label,{color:"blue"},t.toLocaleString("en-US")))};yn.defaultProps={overridableId:""};var Av=b.default.component("Count",mn);const Ov=I.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total}))(Av);class vn extends y.Component{constructor(t){super(t),this.resetQuery=t.resetQuery}render(){const{loading:t,totalResults:r,error:a,queryString:n,extraContent:s,overridableId:l,userSelectionFilters:o,...c}=this.props;return i.default.createElement(U,{condition:!t&&q(a)&&r===0},i.default.createElement(En,Object.assign({},c,{queryString:n,resetQuery:this.resetQuery,extraContent:s,userSelectionFilters:o,overridableId:l})))}}vn.defaultProps={queryString:"",extraContent:null,overridableId:""};const En=e=>{let{overridableId:t,queryString:r,resetQuery:a,extraContent:n,userSelectionFilters:s}=e;const{buildUID:l}=y.useContext(C);return i.default.createElement(b.default,{id:l("EmptyResults.element",t),queryString:r,resetQuery:a,extraContent:n,userSelectionFilters:s},i.default.createElement(u.Segment,{placeholder:!0,textAlign:"center"},i.default.createElement(u.Header,{icon:!0},i.default.createElement(u.Icon,{name:"search"}),"No results found!"),r&&i.default.createElement("em",null,'Current search "',r,'"'),i.default.createElement("br",null),i.default.createElement(u.Button,{primary:!0,onClick:()=>a()},"Clear query"),n))};En.defaultProps={queryString:"",extraContent:null,overridableId:""};var Rv=b.default.component("EmptyResults",vn);const Pv=e=>({resetQuery:()=>e(Jy())}),kv=I.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,error:e.results.error,queryString:e.query.queryString,userSelectionFilters:e.query.filters}),Pv)(Rv);function bn(e){let{loading:t,error:r,overridableId:a}=e;return i.default.createElement(U,{condition:!t&&!q(r)},i.default.createElement(Sn,{error:r,overridableId:a}))}bn.defaultProps={overridableId:""};const Sn=e=>{let{error:t,overridableId:r}=e;const{buildUID:a}=y.useContext(C);return i.default.createElement(b.default,{id:a("Error.element",r),error:t},i.default.createElement("div",null,"Oops! Something went wrong while fetching results."))};Sn.defaultProps={overridableId:""};var Dv=b.default.component("Error",bn);I.connect(e=>({loading:e.results.loading,error:e.results.error}))(Dv);function $n(e){const t=n=>i.default.createElement(e,n),r=n=>({currentQueryState:n.query,currentResultsState:n.results}),a=n=>({updateQueryState:s=>n(sn(s))});return I.connect(r,a)(t)}class _n extends y.Component{constructor(t){super(t),this.onLayoutChange=r=>{this.updateLayout(r)},this.updateLayout=t.updateLayout}render(){const{currentLayout:t,loading:r,totalResults:a,overridableId:n}=this.props;return i.default.createElement(U,{condition:t!==null&&!r&&a>0},i.default.createElement(Cn,{currentLayout:t,onLayoutChange:this.onLayoutChange,overridableId:n}))}}_n.defaultProps={currentLayout:null,overridableId:""};const Cn=e=>{let{overridableId:t,currentLayout:r,onLayoutChange:a}=e;const{buildUID:n}=y.useContext(C);return i.default.createElement(b.default,{id:n("LayoutSwitcher.element",t),currentLayout:r,onLayoutChange:a},i.default.createElement(u.Menu,{compact:!0,icon:!0},i.default.createElement(u.Menu.Item,{name:"list",active:r==="list",onClick:(s,l)=>{let{name:o}=l;return a(o)}},i.default.createElement(u.Icon,{name:"list layout"})),i.default.createElement(u.Menu.Item,{name:"grid",active:r==="grid",onClick:(s,l)=>{let{name:o}=l;return a(o)}},i.default.createElement(u.Icon,{name:"grid layout"}))))};Cn.defaultProps={currentLayout:null,overridableId:""};var Lv=b.default.component("LayoutSwitcher",_n);const Uv=e=>({updateLayout:t=>e(Zy(t))});I.connect(e=>({loading:e.results.loading,currentLayout:e.query.layout,totalResults:e.results.data.total}),Uv)(Lv);const Vr={boundaryRangeCount:1,siblingRangeCount:1,showEllipsis:!0,showFirst:!0,showLast:!0,showPrev:!0,showNext:!0,size:"large"};class xn extends y.Component{constructor(t){super(t),this.onPageChange=r=>{const{currentPage:a}=this.props;r!==a&&this.updateQueryPage(r)},this.updateQueryPage=t.updateQueryPage,this.options=t.options?{...Vr,...t.options}:Vr}render(){const{loading:t,totalResults:r,currentPage:a,currentSize:n,overridableId:s,showWhenOnlyOnePage:l}=this.props;return i.default.createElement(U,{condition:!t&&a>-1&&n>-1&&l?r>0:r>n},i.default.createElement(Tn,{currentPage:a,currentSize:n,totalResults:r,onPageChange:this.onPageChange,options:this.options,overridableId:s,maxTotalResults:this.options.maxTotalResults}))}}xn.defaultProps={options:{},overridableId:"",showWhenOnlyOnePage:!0};const Tn=e=>{let{overridableId:t,currentPage:r,currentSize:a,totalResults:n,onPageChange:s,options:l,maxTotalResults:o,...c}=e;const d=l.boundaryRangeCount,f=l.siblingRangeCount,p=l.showEllipsis,h=l.showFirst,g=l.showLast,E=l.showPrev,m=l.showNext,S=l.size,v=Math.floor(o/a),$=Math.ceil(n/a),w=Math.min($,v),{buildUID:O}=y.useContext(C);return r>$&&s($),i.default.createElement(b.default,{id:O("Pagination.element",t),currentPage:r,currentSize:a,totalResults:n,options:l,onPageChange:s},i.default.createElement(u.Pagination,Object.assign({activePage:r,totalPages:w,onPageChange:(z,F)=>{let{activePage:Y}=F;return s(Y)},boundaryRange:d,siblingRange:f,ellipsisItem:p?void 0:null,firstItem:h?void 0:null,lastItem:g?void 0:null,prevItem:E?void 0:null,nextItem:m?void 0:null,size:S},c)))};Tn.defaultProps={options:{},overridableId:"",maxTotalResults:1e4};var Nv=b.default.component("Pagination",xn);const Bv=e=>({updateQueryPage:t=>e(Yy(t))}),Mv=I.connect(e=>({currentPage:e.query.page,currentSize:e.query.size,loading:e.results.loading,totalResults:e.results.data.total}),Bv)(Nv);function wn(e){let{loading:t,totalResults:r,results:a,resultsPerRow:n,overridableId:s,onResultsRendered:l}=e;return y.useEffect(()=>{l&&l()},[l]),i.default.createElement(U,{condition:!t&&r>0},i.default.createElement(Fn,{results:a,resultsPerRow:n,overridableId:s}))}wn.defaultProps={resultsPerRow:3,overridableId:"",onResultsRendered:()=>{}};const zv=e=>{let{result:t,overridableId:r}=e;const{buildUID:a}=y.useContext(C);return i.default.createElement(b.default,{id:a("ResultsGrid.item",r),result:t},i.default.createElement(u.Card,{fluid:!0,href:`#${t.id}`},i.default.createElement(u.Image,{src:t.imgSrc||"http://placehold.it/200"}),i.default.createElement(u.Card.Content,null,i.default.createElement(u.Card.Header,null,t.title),i.default.createElement(u.Card.Description,null,t.description))))},Fn=e=>{let{overridableId:t,results:r,resultsPerRow:a}=e;const{buildUID:n}=y.useContext(C),s=r.map((l,o)=>i.default.createElement(zv,{key:o,result:l,overridableId:t}));return i.default.createElement(b.default,{id:n("ResultsGrid.container",t),results:s,resultsPerRow:a},i.default.createElement(u.Card.Group,{itemsPerRow:a},s))};Fn.defaultProps={resultsPerRow:3,overridableId:""};var Qv=b.default.component("ResultsGrid",wn);const jv=I.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,results:e.results.data.hits}))(Qv);function In(e){let{loading:t,totalResults:r,results:a,overridableId:n,onResultsRendered:s}=e;return y.useEffect(()=>{s&&s()},[s]),i.default.createElement(U,{condition:!t&&r>0},i.default.createElement(An,{results:a,overridableId:n}))}In.defaultProps={overridableId:"",onResultsRendered:()=>{}};const qv=e=>{let{result:t,overridableId:r}=e;const{buildUID:a}=y.useContext(C);return i.default.createElement(b.default,{id:a("ResultsList.item",r),result:t},i.default.createElement(u.Item,{href:`#${t.id}`},i.default.createElement(u.Item.Image,{size:"small",src:t.imgSrc||"http://placehold.it/200"}),i.default.createElement(u.Item.Content,null,i.default.createElement(u.Item.Header,null,t.title),i.default.createElement(u.Item.Description,null,t.description))))},An=e=>{let{results:t,overridableId:r}=e;const{buildUID:a}=y.useContext(C),n=t.map((s,l)=>i.default.createElement(qv,{result:s,key:l,overridableId:r}));return i.default.createElement(b.default,{id:a("ResultsList.container",r),results:n},i.default.createElement(u.Item.Group,{divided:!0,relaxed:!0,link:!0},n))};An.defaultProps={overridableId:""};var Gv=b.default.component("ResultsList",In);const On=I.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,results:e.results.data.hits}))(Gv);function Rn(e){let{children:t,loading:r,overridableId:a}=e;return r?i.default.createElement(Pn,{overridableId:a}):t}Rn.defaultProps={overridableId:""};const Pn=e=>{let{overridableId:t}=e;const{buildUID:r}=y.useContext(C);return i.default.createElement(b.default,{id:r("ResultsLoader.element",t)},i.default.createElement(u.Loader,{active:!0,size:"huge",inline:"centered"}))};Pn.defaultProps={overridableId:""};var Vv=b.default.component("ResultsLoader",Rn);const Hv=I.connect(e=>({loading:e.results.loading}))(Vv);function kn(e){let{loading:t,totalResults:r,currentLayout:a,overridableId:n,onResultsRendered:s}=e;return i.default.createElement(U,{condition:a!=null&&!t&&r>0},i.default.createElement(Dn,{layout:a,overridableId:n,onResultsRendered:s}))}kn.defaultProps={currentLayout:null,overridableId:"",onResultsRendered:()=>{}};const Dn=e=>{let{layout:t,overridableId:r,onResultsRendered:a}=e;const{buildUID:n}=y.useContext(C);return i.default.createElement(b.default,{id:n("ResultsMultiLayout.element",r),layout:t,onResultsRendered:a},t==="list"?i.default.createElement(On,{overridableId:r,onResultsRendered:a}):i.default.createElement(jv,{overridableId:r,onResultsRendered:a}))};Dn.defaultProps={layout:"",overridableId:"",onResultsRendered:()=>{}};var Kv=b.default.component("ResultsMultiLayout",kn);I.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentLayout:e.query.layout}))(Kv);class Ln extends y.Component{constructor(t){super(t),this.onChange=r=>{const{currentSize:a}=this.props;r!==a&&this.updateQuerySize(r)},this.options=t.values,this.updateQuerySize=t.updateQuerySize}render(){const{loading:t,currentSize:r,totalResults:a,label:n,overridableId:s,ariaLabel:l,selectOnNavigation:o,showWhenOnlyOnePage:c}=this.props;return i.default.createElement(U,{condition:!t&&r!==-1&&c?a>0:a>r},n(i.default.createElement(Un,{currentSize:r,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:l,selectOnNavigation:o})))}}Ln.defaultProps={label:e=>e,overridableId:"",ariaLabel:"Results per page",selectOnNavigation:!1,showWhenOnlyOnePage:!0};const Un=e=>{let{overridableId:t,currentSize:r,options:a,onValueChange:n,ariaLabel:s,selectOnNavigation:l}=e;const{buildUID:o}=y.useContext(C),c=a.map((d,f)=>({key:f,text:d.text,value:d.value}));return i.default.createElement(b.default,{id:o("ResultsPerPage.element",t),currentSize:r,options:a,onValueChange:n,ariaLabel:s,selectOnNavigation:l},i.default.createElement(u.Dropdown,{inline:!0,compact:!0,options:c,value:r,onChange:(d,f)=>{let{value:p}=f;return n(p)},"aria-label":s,selectOnNavigation:l}))};Un.defaultProps={ariaLabel:"Results per page",selectOnNavigation:!1,overridableId:""};var Yv=b.default.component("ResultsPerPage",Ln);const Wv=e=>({updateQuerySize:t=>e(Wy(t))}),Zv=I.connect(e=>({loading:e.results.loading,currentSize:e.query.size,totalResults:e.results.data.total}),Wv)(Yv);class Nn extends y.Component{constructor(t){super(t),this.onInputChange=r=>{this.setState({currentValue:r})},this.executeSearch=()=>{const{currentValue:r}=this.state;this.updateQueryString(r)},this.onBtnSearchClick=()=>{this.executeSearch()},this.onKeyPress=r=>{r.key==="Enter"&&this.executeSearch()},this.updateQueryString=t.updateQueryString,this.state={currentValue:t.queryString||""}}render(){const{actionProps:t,autofocus:r,executeSearch:a,onBtnSearchClick:n,onInputChange:s,onKeyPress:l,overridableId:o,placeholder:c,uiProps:d}=this.props,{currentValue:f}=this.state;return i.default.createElement(er,{actionProps:t,autofocus:r,executeSearch:a||this.executeSearch,onBtnSearchClick:n||this.onBtnSearchClick,onInputChange:s||this.onInputChange,onKeyPress:l||this.onKeyPress,overridableId:o,placeholder:c,queryString:f,uiProps:d})}}Nn.defaultProps={actionProps:null,autofocus:!1,executeSearch:null,onBtnSearchClick:null,onInputChange:null,onKeyPress:null,overridableId:"",placeholder:"",queryString:"",uiProps:null};const Bn=e=>{const{queryString:t}=e;return i.default.createElement(Nn,Object.assign({key:t},e))};Bn.defaultProps={queryString:""};class er extends y.Component{componentDidMount(){const{autofocus:t}=this.props;t&&this.focusInput&&this.focusInput.focus()}render(){const{actionProps:t,onBtnSearchClick:r,onInputChange:a,onKeyPress:n,overridableId:s,placeholder:l,queryString:o,uiProps:c}=this.props,{buildUID:d}=this.context;return i.default.createElement(b.default,{id:d("SearchBar.element",s),queryString:o,onBtnSearchClick:r,onInputChange:a,onKeyPress:n,placeholder:l,actionProps:t,uiProps:c},i.default.createElement(u.Input,Object.assign({action:{content:"Search",onClick:r,...t},fluid:!0},c,{placeholder:l||"Type something",onChange:(f,p)=>{let{value:h}=p;a(h)},value:o,onKeyPress:n,ref:f=>{this.focusInput=f}})))}}er.defaultProps={actionProps:null,autofocus:!1,onBtnSearchClick:null,onInputChange:null,onKeyPress:null,overridableId:"",placeholder:"",queryString:"",uiProps:null};er.contextType=C;var Jv=b.default.component("SearchBar",Bn);const Xv=e=>({updateQueryString:t=>e(ln(t))}),eE=I.connect(e=>({queryString:e.query.queryString}),Xv)(Jv);class Mn extends y.Component{constructor(t){super(t),this._computeValue=(r,a)=>a?`${r}-${a}`:r,this.onChange=r=>{const{currentSortBy:a,currentSortOrder:n}=this.props;if(r===this._computeValue(a,n))return;const s=this.options.find(l=>l.value===r);this.updateQuerySorting(s.sortBy,s.sortOrder)},this.options=t.values,this.updateQuerySorting=t.updateQuerySorting,this.options.forEach(r=>r.value=this._computeValue(r.sortBy,r.sortOrder))}render(){const{currentSortBy:t,currentSortOrder:r,loading:a,totalResults:n,label:s,overridableId:l,sortOrderDisabled:o,ariaLabel:c,selectOnNavigation:d}=this.props;return i.default.createElement(U,{condition:t!==null&&(o||t!==null)&&!a&&n>0},s(i.default.createElement(zn,{currentSortBy:t,currentSortOrder:r,options:this.options,onValueChange:this.onChange,computeValue:this._computeValue,overridableId:l,ariaLabel:c,selectOnNavigation:d})))}}Mn.defaultProps={currentSortBy:null,currentSortOrder:null,label:e=>e,overridableId:"",sortOrderDisabled:!1,ariaLabel:"Sort",selectOnNavigation:!1};const zn=e=>{let{overridableId:t,currentSortBy:r,currentSortOrder:a,options:n,onValueChange:s,computeValue:l,ariaLabel:o,selectOnNavigation:c}=e;const{buildUID:d}=y.useContext(C),f=l(r,a),p=n.map((h,g)=>({key:g,text:h.text,value:h.value}));return i.default.createElement(b.default,{id:d("Sort.element",t),options:n,currentSortBy:r,currentSortOrder:a,onValueChange:s,ariaLabel:o,selectOnNavigation:c},i.default.createElement(u.Dropdown,{selection:!0,options:p,value:f,onChange:(h,g)=>{let{value:E}=g;return s(E)},"aria-label":o,selectOnNavigation:c}))};zn.defaultProps={currentSortBy:null,currentSortOrder:null,overridableId:"",ariaLabel:"Sort",selectOnNavigation:!1};var tE=b.default.component("Sort",Mn);const rE=e=>({updateQuerySorting:(t,r)=>e(Vy(t,r))});I.connect(e=>({currentSortBy:e.query.sortBy,currentSortOrder:e.query.sortOrder,loading:e.results.loading,totalResults:e.results.data.total}),rE)(tE);class Qn extends y.Component{constructor(t){super(t),this.onChange=r=>{const{currentSortBy:a}=this.props;r!==a&&this.updateQuerySortBy(r)},this.options=t.values,this.updateQuerySortBy=t.updateQuerySortBy}render(){const{currentSortBy:t,loading:r,totalResults:a,label:n,overridableId:s,ariaLabel:l,selectOnNavigation:o}=this.props;return i.default.createElement(U,{condition:t!==null&&!r&&a>0},n(i.default.createElement(jn,{currentSortBy:t,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:l,selectOnNavigation:o})))}}Qn.defaultProps={currentSortBy:null,label:e=>e,overridableId:"",ariaLabel:"Sort Results By",selectOnNavigation:!1};const jn=e=>{let{overridableId:t,currentSortBy:r,options:a,onValueChange:n,ariaLabel:s,selectOnNavigation:l}=e;const{buildUID:o}=y.useContext(C),c=a.map((d,f)=>({key:f,text:d.text,value:d.value}));return i.default.createElement(b.default,{id:o("SortBy.element",t),options:a,currentSortBy:r,onValueChange:n,ariaLabel:s,selectOnNavigation:l},i.default.createElement(u.Dropdown,{selection:!0,compact:!0,options:c,value:r,onChange:(d,f)=>{let{value:p}=f;return n(p)},"aria-label":s,selectOnNavigation:l}))};jn.defaultProps={currentSortBy:null,overridableId:"",ariaLabel:"Sort Results By",selectOnNavigation:!1};var aE=b.default.component("SortBy",Qn);const nE=e=>({updateQuerySortBy:t=>e(Hy(t))});I.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentSortBy:e.query.sortBy}),nE)(aE);class qn extends y.Component{constructor(t){super(t),this.onChange=r=>{const{currentSortOrder:a}=this.props;r!==a&&this.updateQuerySortOrder(r)},this.options=t.values,this.updateQuerySortOrder=t.updateQuerySortOrder}render(){const{currentSortOrder:t,loading:r,totalResults:a,label:n,overridableId:s,ariaLabel:l,selectOnNavigation:o}=this.props;return i.default.createElement(U,{condition:t!==null&&!r&&a>0},n(i.default.createElement(Gn,{currentSortOrder:t,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:l,selectOnNavigation:o})))}}qn.defaultProps={currentSortOrder:null,label:e=>e,overridableId:"",ariaLabel:"Sort Order",selectOnNavigation:!1};const Gn=e=>{let{overridableId:t,currentSortOrder:r,options:a,onValueChange:n,ariaLabel:s,selectOnNavigation:l}=e;const{buildUID:o}=y.useContext(C),c=a.map((d,f)=>({key:f,text:d.text,value:d.value}));return i.default.createElement(b.default,{id:o("SortOrder.element",t),options:a,currentSortOrder:r,onValueChange:n,ariaLabel:s,selectOnNavigation:l},i.default.createElement(u.Dropdown,{selection:!0,compact:!0,options:c,value:r,onChange:(d,f)=>{let{value:p}=f;return n(p)},"aria-label":s,selectOnNavigation:l}))};Gn.defaultProps={currentSortOrder:null,overridableId:"",ariaLabel:"Sort Order",selectOnNavigation:!1};var sE=b.default.component("SortOrder",qn);const iE=e=>({updateQuerySortOrder:t=>e(Ky(t))});I.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentSortOrder:e.query.sortOrder}),iE)(sE);const Vn=e=>{let{overridableId:t,userSelectionFilters:r,title:a,label:n,filterValue:s,updateQueryFilters:l}=e;const o=p=>p.filter(g=>g[0]===s[0]).length>0,c=()=>{l(s)},{buildUID:d}=y.useContext(C),f=o(r);return i.default.createElement(b.default,{id:d("SearchFilters.Toggle.element",t),title:a,label:n,filterValue:s,userSelectionFilters:r,updateQueryFilters:l},i.default.createElement(u.Card,null,i.default.createElement(u.Card.Content,null,i.default.createElement(u.Card.Header,null,a)),i.default.createElement(u.Card.Content,null,i.default.createElement(u.Checkbox,{toggle:!0,label:n,onClick:c,checked:f}))))};Vn.defaultProps={overridableId:""};var lE=b.default.component("SearchFilters.Toggle",Vn);const oE=e=>({updateQueryFilters:t=>e(Zt(t))});I.connect(e=>({userSelectionFilters:e.query.filters}),oE)(lE);const Hn=i.default.createContext(null),uE=({config:e,children:t,updateQueryState:r,currentQueryState:a})=>{const n=y.useCallback(()=>{r({...a,queryString:a.queryString})},[r,a]);return i.default.createElement(Hn.Provider,{value:{config:e,refreshSearch:n}},t)},cE=$n(uE),at=()=>{const e=i.default.useContext(Hn);if(!e)throw new Error("useSearchConfig must be used within a SearchProvider");return e},Kn=({progress:e})=>i.default.createElement(y.Fragment,null,Object.entries(e).map(([t,r])=>i.default.createElement(u.Segment.Inline,{basic:!0,key:t},i.default.createElement(u.Icon,{name:"spinner",loading:!0,style:{marginInlineEnd:"0.5rem"}}),i.default.createElement("strong",null,t,":")," ",r,"%"))),Yn=()=>i.default.createElement(u.Segment,{basic:!0,padded:"very"},i.default.createElement(u.Dimmer,{active:!0,inverted:!0},i.default.createElement(u.Loader,{inverted:!0},"Loading"))),dE=({status:e,...t})=>e==="damaged"||e==="imported with failures"||e==="validated with failures"||e==="serializer validation failed"||e==="validation failed"||e==="import failed"?i.default.createElement(u.Icon,{name:"close",color:"red",...t}):e==="success"||e==="created"?i.default.createElement(u.Icon,{name:"check circle",color:"green",...t}):e==="importing"||e==="validating"?i.default.createElement(u.Icon,{name:"spinner",loading:!0,...t}):e==="validated"?i.default.createElement(u.Icon,{name:"check circle",color:"blue",...t}):i.default.createElement(u.Icon,{...t}),Wn=({status:e,children:t,...r})=>e==="damaged"||e==="imported with failures"||e==="validated with failures"||e==="serializer validation failed"||e==="validation failed"||e==="import failed"?i.default.createElement(u.Label,{color:"red",...r},i.default.createElement(u.Icon,{name:"warning sign"}),t):e==="success"||e==="validated"||e==="created"?i.default.createElement(u.Label,{color:"green",...r},i.default.createElement(u.Icon,{name:"check circle"}),t):e==="importing"||e==="validating"?i.default.createElement(u.Label,{color:"blue",...r},i.default.createElement(u.Icon,{name:"spinner",loading:!0}),t):i.default.createElement(u.Label,{...r},t),me=e=>(e==null?void 0:e.charAt(0).toUpperCase())+(e==null?void 0:e.slice(1))||"",tr=e=>e.reduce((t,r)=>t+r.file.size,0),rr=e=>nt(tr(e)),nt=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return`${Number.parseFloat((e/t**a).toFixed(2))} ${r[a]}`},Ne=e=>new Date(e).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});var Zn={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(e,t){(function(r){var a;if(e.exports=r(),a=!0,!a){var n=window.Cookies,s=window.Cookies=r();s.noConflict=function(){return window.Cookies=n,s}}})(function(){function r(){for(var s=0,l={};s<arguments.length;s++){var o=arguments[s];for(var c in o)l[c]=o[c]}return l}function a(s){return s.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(s){function l(){}function o(d,f,p){if(!(typeof document>"u")){p=r({path:"/"},l.defaults,p),typeof p.expires=="number"&&(p.expires=new Date(new Date*1+p.expires*864e5)),p.expires=p.expires?p.expires.toUTCString():"";try{var h=JSON.stringify(f);/^[\{\[]/.test(h)&&(f=h)}catch{}f=s.write?s.write(f,d):encodeURIComponent(String(f)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),d=encodeURIComponent(String(d)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var g="";for(var E in p)p[E]&&(g+="; "+E,p[E]!==!0&&(g+="="+p[E].split(";")[0]));return document.cookie=d+"="+f+g}}function c(d,f){if(!(typeof document>"u")){for(var p={},h=document.cookie?document.cookie.split("; "):[],g=0;g<h.length;g++){var E=h[g].split("="),m=E.slice(1).join("=");!f&&m.charAt(0)==='"'&&(m=m.slice(1,-1));try{var S=a(E[0]);if(m=(s.read||s)(m,S)||a(m),f)try{m=JSON.parse(m)}catch{}if(p[S]=m,d===S)break}catch{}}return d?p[d]:p}}return l.set=o,l.get=function(d){return c(d,!1)},l.getJSON=function(d){return c(d,!0)},l.remove=function(d,f){o(d,"",r(f,{expires:-1}))},l.defaults={},l.withConverter=n,l}return n(function(){})})})(Zn);var fE=Zn.exports;const pE=A(fE),Jn=()=>pE.get("csrftoken")||null,Xn=e=>{switch(e){case"success":return"green";case"validation failed":case"serializer validation failed":case"import failed":case"imported with failures":case"validated with failures":case"damaged":return"red";case"validated":case"created":return"blue";case"importing":case"validating":return"yellow";default:return"grey"}},hE=e=>new Ha(e),gE=(e,t={},r=!0)=>({axios:{url:e,headers:{Accept:"application/vnd.inveniordm.v1+json",...t},withCredentials:r}}),D=Ae.default.create({baseURL:"",timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});D.interceptors.request.use(e=>{const t=Jn();return t&&(e.headers["X-CSRFTOKEN"]=t),e},e=>Promise.reject(e));const es=async(e,t)=>{try{const r=await D.put(`/api/importer-tasks/${e}/metadata`,t,{headers:{"content-type":"application/octet-stream","X-Filename":`${t.name}`}});if(r.status===200)return r.data;throw new Error(`Failed to create task: ${r.statusText}`)}catch(r){throw new Error(`Error creating task: ${r instanceof Error?r.message:"Unknown error"}`)}},mE=async(e,t)=>{try{const r=await D.post(`/api/importer-tasks/${e}/files/${t}/commit`,{});if(r.status!==200)throw new Error(`Failed to commit file: ${r.statusText}`)}catch(r){throw console.error("Error committing file:",r),new Error(`Failed to commit file: ${r instanceof Error?r.message:"Unknown error"}`)}},yE=async e=>{const t={title:e.title,description:e.description,mode:e.mode,status:e.status,record_type:e.recordType,serializer:e.serializer,start_time:e.startTime,end_time:e.endTime};try{const r=await D.post("/api/importer-tasks",t);if(r.status===201)return r.data;throw new Error(`Failed to create task: ${r.statusText}`)}catch(r){throw new Error(`Error creating task: ${r instanceof Error?r.message:"Unknown error"}`)}},vE=async e=>{try{const t=await D.delete(`/api/importer-tasks/${e}`);return t.status===204?!0:(console.error(`Failed to delete task: ${t.statusText}`),!1)}catch(t){return console.error(`Error deleting task: ${t instanceof Error?t.message:"Unknown error"}`),!1}},ts=async e=>{try{const t=await D.post(`/api/importer-tasks/${e}/load`);if(t.status===200)return t.data;throw new Error(`Unexpected response status: ${t.status}`)}catch(t){throw console.error("Error executing bulk import:",t),new Error("Failed to execute bulk import")}},EE=async()=>{try{const e=await D.get("/api/importer-tasks/config");return e.status===200?e.data:(console.error("Failed to fetch record types:",e.statusText),[])}catch(e){return console.error("Error fetching record types:",e),[]}},bE=async e=>{try{const t=await D.get(`/api/importer-tasks/config/${e}`);if(t.status===200)return t.data;throw new Error(`Unexpected response status: ${t.status}`)}catch(t){throw console.error("Error fetching serializers:",t),new Error("Failed to fetch serializers")}},Et=async e=>{try{const t=await D.put(`/api/importer-tasks/${e}/status`,{});if(t.status===200)return t.data;throw new Error(`Failed to get status of importer task: ${t.statusText}`)}catch(t){throw new Error(`Error getting status of importer task: ${t instanceof Error?t.message:"Unknown error"}`)}},SE=async(e,t)=>{const r=t.map(a=>({key:a}));try{const a=await D.post(`/api/importer-tasks/${e}/files`,r);if(a.status!==201)throw new Error(`Failed to initialize files: ${a.statusText}`)}catch(a){throw console.error("Error initializing files:",a),new Error(`Failed to initialize files: ${a instanceof Error?a.message:"Unknown error"}`)}},$E=async(e,t,r)=>{try{const a=await D.put(`/api/importer-tasks/${e}/files/${t}/content`,r,{headers:{"Content-Type":"application/octet-stream"}});if(a.status!==200)throw new Error(`Failed to upload file content: ${a.statusText}`)}catch(a){throw console.error("Error uploading file content:",a),new Error(`Failed to upload file content: ${a instanceof Error?a.message:"Unknown error"}`)}},rs=async e=>{try{const t=await D.post(`/api/importer-tasks/${e}/validate`,{});if(t.status===200)return t.data;throw new Error(`Failed to validate task: ${t.statusText}`)}catch(t){throw new Error(`Error validating task: ${t instanceof Error?t.message:"Unknown error"}`)}},as=async(e,t={})=>{const{autoExecute:r=!1,onProgress:a,onError:n}=t;try{a==null||a("Validating",0),await rs(e),a==null||a("Validating",50);let s=await Et(e);return a==null||a("Validating",100),r&&(s.status==="validated"||s.status==="validated with failures")&&(a==null||a("Executing",0),await ts(e),a==null||a("Executing",50),s=await Et(e),a==null||a("Executing",100)),s}catch(s){const l=s instanceof Error?s:new Error("Unknown error during workflow execution");throw n==null||n(l,"Executing"),l}},ns=async(e,t,r)=>{if(!t||t.length===0)return;const a=t.map(n=>n.name);await SE(e,a);for(const n of t)try{r==null||r({fileName:n.name,loaded:0,total:n.size,percentage:0}),await $E(e,n.name,n),r==null||r({fileName:n.name,loaded:n.size,total:n.size,percentage:90}),await mE(e,n.name),r==null||r({fileName:n.name,loaded:n.size,total:n.size,percentage:100})}catch(s){throw new Error(`Failed to upload file ${n.name}: ${s instanceof Error?s.message:"Unknown error"}`)}},_E=async(e,t,r,a={})=>{const{autoValidate:n=!1,autoExecute:s=!1,onProgress:l,onError:o}=a;try{l==null||l("Creating Task",0);const c=await yE(e);if(!c)throw new Error("Failed to create import task");return l==null||l("Creating Task",100),t&&(l==null||l("Uploading Metadata",0),await es(c.id,t),l==null||l("Uploading Metadata",100)),r&&r.length>0&&await ns(c.id,r,d=>{l==null||l("Uploading Files",d.percentage)}),n&&t&&await as(c.id,{autoExecute:s,onProgress:l,onError:o}),c}catch(c){const d=c instanceof Error?c:new Error("Unknown error during task creation");throw o==null||o(d,"Creating Task"),d}},CE=async(e,t,r,a={})=>{const{onProgress:n,onError:s}=a;try{n==null||n("Updating",0),t&&(n==null||n("Updating Metadata",0),await es(e,t),n==null||n("Updating Metadata",100)),r&&r.length>0&&await ns(e,r,l=>{n==null||n("Updating Files",l.percentage)}),n==null||n("Updating",100)}catch(l){const o=l instanceof Error?l:new Error("Unknown error during task update");throw s==null||s(o,"Updating"),o}},xE=async e=>{try{const t=await D.post(`/api/importer-records/${e}/run`,{});if(t.status===200)return t.data;throw new Error(`Failed to fetch import records: ${t.statusText}`)}catch(t){throw console.error("Failed to fetch import records:",t),t}},ss=(e,t={})=>{const[r,a]=y.useState({isDeleting:!1,isValidating:!1,isBulkImporting:!1,isGettingStatus:!1,error:null}),{onDeleteSuccess:n,onDeleteError:s,onValidateSuccess:l,onValidateError:o,onBulkImportSuccess:c,onBulkImportError:d,onStatusChangeSuccess:f,onStatusChangeError:p}=t,h=y.useCallback(()=>{a(v=>({...v,error:null}))},[]),g=y.useCallback(async()=>{a(v=>({...v,isDeleting:!0,error:null}));try{if(!await vE(e))throw new Error(`Failed to delete task ${e}`);n==null||n()}catch(v){const $=v instanceof Error?v:new Error("Unknown error");throw a(w=>({...w,error:$})),s==null||s($),$}finally{a(v=>({...v,isDeleting:!1}))}},[e,n,s]),E=y.useCallback(async()=>{a(v=>({...v,isValidating:!0,error:null}));try{const v=await rs(e);if(!v)throw new Error(`Validation failed for task ${e}`);return l==null||l(v),v}catch(v){const $=v instanceof Error?v:new Error("Unknown error");throw a(w=>({...w,error:$})),o==null||o($),$}finally{a(v=>({...v,isValidating:!1}))}},[e,l,o]),m=y.useCallback(async()=>{a(v=>({...v,isBulkImporting:!0,error:null}));try{const v=await ts(e);if(!v)throw new Error(`Failed to execute bulk import for task ${e}`);return c==null||c(v),v}catch(v){const $=v instanceof Error?v:new Error("Unknown error");throw a(w=>({...w,error:$})),d==null||d($),$}finally{a(v=>({...v,isBulkImporting:!1}))}},[e,c,d]),S=y.useCallback(async()=>{a(v=>({...v,isGettingStatus:!0,error:null}));try{const v=await Et(e);if(!v)throw new Error(`Failed to retrieve status for task ${e}`);return f==null||f(v),v}catch(v){const $=v instanceof Error?v:new Error("Unknown error");throw a(w=>({...w,error:$})),p==null||p($),$}finally{a(v=>({...v,isGettingStatus:!1}))}},[e,f,p]);return{isDeleting:r.isDeleting,isValidating:r.isValidating,isBulkImporting:r.isBulkImporting,isGettingStatus:r.isGettingStatus,error:r.error,deleteTask:g,validateTask:E,runBulkImport:m,getStatus:S,clearError:h}},TE=({result:e,index:t})=>{var S;const{refreshSearch:r,config:a}=at(),{deleteTask:n,validateTask:s,runBulkImport:l,getStatus:o,isDeleting:c,isValidating:d,isBulkImporting:f,isGettingStatus:p,error:h,clearError:g}=ss(e.id,{onDeleteSuccess:()=>{r()},onValidateSuccess:()=>{r()},onBulkImportSuccess:()=>{r()},onStatusChangeSuccess:()=>{r()}});if(!e)return null;const E=(v,$)=>$?`${v}...`:v,m=c||d||f||p;return i.default.createElement(u.TableRow,{key:t},i.default.createElement(u.TableCell,null,i.default.createElement("a",{href:`${a.resultPath}/${e.id}`},e.title||"No title")),i.default.createElement(u.TableCell,null,Ne(e.created)),i.default.createElement(u.TableCell,null,i.default.createElement(Wn,{status:e.status},me(e.status))),i.default.createElement(u.TableCell,null,((S=e.records_status)==null?void 0:S.total_records)??0),i.default.createElement(u.TableCell,null,e.serializer),i.default.createElement(u.TableCell,null,me(e.mode)),i.default.createElement(u.TableCell,{style:{width:"220px"}},h&&i.default.createElement("div",{style:{color:"red",fontSize:"12px",marginBottom:"5px"}},h.message,i.default.createElement(u.Button,{onClick:g,style:{marginLeft:"5px",fontSize:"10px"}},"Clear")),i.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},i.default.createElement(u.Dropdown,{text:m?"Processing...":"Select Action",floating:!0,labeled:!0,className:"icon",disabled:m,options:[{key:"download",text:"Download",value:"download",disabled:!0},{key:"validate",text:E("Re-validate",d),value:"validate",disabled:m,onClick:()=>s()},{key:"load",text:E("Load Bulk Import",f),value:"load",disabled:m,onClick:()=>l()},{key:"status",text:E("Get Status",p),value:"status",disabled:m,onClick:()=>o()},{key:"delete",text:E("Delete",c),value:"delete",disabled:m,onClick:()=>n()}]}),i.default.createElement(u.Button,{basic:!0,size:"tiny",disabled:m,as:"a",href:`${a.resultPath}/${e.id}`},i.default.createElement(u.Icon,{name:"eye"}),"View"))))},wE=({children:e})=>i.default.createElement(u.Table,{padded:!0,size:"small",comp:!0},i.default.createElement(u.TableHeader,null,i.default.createElement(u.TableRow,null,i.default.createElement(u.TableHeaderCell,null,"ID"),i.default.createElement(u.TableHeaderCell,null,"Date Created"),i.default.createElement(u.TableHeaderCell,null,"Status"),i.default.createElement(u.TableHeaderCell,null,"Records"),i.default.createElement(u.TableHeaderCell,null,"Serializer"),i.default.createElement(u.TableHeaderCell,null,"Mode"),i.default.createElement(u.TableHeaderCell,null,"Actions"))),i.default.createElement(u.TableBody,null,e)),G={aggs:[],appId:"search",defaultSortingOnEmptyQueryString:[{sortBy:"newest"}],initialQueryState:{filters:[],hiddenParams:null,layout:"list",page:1,size:10,sortBy:"newest"},layoutOptions:{gridView:!1,listView:!0},paginationOptions:{defaultValue:10,maxTotalResults:1e4,resultsPerPage:[{text:"10",value:10},{text:"20",value:20},{text:"50",value:50}]},searchApi:{axios:{headers:{Accept:"application/vnd.inveniordm.v1+json"},url:"/api/importer-tasks",withCredentials:!0},invenio:{requestSerializer:"InvenioRecordsResourcesRequestSerializer"}},sortOptions:[{sortBy:"newest",text:"Newest"},{sortBy:"oldest",text:"Oldest"}],sortOrderDisabled:!0,resultPath:"/administration/importer-tasks"},FE=()=>{const[e,t]=y.useState({}),[r,a]=y.useState(!0),{values:n,submitForm:s,isSubmitting:l,isValid:o,setFieldValue:c}=ni.useFormikContext(),d=y.useCallback(async()=>{try{const h=await EE(),g={};for(const E of h){const m=await bE(E);m&&(g[E]=m)}t(g)}catch(h){console.error("Error fetching record types:",h)}finally{a(!1)}},[]),f=h=>{var E;const g=((E=h.target.files)==null?void 0:E[0])||null;c("metadata",g)},p=h=>{c("files",h)};return y.useEffect(()=>{d()},[d]),{configs:e,isLoading:r,values:n,submitForm:s,setFieldValue:c,handleFileChange:f,handleFilesChange:p,isSubmitting:l,isValid:o}},IE=({progress:e})=>{const{configs:t,isLoading:r,submitForm:a,handleFileChange:n,handleFilesChange:s,values:l,isSubmitting:o,isValid:c}=FE();return r?i.default.createElement(Yn,null):!t||Object.keys(t).length===0?i.default.createElement("p",null,"No record types available."):i.default.createElement(y.Fragment,null,i.default.createElement(te.TextField,{fieldPath:"task.title",label:"Title",placeholder:"Enter a title for the import task",required:!0}),i.default.createElement(u.Form.Group,{widths:"equal"},i.default.createElement(te.SelectField,{fieldPath:"task.recordType",label:"Record Type",options:Object.keys(t).map(d=>({key:d,value:d,text:d})),placeholder:"Select Record Type",required:!0}),i.default.createElement(te.SelectField,{fieldPath:"task.serializer",label:"Serializer",options:l.task.recordType&&t[l.task.recordType]?t[l.task.recordType].serializers.map(d=>({key:d,value:d,text:d})):[],placeholder:"Select Serializer",disabled:!l.task.recordType,required:!0}),i.default.createElement(te.SelectField,{fieldPath:"task.mode",label:"Mode",options:[{key:"import",value:"import",text:"Import"},{key:"delete",value:"delete",text:"Delete"}],placeholder:"Select Mode",disabled:!l.task.recordType||!l.task.serializer,required:!0})),i.default.createElement(u.Form.Field,null,i.default.createElement("label",{htmlFor:"file-input"},"Metadata File"),i.default.createElement("input",{id:"file-input",type:"file",accept:".csv",onChange:n,style:{marginTop:"8px"}}),l.metadata&&i.default.createElement("p",{style:{marginTop:"8px",fontSize:"12px",color:"#666"}},"Selected: ",l.metadata.name),i.default.createElement("p",{style:{marginTop:"8px",fontSize:"12px",color:"#666"}},"Upload a CSV file containing the records metadata to be imported or deleted.")),i.default.createElement(u.Form.Field,null,i.default.createElement(lr,{value:l.files||[],onChange:s,accept:"*",skipEmptyFiles:!0,maxTotalSize:10*1024*1024*1024,maxFiles:100}),i.default.createElement("p",{style:{marginTop:"8px",fontSize:"12px",color:"#666"}},"Upload files related to the records. You can upload multiple files, and they will be associated with the import task.")),i.default.createElement(te.TextAreaField,{fieldPath:"task.description",label:"Notes",placeholder:"Enter a description for the import task",rows:3}),i.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:".5rem"}},e&&i.default.createElement(Kn,{progress:e}),i.default.createElement(u.Button,{type:"button",primary:!0,onClick:a,disabled:!c||o,loading:o},"Submit")))};var bt;try{bt=Map}catch{}var St;try{St=Set}catch{}function is(e,t,r){if(!e||typeof e!="object"||typeof e=="function")return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map($t);if(bt&&e instanceof bt)return new Map(Array.from(e.entries()));if(St&&e instanceof St)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var a=Object.create(e);r.push(a);for(var n in e){var s=t.findIndex(function(l){return l===e[n]});a[n]=s>-1?r[s]:is(e[n],t,r)}return a}return e}function $t(e){return is(e,[],[])}const AE=Object.prototype.toString,OE=Error.prototype.toString,RE=RegExp.prototype.toString,PE=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",kE=/^Symbol\((.*)\)(.*)$/;function DE(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function Hr(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return DE(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return PE.call(e).replace(kE,"Symbol($1)");const a=AE.call(e).slice(8,-1);return a==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):a==="Error"||e instanceof Error?"["+OE.call(e)+"]":a==="RegExp"?RE.call(e):null}function ye(e,t){let r=Hr(e,t);return r!==null?r:JSON.stringify(e,function(a,n){let s=Hr(this[a],t);return s!==null?s:n},2)}let Z={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:a})=>{let n=a!=null&&a!==r,s=`${e} must be a \`${t}\` type, but the final value was: \`${ye(r,!0)}\``+(n?` (cast from the value \`${ye(a,!0)}\`).`:".");return r===null&&(s+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),s},defined:"${path} must be defined"},N={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},LE={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},_t={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},UE={isValue:"${path} field must be ${value}"},Ct={noUnknown:"${path} field has unspecified keys: ${unknown}"},NE={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"};Object.assign(Object.create(null),{mixed:Z,string:N,number:LE,date:_t,object:Ct,array:NE,boolean:UE});var BE=Object.prototype,ME=BE.hasOwnProperty;function zE(e,t){return e!=null&&ME.call(e,t)}var QE=zE,jE=QE,qE=Fa;function GE(e,t){return e!=null&&qE(e,t,jE)}var VE=GE;const Be=A(VE),ls=e=>e&&e.__isYupSchema__;class HE{constructor(t,r){if(this.fn=void 0,this.refs=t,this.refs=t,typeof r=="function"){this.fn=r;return}if(!Be(r,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:a,then:n,otherwise:s}=r,l=typeof a=="function"?a:(...o)=>o.every(c=>c===a);this.fn=function(...o){let c=o.pop(),d=o.pop(),f=l(...o)?n:s;if(f)return typeof f=="function"?f(d):d.concat(f.resolve(c))}}resolve(t,r){let a=this.refs.map(s=>s.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),n=this.fn.apply(t,a.concat(t,r));if(n===void 0||n===t)return t;if(!ls(n))throw new TypeError("conditions must return a schema object");return n.resolve(r)}}function os(e){return e==null?[]:[].concat(e)}function xt(){return xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},xt.apply(this,arguments)}let KE=/\$\{\s*(\w+)\s*\}/g;class P extends Error{static formatError(t,r){const a=r.label||r.path||"this";return a!==r.path&&(r=xt({},r,{path:a})),typeof t=="string"?t.replace(KE,(n,s)=>ye(r[s])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,a,n){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this.name="ValidationError",this.value=r,this.path=a,this.type=n,this.errors=[],this.inner=[],os(t).forEach(s=>{P.isError(s)?(this.errors.push(...s.errors),this.inner=this.inner.concat(s.inner.length?s.inner:s)):this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,P)}}const YE=e=>{let t=!1;return(...r)=>{t||(t=!0,e(...r))}};function Tt(e,t){let{endEarly:r,tests:a,args:n,value:s,errors:l,sort:o,path:c}=e,d=YE(t),f=a.length;const p=[];if(l=l||[],!f)return l.length?d(new P(l,s,c)):d(null,s);for(let h=0;h<a.length;h++){const g=a[h];g(n,function(m){if(m){if(!P.isError(m))return d(m,s);if(r)return m.value=s,d(m,s);p.push(m)}if(--f<=0){if(p.length&&(o&&p.sort(o),l.length&&p.push(...l),l=p),l.length){d(new P(l,s,c),s);return}d(null,s)}})}}function WE(e){return function(t,r,a){for(var n=-1,s=Object(t),l=a(t),o=l.length;o--;){var c=l[e?o:++n];if(r(s[c],c,s)===!1)break}return t}}var ZE=WE,JE=ZE,XE=JE(),eb=XE,tb=eb,rb=$e;function ab(e,t){return e&&tb(e,t,rb)}var us=ab,nb="__lodash_hash_undefined__";function sb(e){return this.__data__.set(e,nb),this}var ib=sb;function lb(e){return this.__data__.has(e)}var ob=lb,ub=Ut,cb=ib,db=ob;function Me(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ub;++t<r;)this.add(e[t])}Me.prototype.add=Me.prototype.push=cb;Me.prototype.has=db;var fb=Me;function pb(e,t){for(var r=-1,a=e==null?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}var hb=pb;function gb(e,t){return e.has(t)}var mb=gb,yb=fb,vb=hb,Eb=mb,bb=1,Sb=2;function $b(e,t,r,a,n,s){var l=r&bb,o=e.length,c=t.length;if(o!=c&&!(l&&c>o))return!1;var d=s.get(e),f=s.get(t);if(d&&f)return d==t&&f==e;var p=-1,h=!0,g=r&Sb?new yb:void 0;for(s.set(e,t),s.set(t,e);++p<o;){var E=e[p],m=t[p];if(a)var S=l?a(m,E,p,t,e,s):a(E,m,p,e,t,s);if(S!==void 0){if(S)continue;h=!1;break}if(g){if(!vb(t,function(v,$){if(!Eb(g,$)&&(E===v||n(E,v,r,a,s)))return g.push($)})){h=!1;break}}else if(!(E===m||n(E,m,r,a,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var cs=$b;function _b(e){var t=-1,r=Array(e.size);return e.forEach(function(a,n){r[++t]=[n,a]}),r}var Cb=_b;function xb(e){var t=-1,r=Array(e.size);return e.forEach(function(a){r[++t]=a}),r}var Tb=xb,Kr=le,Yr=Ba,wb=Ke,Fb=cs,Ib=Cb,Ab=Tb,Ob=1,Rb=2,Pb="[object Boolean]",kb="[object Date]",Db="[object Error]",Lb="[object Map]",Ub="[object Number]",Nb="[object RegExp]",Bb="[object Set]",Mb="[object String]",zb="[object Symbol]",Qb="[object ArrayBuffer]",jb="[object DataView]",Wr=Kr?Kr.prototype:void 0,ut=Wr?Wr.valueOf:void 0;function qb(e,t,r,a,n,s,l){switch(r){case jb:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Qb:return!(e.byteLength!=t.byteLength||!s(new Yr(e),new Yr(t)));case Pb:case kb:case Ub:return wb(+e,+t);case Db:return e.name==t.name&&e.message==t.message;case Nb:case Mb:return e==t+"";case Lb:var o=Ib;case Bb:var c=a&Ob;if(o||(o=Ab),e.size!=t.size&&!c)return!1;var d=l.get(e);if(d)return d==t;a|=Rb,l.set(e,t);var f=Fb(o(e),o(t),a,n,s,l);return l.delete(e),f;case zb:if(ut)return ut.call(e)==ut.call(t)}return!1}var Gb=qb,Zr=Na,Vb=1,Hb=Object.prototype,Kb=Hb.hasOwnProperty;function Yb(e,t,r,a,n,s){var l=r&Vb,o=Zr(e),c=o.length,d=Zr(t),f=d.length;if(c!=f&&!l)return!1;for(var p=c;p--;){var h=o[p];if(!(l?h in t:Kb.call(t,h)))return!1}var g=s.get(e),E=s.get(t);if(g&&E)return g==t&&E==e;var m=!0;s.set(e,t),s.set(t,e);for(var S=l;++p<c;){h=o[p];var v=e[h],$=t[h];if(a)var w=l?a($,v,h,t,e,s):a(v,$,h,e,t,s);if(!(w===void 0?v===$||n(v,$,r,a,s):w)){m=!1;break}S||(S=h=="constructor")}if(m&&!S){var O=e.constructor,z=t.constructor;O!=z&&"constructor"in e&&"constructor"in t&&!(typeof O=="function"&&O instanceof O&&typeof z=="function"&&z instanceof z)&&(m=!1)}return s.delete(e),s.delete(t),m}var Wb=Yb,ct=qt,Zb=cs,Jb=Gb,Xb=Wb,Jr=ve,Xr=k,ea=Ve,e0=kt,t0=1,ta="[object Arguments]",ra="[object Array]",we="[object Object]",r0=Object.prototype,aa=r0.hasOwnProperty;function a0(e,t,r,a,n,s){var l=Xr(e),o=Xr(t),c=l?ra:Jr(e),d=o?ra:Jr(t);c=c==ta?we:c,d=d==ta?we:d;var f=c==we,p=d==we,h=c==d;if(h&&ea(e)){if(!ea(t))return!1;l=!0,f=!1}if(h&&!f)return s||(s=new ct),l||e0(e)?Zb(e,t,r,a,n,s):Jb(e,t,c,r,a,n,s);if(!(r&t0)){var g=f&&aa.call(e,"__wrapped__"),E=p&&aa.call(t,"__wrapped__");if(g||E){var m=g?e.value():e,S=E?t.value():t;return s||(s=new ct),n(m,S,r,a,s)}}return h?(s||(s=new ct),Xb(e,t,r,a,n,s)):!1}var n0=a0,s0=n0,na=j;function ds(e,t,r,a,n){return e===t?!0:e==null||t==null||!na(e)&&!na(t)?e!==e&&t!==t:s0(e,t,r,a,ds,n)}var fs=ds,i0=qt,l0=fs,o0=1,u0=2;function c0(e,t,r,a){var n=r.length,s=n,l=!a;if(e==null)return!s;for(e=Object(e);n--;){var o=r[n];if(l&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++n<s;){o=r[n];var c=o[0],d=e[c],f=o[1];if(l&&o[2]){if(d===void 0&&!(c in e))return!1}else{var p=new i0;if(a)var h=a(d,f,c,e,t,p);if(!(h===void 0?l0(f,d,o0|u0,a,p):h))return!1}}return!0}var d0=c0,f0=V;function p0(e){return e===e&&!f0(e)}var ps=p0,h0=ps,g0=$e;function m0(e){for(var t=g0(e),r=t.length;r--;){var a=t[r],n=e[a];t[r]=[a,n,h0(n)]}return t}var y0=m0;function v0(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var hs=v0,E0=d0,b0=y0,S0=hs;function $0(e){var t=b0(e);return t.length==1&&t[0][2]?S0(t[0][0],t[0][1]):function(r){return r===e||E0(r,e,t)}}var _0=$0,C0=fs,x0=wa,T0=Mt,w0=Lt,F0=ps,I0=hs,A0=be,O0=1,R0=2;function P0(e,t){return w0(e)&&F0(t)?I0(A0(e),t):function(r){var a=x0(r,e);return a===void 0&&a===t?T0(r,e):C0(t,a,O0|R0)}}var k0=P0;function D0(e){return function(t){return t==null?void 0:t[e]}}var L0=D0,U0=Bt;function N0(e){return function(t){return U0(t,e)}}var B0=N0,M0=L0,z0=B0,Q0=Lt,j0=be;function q0(e){return Q0(e)?M0(j0(e)):z0(e)}var G0=q0,V0=_0,H0=k0,K0=Qt,Y0=k,W0=G0;function Z0(e){return typeof e=="function"?e:e==null?K0:typeof e=="object"?Y0(e)?H0(e[0],e[1]):V0(e):W0(e)}var gs=Z0,J0=et,X0=us,eS=gs;function tS(e,t){var r={};return t=eS(t),X0(e,function(a,n,s){J0(r,n,t(a,n,s))}),r}var rS=tS;const ms=A(rS);function X(e){this._maxSize=e,this.clear()}X.prototype.clear=function(){this._size=0,this._values=Object.create(null)};X.prototype.get=function(e){return this._values[e]};X.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var aS=/[^.^\]^[]+|(?=\[\]|\.\.)/g,ys=/^\d+$/,nS=/^\d/,sS=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,iS=/^\s*(['"]?)(.*?)(\1)\s*$/,ar=512,sa=new X(ar),ia=new X(ar),la=new X(ar),st={Cache:X,split:wt,normalizePath:dt,setter:function(e){var t=dt(e);return ia.get(e)||ia.set(e,function(a,n){for(var s=0,l=t.length,o=a;s<l-1;){var c=t[s];if(c==="__proto__"||c==="constructor"||c==="prototype")return a;o=o[t[s++]]}o[t[s]]=n})},getter:function(e,t){var r=dt(e);return la.get(e)||la.set(e,function(n){for(var s=0,l=r.length;s<l;)if(n!=null||!t)n=n[r[s++]];else return;return n})},join:function(e){return e.reduce(function(t,r){return t+(nr(r)||ys.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){lS(Array.isArray(e)?e:wt(e),t,r)}};function dt(e){return sa.get(e)||sa.set(e,wt(e).map(function(t){return t.replace(iS,"$2")}))}function wt(e){return e.match(aS)||[""]}function lS(e,t,r){var a=e.length,n,s,l,o;for(s=0;s<a;s++)n=e[s],n&&(cS(n)&&(n='"'+n+'"'),o=nr(n),l=!o&&/^\d+$/.test(n),t.call(r,n,o,l,s,e))}function nr(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function oS(e){return e.match(nS)&&!e.match(ys)}function uS(e){return sS.test(e)}function cS(e){return!nr(e)&&(oS(e)||uS(e))}const Fe={context:"$",value:"."};class H{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Fe.context,this.isValue=this.key[0]===Fe.value,this.isSibling=!this.isContext&&!this.isValue;let a=this.isContext?Fe.context:this.isValue?Fe.value:"";this.path=this.key.slice(a.length),this.getter=this.path&&st.getter(this.path,!0),this.map=r.map}getValue(t,r,a){let n=this.isContext?a:this.isValue?t:r;return this.getter&&(n=this.getter(n||{})),this.map&&(n=this.map(n)),n}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}H.prototype.__isYupRef=!0;function ze(){return ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ze.apply(this,arguments)}function dS(e,t){if(e==null)return{};var r={},a=Object.keys(e),n,s;for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function Ie(e){function t(r,a){let{value:n,path:s="",label:l,options:o,originalValue:c,sync:d}=r,f=dS(r,["value","path","label","options","originalValue","sync"]);const{name:p,test:h,params:g,message:E}=e;let{parent:m,context:S}=o;function v(F){return H.isRef(F)?F.getValue(n,m,S):F}function $(F={}){const Y=ms(ze({value:n,originalValue:c,label:l,path:F.path||s},g,F.params),v),Ce=new P(P.formatError(F.message||E,Y),n,Y.path,F.type||p);return Ce.params=Y,Ce}let w=ze({path:s,parent:m,type:p,createError:$,resolve:v,options:o,originalValue:c},f);if(!d){try{Promise.resolve(h.call(w,n,w)).then(F=>{P.isError(F)?a(F):F?a(null,F):a($())}).catch(a)}catch(F){a(F)}return}let O;try{var z;if(O=h.call(w,n,w),typeof((z=O)==null?void 0:z.then)=="function")throw new Error(`Validation test of type: "${w.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(F){a(F);return}P.isError(O)?a(O):O?a(null,O):a($())}return t.OPTIONS=e,t}let fS=e=>e.substr(0,e.length-1).substr(1);function pS(e,t,r,a=r){let n,s,l;return t?(st.forEach(t,(o,c,d)=>{let f=c?fS(o):o;if(e=e.resolve({context:a,parent:n,value:r}),e.innerType){let p=d?parseInt(f,10):0;if(r&&p>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${o}, in the path: ${t}. because there is no value at that index. `);n=r,r=r&&r[p],e=e.innerType}if(!d){if(!e.fields||!e.fields[f])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${l} which is a type: "${e._type}")`);n=r,r=r&&r[f],e=e.fields[f]}s=f,l=c?"["+o+"]":"."+o}),{schema:e,parent:n,parentPath:s}):{parent:n,parentPath:t,schema:e}}class Qe{constructor(){this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const t=[];for(const r of this.list)t.push(r);for(const[,r]of this.refs)t.push(r.describe());return t}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}resolveAll(t){return this.toArray().reduce((r,a)=>r.concat(H.isRef(a)?t(a):a),[])}add(t){H.isRef(t)?this.refs.set(t.key,t):this.list.add(t)}delete(t){H.isRef(t)?this.refs.delete(t.key):this.list.delete(t)}clone(){const t=new Qe;return t.list=new Set(this.list),t.refs=new Map(this.refs),t}merge(t,r){const a=this.clone();return t.list.forEach(n=>a.add(n)),t.refs.forEach(n=>a.add(n)),r.list.forEach(n=>a.delete(n)),r.refs.forEach(n=>a.delete(n)),a}}function L(){return L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},L.apply(this,arguments)}class R{constructor(t){this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new Qe,this._blacklist=new Qe,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Z.notType)}),this.type=(t==null?void 0:t.type)||"mixed",this.spec=L({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},t==null?void 0:t.spec)}get _type(){return this.type}_typeCheck(t){return!0}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeError=this._typeError,r._whitelistError=this._whitelistError,r._blacklistError=this._blacklistError,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.exclusiveTests=L({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=$t(L({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let a=t(this);return this._mutate=r,a}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,a=t.clone();const n=L({},r.spec,a.spec);return a.spec=n,a._typeError||(a._typeError=r._typeError),a._whitelistError||(a._whitelistError=r._whitelistError),a._blacklistError||(a._blacklistError=r._blacklistError),a._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),a._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),a.tests=r.tests,a.exclusiveTests=r.exclusiveTests,a.withMutation(s=>{t.tests.forEach(l=>{s.test(l.OPTIONS)})}),a.transforms=[...r.transforms,...a.transforms],a}isType(t){return this.spec.nullable&&t===null?!0:this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let a=r.conditions;r=r.clone(),r.conditions=[],r=a.reduce((n,s)=>s.resolve(n,t),r),r=r.resolve(t)}return r}cast(t,r={}){let a=this.resolve(L({value:t},r)),n=a._cast(t,r);if(t!==void 0&&r.assert!==!1&&a.isType(n)!==!0){let s=ye(t),l=ye(n);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${a._type}". 

attempted value: ${s} 
`+(l!==s?`result of cast: ${l}`:""))}return n}_cast(t,r){let a=t===void 0?t:this.transforms.reduce((n,s)=>s.call(this,n,t,this),t);return a===void 0&&(a=this.getDefault()),a}_validate(t,r={},a){let{sync:n,path:s,from:l=[],originalValue:o=t,strict:c=this.spec.strict,abortEarly:d=this.spec.abortEarly}=r,f=t;c||(f=this._cast(f,L({assert:!1},r)));let p={value:f,path:s,options:r,originalValue:o,schema:this,label:this.spec.label,sync:n,from:l},h=[];this._typeError&&h.push(this._typeError);let g=[];this._whitelistError&&g.push(this._whitelistError),this._blacklistError&&g.push(this._blacklistError),Tt({args:p,value:f,path:s,sync:n,tests:h,endEarly:d},E=>{if(E)return void a(E,f);Tt({tests:this.tests.concat(g),args:p,path:s,sync:n,value:f,endEarly:d},a)})}validate(t,r,a){let n=this.resolve(L({},r,{value:t}));return typeof a=="function"?n._validate(t,r,a):new Promise((s,l)=>n._validate(t,r,(o,c)=>{o?l(o):s(c)}))}validateSync(t,r){let a=this.resolve(L({},r,{value:t})),n;return a._validate(t,L({},r,{sync:!0}),(s,l)=>{if(s)throw s;n=l}),n}isValid(t,r){return this.validate(t,r).then(()=>!0,a=>{if(P.isError(a))return!1;throw a})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(a){if(P.isError(a))return!1;throw a}}_getDefault(){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this):$t(t)}getDefault(t){return this.resolve(t||{})._getDefault()}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){let r=this.clone();return r.spec.strict=t,r}_isPresent(t){return t!=null}defined(t=Z.defined){return this.test({message:t,name:"defined",exclusive:!0,test(r){return r!==void 0}})}required(t=Z.required){return this.clone({presence:"required"}).withMutation(r=>r.test({message:t,name:"required",exclusive:!0,test(a){return this.schema._isPresent(a)}}))}notRequired(){let t=this.clone({presence:"optional"});return t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t}nullable(t=!0){return this.clone({nullable:t!==!1})}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=Z.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let a=this.clone(),n=Ie(r),s=r.exclusive||r.name&&a.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(a.exclusiveTests[r.name]=!!r.exclusive),a.tests=a.tests.filter(l=>!(l.OPTIONS.name===r.name&&(s||l.OPTIONS.test===n.OPTIONS.test))),a.tests.push(n),a}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let a=this.clone(),n=os(t).map(s=>new H(s));return n.forEach(s=>{s.isSibling&&a.deps.push(s.key)}),a.conditions.push(new HE(n,r)),a}typeError(t){let r=this.clone();return r._typeError=Ie({message:t,name:"typeError",test(a){return a!==void 0&&!this.schema.isType(a)?this.createError({params:{type:this.schema._type}}):!0}}),r}oneOf(t,r=Z.oneOf){let a=this.clone();return t.forEach(n=>{a._whitelist.add(n),a._blacklist.delete(n)}),a._whitelistError=Ie({message:r,name:"oneOf",test(n){if(n===void 0)return!0;let s=this.schema._whitelist,l=s.resolveAll(this.resolve);return l.includes(n)?!0:this.createError({params:{values:s.toArray().join(", "),resolved:l}})}}),a}notOneOf(t,r=Z.notOneOf){let a=this.clone();return t.forEach(n=>{a._blacklist.add(n),a._whitelist.delete(n)}),a._blacklistError=Ie({message:r,name:"notOneOf",test(n){let s=this.schema._blacklist,l=s.resolveAll(this.resolve);return l.includes(n)?this.createError({params:{values:s.toArray().join(", "),resolved:l}}):!0}}),a}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(){const t=this.clone(),{label:r,meta:a}=t.spec;return{meta:a,label:r,type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(s=>({name:s.OPTIONS.name,params:s.OPTIONS.params})).filter((s,l,o)=>o.findIndex(c=>c.name===s.name)===l)}}}R.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])R.prototype[`${e}At`]=function(t,r,a={}){const{parent:n,parentPath:s,schema:l}=pS(this,t,r,a.context);return l[e](n&&n[s],L({},a,{parent:n,path:t}))};for(const e of["equals","is"])R.prototype[e]=R.prototype.oneOf;for(const e of["not","nope"])R.prototype[e]=R.prototype.notOneOf;R.prototype.optional=R.prototype.notRequired;const hS=R;hS.prototype;const B=e=>e==null;let gS=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,mS=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,yS=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,vS=e=>B(e)||e===e.trim(),ES={}.toString();function ge(){return new vs}class vs extends R{constructor(){super({type:"string"}),this.withMutation(()=>{this.transform(function(t){if(this.isType(t)||Array.isArray(t))return t;const r=t!=null&&t.toString?t.toString():t;return r===ES?t:r})})}_typeCheck(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}_isPresent(t){return super._isPresent(t)&&!!t.length}length(t,r=N.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},test(a){return B(a)||a.length===this.resolve(t)}})}min(t,r=N.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},test(a){return B(a)||a.length>=this.resolve(t)}})}max(t,r=N.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},test(a){return B(a)||a.length<=this.resolve(t)}})}matches(t,r){let a=!1,n,s;return r&&(typeof r=="object"?{excludeEmptyString:a=!1,message:n,name:s}=r:n=r),this.test({name:s||"matches",message:n||N.matches,params:{regex:t},test:l=>B(l)||l===""&&a||l.search(t)!==-1})}email(t=N.email){return this.matches(gS,{name:"email",message:t,excludeEmptyString:!0})}url(t=N.url){return this.matches(mS,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=N.uuid){return this.matches(yS,{name:"uuid",message:t,excludeEmptyString:!1})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=N.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:vS})}lowercase(t=N.lowercase){return this.transform(r=>B(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,test:r=>B(r)||r===r.toLowerCase()})}uppercase(t=N.uppercase){return this.transform(r=>B(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,test:r=>B(r)||r===r.toUpperCase()})}}ge.prototype=vs.prototype;var bS=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function SS(e){var t=[1,4,5,6,7,10,11],r=0,a,n;if(n=bS.exec(e)){for(var s=0,l;l=t[s];++s)n[l]=+n[l]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,(n[8]===void 0||n[8]==="")&&(n[9]===void 0||n[9]==="")?a=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7]):(n[8]!=="Z"&&n[9]!==void 0&&(r=n[10]*60+n[11],n[9]==="+"&&(r=0-r)),a=Date.UTC(n[1],n[2],n[3],n[4],n[5]+r,n[6],n[7]))}else a=Date.parse?Date.parse(e):NaN;return a}let Es=new Date(""),$S=e=>Object.prototype.toString.call(e)==="[object Date]";class bs extends R{constructor(){super({type:"date"}),this.withMutation(()=>{this.transform(function(t){return this.isType(t)?t:(t=SS(t),isNaN(t)?Es:new Date(t))})})}_typeCheck(t){return $S(t)&&!isNaN(t.getTime())}prepareParam(t,r){let a;if(H.isRef(t))a=t;else{let n=this.cast(t);if(!this._typeCheck(n))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);a=n}return a}min(t,r=_t.min){let a=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},test(n){return B(n)||n>=this.resolve(a)}})}max(t,r=_t.max){let a=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},test(n){return B(n)||n<=this.resolve(a)}})}}bs.INVALID_DATE=Es;bs.prototype;function _S(e,t,r,a){var n=-1,s=e==null?0:e.length;for(a&&s&&(r=e[++n]);++n<s;)r=t(r,e[n],n,e);return r}var CS=_S;function xS(e){return function(t){return e==null?void 0:e[t]}}var TS=xS,wS=TS,FS={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},IS=wS(FS),AS=IS,OS=AS,RS=Ee,PS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,kS="\\u0300-\\u036f",DS="\\ufe20-\\ufe2f",LS="\\u20d0-\\u20ff",US=kS+DS+LS,NS="["+US+"]",BS=RegExp(NS,"g");function MS(e){return e=RS(e),e&&e.replace(PS,OS).replace(BS,"")}var zS=MS,QS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function jS(e){return e.match(QS)||[]}var qS=jS,GS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function VS(e){return GS.test(e)}var HS=VS,Ss="\\ud800-\\udfff",KS="\\u0300-\\u036f",YS="\\ufe20-\\ufe2f",WS="\\u20d0-\\u20ff",ZS=KS+YS+WS,$s="\\u2700-\\u27bf",_s="a-z\\xdf-\\xf6\\xf8-\\xff",JS="\\xac\\xb1\\xd7\\xf7",XS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",e$="\\u2000-\\u206f",t$=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cs="A-Z\\xc0-\\xd6\\xd8-\\xde",r$="\\ufe0e\\ufe0f",xs=JS+XS+e$+t$,Ts="['’]",oa="["+xs+"]",a$="["+ZS+"]",ws="\\d+",n$="["+$s+"]",Fs="["+_s+"]",Is="[^"+Ss+xs+ws+$s+_s+Cs+"]",s$="\\ud83c[\\udffb-\\udfff]",i$="(?:"+a$+"|"+s$+")",l$="[^"+Ss+"]",As="(?:\\ud83c[\\udde6-\\uddff]){2}",Os="[\\ud800-\\udbff][\\udc00-\\udfff]",re="["+Cs+"]",o$="\\u200d",ua="(?:"+Fs+"|"+Is+")",u$="(?:"+re+"|"+Is+")",ca="(?:"+Ts+"(?:d|ll|m|re|s|t|ve))?",da="(?:"+Ts+"(?:D|LL|M|RE|S|T|VE))?",Rs=i$+"?",Ps="["+r$+"]?",c$="(?:"+o$+"(?:"+[l$,As,Os].join("|")+")"+Ps+Rs+")*",d$="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",f$="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",p$=Ps+Rs+c$,h$="(?:"+[n$,As,Os].join("|")+")"+p$,g$=RegExp([re+"?"+Fs+"+"+ca+"(?="+[oa,re,"$"].join("|")+")",u$+"+"+da+"(?="+[oa,re+ua,"$"].join("|")+")",re+"?"+ua+"+"+ca,re+"+"+da,f$,d$,ws,h$].join("|"),"g");function m$(e){return e.match(g$)||[]}var y$=m$,v$=qS,E$=HS,b$=Ee,S$=y$;function $$(e,t,r){return e=b$(e),t=r?void 0:t,t===void 0?E$(e)?S$(e):v$(e):e.match(t)||[]}var _$=$$,C$=CS,x$=zS,T$=_$,w$="['’]",F$=RegExp(w$,"g");function I$(e){return function(t){return C$(T$(x$(t).replace(F$,"")),e,"")}}var ks=I$,A$=ks,O$=A$(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),R$=O$;const fa=A(R$);function P$(e,t,r){var a=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++a<n;)s[a]=e[a+t];return s}var k$=P$,D$=k$;function L$(e,t,r){var a=e.length;return r=r===void 0?a:r,!t&&r>=a?e:D$(e,t,r)}var U$=L$,N$="\\ud800-\\udfff",B$="\\u0300-\\u036f",M$="\\ufe20-\\ufe2f",z$="\\u20d0-\\u20ff",Q$=B$+M$+z$,j$="\\ufe0e\\ufe0f",q$="\\u200d",G$=RegExp("["+q$+N$+Q$+j$+"]");function V$(e){return G$.test(e)}var Ds=V$;function H$(e){return e.split("")}var K$=H$,Ls="\\ud800-\\udfff",Y$="\\u0300-\\u036f",W$="\\ufe20-\\ufe2f",Z$="\\u20d0-\\u20ff",J$=Y$+W$+Z$,X$="\\ufe0e\\ufe0f",e_="["+Ls+"]",Ft="["+J$+"]",It="\\ud83c[\\udffb-\\udfff]",t_="(?:"+Ft+"|"+It+")",Us="[^"+Ls+"]",Ns="(?:\\ud83c[\\udde6-\\uddff]){2}",Bs="[\\ud800-\\udbff][\\udc00-\\udfff]",r_="\\u200d",Ms=t_+"?",zs="["+X$+"]?",a_="(?:"+r_+"(?:"+[Us,Ns,Bs].join("|")+")"+zs+Ms+")*",n_=zs+Ms+a_,s_="(?:"+[Us+Ft+"?",Ft,Ns,Bs,e_].join("|")+")",i_=RegExp(It+"(?="+It+")|"+s_+n_,"g");function l_(e){return e.match(i_)||[]}var o_=l_,u_=K$,c_=Ds,d_=o_;function f_(e){return c_(e)?d_(e):u_(e)}var p_=f_,h_=U$,g_=Ds,m_=p_,y_=Ee;function v_(e){return function(t){t=y_(t);var r=g_(t)?m_(t):void 0,a=r?r[0]:t.charAt(0),n=r?h_(r,1).join(""):t.slice(1);return a[e]()+n}}var E_=v_,b_=E_,S_=b_("toUpperCase"),$_=S_,__=Ee,C_=$_;function x_(e){return C_(__(e).toLowerCase())}var T_=x_,w_=T_,F_=ks,I_=F_(function(e,t,r){return t=t.toLowerCase(),e+(r?w_(t):t)}),A_=I_;const O_=A(A_);var R_=et,P_=us,k_=gs;function D_(e,t){var r={};return t=k_(t),P_(e,function(a,n,s){R_(r,t(a,n,s),a)}),r}var L_=D_;const U_=A(L_);var sr={exports:{}};sr.exports=function(e){return Qs(N_(e),e)};sr.exports.array=Qs;function Qs(e,t){var r=e.length,a=new Array(r),n={},s=r,l=B_(t),o=M_(e);for(t.forEach(function(d){if(!o.has(d[0])||!o.has(d[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)n[s]||c(e[s],s,new Set);return a;function c(d,f,p){if(p.has(d)){var h;try{h=", node was:"+JSON.stringify(d)}catch{h=""}throw new Error("Cyclic dependency"+h)}if(!o.has(d))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(d));if(!n[f]){n[f]=!0;var g=l.get(d)||new Set;if(g=Array.from(g),f=g.length){p.add(d);do{var E=g[--f];c(E,o.get(E),p)}while(f);p.delete(d)}a[--r]=d}}}function N_(e){for(var t=new Set,r=0,a=e.length;r<a;r++){var n=e[r];t.add(n[0]),t.add(n[1])}return Array.from(t)}function B_(e){for(var t=new Map,r=0,a=e.length;r<a;r++){var n=e[r];t.has(n[0])||t.set(n[0],new Set),t.has(n[1])||t.set(n[1],new Set),t.get(n[0]).add(n[1])}return t}function M_(e){for(var t=new Map,r=0,a=e.length;r<a;r++)t.set(e[r],r);return t}var z_=sr.exports;const Q_=A(z_);function j_(e,t=[]){let r=[],a=new Set,n=new Set(t.map(([l,o])=>`${l}-${o}`));function s(l,o){let c=st.split(l)[0];a.add(c),n.has(`${o}-${c}`)||r.push([o,c])}for(const l in e)if(Be(e,l)){let o=e[l];a.add(l),H.isRef(o)&&o.isSibling?s(o.path,l):ls(o)&&"deps"in o&&o.deps.forEach(c=>s(c,l))}return Q_.array(Array.from(a),r).reverse()}function pa(e,t){let r=1/0;return e.some((a,n)=>{var s;if(((s=t.path)==null?void 0:s.indexOf(a))!==-1)return r=n,!0}),r}function js(e){return(t,r)=>pa(e,t)-pa(e,r)}function ae(){return ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ae.apply(this,arguments)}let ha=e=>Object.prototype.toString.call(e)==="[object Object]";function q_(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(a=>r.indexOf(a)===-1)}const G_=js([]);class qs extends R{constructor(t){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=G_,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{this.transform(function(a){if(typeof a=="string")try{a=JSON.parse(a)}catch{a=null}return this.isType(a)?a:null}),t&&this.shape(t)})}_typeCheck(t){return ha(t)||typeof t=="function"}_cast(t,r={}){var a;let n=super._cast(t,r);if(n===void 0)return this.getDefault();if(!this._typeCheck(n))return n;let s=this.fields,l=(a=r.stripUnknown)!=null?a:this.spec.noUnknown,o=this._nodes.concat(Object.keys(n).filter(p=>this._nodes.indexOf(p)===-1)),c={},d=ae({},r,{parent:c,__validating:r.__validating||!1}),f=!1;for(const p of o){let h=s[p],g=Be(n,p);if(h){let E,m=n[p];d.path=(r.path?`${r.path}.`:"")+p,h=h.resolve({value:m,context:r.context,parent:c});let S="spec"in h?h.spec:void 0,v=S==null?void 0:S.strict;if(S!=null&&S.strip){f=f||p in n;continue}E=!r.__validating||!v?h.cast(n[p],d):n[p],E!==void 0&&(c[p]=E)}else g&&!l&&(c[p]=n[p]);c[p]!==n[p]&&(f=!0)}return f?c:n}_validate(t,r={},a){let n=[],{sync:s,from:l=[],originalValue:o=t,abortEarly:c=this.spec.abortEarly,recursive:d=this.spec.recursive}=r;l=[{schema:this,value:o},...l],r.__validating=!0,r.originalValue=o,r.from=l,super._validate(t,r,(f,p)=>{if(f){if(!P.isError(f)||c)return void a(f,p);n.push(f)}if(!d||!ha(p)){a(n[0]||null,p);return}o=o||p;let h=this._nodes.map(g=>(E,m)=>{let S=g.indexOf(".")===-1?(r.path?`${r.path}.`:"")+g:`${r.path||""}["${g}"]`,v=this.fields[g];if(v&&"validate"in v){v.validate(p[g],ae({},r,{path:S,from:l,strict:!0,parent:p,originalValue:o[g]}),m);return}m(null)});Tt({sync:s,tests:h,value:p,errors:n,endEarly:c,sort:this._sortErrors,path:r.path},a)})}clone(t){const r=super.clone(t);return r.fields=ae({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),a=r.fields;for(let[n,s]of Object.entries(this.fields)){const l=a[n];l===void 0?a[n]=s:l instanceof R&&s instanceof R&&(a[n]=s.concat(l))}return r.withMutation(()=>r.shape(a,this._excludedEdges))}getDefaultFromShape(){let t={};return this._nodes.forEach(r=>{const a=this.fields[r];t[r]="default"in a?a.getDefault():void 0}),t}_getDefault(){if("default"in this.spec)return super._getDefault();if(this._nodes.length)return this.getDefaultFromShape()}shape(t,r=[]){let a=this.clone(),n=Object.assign(a.fields,t);return a.fields=n,a._sortErrors=js(Object.keys(n)),r.length&&(Array.isArray(r[0])||(r=[r]),a._excludedEdges=[...a._excludedEdges,...r]),a._nodes=j_(n,a._excludedEdges),a}pick(t){const r={};for(const a of t)this.fields[a]&&(r[a]=this.fields[a]);return this.clone().withMutation(a=>(a.fields={},a.shape(r)))}omit(t){const r=this.clone(),a=r.fields;r.fields={};for(const n of t)delete a[n];return r.withMutation(()=>r.shape(a))}from(t,r,a){let n=st.getter(t,!0);return this.transform(s=>{if(s==null)return s;let l=s;return Be(s,t)&&(l=ae({},s),a||delete l[t],l[r]=n(s)),l})}noUnknown(t=!0,r=Ct.noUnknown){typeof t=="string"&&(r=t,t=!0);let a=this.test({name:"noUnknown",exclusive:!0,message:r,test(n){if(n==null)return!0;const s=q_(this.schema,n);return!t||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return a.spec.noUnknown=t,a}unknown(t=!0,r=Ct.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>r&&U_(r,(a,n)=>t(n)))}camelCase(){return this.transformKeys(O_)}snakeCase(){return this.transformKeys(fa)}constantCase(){return this.transformKeys(t=>fa(t).toUpperCase())}describe(){let t=super.describe();return t.fields=ms(this.fields,r=>r.describe()),t}}function Re(e){return new qs(e)}Re.prototype=qs.prototype;const V_={task:{title:"",description:"",mode:"import",status:"created",startTime:null,endTime:null,recordType:"",serializer:""},metadata:null,files:[]},H_=Re({task:Re({title:ge().required("Title is required"),recordType:ge().required("Record type is required"),serializer:ge().required("Serializer is required"),mode:ge().required("Mode is required")}),metadata:Re().nullable()}),K_=({onSubmit:e})=>{const[t,r]=y.useState(void 0),a=async n=>{try{await _E(n.task,n.metadata,n.files,{autoValidate:!!n.metadata,onProgress(s,l){r({[s]:l})}}),e==null||e()}catch(s){throw console.error("Error creating import task:",s),s}};return i.default.createElement(te.BaseForm,{formik:{initialValues:V_,validationSchema:H_,onSubmit:a}},i.default.createElement(IE,{progress:t}))},Gs=()=>{const[e,t]=y.useState(!1),{refreshSearch:r}=at(),a=y.useCallback(()=>{t(!1),r()},[r]);return i.default.createElement(u.Modal,{closeIcon:!0,onClose:()=>t(!1),onOpen:()=>t(!0),open:e,trigger:i.default.createElement(u.Button,{color:"green",icon:!0,labelPosition:"left"},i.default.createElement(u.Icon,{name:"add"}),"New Import")},i.default.createElement(u.ModalHeader,null,"New Import Task"),i.default.createElement(u.ModalContent,null,i.default.createElement(K_,{onSubmit:a})))},Y_=({currentQueryState:e,updateQueryState:t})=>{var s;const r=[{key:"all",label:"All",value:null},{key:"pending",label:"Pending",value:"pending"},{key:"success",label:"Success",value:"success"},{key:"failed",label:"Failed",value:"failed"}],a=(s=e.filters)==null?void 0:s.find(l=>l[0]==="status"),n=l=>{var c;const o=((c=e.filters)==null?void 0:c.filter(d=>d[0]!=="status"))||[];l&&o.push(["status",l]),t({...e,filters:o,page:1})};return i.default.createElement(u.Menu,{activeIndex:0,compact:!0,size:"tiny"},r.map(({key:l,label:o,value:c})=>i.default.createElement(u.Menu.Item,{key:l,name:l,active:(a==null?void 0:a[1])===c||c===null&&!a,onClick:()=>n(c)},o)))},Vs=$n(Y_),W_=({appId:e="search"})=>{const{showFacets:t,showImportModal:r}=at().config;return i.default.createElement(b.default,{id:`${e}.SearchBarRow`},i.default.createElement("section",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"1rem",paddingBlock:"0.5rem",minBlockSize:"3rem"},"aria-label":"Records search and filters"},t&&i.default.createElement("div",{style:{flex:"0 0 auto"}},i.default.createElement(Vs,null)),i.default.createElement("div",{style:{flex:"1 1 auto",minInlineSize:"15rem"}},i.default.createElement(eE,{autofocus:!0,actionProps:{icon:"search",content:"Search",className:"search","aria-label":"Submit search",type:"submit"},placeholder:"Search…","aria-describedby":"search-instructions"})),r&&i.default.createElement("div",{style:{flex:"0 0 auto"}},i.default.createElement(Gs,null))))},Z_=()=>{const{config:e}=at();return i.default.createElement(u.Grid,null,i.default.createElement(u.Grid.Row,{verticalAlign:"middle"},i.default.createElement(u.Grid.Column,{width:4,textAlign:"left"},i.default.createElement(Ov,{label:t=>i.default.createElement("div",null,t," item(s)")})),i.default.createElement(u.Grid.Column,{width:8,textAlign:"center"},i.default.createElement(Mv,{options:{size:"mini"}})),i.default.createElement(u.Grid.Column,{width:4,textAlign:"right"},i.default.createElement(Zv,{values:e.paginationOptions.resultsPerPage,label:t=>i.default.createElement("p",null,t," results per page")}))))},ir=({config:e={},overriddenComponents:t={}})=>{var s,l,o,c,d;const r={...G,...e,initialQueryState:{...G.initialQueryState,...e.initialQueryState},layoutOptions:{...G.layoutOptions,...e.layoutOptions},paginationOptions:{...G.paginationOptions,...e.paginationOptions,resultsPerPage:((s=e.paginationOptions)==null?void 0:s.resultsPerPage)||G.paginationOptions.resultsPerPage},searchApi:{...G.searchApi,...e.searchApi,axios:{...G.searchApi.axios,...(l=e.searchApi)==null?void 0:l.axios,headers:{...G.searchApi.axios.headers,...(c=(o=e.searchApi)==null?void 0:o.axios)==null?void 0:c.headers}},invenio:{...G.searchApi.invenio,...(d=e.searchApi)==null?void 0:d.invenio}},showFacets:e.showFacets??!0,showImportModal:e.showImportModal??!0,showSearchFooter:e.showSearchFooter??!0},a=new Ha(r.searchApi),n={[`${r.appId}.ResultsList.item`]:TE,[`${r.appId}.ResultsList.container`]:wE,[`${r.appId}.SearchFacets`]:Vs,...t};return i.default.createElement(ga.OverridableContext.Provider,{value:n},i.default.createElement(mv,{appName:r.appId,searchApi:a,initialQueryState:r.initialQueryState},i.default.createElement(cE,{config:r},i.default.createElement(W_,{appId:r.appId}),i.default.createElement(Hv,null,i.default.createElement(kv,null),i.default.createElement(On,null)),r.showSearchFooter&&i.default.createElement(Z_,null))))},J_=e=>y.useMemo(()=>{const{totalRecords:t,validatedRecords:r,errorRecords:a,successRecords:n}=e,s=t>0?r/t*100:0,l=t>0?a/t*100:0,o=t>0?n/t*100:0;return[{color:"blue",icon:"check circle",title:"Validation",value:r,label:`of ${t} Validated`,progress:s,progressLabel:`${s.toFixed(1)}% Complete`},{color:"red",icon:"exclamation triangle",title:"Errors",value:a,label:"with Errors",progress:l,progressLabel:`${l.toFixed(1)}% of Total`},{color:"green",icon:"upload",title:"Import",value:n,label:"Successfully Imported",progress:o,progressLabel:`${o.toFixed(1)}% Complete`}]},[e]),X_=({totalRecords:e=0,validatedRecords:t=0,errorRecords:r=0,successRecords:a=0,showWhenEmpty:n=!1,className:s="",style:l={}})=>{const o=J_({totalRecords:e,validatedRecords:t,errorRecords:r,successRecords:a});return e===0&&!n?null:i.default.createElement(u.Segment,{basic:!0,className:s,style:l},i.default.createElement(u.Grid,{columns:3,stackable:!0},o.map(c=>i.default.createElement(u.Grid.Column,{key:c.title},i.default.createElement(u.Card,{fluid:!0},i.default.createElement(u.Card.Content,null,i.default.createElement(u.Card.Header,{textAlign:"center"},c.title),i.default.createElement(u.Card.Description,{textAlign:"center"},i.default.createElement(u.Statistic,{size:"large",color:c.color,style:{margin:"1rem 0"}},i.default.createElement(u.Statistic.Value,null,c.value),i.default.createElement(u.Statistic.Label,null,c.label)),i.default.createElement(u.Segment,{basic:!0,textAlign:"center"},i.default.createElement(u.Segment.Inline,{basic:!0,size:"small",style:{marginBottom:"0.5rem"}},c.progressLabel),i.default.createElement(u.Progress,{percent:c.progress,color:c.color,size:"small",style:{marginBottom:"0.5rem"}})))))))))},Hs=y.createContext(void 0),e1=({taskId:e,children:t})=>i.default.createElement(Hs.Provider,{value:{taskId:e}},i.default.createElement("div",{style:{paddingBlockStart:"1rem",display:"flex",flexDirection:"column",gap:"1rem"}},t)),Ks=()=>{const e=y.useContext(Hs);if(!e)throw new Error("useTaskDetails must be used within a TaskDetailsProvider");return e},t1=({children:e})=>i.default.createElement(u.Table,{padded:!0,size:"small",compact:!0},i.default.createElement(u.TableHeader,null,i.default.createElement(u.TableRow,null,i.default.createElement(u.TableHeaderCell,null,"ID"),i.default.createElement(u.TableHeaderCell,null,"Title"),i.default.createElement(u.TableHeaderCell,null,"Status"),i.default.createElement(u.TableHeaderCell,null))),i.default.createElement(u.TableBody,null,e)),r1=({record:e})=>i.default.createElement(u.Segment,{basic:!0},i.default.createElement(u.List,null,i.default.createElement(u.List.Item,null,i.default.createElement(u.List.Icon,{name:"tag"}),i.default.createElement(u.List.Content,null,i.default.createElement(u.List.Header,null,"Record ID"),i.default.createElement(u.List.Description,null,e.id))),i.default.createElement(u.List.Item,null,i.default.createElement(u.List.Icon,{name:"calendar"}),i.default.createElement(u.List.Content,null,i.default.createElement(u.List.Header,null,"Created"),i.default.createElement(u.List.Description,null,Ne(e.created)))),i.default.createElement(u.List.Item,null,i.default.createElement(u.List.Icon,{name:"edit"}),i.default.createElement(u.List.Content,null,i.default.createElement(u.List.Header,null,"Updated"),i.default.createElement(u.List.Description,null,Ne(e.updated)))),e.generated_record_id&&i.default.createElement(u.List.Item,null,i.default.createElement(u.List.Icon,{name:"file alternate"}),i.default.createElement(u.List.Content,null,i.default.createElement(u.List.Header,null,"Generated Record ID"),i.default.createElement(u.List.Description,null,i.default.createElement("a",{href:`/records/${e.generated_record_id}`,target:"_blank",rel:"noopener noreferrer"},"/",e.generated_record_id)))))),a1=({record:e})=>i.default.createElement(u.Segment,{basic:!0},e.errors.map((t,r)=>i.default.createElement(u.Message,{key:`error-${r}-${t.type}`,negative:!0},i.default.createElement(u.Message.Header,null,t.type),i.default.createElement("p",null,i.default.createElement("strong",null,"Location:")," ",t.loc),i.default.createElement("p",null,i.default.createElement("strong",null,"Message:")," ",t.msg)))),n1=({record:e})=>{var r,a;return(((r=e.record_files)==null?void 0:r.length)??0)>0||(((a=e.validated_record_files)==null?void 0:a.length)??0)>0?i.default.createElement(u.Segment,{basic:!0},e.record_files&&e.record_files.length>0&&i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Header,{as:"h4"},i.default.createElement(u.Icon,{name:"file"}),"File List"),i.default.createElement(u.List,{bulleted:!0},e.record_files.map(n=>i.default.createElement(u.List.Item,{key:`file-${n}`},i.default.createElement(u.List.Content,null,n))))),e.validated_record_files&&e.validated_record_files.length>0&&i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Header,{as:"h4"},i.default.createElement(u.Icon,{name:"checkmark"}),"Validated Files"),i.default.createElement(u.Table,{celled:!0},i.default.createElement(u.Table.Header,null,i.default.createElement(u.Table.Row,null,i.default.createElement(u.Table.HeaderCell,null,"File"),i.default.createElement(u.Table.HeaderCell,null,"Size"),i.default.createElement(u.Table.HeaderCell,null,"Origin"),i.default.createElement(u.Table.HeaderCell,null,"Path"))),i.default.createElement(u.Table.Body,null,e.validated_record_files.map((n,s)=>i.default.createElement(u.Table.Row,{key:`validated-${n.key}-${s}`},i.default.createElement(u.Table.Cell,null,i.default.createElement(u.Icon,{name:"file"}),n.key),i.default.createElement(u.Table.Cell,null,(n.size/1024).toFixed(2)," KB"),i.default.createElement(u.Table.Cell,null,n.origin),i.default.createElement(u.Table.Cell,{style:{wordBreak:"break-all"}},n.full_path))))))):i.default.createElement(u.Message,{info:!0},i.default.createElement(u.Message.Header,null,"No Files"),i.default.createElement("p",null,"No files are associated with this record."))},s1=({record:e})=>i.default.createElement(u.Table,{celled:!0,striped:!0},i.default.createElement(u.Table.Header,null,i.default.createElement(u.Table.Row,null,i.default.createElement(u.Table.HeaderCell,null,"Field"),i.default.createElement(u.Table.HeaderCell,null,"Value"))),i.default.createElement(u.Table.Body,null,Object.entries(e.src_data).filter(([t,r])=>r&&r.trim()!=="").map(([t,r])=>i.default.createElement(u.Table.Row,{key:t},i.default.createElement(u.Table.Cell,null,i.default.createElement("strong",null,t)),i.default.createElement(u.Table.Cell,{style:{wordBreak:"break-word"}},r))))),i1=({record:e,open:t,onClose:r,initialTab:a=0})=>{const[n,s]=y.useState(a);y.useEffect(()=>{t&&s(a)},[t,a]);const l=(d,f)=>{const p=typeof f.activeIndex=="number"?f.activeIndex:0;s(p)},o=[{menuItem:{key:"basic",icon:"info circle",content:"Basic Info"},render:()=>i.default.createElement(u.Tab.Pane,null,i.default.createElement(r1,{record:e}))},{menuItem:{key:"source",icon:"database",content:"Source Data"},render:()=>i.default.createElement(u.Tab.Pane,null,i.default.createElement(s1,{record:e}))},...e.errors&&e.errors.length>0?[{menuItem:{key:"errors",icon:"exclamation triangle",content:`Errors (${e.errors.length})`},render:()=>i.default.createElement(u.Tab.Pane,null,i.default.createElement(a1,{record:e}))}]:[],{menuItem:{key:"files",icon:"file",content:"Files"},render:()=>i.default.createElement(u.Tab.Pane,null,i.default.createElement(n1,{record:e}))}],c=()=>{var d,f,p,h,g;return((f=(d=e.serializer_data)==null?void 0:d.metadata)==null?void 0:f.title)||((h=(p=e.transformed_data)==null?void 0:p.metadata)==null?void 0:h.title)||((g=e.src_data)==null?void 0:g.title)||`Record ${e.id}`};return i.default.createElement(u.Modal,{centered:!1,open:t,onClose:r,size:"large",closeIcon:!0},i.default.createElement(u.Modal.Header,null,i.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i.default.createElement("div",null,i.default.createElement(u.Icon,{name:"file alternate outline"}),c()),i.default.createElement(dE,{status:e.status}))),i.default.createElement(u.Modal.Content,{scrolling:!0},i.default.createElement(u.Tab,{panes:o,activeIndex:n,onTabChange:l})),i.default.createElement(u.Modal.Actions,null,i.default.createElement(u.Button,{onClick:r},i.default.createElement(u.Icon,{name:"close"}),"Close")))},Ys=({result:e,index:t})=>{var E;const[r,a]=y.useState("idle"),[n,s]=y.useState(!1),[l,o]=y.useState(0);if(!e)return null;const c=async()=>{try{a("copying"),await navigator.clipboard.writeText(e.id),a("copied"),setTimeout(()=>{a("idle")},2e3)}catch{a("idle")}},d=e.errors&&e.errors.length>0,f=Xn(e.status),p=()=>d?2:-1,h=m=>m==="red"?"times":m==="green"||m==="blue"?"check":"question",g=[...d?[{key:"view-errors",text:"View Errors",value:"view-errors",icon:"exclamation triangle",onClick:()=>{o(p()),s(!0)}}]:[],{key:"run",disabled:e.status==="success",text:"Run Record",value:"run",icon:"play",onClick:async()=>{try{await xE(e.id),console.log(`Record ${e.id} is being processed.`)}catch(m){console.error("Error running record:",m)}}},{key:"view-details",text:"View Details",value:"view-details",icon:"info circle",onClick:()=>{o(0),s(!0)}}];return i.default.createElement(u.TableRow,{key:t},i.default.createElement(u.TableCell,null,i.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"}},i.default.createElement("code",{style:{fontSize:"0.9em",color:"#666"}},e.id.length>20?`${e.id.substring(0,20)}…`:e.id),i.default.createElement(u.Popup,{content:r==="copied"?"Copied!":"Copy ID",trigger:i.default.createElement(u.Button,{size:"mini",circular:!0,icon:!0,loading:r==="copying",onClick:c,color:r==="copied"?"green":void 0},i.default.createElement(u.Icon,{name:r==="copied"?"check":"copy"})),position:"top center",size:"mini"}))),i.default.createElement(u.TableCell,null,i.default.createElement("div",{style:{maxWidth:"300px"}},((E=e.src_data)==null?void 0:E.title)||i.default.createElement("em",{style:{color:"#999"}},"No Title Available"))),i.default.createElement(u.TableCell,null,i.default.createElement(u.Label,{color:f,size:"small"},i.default.createElement(u.Icon,{name:h(f)}),me(e.status)),d&&i.default.createElement(u.Popup,{content:`${e.errors.length} error${e.errors.length>1?"s":""} found`,trigger:i.default.createElement(u.Icon,{name:"exclamation triangle",color:"red",style:{marginLeft:"0.5rem",cursor:"help"}}),position:"top center",size:"mini"})),i.default.createElement(u.TableCell,{textAlign:"right"},i.default.createElement(u.Dropdown,{button:!0,className:"icon",floating:!0,labeled:!0,icon:"ellipsis horizontal",text:"Actions",size:"mini"},i.default.createElement(u.Dropdown.Menu,null,g.map(m=>i.default.createElement(u.Dropdown.Item,{key:m.key,icon:m.icon,text:m.text,disabled:m.disabled,onClick:m.onClick})))),i.default.createElement(i1,{record:e,open:n,onClose:()=>s(!1),initialTab:l})))},l1=()=>{const{taskId:e}=Ks(),t={"search.SearchBarRow":()=>null,"search.ResultsList.container":t1,"search.ResultsList.item":Ys};return i.default.createElement("div",null,i.default.createElement(u.Header,{as:"h3"},"Task Records"),i.default.createElement(ir,{config:{searchApi:{axios:{url:"/api/importer-records",withCredentials:!0}},initialQueryState:{hiddenParams:[["q",`task.id:${e}`]]},showFacets:!1,showImportModal:!1},overriddenComponents:t}))},o1=({fileInputRef:e,accept:t,maxFiles:r,maxTotalSize:a,disabled:n=!1,isDragOver:s,uploadFiles:l,onInputChange:o,onDragOver:c,onDragLeave:d,onDrop:f,onFileDialogOpen:p})=>i.default.createElement(y.Fragment,null,i.default.createElement("input",{ref:e,type:"file",multiple:!0,accept:t,onChange:o,style:{display:"none"},disabled:n}),i.default.createElement(u.Segment,{placeholder:!0,className:`file-drop-zone ${s?"drag-over":""}`,onDragOver:c,onDragLeave:d,onDrop:f,style:{minHeight:"120px",border:s?"2px dashed #2185d0":"2px dashed #d4d4d5",backgroundColor:s?"#f8f9fa":"transparent",cursor:n?"not-allowed":"pointer",opacity:n?.6:1},onClick:p},i.default.createElement("div",{style:{textAlign:"center",padding:"20px"}},i.default.createElement(u.Icon,{name:"cloud upload",size:"huge",color:s?"blue":"grey"}),i.default.createElement("div",{style:{marginTop:"10px"}},i.default.createElement("p",null,i.default.createElement("strong",null,"Drop files here or click to select")),i.default.createElement("p",{style:{fontSize:"12px",color:"#666"}},"Max files: ",r," | Max total: ",nt(a)),l.length>0&&i.default.createElement("p",{style:{fontSize:"12px",color:"#2185d0",marginTop:"8px"}},i.default.createElement("strong",null,l.length," files selected •"," ",rr(l)," total")))))),Ws=({onUploadError:e}={})=>{const[t,r]=y.useState([]),[a]=y.useState(!1),n=y.useCallback((c,d,f)=>f&&c.size===0?"Empty files are not allowed":d&&!d.split(",").map(g=>g.trim()).some(g=>g.startsWith(".")?c.name.toLowerCase().endsWith(g.toLowerCase()):c.type.match(new RegExp(g.replace("*",".*"))))?`File type not accepted. Accepted types: ${d}`:null,[]),s=y.useCallback((c,d,f,p,h)=>{const g=[],E=[];for(const m of c){if(f&&t.length+g.length>=f){E.push(`Maximum ${f} files allowed`);break}const S=n(m,d,h);if(S){E.push(`${m.name}: ${S}`);continue}if(t.some($=>$.file.name===m.name&&$.file.size===m.size)){E.push(`${m.name}: File already selected`);continue}if(p&&tr([...t,...g])+m.size>p){E.push(`Total size would exceed maximum of ${(p/1024/1024).toFixed(2)}MB`);break}g.push({file:m,id:`${m.name}-${m.size}-${Date.now()}`})}return E.length>0&&(e==null||e(E.join(", "))),r(m=>[...m,...g]),g},[t,n,e]),l=y.useCallback(c=>{r(d=>d.filter(f=>f.id!==c))},[]),o=y.useCallback(()=>{r([])},[]);return{uploadFiles:t,isUploading:a,addFiles:s,removeFile:l,clearFiles:o}},u1=({uploadFiles:e,isUploading:t,handleRemoveFile:r,handleClearFiles:a})=>i.default.createElement(u.Segment,null,i.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"}},i.default.createElement("strong",null,"Selected Files (",e.length,") •"," ",rr(e)),i.default.createElement(u.Button,{size:"mini",basic:!0,icon:"trash",content:"Clear All",onClick:a,disabled:t})),i.default.createElement(u.List,{divided:!0},e.map(n=>i.default.createElement(u.List.Item,{key:n.id},i.default.createElement(u.List.Content,null,i.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},i.default.createElement("div",{style:{flex:1}},i.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},i.default.createElement(u.Icon,{name:"file"}),i.default.createElement("span",null,n.file.name),i.default.createElement(u.Label,{size:"mini",basic:!0},nt(n.file.size))),n.error&&i.default.createElement(u.Message,{negative:!0,size:"mini",style:{marginTop:"5px"}},n.error)),i.default.createElement(u.Button,{size:"mini",basic:!0,icon:"close",onClick:()=>r(n.id),disabled:t}))))))),lr=({onChange:e,accept:t=".csv,.json,.xlsx,.txt",maxFiles:r=5,maxTotalSize:a=50*1024*1024,skipEmptyFiles:n=!0,disabled:s=!1,error:l})=>{const o=y.useRef(null),[c,d]=i.default.useState(!1),[f,p]=i.default.useState(null),{uploadFiles:h,isUploading:g,addFiles:E,removeFile:m,clearFiles:S}=Ws({onUploadComplete:T=>{e(T)},onUploadError:T=>{console.error("Upload error:",T),p(T)}}),v=y.useCallback(T=>{if(!T||T.length===0)return;p(null);const it=Array.from(T),ee=E(it,t,r,a,n);if(ee.length>0){const Js=[...h,...ee].map(Xs=>Xs.file);e(Js)}},[E,t,r,a,n,e,h]),$=y.useCallback(T=>{v(T.target.files),o.current&&(o.current.value="")},[v]),w=y.useCallback(T=>{T.preventDefault(),s||d(!0)},[s]),O=y.useCallback(T=>{T.preventDefault(),d(!1)},[]),z=y.useCallback(T=>{T.preventDefault(),d(!1),!s&&v(T.dataTransfer.files)},[s,v]),F=y.useCallback(()=>{var T;s||(T=o.current)==null||T.click()},[s]),Y=y.useCallback(T=>{m(T),p(null);const it=h.filter(ee=>ee.id!==T).map(ee=>ee.file);e(it)},[m,h,e]),Ce=y.useCallback(()=>{S(),p(null),e([])},[S,e]);return i.default.createElement("div",null,i.default.createElement(o1,{fileInputRef:o,accept:t,maxFiles:r,maxTotalSize:a,isDragOver:c,disabled:s,uploadFiles:h,onInputChange:$,onDragOver:w,onDragLeave:O,onDrop:z,onFileDialogOpen:F}),(l||f)&&i.default.createElement(u.Message,{negative:!0,size:"small"},i.default.createElement(u.Icon,{name:"exclamation triangle"}),l||f),h.length>0&&i.default.createElement(u1,{uploadFiles:h,isUploading:g,handleRemoveFile:Y,handleClearFiles:Ce}))},c1=()=>{const{taskId:e}=Ks(),[t,r]=y.useState(null),[a,n]=y.useState([]),[s,l]=y.useState(!1),[o,c]=y.useState(null),d=g=>{var m;const E=((m=g.target.files)==null?void 0:m[0])||null;r(E||null)},f=g=>{n(g)},p=()=>{l(!1),r(null),n([]),c(null)},h=async()=>{if(!(!t&&a.length===0))try{await CE(e,t,a.length>0?a:void 0,{onProgress:(g,E)=>c({[g]:E}),onError:(g,E)=>{console.error(`Error during ${E}:`,g)}}),t&&await as(e,{autoExecute:!0,onProgress:(g,E)=>c({[g]:E}),onError:(g,E)=>{console.error(`Error during ${E}:`,g)}}),l(!1),r(null),n([])}catch(g){console.error("Error uploading content:",g)}};return i.default.createElement(u.Modal,{open:s,onOpen:()=>l(!0),onClose:p,size:"small",closeIcon:!0,trigger:i.default.createElement(u.Button,{icon:"upload",size:"tiny",content:"Upload Content"})},i.default.createElement(u.Header,{icon:!0},i.default.createElement(u.Icon,{name:"upload"}),"Upload Metadata & Files"),i.default.createElement(u.Modal.Content,null,i.default.createElement(u.Form,{onSubmit:h},i.default.createElement(u.Form.Field,null,i.default.createElement("label",{htmlFor:"fileInput"},"Select Metadata File (Optional)"),i.default.createElement("input",{id:"fileInput",type:"file",onChange:d,accept:".csv"}),t&&i.default.createElement("div",{style:{marginTop:"0.5rem",color:"#666"}},"Selected: ",t.name)),i.default.createElement(u.Form.Field,null,i.default.createElement("div",{style:{marginBottom:"8px",fontSize:"14px",fontWeight:"bold"}},"Additional Files (Optional)"),i.default.createElement(lr,{value:a,onChange:f,accept:"*",maxSize:10*1024*1024*1024,maxFiles:100})))),i.default.createElement(u.Modal.Actions,null,i.default.createElement("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:".5rem"}},o&&i.default.createElement(Kn,{progress:o}),i.default.createElement(u.Button,{onClick:p,color:"grey"},i.default.createElement(u.Icon,{name:"cancel"}),"Cancel"),i.default.createElement(u.Button,{onClick:h,color:"blue",disabled:!t&&a.length===0},i.default.createElement(u.Icon,{name:"upload"}),"Upload"))))},Zs=({taskId:e})=>{var h,g,E,m,S,v;const[t,r]=y.useState(null),{getStatus:a,isGettingStatus:n,runBulkImport:s,isBulkImporting:l,error:o}=ss(e,{onStatusChangeSuccess:r});if(y.useEffect(()=>{a()},[a]),n||l)return i.default.createElement(Yn,null);if(!t)return i.default.createElement(u.Message,{warning:!0,icon:!0},i.default.createElement(u.Icon,{name:"search"}),i.default.createElement(u.Message.Content,null,i.default.createElement(u.Message.Header,null,"Task Not Found"),"The requested task could not be found."));const c=((h=t.records_status)==null?void 0:h.total_records)||0,d=((g=t.records_status)==null?void 0:g.validated)||0,f=((E=t.records_status)==null?void 0:E.success)||0,p=(((m=t.records_status)==null?void 0:m["import failed"])||0)+(((S=t.records_status)==null?void 0:S["validation failed"])||0)+(((v=t.records_status)==null?void 0:v["serializer validation failed"])||0);return i.default.createElement(e1,{taskId:e},i.default.createElement(u.Container,{fluid:!0,verticalAlign:"top"},o&&i.default.createElement(u.Message,{negative:!0,icon:!0},i.default.createElement(u.Icon,{name:"exclamation triangle"}),i.default.createElement(u.Message.Content,null,i.default.createElement(u.Message.Header,null,"Error"),(o==null?void 0:o.message)||"An unknown error occurred")),i.default.createElement(u.Grid,null,i.default.createElement(u.Grid.Row,{verticalAlign:"top"},i.default.createElement(u.Grid.Column,{width:8,verticalAlign:"middle"},i.default.createElement("div",{style:{display:"flex",alignItems:"flex-start",gap:".5rem"}},i.default.createElement(u.Icon,{name:"tasks",circular:!0,size:"big"}),i.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start"}},i.default.createElement(u.Header,{as:"h2"},i.default.createElement(u.Header.Content,null,t.title)),t.status&&i.default.createElement(Wn,{size:"large",status:t.status},me(t.status))))),i.default.createElement(u.Grid.Column,{width:8,textAlign:"right"},i.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",gap:"1rem"}},i.default.createElement("div",null,i.default.createElement(u.Button,{size:"tiny",color:"blue",icon:"refresh",content:"Refresh",onClick:()=>a(),loading:n}),i.default.createElement(c1,null),i.default.createElement(u.Button,{size:"tiny",color:"green",icon:"play",onClick:async()=>{await s(),await a()},loading:l,content:"Run Task"}))))),t.description&&i.default.createElement(u.Grid.Row,null,i.default.createElement(u.Grid.Column,{width:16},i.default.createElement(u.Message,{info:!0,icon:!0,size:"small"},i.default.createElement(u.Icon,{name:"info circle"}),i.default.createElement(u.Message.Content,null,i.default.createElement(u.Message.Header,null,"Notes"),t.description))))),c>0&&i.default.createElement(u.Segment,{basic:!0},i.default.createElement(X_,{totalRecords:c,validatedRecords:d,errorRecords:p,successRecords:f}))),i.default.createElement(l1,null))},d1={Search:ir,TaskDetails:Zs},f1={CREATED:"created",VALIDATING:"validating",SERIALIZER_VALIDATION_FAILED:"serializer validation failed",VALIDATION_FAILED:"validation failed",VALIDATED:"validated",IMPORT_FAILED:"import failed",IMPORTED:"success"},p1={CREATED:"created",VALIDATING:"validating",VALIDATION_FAILED:"validated with failures",VALIDATED:"validated",IMPORTING:"importing",IMPORT_FAILED:"imported with failures",SUCCESS:"success",DAMAGED:"damaged"},h1={CREATING_TASK:"Creating Task",UPLOADING_METADATA:"Uploading Metadata",UPLOADING_FILES:"Uploading Files",UPDATING_METADATA:"Updating Metadata",UPDATING_FILES:"Updating Files",VALIDATING:"Validating",EXECUTING:"Executing",UPDATING:"Updating"};exports.BulkImporter=d1;exports.FileUploader=lr;exports.ImportModal=Gs;exports.ImporterTaskStates=p1;exports.InvenioImporterRecordStatus=f1;exports.OrchestrationStepsEnum=h1;exports.Search=ir;exports.TaskDetails=Zs;exports.TaskRecordItem=Ys;exports.capitalizeFirstLetter=me;exports.createSearchApi=hE;exports.createSearchApiConfig=gE;exports.formatDate=Ne;exports.formatFileSize=nt;exports.getCsrfToken=Jn;exports.getStatusColor=Xn;exports.getTotalSize=tr;exports.getTotalSizeFormatted=rr;exports.useFileUploader=Ws;
