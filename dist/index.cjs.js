"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const y=require("react"),dn=require("react-overridable"),Ys=require("axios"),Ws=require("qs"),T=require("react-redux"),d=require("semantic-ui-react"),lt=require("redux"),Zs=require("redux-thunk"),Js=require("lodash"),ee=require("react-invenio-forms"),Xs=require("formik"),ae=e=>e&&e.__esModule?e:{default:e},o=ae(y),E=ae(dn),Fe=ae(Ys),se=ae(Ws),ei=ae(Zs),ti=ae(Js);var _e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function I(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ri=Object.prototype;function ni(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ri;return e===r}var Me=ni;function ai(e,t){return function(r){return e(t(r))}}var fn=ai,si=fn,ii=si(Object.keys,Object),oi=ii,li=Me,ui=oi,ci=Object.prototype,di=ci.hasOwnProperty;function fi(e){if(!li(e))return ui(e);var t=[];for(var r in Object(e))di.call(e,r)&&r!="constructor"&&t.push(r);return t}var pn=fi,pi=typeof _e=="object"&&_e&&_e.Object===Object&&_e,hn=pi,hi=hn,gi=typeof self=="object"&&self&&self.Object===Object&&self,mi=hi||gi||Function("return this")(),z=mi,yi=z,vi=yi.Symbol,ie=vi,nr=ie,gn=Object.prototype,bi=gn.hasOwnProperty,Ei=gn.toString,fe=nr?nr.toStringTag:void 0;function Si(e){var t=bi.call(e,fe),r=e[fe];try{e[fe]=void 0;var n=!0}catch{}var a=Ei.call(e);return n&&(t?e[fe]=r:delete e[fe]),a}var $i=Si,_i=Object.prototype,Ci=_i.toString;function xi(e){return Ci.call(e)}var wi=xi,ar=ie,Ti=$i,Fi=wi,Ii="[object Null]",Ai="[object Undefined]",sr=ar?ar.toStringTag:void 0;function Oi(e){return e==null?e===void 0?Ai:Ii:sr&&sr in Object(e)?Ti(e):Fi(e)}var Y=Oi;function Ri(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var H=Ri;const Pi=I(H);var ki=Y,Di=H,Li="[object AsyncFunction]",Ui="[object Function]",Ni="[object GeneratorFunction]",Bi="[object Proxy]";function Mi(e){if(!Di(e))return!1;var t=ki(e);return t==Ui||t==Ni||t==Li||t==Bi}var mn=Mi,zi=z,Qi=zi["__core-js_shared__"],ji=Qi,nt=ji,ir=function(){var e=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function qi(e){return!!ir&&ir in e}var Gi=qi,Vi=Function.prototype,Hi=Vi.toString;function Ki(e){if(e!=null){try{return Hi.call(e)}catch{}try{return e+""}catch{}}return""}var yn=Ki,Yi=mn,Wi=Gi,Zi=H,Ji=yn,Xi=/[\\^$.*+?()[\]{}|]/g,eo=/^\[object .+?Constructor\]$/,to=Function.prototype,ro=Object.prototype,no=to.toString,ao=ro.hasOwnProperty,so=RegExp("^"+no.call(ao).replace(Xi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function io(e){if(!Zi(e)||Wi(e))return!1;var t=Yi(e)?so:eo;return t.test(Ji(e))}var oo=io;function lo(e,t){return e==null?void 0:e[t]}var uo=lo,co=oo,fo=uo;function po(e,t){var r=fo(e,t);return co(r)?r:void 0}var J=po,ho=J,go=z,mo=ho(go,"DataView"),yo=mo,vo=J,bo=z,Eo=vo(bo,"Map"),wt=Eo,So=J,$o=z,_o=So($o,"Promise"),Co=_o,xo=J,wo=z,To=xo(wo,"Set"),Fo=To,Io=J,Ao=z,Oo=Io(Ao,"WeakMap"),Ro=Oo,ut=yo,ct=wt,dt=Co,ft=Fo,pt=Ro,vn=Y,oe=yn,or="[object Map]",Po="[object Object]",lr="[object Promise]",ur="[object Set]",cr="[object WeakMap]",dr="[object DataView]",ko=oe(ut),Do=oe(ct),Lo=oe(dt),Uo=oe(ft),No=oe(pt),W=vn;(ut&&W(new ut(new ArrayBuffer(1)))!=dr||ct&&W(new ct)!=or||dt&&W(dt.resolve())!=lr||ft&&W(new ft)!=ur||pt&&W(new pt)!=cr)&&(W=function(e){var t=vn(e),r=t==Po?e.constructor:void 0,n=r?oe(r):"";if(n)switch(n){case ko:return dr;case Do:return or;case Lo:return lr;case Uo:return ur;case No:return cr}return t});var ye=W;function Bo(e){return e!=null&&typeof e=="object"}var Q=Bo,Mo=Y,zo=Q,Qo="[object Arguments]";function jo(e){return zo(e)&&Mo(e)==Qo}var qo=jo,fr=qo,Go=Q,bn=Object.prototype,Vo=bn.hasOwnProperty,Ho=bn.propertyIsEnumerable,Ko=fr(function(){return arguments}())?fr:function(e){return Go(e)&&Vo.call(e,"callee")&&!Ho.call(e,"callee")},ze=Ko,Yo=Array.isArray,P=Yo;const En=I(P);var Wo=9007199254740991;function Zo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Wo}var Tt=Zo,Jo=mn,Xo=Tt;function el(e){return e!=null&&Xo(e.length)&&!Jo(e)}var Qe=el,Oe={exports:{}};function tl(){return!1}var rl=tl;Oe.exports;(function(e,t){var r=z,n=rl,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,l=i?r.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||n;e.exports=c})(Oe,Oe.exports);var je=Oe.exports,nl=Y,al=Tt,sl=Q,il="[object Arguments]",ol="[object Array]",ll="[object Boolean]",ul="[object Date]",cl="[object Error]",dl="[object Function]",fl="[object Map]",pl="[object Number]",hl="[object Object]",gl="[object RegExp]",ml="[object Set]",yl="[object String]",vl="[object WeakMap]",bl="[object ArrayBuffer]",El="[object DataView]",Sl="[object Float32Array]",$l="[object Float64Array]",_l="[object Int8Array]",Cl="[object Int16Array]",xl="[object Int32Array]",wl="[object Uint8Array]",Tl="[object Uint8ClampedArray]",Fl="[object Uint16Array]",Il="[object Uint32Array]",w={};w[Sl]=w[$l]=w[_l]=w[Cl]=w[xl]=w[wl]=w[Tl]=w[Fl]=w[Il]=!0;w[il]=w[ol]=w[bl]=w[ll]=w[El]=w[ul]=w[cl]=w[dl]=w[fl]=w[pl]=w[hl]=w[gl]=w[ml]=w[yl]=w[vl]=!1;function Al(e){return sl(e)&&al(e.length)&&!!w[nl(e)]}var Ol=Al;function Rl(e){return function(t){return e(t)}}var Ft=Rl,Re={exports:{}};Re.exports;(function(e,t){var r=hn,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,i=s&&r.process,l=function(){try{var u=a&&a.require&&a.require("util").types;return u||i&&i.binding&&i.binding("util")}catch{}}();e.exports=l})(Re,Re.exports);var It=Re.exports,Pl=Ol,kl=Ft,pr=It,hr=pr&&pr.isTypedArray,Dl=hr?kl(hr):Pl,At=Dl,Ll=pn,Ul=ye,Nl=ze,Bl=P,Ml=Qe,zl=je,Ql=Me,jl=At,ql="[object Map]",Gl="[object Set]",Vl=Object.prototype,Hl=Vl.hasOwnProperty;function Kl(e){if(e==null)return!0;if(Ml(e)&&(Bl(e)||typeof e=="string"||typeof e.splice=="function"||zl(e)||jl(e)||Nl(e)))return!e.length;var t=Ul(e);if(t==ql||t==Gl)return!e.size;if(Ql(e))return!Ll(e).length;for(var r in e)if(Hl.call(e,r))return!1;return!0}var Yl=Kl;const j=I(Yl);var Wl=Y,Zl=Q,Jl="[object Symbol]";function Xl(e){return typeof e=="symbol"||Zl(e)&&Wl(e)==Jl}var Ot=Xl,eu=P,tu=Ot,ru=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nu=/^\w*$/;function au(e,t){if(eu(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||tu(e)?!0:nu.test(e)||!ru.test(e)||t!=null&&e in Object(t)}var Rt=au,su=J,iu=su(Object,"create"),qe=iu,gr=qe;function ou(){this.__data__=gr?gr(null):{},this.size=0}var lu=ou;function uu(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var cu=uu,du=qe,fu="__lodash_hash_undefined__",pu=Object.prototype,hu=pu.hasOwnProperty;function gu(e){var t=this.__data__;if(du){var r=t[e];return r===fu?void 0:r}return hu.call(t,e)?t[e]:void 0}var mu=gu,yu=qe,vu=Object.prototype,bu=vu.hasOwnProperty;function Eu(e){var t=this.__data__;return yu?t[e]!==void 0:bu.call(t,e)}var Su=Eu,$u=qe,_u="__lodash_hash_undefined__";function Cu(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=$u&&t===void 0?_u:t,this}var xu=Cu,wu=lu,Tu=cu,Fu=mu,Iu=Su,Au=xu;function le(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}le.prototype.clear=wu;le.prototype.delete=Tu;le.prototype.get=Fu;le.prototype.has=Iu;le.prototype.set=Au;var Ou=le;function Ru(){this.__data__=[],this.size=0}var Pu=Ru;function ku(e,t){return e===t||e!==e&&t!==t}var Ge=ku,Du=Ge;function Lu(e,t){for(var r=e.length;r--;)if(Du(e[r][0],t))return r;return-1}var Ve=Lu,Uu=Ve,Nu=Array.prototype,Bu=Nu.splice;function Mu(e){var t=this.__data__,r=Uu(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Bu.call(t,r,1),--this.size,!0}var zu=Mu,Qu=Ve;function ju(e){var t=this.__data__,r=Qu(t,e);return r<0?void 0:t[r][1]}var qu=ju,Gu=Ve;function Vu(e){return Gu(this.__data__,e)>-1}var Hu=Vu,Ku=Ve;function Yu(e,t){var r=this.__data__,n=Ku(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Wu=Yu,Zu=Pu,Ju=zu,Xu=qu,ec=Hu,tc=Wu;function ue(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ue.prototype.clear=Zu;ue.prototype.delete=Ju;ue.prototype.get=Xu;ue.prototype.has=ec;ue.prototype.set=tc;var He=ue,mr=Ou,rc=He,nc=wt;function ac(){this.size=0,this.__data__={hash:new mr,map:new(nc||rc),string:new mr}}var sc=ac;function ic(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var oc=ic,lc=oc;function uc(e,t){var r=e.__data__;return lc(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Ke=uc,cc=Ke;function dc(e){var t=cc(this,e).delete(e);return this.size-=t?1:0,t}var fc=dc,pc=Ke;function hc(e){return pc(this,e).get(e)}var gc=hc,mc=Ke;function yc(e){return mc(this,e).has(e)}var vc=yc,bc=Ke;function Ec(e,t){var r=bc(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var Sc=Ec,$c=sc,_c=fc,Cc=gc,xc=vc,wc=Sc;function ce(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ce.prototype.clear=$c;ce.prototype.delete=_c;ce.prototype.get=Cc;ce.prototype.has=xc;ce.prototype.set=wc;var Pt=ce,Sn=Pt,Tc="Expected a function";function kt(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Tc);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var i=e.apply(this,n);return r.cache=s.set(a,i)||s,i};return r.cache=new(kt.Cache||Sn),r}kt.Cache=Sn;var Fc=kt,Ic=Fc,Ac=500;function Oc(e){var t=Ic(e,function(n){return r.size===Ac&&r.clear(),n}),r=t.cache;return t}var Rc=Oc,Pc=Rc,kc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dc=/\\(\\)?/g,Lc=Pc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(kc,function(r,n,a,s){t.push(a?s.replace(Dc,"$1"):n||r)}),t}),Uc=Lc;function Nc(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Bc=Nc,yr=ie,Mc=Bc,zc=P,Qc=Ot,jc=1/0,vr=yr?yr.prototype:void 0,br=vr?vr.toString:void 0;function $n(e){if(typeof e=="string")return e;if(zc(e))return Mc(e,$n)+"";if(Qc(e))return br?br.call(e):"";var t=e+"";return t=="0"&&1/e==-jc?"-0":t}var qc=$n,Gc=qc;function Vc(e){return e==null?"":Gc(e)}var ve=Vc,Hc=P,Kc=Rt,Yc=Uc,Wc=ve;function Zc(e,t){return Hc(e)?e:Kc(e,t)?[e]:Yc(Wc(e))}var Ye=Zc,Jc=Ot,Xc=1/0;function ed(e){if(typeof e=="string"||Jc(e))return e;var t=e+"";return t=="0"&&1/e==-Xc?"-0":t}var be=ed,td=Ye,rd=be;function nd(e,t){t=td(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[rd(t[r++])];return r&&r==n?e:void 0}var Dt=nd,ad=Dt;function sd(e,t,r){var n=e==null?void 0:ad(e,t);return n===void 0?r:n}var _n=sd;const pe=I(_n);function id(e,t){return e!=null&&t in Object(e)}var od=id,ld=9007199254740991,ud=/^(?:0|[1-9]\d*)$/;function cd(e,t){var r=typeof e;return t=t??ld,!!t&&(r=="number"||r!="symbol"&&ud.test(e))&&e>-1&&e%1==0&&e<t}var We=cd,dd=Ye,fd=ze,pd=P,hd=We,gd=Tt,md=be;function yd(e,t,r){t=dd(t,e);for(var n=-1,a=t.length,s=!1;++n<a;){var i=md(t[n]);if(!(s=e!=null&&r(e,i)))break;e=e[i]}return s||++n!=a?s:(a=e==null?0:e.length,!!a&&gd(a)&&hd(i,a)&&(pd(e)||fd(e)))}var Cn=yd,vd=od,bd=Cn;function Ed(e,t){return e!=null&&bd(e,t,vd)}var Lt=Ed;const Sd=I(Lt);var $d=J,_d=function(){try{var e=$d(Object,"defineProperty");return e({},"",{}),e}catch{}}(),xn=_d,Er=xn;function Cd(e,t,r){t=="__proto__"&&Er?Er(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Ze=Cd,xd=Ze,wd=Ge,Td=Object.prototype,Fd=Td.hasOwnProperty;function Id(e,t,r){var n=e[t];(!(Fd.call(e,t)&&wd(n,r))||r===void 0&&!(t in e))&&xd(e,t,r)}var Ut=Id,Ad=Ut,Od=Ze;function Rd(e,t,r,n){var a=!r;r||(r={});for(var s=-1,i=t.length;++s<i;){var l=t[s],u=n?n(r[l],e[l],l,r,e):void 0;u===void 0&&(u=e[l]),a?Od(r,l,u):Ad(r,l,u)}return r}var Ee=Rd;function Pd(e){return e}var Nt=Pd;function kd(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Dd=kd,Ld=Dd,Sr=Math.max;function Ud(e,t,r){return t=Sr(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=Sr(n.length-t,0),i=Array(s);++a<s;)i[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(i),Ld(e,this,l)}}var wn=Ud;function Nd(e){return function(){return e}}var Bd=Nd,Md=Bd,$r=xn,zd=Nt,Qd=$r?function(e,t){return $r(e,"toString",{configurable:!0,enumerable:!1,value:Md(t),writable:!0})}:zd,jd=Qd,qd=800,Gd=16,Vd=Date.now;function Hd(e){var t=0,r=0;return function(){var n=Vd(),a=Gd-(n-r);if(r=n,a>0){if(++t>=qd)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Kd=Hd,Yd=jd,Wd=Kd,Zd=Wd(Yd),Tn=Zd,Jd=Nt,Xd=wn,ef=Tn;function tf(e,t){return ef(Xd(e,t,Jd),e+"")}var rf=tf,nf=Ge,af=Qe,sf=We,of=H;function lf(e,t,r){if(!of(r))return!1;var n=typeof t;return(n=="number"?af(r)&&sf(t,r.length):n=="string"&&t in r)?nf(r[t],e):!1}var uf=lf,cf=rf,df=uf;function ff(e){return cf(function(t,r){var n=-1,a=r.length,s=a>1?r[a-1]:void 0,i=a>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(a--,s):void 0,i&&df(r[0],r[1],i)&&(s=a<3?void 0:s,a=1),t=Object(t);++n<a;){var l=r[n];l&&e(t,l,n,s)}return t})}var pf=ff;function hf(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var gf=hf,mf=gf,yf=ze,vf=P,bf=je,Ef=We,Sf=At,$f=Object.prototype,_f=$f.hasOwnProperty;function Cf(e,t){var r=vf(e),n=!r&&yf(e),a=!r&&!n&&bf(e),s=!r&&!n&&!a&&Sf(e),i=r||n||a||s,l=i?mf(e.length,String):[],u=l.length;for(var c in e)(t||_f.call(e,c))&&!(i&&(c=="length"||a&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Ef(c,u)))&&l.push(c);return l}var Fn=Cf;function xf(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var wf=xf,Tf=H,Ff=Me,If=wf,Af=Object.prototype,Of=Af.hasOwnProperty;function Rf(e){if(!Tf(e))return If(e);var t=Ff(e),r=[];for(var n in e)n=="constructor"&&(t||!Of.call(e,n))||r.push(n);return r}var Pf=Rf,kf=Fn,Df=Pf,Lf=Qe;function Uf(e){return Lf(e)?kf(e,!0):Df(e)}var Je=Uf,Nf=Ee,Bf=pf,Mf=Je,zf=Bf(function(e,t){Nf(t,Mf(t),e)}),Qf=zf,jf=Qf;const Pe=I(jf);function qf(e){return e&&e.length?e[0]:void 0}var Gf=qf;const Vf=I(Gf);var Hf=Ut,Kf=Ye,Yf=We,_r=H,Wf=be;function Zf(e,t,r,n){if(!_r(e))return e;t=Kf(t,e);for(var a=-1,s=t.length,i=s-1,l=e;l!=null&&++a<s;){var u=Wf(t[a]),c=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(a!=i){var p=l[u];c=n?n(p,u,l):void 0,c===void 0&&(c=_r(p)?p:Yf(t[a+1])?[]:{})}Hf(l,u,c),l=l[u]}return e}var Jf=Zf,Xf=Dt,ep=Jf,tp=Ye;function rp(e,t,r){for(var n=-1,a=t.length,s={};++n<a;){var i=t[n],l=Xf(e,i);r(l,i)&&ep(s,tp(i,e),l)}return s}var np=rp,ap=np,sp=Lt;function ip(e,t){return ap(e,t,function(r,n){return sp(e,n)})}var op=ip;function lp(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var Bt=lp,Cr=ie,up=ze,cp=P,xr=Cr?Cr.isConcatSpreadable:void 0;function dp(e){return cp(e)||up(e)||!!(xr&&e&&e[xr])}var fp=dp,pp=Bt,hp=fp;function In(e,t,r,n,a){var s=-1,i=e.length;for(r||(r=hp),a||(a=[]);++s<i;){var l=e[s];t>0&&r(l)?t>1?In(l,t-1,r,n,a):pp(a,l):n||(a[a.length]=l)}return a}var gp=In,mp=gp;function yp(e){var t=e==null?0:e.length;return t?mp(e,1):[]}var vp=yp,bp=vp,Ep=wn,Sp=Tn;function $p(e){return Sp(Ep(e,void 0,bp),e+"")}var _p=$p,Cp=op,xp=_p,wp=xp(function(e,t){return e==null?{}:Cp(e,t)}),Tp=wp;const Fp=I(Tp);var Ip=He;function Ap(){this.__data__=new Ip,this.size=0}var Op=Ap;function Rp(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Pp=Rp;function kp(e){return this.__data__.get(e)}var Dp=kp;function Lp(e){return this.__data__.has(e)}var Up=Lp,Np=He,Bp=wt,Mp=Pt,zp=200;function Qp(e,t){var r=this.__data__;if(r instanceof Np){var n=r.__data__;if(!Bp||n.length<zp-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Mp(n)}return r.set(e,t),this.size=r.size,this}var jp=Qp,qp=He,Gp=Op,Vp=Pp,Hp=Dp,Kp=Up,Yp=jp;function de(e){var t=this.__data__=new qp(e);this.size=t.size}de.prototype.clear=Gp;de.prototype.delete=Vp;de.prototype.get=Hp;de.prototype.has=Kp;de.prototype.set=Yp;var Mt=de;function Wp(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Zp=Wp,Jp=Fn,Xp=pn,eh=Qe;function th(e){return eh(e)?Jp(e):Xp(e)}var Se=th,rh=Ee,nh=Se;function ah(e,t){return e&&rh(t,nh(t),e)}var sh=ah,ih=Ee,oh=Je;function lh(e,t){return e&&ih(t,oh(t),e)}var uh=lh,ke={exports:{}};ke.exports;(function(e,t){var r=z,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,i=s?r.Buffer:void 0,l=i?i.allocUnsafe:void 0;function u(c,p){if(p)return c.slice();var f=c.length,h=l?l(f):new c.constructor(f);return c.copy(h),h}e.exports=u})(ke,ke.exports);var ch=ke.exports;function dh(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var fh=dh;function ph(e,t){for(var r=-1,n=e==null?0:e.length,a=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[a++]=i)}return s}var hh=ph;function gh(){return[]}var An=gh,mh=hh,yh=An,vh=Object.prototype,bh=vh.propertyIsEnumerable,wr=Object.getOwnPropertySymbols,Eh=wr?function(e){return e==null?[]:(e=Object(e),mh(wr(e),function(t){return bh.call(e,t)}))}:yh,zt=Eh,Sh=Ee,$h=zt;function _h(e,t){return Sh(e,$h(e),t)}var Ch=_h,xh=fn,wh=xh(Object.getPrototypeOf,Object),On=wh,Th=Bt,Fh=On,Ih=zt,Ah=An,Oh=Object.getOwnPropertySymbols,Rh=Oh?function(e){for(var t=[];e;)Th(t,Ih(e)),e=Fh(e);return t}:Ah,Rn=Rh,Ph=Ee,kh=Rn;function Dh(e,t){return Ph(e,kh(e),t)}var Lh=Dh,Uh=Bt,Nh=P;function Bh(e,t,r){var n=t(e);return Nh(e)?n:Uh(n,r(e))}var Pn=Bh,Mh=Pn,zh=zt,Qh=Se;function jh(e){return Mh(e,Qh,zh)}var kn=jh,qh=Pn,Gh=Rn,Vh=Je;function Hh(e){return qh(e,Vh,Gh)}var Kh=Hh,Yh=Object.prototype,Wh=Yh.hasOwnProperty;function Zh(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Wh.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Jh=Zh,Xh=z,eg=Xh.Uint8Array,Dn=eg,Tr=Dn;function tg(e){var t=new e.constructor(e.byteLength);return new Tr(t).set(new Tr(e)),t}var Qt=tg,rg=Qt;function ng(e,t){var r=t?rg(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var ag=ng,sg=/\w*$/;function ig(e){var t=new e.constructor(e.source,sg.exec(e));return t.lastIndex=e.lastIndex,t}var og=ig,Fr=ie,Ir=Fr?Fr.prototype:void 0,Ar=Ir?Ir.valueOf:void 0;function lg(e){return Ar?Object(Ar.call(e)):{}}var ug=lg,cg=Qt;function dg(e,t){var r=t?cg(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var fg=dg,pg=Qt,hg=ag,gg=og,mg=ug,yg=fg,vg="[object Boolean]",bg="[object Date]",Eg="[object Map]",Sg="[object Number]",$g="[object RegExp]",_g="[object Set]",Cg="[object String]",xg="[object Symbol]",wg="[object ArrayBuffer]",Tg="[object DataView]",Fg="[object Float32Array]",Ig="[object Float64Array]",Ag="[object Int8Array]",Og="[object Int16Array]",Rg="[object Int32Array]",Pg="[object Uint8Array]",kg="[object Uint8ClampedArray]",Dg="[object Uint16Array]",Lg="[object Uint32Array]";function Ug(e,t,r){var n=e.constructor;switch(t){case wg:return pg(e);case vg:case bg:return new n(+e);case Tg:return hg(e,r);case Fg:case Ig:case Ag:case Og:case Rg:case Pg:case kg:case Dg:case Lg:return yg(e,r);case Eg:return new n;case Sg:case Cg:return new n(e);case $g:return gg(e);case _g:return new n;case xg:return mg(e)}}var Ng=Ug,Bg=H,Or=Object.create,Mg=function(){function e(){}return function(t){if(!Bg(t))return{};if(Or)return Or(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),zg=Mg,Qg=zg,jg=On,qg=Me;function Gg(e){return typeof e.constructor=="function"&&!qg(e)?Qg(jg(e)):{}}var Vg=Gg,Hg=ye,Kg=Q,Yg="[object Map]";function Wg(e){return Kg(e)&&Hg(e)==Yg}var Zg=Wg,Jg=Zg,Xg=Ft,Rr=It,Pr=Rr&&Rr.isMap,em=Pr?Xg(Pr):Jg,tm=em,rm=ye,nm=Q,am="[object Set]";function sm(e){return nm(e)&&rm(e)==am}var im=sm,om=im,lm=Ft,kr=It,Dr=kr&&kr.isSet,um=Dr?lm(Dr):om,cm=um,dm=Mt,fm=Zp,pm=Ut,hm=sh,gm=uh,mm=ch,ym=fh,vm=Ch,bm=Lh,Em=kn,Sm=Kh,$m=ye,_m=Jh,Cm=Ng,xm=Vg,wm=P,Tm=je,Fm=tm,Im=H,Am=cm,Om=Se,Rm=Je,Pm=1,km=2,Dm=4,Ln="[object Arguments]",Lm="[object Array]",Um="[object Boolean]",Nm="[object Date]",Bm="[object Error]",Un="[object Function]",Mm="[object GeneratorFunction]",zm="[object Map]",Qm="[object Number]",Nn="[object Object]",jm="[object RegExp]",qm="[object Set]",Gm="[object String]",Vm="[object Symbol]",Hm="[object WeakMap]",Km="[object ArrayBuffer]",Ym="[object DataView]",Wm="[object Float32Array]",Zm="[object Float64Array]",Jm="[object Int8Array]",Xm="[object Int16Array]",ey="[object Int32Array]",ty="[object Uint8Array]",ry="[object Uint8ClampedArray]",ny="[object Uint16Array]",ay="[object Uint32Array]",C={};C[Ln]=C[Lm]=C[Km]=C[Ym]=C[Um]=C[Nm]=C[Wm]=C[Zm]=C[Jm]=C[Xm]=C[ey]=C[zm]=C[Qm]=C[Nn]=C[jm]=C[qm]=C[Gm]=C[Vm]=C[ty]=C[ry]=C[ny]=C[ay]=!0;C[Bm]=C[Un]=C[Hm]=!1;function Ie(e,t,r,n,a,s){var i,l=t&Pm,u=t&km,c=t&Dm;if(r&&(i=a?r(e,n,a,s):r(e)),i!==void 0)return i;if(!Im(e))return e;var p=wm(e);if(p){if(i=_m(e),!l)return ym(e,i)}else{var f=$m(e),h=f==Un||f==Mm;if(Tm(e))return mm(e,l);if(f==Nn||f==Ln||h&&!a){if(i=u||h?{}:xm(e),!l)return u?bm(e,gm(i,e)):vm(e,hm(i,e))}else{if(!C[f])return a?e:{};i=Cm(e,f,l)}}s||(s=new dm);var g=s.get(e);if(g)return g;s.set(e,i),Am(e)?e.forEach(function(S){i.add(Ie(S,t,r,S,e,s))}):Fm(e)&&e.forEach(function(S,m){i.set(m,Ie(S,t,r,m,e,s))});var v=c?u?Sm:Em:u?Rm:Om,b=p?void 0:v(e);return fm(b||e,function(S,m){b&&(m=S,S=e[m]),pm(i,m,Ie(S,t,r,m,e,s))}),i}var sy=Ie,iy=sy,oy=1,ly=4;function uy(e){return iy(e,oy|ly)}var cy=uy;const ne=I(cy);var dy=Y,fy=Q,py="[object Boolean]";function hy(e){return e===!0||e===!1||fy(e)&&dy(e)==py}var gy=hy;const my=I(gy);var yy=Y,vy=P,by=Q,Ey="[object String]";function Sy(e){return typeof e=="string"||!vy(e)&&by(e)&&yy(e)==Ey}var $y=Sy;const _y=I($y);var Cy=Y,xy=Q,wy="[object Number]";function Ty(e){return typeof e=="number"||xy(e)&&Cy(e)==wy}var Fy=Ty;const Iy=I(Fy);function jt(){}jt.prototype=new Error;class Lr{constructor(){this._addFilter=(t,r)=>{if(!Array.isArray(t))throw new Error(`Filter value "${t}" in query state must be an array.`);if(!(t.length===2||t.length===3))throw new Error(`Filter value "${t}" in query state must be an array of 2 or 3 elements`);const n=t.length===3;var a=t[0],s=t[1];if(n){if(!Array.isArray(t[2]))throw new Error(`Filter value "${t[2]}" in query state must be an array.`);s=s+"::"+t[2][1]}a in r?r[a].push(s):r[a]=[s]},this._addFilters=t=>{if(!Array.isArray(t))throw new Error(`Filters query state "${t}" must be an array.`);const r={};return t.forEach(n=>{this._addFilter(n,r)}),r},this.serialize=this.serialize.bind(this)}serialize(t){const{queryString:r,sortBy:n,sortOrder:a,page:s,size:i,filters:l,hiddenParams:u}=t;let c={};r!==null&&(c.q=r),n!==null&&(c.sort=n,a!==null&&(c.sort=a==="desc"?`-${n}`:n)),s>0&&(c.page=s),i>0&&(c.size=i),j(u)||Pe(c,this._addFilters(u));const p=this._addFilters(l);return Pe(c,p),se.default.stringify(c,{arrayFormat:"repeat"})}}class Ay{constructor(){this.serialize=this.serialize.bind(this)}serialize(t){const{aggregations:r,hits:n,...a}=t;return{aggregations:r||{},hits:n.hits,total:n.total,extras:a}}}function Ce(e,t){return e.indexOf(t)===0&&(e.length===t.length||e.indexOf(t+"&")===0)}function at(e){return se.default.stringify({q:e})}function Oy(e){return se.default.parse(e).q}function Bn(e){if(e.length===3){const r=[e[0],e[1]],n=Bn(e[2]);return n.length&&r.push(n),r}return[]}function Ur(e,t){const r=at(e),n=t.map(i=>at(i));let a=!1;const s=n.filter(i=>{const l=Ce(i,r),u=Ce(r,i);return l&&!a&&(a=!0),!l&&!u});if(!a)s.push(r);else if(e.length===3){const l=Bn(e),u=at(l),c=s.some(p=>{const f=Ce(p,u),h=Ce(u,p);return f||h});(j(s)||!c)&&s.push(u)}return s.map(i=>Oy(i))}const Mn=(e,t)=>{if(j(e))return;if(!En(Vf(e)))return Ur(e,t);let r=t;for(const n of e)r=Ur(n,r);return r},zn=(e,t,r)=>{let n=Fp(t,r);return j(n.filters)||(n.filters=Mn(n.filters,e.filters)),n},De={queryString:"",suggestions:[],sortBy:null,sortOrder:null,page:-1,size:-1,filters:[],hiddenParams:[],layout:null},Qn=Object.keys(De),Ry={loading:!1,data:{hits:[],total:0,aggregations:{}},error:{}},Py={hasUserChangedSorting:!1,initialSortBy:null,initialSortOrder:null};class ky{constructor(){this._checkFilter=t=>{if(!Array.isArray(t))throw new Error(`Filter value "${t}" in query state must be an array.`);if(!(t.length===2||t.length===3))throw new Error(`Filter value "${t}" in query state must be an array of 2 or 3 elements`)},this._addFilter=(t,r)=>{this._checkFilter(t);const n=t[0],a=t[1],s=t.length===3;s&&this._checkFilter(t[2]),n in r?s?r[n].push(a+"::"+t[2][1]):r[n].push(a):s?r[n]=[a+"::"+t[2][1]]:r[n]=[a]},this._addFilters=t=>{if(!Array.isArray(t))throw new Error(`Filters query state "${t}" must be an array.`);const r={};return t.forEach(n=>{this._addFilter(n,r)}),r},this.serialize=this.serialize.bind(this)}serialize(t){const{queryString:r,sortBy:n,sortOrder:a,page:s,size:i,filters:l,hiddenParams:u}=t;let c={};r!==null&&(c.q=r),n!==null&&(c.sort=n,a!==null&&(c.sort=a==="desc"?`-${n}`:n)),s>0&&(c.page=s),i>0&&(c.size=i),j(u)||Pe(c,this._addFilters(u));const p=this._addFilters(l);return Pe(c,p),se.default.stringify(c,{arrayFormat:"repeat"})}}class jn{constructor(t){this.axiosConfig=pe(t,"axios",{}),this.validateAxiosConfig(),this.initSerializers(t),this.initInterceptors(t),this.initAxios(),this.search=this.search.bind(this),this.axiosCancelToken=Fe.default.CancelToken}validateAxiosConfig(){if(!Sd(this.axiosConfig,"url"))throw new Error("InvenioSearchApi config: `url` field is required.")}initInterceptors(t){this.requestInterceptor=pe(t,"interceptors.request",void 0),this.responseInterceptor=pe(t,"interceptors.response",void 0)}getSerializer(t){const r={InvenioRecordsResourcesRequestSerializer:ky,InvenioRequestSerializer:Lr};return typeof t=="string"?r[t]:t||Lr}initSerializers(t){var r;const n=this.getSerializer((r=t.invenio)===null||r===void 0?void 0:r.requestSerializer),a=pe(t,"invenio.responseSerializer",Ay);this.requestSerializer=new n,this.responseSerializer=new a}initAxios(){const t={paramsSerializer:this.requestSerializer.serialize,...this.axiosConfig};this.http=Fe.default.create(t),this.addInterceptors()}addInterceptors(){this.requestInterceptor&&this.http.interceptors.request.use(this.requestInterceptor.resolve,this.requestInterceptor.reject),this.responseInterceptor&&this.http.interceptors.request.use(this.responseInterceptor.resolve,this.responseInterceptor.reject)}async search(t){this.axiosCancel&&this.axiosCancel.cancel(),this.axiosCancel=this.axiosCancelToken.source();try{let r=await this.http.request({url:this.axiosConfig.url,params:t,cancelToken:this.axiosCancel.token});r=this.responseSerializer.serialize(r.data);const n=zn(t,r.extras,Qn);return j(n)||(r.newQueryState=n),delete r.extras,r}catch(r){throw Fe.default.isCancel(r)?new jt:r}}}class Dy{constructor(){this.isValid=(t,r,n)=>{switch(r){case"queryString":case"sortBy":return!0;case"sortOrder":return["asc","desc"].includes(n);case"page":case"size":return Iy(n)&&n>0;case"layout":return["grid","list"].includes(n);case"filters":case"hiddenParams":{const a=En(n)?n:[n],s=":",i=t.urlFilterSeparator,l=`[^\\${s}\\${i}]*`,u=`${l}\\${s}${l}`,c=`${u}(\\${i}${u})*`,p=new RegExp(`^${c}$`);return a.every(f=>String(f).match(p))}default:return!1}}}}const Ly=e=>{window.history.pushState&&window.history.pushState({path:e},"",e)},Nr=e=>{window.history.replaceState&&window.history.replaceState({path:e},"",e)};class Uy{constructor(){this._convertValue=(t,r)=>{switch(t){case this.paramsMapping.page:case this.paramsMapping.size:return parseInt(r);default:return r}},this.parse=this.parse.bind(this),this.paramsMapping={}}set urlParamsMapping(t){this.paramsMapping=t}parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const r=se.default.parse(t,{ignoreQueryPrefix:!0}),n={};return Object.entries(r).forEach(a=>{const s=a[0],i=a[1];n[s]=this._convertValue(s,i)}),n}}class Ny{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._filterListToString=r=>{const n=r.length===3?this.urlFilterSeparator.concat(this._filterListToString(r[2])):"";return`${r[0]}:${r[1]}${n}`},this._mapQueryStateToUrlParams=r=>{const n={};Object.keys(r).filter(s=>s in this.urlParamsMapping).filter(s=>(s==="page"||s==="size")&&r[s]<=0||s==="hiddenParams"?!1:r[s]!==null).forEach(s=>{const i=this.urlParamsMapping[s];s==="filters"?n[i]=r[s].map(l=>this._filterListToString(l)):n[i]=r[s]});const a=(s,i)=>{const l="q";return s===l?-1:i===l?1:s.localeCompare(i)};return se.default.stringify(n,{addQueryPrefix:!0,skipNulls:!0,indices:!1,sort:a})},this._filterStringToList=r=>{const n=r.indexOf(this.urlFilterSeparator),a=n>-1,s=r.indexOf(":");if(s===-1)throw new Error(`Filter "${r}" not parsable. Format expected: "<agg name>:<value>"`);const i=r.slice(0,s),l=a?n:r.length,u=r.slice(s+1,l);let c=[i,u];if(a){const p=r.slice(n+1,r.length);c.push(this._filterStringToList(p))}return c},this._mapUrlParamsToQueryState=r=>{const n={};return Object.keys(r).forEach(a=>{const s=this.fromUrlParamsMapping[a];this.urlParamValidator.isValid(this,s,r[a])?(n[s]=r[a],s==="filters"&&(Array.isArray(r[a])||(r[a]=[r[a]]),n[s]=r[a].map(i=>this._filterStringToList(i)))):console.warn(`URL parameter '${a}' with value '${r[a]}' is incorrect and was ignored.`)}),n},this._mergeParamsIntoState=(r,n)=>{const a=ne(n);return Object.keys(r).forEach(s=>{a[s]=r[s]}),a},this.urlParamsMapping=Pi(t.urlParamsMapping)?t.urlParamsMapping:{queryString:"q",sortBy:"sort",sortOrder:"order",page:"p",size:"s",layout:"l",filters:"f",hiddenParams:"hp"},this.keepHistory=t.keepHistory!==void 0?t.keepHistory:!0,!my(this.keepHistory))throw new Error(`"keepHistory configuration must be a boolean, ${this.keepHistory} provided.`);if(this.urlFilterSeparator=t.urlFilterSeparator!==void 0?t.urlFilterSeparator:"+",!_y(this.urlFilterSeparator))throw new Error(`"urlFilterSeparator configuration must be a string, ${this.urlFilterSeparator} provided.`);this.urlParamValidator=t.urlParamValidator||new Dy,this.urlParser=t.urlParser||new Uy,this.urlParser.urlParamsMapping=this.urlParamsMapping,this.fromUrlParamsMapping={},Object.keys(this.urlParamsMapping).forEach(r=>{this.fromUrlParamsMapping[this.urlParamsMapping[r]]=r}),this.get=this.get.bind(this),this.set=this.set.bind(this),this.replace=this.replace.bind(this)}get(t){const r=this.urlParser.parse(window.location.search),n=this._mapUrlParamsToQueryState(r),a=this._mergeParamsIntoState(n,t),s=this._mapQueryStateToUrlParams(a);return Nr(s),a}set(t){if(this.keepHistory){const r=this._mapQueryStateToUrlParams(t);Ly(r)}else this.replace(t)}replace(t){const r=this._mapQueryStateToUrlParams(t);Nr(r)}}const By="SET_QUERY_COMPONENT_INITIAL_STATE",qn="SET_QUERY_STRING",qt="SET_QUERY_SORTING",Gt="SET_QUERY_SORT_BY",Vt="SET_QUERY_SORT_ORDER",$e="SET_QUERY_STATE",Gn="SET_QUERY_PAGINATION_PAGE",Vn="SET_QUERY_PAGINATION_SIZE",Hn="SET_QUERY_FILTERS",Kn="SET_QUERY_SUGGESTIONS",Yn="SET_SUGGESTION_STRING",Wn="CLEAR_QUERY_SUGGESTIONS",Zn="RESULTS_LOADING",Jn="RESULTS_FETCH_SUCCESS",Xn="RESULTS_FETCH_ERROR",ht="RESULTS_UPDATE_LAYOUT",ea="RESET_QUERY",My=e=>t=>{e&&t(B({shouldUpdateUrlQueryString:!1,shouldReplaceUrlQueryString:!0}))},ta=e=>t=>{t({type:$e,payload:e}),t(B())},ra=e=>t=>{t({type:qn,payload:e}),t(B())},zy=(e,t)=>r=>{r({type:qt,payload:{sortBy:e,sortOrder:t}}),r(B())},Qy=e=>t=>{t({type:Gt,payload:e}),t(B())},jy=e=>t=>{t({type:Vt,payload:e}),t(B())},qy=e=>t=>{t({type:Gn,payload:e}),t(B())},Gy=e=>t=>{t({type:Vn,payload:e}),t(B())},Ht=e=>t=>{t({type:Hn,payload:e}),t(B())},Vy=e=>async(t,r,n)=>{const a=n.urlHandlerApi;if(a){await t({type:ht,payload:e});const s=r().query;a.set(s)}else t({type:ht,payload:e})},Hy=()=>(e,t,r)=>{e({type:ea,payload:{queryString:"",page:1,filters:[],...r.initialQueryState}}),e(B())},Ky=(e,t,r,n)=>{const a=t.urlHandlerApi;a&&(r?a.replace(e):n&&a.set(e))},Yy=(e,t,r,n)=>{const a=r().query;t({type:$e,payload:{...a,...e.newQueryState}});const s=ne(r().query),i=n.urlHandlerApi;return i&&i.replace(s),delete e.newStateQuery,e},Wy=(e,t,r,n)=>{function a(l,u,c,p){l.queryString===""?(l.sortBy=c.defaultSortingOnEmptyQueryString.sortBy,l.sortOrder=c.defaultSortingOnEmptyQueryString.sortOrder):(l.sortBy=u.initialSortBy,l.sortOrder=u.initialSortOrder),p({type:$e,payload:l})}function s(l,u,c,p){u.hasUserChangedSorting||a(l,u,c,p)}!j(r.defaultSortingOnEmptyQueryString)&&s(e,t,r,n)},B=function(){let{shouldUpdateUrlQueryString:e=!0,shouldReplaceUrlQueryString:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return async(r,n,a)=>{const s=n().app;let i=ne(n().query);Wy(i,s,a,r),i=ne(n().query),Ky(i,a,t,e),r({type:Zn});try{let u=await a.searchApi.search(i);"newQueryState"in u&&(u=Yy(ne(u),r,n,a)),r({type:Jn,payload:{aggregations:u.aggregations,hits:u.hits,total:u.total}})}catch(l){if(l instanceof jt){console.debug(l);return}else console.error(l),r({type:Xn,payload:{error:l}})}}},Zy=e=>t=>{t({type:Yn,payload:e}),t(Jy())},Jy=()=>async(e,t,r)=>{const n=ne(t().query),a=r.suggestionApi;try{const s=await a.search(n);e({type:Kn,payload:{suggestions:s.suggestions}})}catch(s){console.error("Could not load suggestions due to: "+s)}},Xy=()=>e=>{e({type:Wn,payload:{suggestions:[]}})},ev=()=>(e,t,r)=>{if(r.urlHandlerApi){const n=r.urlHandlerApi.get(r.initialQueryState);e({type:$e,payload:n}),e(B({shouldReplaceUrlQueryString:!0}))}},x=o.default.createContext({}),tv=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case qt:return{...e,hasUserChangedSorting:!0};case Gt:return{...e,hasUserChangedSorting:!0};case Vt:return{...e,hasUserChangedSorting:!0};default:return e}},rv=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qn:return{...e,queryString:t.payload,page:1};case qt:return{...e,sortBy:t.payload.sortBy,sortOrder:t.payload.sortOrder,_sortUserChanged:!0,page:1};case Gt:return{...e,sortBy:t.payload,_sortUserChanged:!0,page:1};case Vt:return{...e,sortOrder:t.payload,_sortUserChanged:!0,page:1};case Gn:return{...e,page:t.payload};case Vn:return{...e,size:t.payload,page:1};case Hn:return{...e,page:1,filters:Mn(t.payload,e.filters)};case Kn:return{...e,suggestions:t.payload.suggestions};case Wn:return{...e,suggestions:t.payload.suggestions};case Yn:return{...e,suggestionString:t.payload};case By:return{...e,...t.payload};case $e:return{...e,...De,...zn(De,t.payload,Qn)};case ht:return{...e,layout:t.payload};case ea:return{...e,...t.payload};default:return e}},nv=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zn:return{...e,loading:!0,data:{...e.data}};case Jn:return{loading:!1,data:{...e.data,aggregations:t.payload.aggregations,hits:t.payload.hits,total:t.payload.total},error:{}};case Xn:return{loading:!1,data:{...e.data,aggregations:{},hits:[],total:0},error:t.payload.error};default:return e}};var av=lt.combineReducers({app:tv,query:rv,results:nv});function Br(e,t){let{sortBy:r,sortOrder:n}=e,{sortBy:a,sortOrder:s}=t;return r!==a||n!==s}function sv(e,t,r){const n=Br(r,t),a=!j(e.defaultSortingOnEmptyQueryString);let s=!1;return a&&(s=Br(r,e.defaultSortingOnEmptyQueryString)),n&&s}function iv(e){const t={...De,...e.initialQueryState},r=e.urlHandlerApi?e.urlHandlerApi.get(t):t,n=sv(e,t,r),a={...Py,hasUserChangedSorting:n,initialSortBy:t.sortBy,initialSortOrder:t.sortOrder},s={...Ry,loading:e.searchOnInit};return{app:a,query:r,results:s}}function ov(e){const t=iv(e);return lt.createStore(av,t,lt.applyMiddleware(ei.default.withExtraArgument(e)))}function Mr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const n=t?`.${t}`:"";return`${r?`${r}.`:""}${e}${n}`}class Kt extends y.Component{constructor(t){super(t),this.updateQueryState=r=>{const{updateQueryState:n}=this.props;n(r)},this.onQueryChanged=r=>{let{detail:n}=r;const{appName:a}=this.context;if(!a)this.updateQueryState(n.searchQuery);else{const i=n.appName;i===a?this.updateQueryState(n.searchQuery):console.debug(`React-SearchKit '${a}': ignoring event sent for app '${i}'`)}},this.searchOnInit=t.searchOnInit,this.eventListenerEnabled=t.eventListenerEnabled,this.onAppInitialized=t.onAppInitialized,this.searchOnUrlQueryStringChanged=t.searchOnUrlQueryStringChanged}componentDidMount(){this.eventListenerEnabled&&window.addEventListener("queryChanged",this.onQueryChanged),window.onpopstate=()=>{this.searchOnUrlQueryStringChanged()},this.onAppInitialized(this.searchOnInit)}componentWillUnmount(){window.onpopstate=()=>{},window.removeEventListener("queryChanged",this.onQueryChanged)}render(){const{children:t}=this.props;return t}}Kt.defaultProps={searchOnInit:!0,eventListenerEnabled:!1};Kt.contextType=x;var lv=E.default.component("Bootstrap",Kt);const uv=e=>({onAppInitialized:t=>e(My(t)),updateQueryState:t=>e(ta(t)),searchOnUrlQueryStringChanged:()=>e(ev())}),cv=T.connect(null,uv)(lv);class Yt extends y.Component{constructor(t){super(t);const r={searchApi:t.searchApi,suggestionApi:t.suggestionApi,urlHandlerApi:t.urlHandlerApi.enabled?t.urlHandlerApi.customHandler||new Ny(t.urlHandlerApi.overrideConfig):null,searchOnInit:t.searchOnInit,initialQueryState:t.initialQueryState,defaultSortingOnEmptyQueryString:t.defaultSortingOnEmptyQueryString};this.store=ov(r),this.appName=t.appName,this.eventListenerEnabled=t.eventListenerEnabled,this.componentIndex=0}render(){const{appName:t,children:r,eventListenerEnabled:n,overridableId:a,searchOnInit:s}=this.props,i={appName:t,buildUID:(u,c)=>Mr(u,c,t),nextComponentIndex:()=>`${this.appName}_${this.componentIndex++}`},l=Mr("ReactSearchKit.children",a,t);return o.default.createElement(x.Provider,{value:i},o.default.createElement(T.Provider,{store:this.store},o.default.createElement(cv,{searchOnInit:s,eventListenerEnabled:n},o.default.createElement(E.default,{id:l},r))))}}Yt.defaultProps={suggestionApi:null,urlHandlerApi:{enabled:!0,overrideConfig:{},customHandler:null},searchOnInit:!0,appName:"",eventListenerEnabled:!1,overridableId:"",initialQueryState:{},defaultSortingOnEmptyQueryString:{}};Yt.contextType=x;var dv=E.default.component("ReactSearchKit",Yt);class na extends y.Component{constructor(t){super(t),this._getLabel=r=>{const n=r[0];let a=r[1],s=[n,a];if(r.length===3){const{label:l,activeFilter:u}=this._getLabel(r[2]);a=`${a}.${l}`,s.push(u)}return{label:a,activeFilter:s}},this.updateQueryFilters=t.updateQueryFilters}render(){const{filters:t,overridableId:r}=this.props;return!!t.length&&o.default.createElement(aa,{filters:t,removeActiveFilter:this.updateQueryFilters,getLabel:this._getLabel,overridableId:r})}}na.defaultProps={overridableId:""};const aa=e=>{let{overridableId:t,filters:r,removeActiveFilter:n,getLabel:a}=e;const{buildUID:s}=y.useContext(x);return o.default.createElement(E.default,{id:s("ActiveFilters.element",t),filters:r,removeActiveFilter:n,getLabel:a},o.default.createElement(o.default.Fragment,null,r.map((i,l)=>{const{label:u,activeFilter:c}=a(i);return o.default.createElement(d.Label,{image:!0,key:l,onClick:()=>n(c)},u,o.default.createElement(d.Icon,{name:"delete"}))})))};aa.defaultProps={overridableId:""};var fv=E.default.component("ActiveFilters",na);const pv=e=>({updateQueryFilters:t=>e(Ht(t))});T.connect(e=>({filters:e.query.filters}),pv)(fv);function hv(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var gv=`.AutoCompleteText{position:relative;z-index:100}.AutoCompleteText .input button,.AutoCompleteText .input input{border:none;border-radius:0}.AutoCompleteText ul{background-color:#fff;border:1px solid #e0e1e2;border-radius:0 0 .3rem .3rem;color:#000;list-style-type:none;margin:0;padding:0;position:absolute;text-align:left;width:100%}.AutoCompleteText ul:before{content:""}.AutoCompleteText li{cursor:pointer;padding:.3em 1em}.AutoCompleteText li:hover{background-color:#e0e1e2;border-radius:.3rem;text-decoration:underline}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vaG9tZS9ydW5uZXIvd29yay9yZWFjdC1zZWFyY2hraXQvcmVhY3Qtc2VhcmNoa2l0L3NyYy9saWIvY29tcG9uZW50cy9BdXRvY29tcGxldGVTZWFyY2hCYXIvQXV0b2NvbXBsZXRlU2VhcmNoQmFyLnNjc3MiLCJBdXRvY29tcGxldGVTZWFyY2hCYXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxrQkFDRSxpQkFBQSxDQUNBLFdDQ0YsQ0RPQSwrREFDRSxXQUFBLENBQ0EsZUNDRixDREVBLHFCQU1FLHFCQUFBLENBR0Esd0JBQUEsQ0FDQSw2QkFBQSxDQUxBLFVBQUEsQ0FGQSxvQkFBQSxDQUlBLFFBQUEsQ0FDQSxTQUFBLENBTkEsaUJBQUEsQ0FFQSxlQUFBLENBSEEsVUNVRixDREVBLDRCQUNFLFVDQ0YsQ0RFQSxxQkFFRSxjQUFBLENBREEsZ0JDRUYsQ0RFQSwyQkFFRSx3QkFBQSxDQUNBLG1CQUFBLENBRkEseUJDR0YiLCJmaWxlIjoiQXV0b2NvbXBsZXRlU2VhcmNoQmFyLnNjc3MifQ== */`;hv(gv);class sa extends y.Component{constructor(t){super(t),this._handleAutocompleteChange=r=>{r.length>=this.minCharsToAutocomplete&&this.updateSuggestions(r)},this.onInputChange=async r=>{await this.setState({currentValue:r}),this.handleAutocompleteChange(this.state.currentValue)},this.executeSearch=()=>{this.updateQueryString(this.state.currentValue)},this.updateQueryString=this.props.updateQueryString,this.updateSuggestions=this.props.debounce?ti.default.debounce(this.props.updateSuggestions,this.props.debounceTime,{leading:!0}):this.props.updateSuggestions,this.clearSuggestions=this.props.clearSuggestions,this.minCharsToAutocomplete=this.props.minCharsToAutocomplete,this.state={currentValue:this.props.queryString||""},this.handleAutocompleteChange=t.handleAutocompleteChange||this._handleAutocompleteChange}render(){const{placeholder:t,suggestions:r,overridableId:n}=this.props;return o.default.createElement(yv,{placeholder:t,queryString:this.state.currentValue,querySuggestions:r,onInputChange:this.onInputChange,executeSearch:this.executeSearch,overridableId:n})}}sa.defaultProps={handleAutocompleteChange:null,placeholder:"Type something",minCharsToAutocomplete:3,overridableId:""};const mv=e=>o.default.createElement(sa,Object.assign({key:e.queryString},e)),yv=e=>{let{overridableId:t,placeholder:r,queryString:n,querySuggestions:a,onInputChange:s,executeSearch:i,...l}=e;const{buildUID:u}=y.useContext(x),c=(f,h)=>{i()},p=(f,h)=>{f.key==="Enter"&&i()};return o.default.createElement(E.default,Object.assign({id:u("AutocompleteSearchBar.element",t)},l),o.default.createElement("div",{className:"AutoCompleteText"},o.default.createElement(d.Input,{action:{content:"Search",onClick:c},fluid:!0,placeholder:r,onChange:(f,h)=>{let{value:g}=h;s(g)},value:n,onKeyPress:p}),o.default.createElement(vv,{querySuggestions:a,overridableId:t})))},vv=e=>{let{overridableId:t,...r}=e;const{querySuggestions:n}=r,{buildUID:a}=y.useContext(x),s=async i=>{await(void 0).setState({currentValue:i}),(void 0).clearSuggestions(),(void 0).executeSearch()};return n.length===0?null:o.default.createElement(E.default,Object.assign({id:a("AutocompleteSearchBar.suggestions",t)},r),o.default.createElement("ul",null,n.map(i=>o.default.createElement(d.Button,{as:"li",onClick:()=>s(i),key:i},i))))};var bv=E.default.component("AutocompleteSearchBar",mv);const Ev=e=>({updateQueryString:t=>e(ra(t)),updateSuggestions:t=>e(Zy(t)),clearSuggestions:()=>e(Xy())}),Sv=e=>({queryString:e.query.queryString,suggestions:e.query.suggestions});T.connect(Sv,Ev)(bv);class Xe extends y.Component{constructor(t){super(t),this._isSelected=(r,n,a)=>a.filter(s=>s[0]===r&&s[1]===n).length>=1,this.getChildAggCmps=(r,n)=>{const a=this.childAgg&&this.childAgg.aggName in r;let s=[];if(a){const i=r[this.childAgg.aggName].buckets;n.forEach(u=>{const c=u[0]===this.aggName,p=u[1]===r.key,f=u.length===3;c&&p&&f&&s.push(u[2])});const l=u=>{this.onFilterClicked([this.aggName,r.key,u])};return o.default.createElement(Xe,{buckets:i,selectedFilters:s,field:this.childAgg.field,aggName:this.childAgg.aggName,childAgg:this.childAgg.childAgg,onFilterClicked:l})}return null},this.field=t.field,this.aggName=t.aggName,this.childAgg=t.childAgg,this.onFilterClicked=t.onFilterClicked}render(){const{buckets:t,selectedFilters:r,overridableId:n}=this.props,a=t.map(s=>{const i=s.key_as_string?s.key_as_string:s.key,l=this._isSelected(this.aggName,i,r),u=p=>{this.onFilterClicked([this.aggName,p])},c=p=>this.getChildAggCmps(p,r);return o.default.createElement(oa,{key:s.key,bucket:s,keyField:i,isSelected:l,onFilterClicked:u,getChildAggCmps:c,overridableId:n})});return o.default.createElement(ia,{valuesCmp:a,overridableId:n})}}Xe.defaultProps={childAgg:null,overridableId:""};const ia=e=>{let{valuesCmp:t,overridableId:r}=e;const{buildUID:n}=y.useContext(x);return o.default.createElement(E.default,{id:n("BucketAggregationContainer.element",r),valuesCmp:t},o.default.createElement(d.List,null,t))};ia.defaultProps={overridableId:""};const oa=e=>{let{bucket:t,isSelected:r,onFilterClicked:n,getChildAggCmps:a,overridableId:s,keyField:i}=e;const{buildUID:l,nextComponentIndex:u}=y.useContext(x),c=t.label?t.label:`${i} (${t.doc_count.toLocaleString("en-US")})`,p=a(t);return o.default.createElement(E.default,{id:l("BucketAggregationValues.element",s),bucket:t,label:c,onFilterClicked:n,isSelected:r,childAggCmps:p},o.default.createElement(d.List.Item,{key:t.key},o.default.createElement(d.Checkbox,{label:c,id:u(),value:t.key,onClick:()=>n(t.key),checked:r}),p))};oa.defaultProps={overridableId:""};var $v=E.default.component("BucketAggregationValues",Xe);class la extends y.Component{constructor(t){super(t),this.onFilterClicked=r=>{this.updateQueryFilters(r)},this._renderValues=(r,n)=>{const{overridableId:a}=this.props;return o.default.createElement($v,{buckets:r,selectedFilters:n,field:this.agg.field,aggName:this.agg.aggName,childAgg:this.agg.childAgg,onFilterClicked:this.onFilterClicked,overridableId:a})},this._getSelectedFilters=r=>r.filter(n=>n[0]===this.agg.aggName),this._getResultBuckets=r=>{const n=pe(r,this.agg.aggName,{});return"buckets"in n?(Array.isArray(n.buckets)||(n.buckets=Object.entries(n.buckets).map(a=>{let[s,i]=a;return{...i,key:s}})),n.buckets):[]},this.title=t.title,this.agg=t.agg,this.updateQueryFilters=t.updateQueryFilters}render(){const{userSelectionFilters:t,resultsAggregations:r,overridableId:n,...a}=this.props,s=this._getSelectedFilters(t),i=this._getResultBuckets(r),l=i.length?this._renderValues(i,s):null;return o.default.createElement(ua,Object.assign({title:this.title,containerCmp:l,overridableId:n},a))}}la.defaultProps={overridableId:""};const ua=e=>{let{overridableId:t,agg:r,title:n,containerCmp:a,updateQueryFilters:s}=e;const{buildUID:i}=y.useContext(x);return a&&o.default.createElement(E.default,{id:i("BucketAggregation.element",t),agg:r,title:n,containerCmp:a,updateQueryFilters:s},o.default.createElement(d.Card,null,o.default.createElement(d.Card.Content,null,o.default.createElement(d.Card.Header,null,n)),o.default.createElement(d.Card.Content,null,a)))};ua.defaultProps={containerCmp:null,overridableId:""};var _v=E.default.component("BucketAggregation",la);const Cv=e=>({updateQueryFilters:t=>e(Ht(t))});T.connect(e=>({userSelectionFilters:e.query.filters,resultsAggregations:e.results.data.aggregations}),Cv)(_v);class ca extends y.Component{render(){const{children:t,condition:r}=this.props;return r?t:null}}ca.defaultProps={condition:!0};var L=E.default.component("ShouldRender",ca);class da extends y.Component{render(){const{loading:t,totalResults:r,label:n,overridableId:a}=this.props;return o.default.createElement(L,{condition:!t&&r>0},n(o.default.createElement(fa,{totalResults:r,overridableId:a})))}}da.defaultProps={label:e=>e,overridableId:""};const fa=e=>{let{totalResults:t,overridableId:r}=e;const{buildUID:n}=y.useContext(x),a=n("Count.element",r);return o.default.createElement(E.default,{id:a,totalResults:t},o.default.createElement(d.Label,{color:"blue"},t.toLocaleString("en-US")))};fa.defaultProps={overridableId:""};var xv=E.default.component("Count",da);const wv=T.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total}))(xv);class pa extends y.Component{constructor(t){super(t),this.resetQuery=t.resetQuery}render(){const{loading:t,totalResults:r,error:n,queryString:a,extraContent:s,overridableId:i,userSelectionFilters:l,...u}=this.props;return o.default.createElement(L,{condition:!t&&j(n)&&r===0},o.default.createElement(ha,Object.assign({},u,{queryString:a,resetQuery:this.resetQuery,extraContent:s,userSelectionFilters:l,overridableId:i})))}}pa.defaultProps={queryString:"",extraContent:null,overridableId:""};const ha=e=>{let{overridableId:t,queryString:r,resetQuery:n,extraContent:a,userSelectionFilters:s}=e;const{buildUID:i}=y.useContext(x);return o.default.createElement(E.default,{id:i("EmptyResults.element",t),queryString:r,resetQuery:n,extraContent:a,userSelectionFilters:s},o.default.createElement(d.Segment,{placeholder:!0,textAlign:"center"},o.default.createElement(d.Header,{icon:!0},o.default.createElement(d.Icon,{name:"search"}),"No results found!"),r&&o.default.createElement("em",null,'Current search "',r,'"'),o.default.createElement("br",null),o.default.createElement(d.Button,{primary:!0,onClick:()=>n()},"Clear query"),a))};ha.defaultProps={queryString:"",extraContent:null,overridableId:""};var Tv=E.default.component("EmptyResults",pa);const Fv=e=>({resetQuery:()=>e(Hy())}),Iv=T.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,error:e.results.error,queryString:e.query.queryString,userSelectionFilters:e.query.filters}),Fv)(Tv);function ga(e){let{loading:t,error:r,overridableId:n}=e;return o.default.createElement(L,{condition:!t&&!j(r)},o.default.createElement(ma,{error:r,overridableId:n}))}ga.defaultProps={overridableId:""};const ma=e=>{let{error:t,overridableId:r}=e;const{buildUID:n}=y.useContext(x);return o.default.createElement(E.default,{id:n("Error.element",r),error:t},o.default.createElement("div",null,"Oops! Something went wrong while fetching results."))};ma.defaultProps={overridableId:""};var Av=E.default.component("Error",ga);T.connect(e=>({loading:e.results.loading,error:e.results.error}))(Av);function ya(e){const t=a=>o.default.createElement(e,a),r=a=>({currentQueryState:a.query,currentResultsState:a.results}),n=a=>({updateQueryState:s=>a(ta(s))});return T.connect(r,n)(t)}class va extends y.Component{constructor(t){super(t),this.onLayoutChange=r=>{this.updateLayout(r)},this.updateLayout=t.updateLayout}render(){const{currentLayout:t,loading:r,totalResults:n,overridableId:a}=this.props;return o.default.createElement(L,{condition:t!==null&&!r&&n>0},o.default.createElement(ba,{currentLayout:t,onLayoutChange:this.onLayoutChange,overridableId:a}))}}va.defaultProps={currentLayout:null,overridableId:""};const ba=e=>{let{overridableId:t,currentLayout:r,onLayoutChange:n}=e;const{buildUID:a}=y.useContext(x);return o.default.createElement(E.default,{id:a("LayoutSwitcher.element",t),currentLayout:r,onLayoutChange:n},o.default.createElement(d.Menu,{compact:!0,icon:!0},o.default.createElement(d.Menu.Item,{name:"list",active:r==="list",onClick:(s,i)=>{let{name:l}=i;return n(l)}},o.default.createElement(d.Icon,{name:"list layout"})),o.default.createElement(d.Menu.Item,{name:"grid",active:r==="grid",onClick:(s,i)=>{let{name:l}=i;return n(l)}},o.default.createElement(d.Icon,{name:"grid layout"}))))};ba.defaultProps={currentLayout:null,overridableId:""};var Ov=E.default.component("LayoutSwitcher",va);const Rv=e=>({updateLayout:t=>e(Vy(t))});T.connect(e=>({loading:e.results.loading,currentLayout:e.query.layout,totalResults:e.results.data.total}),Rv)(Ov);const zr={boundaryRangeCount:1,siblingRangeCount:1,showEllipsis:!0,showFirst:!0,showLast:!0,showPrev:!0,showNext:!0,size:"large"};class Ea extends y.Component{constructor(t){super(t),this.onPageChange=r=>{const{currentPage:n}=this.props;r!==n&&this.updateQueryPage(r)},this.updateQueryPage=t.updateQueryPage,this.options=t.options?{...zr,...t.options}:zr}render(){const{loading:t,totalResults:r,currentPage:n,currentSize:a,overridableId:s,showWhenOnlyOnePage:i}=this.props;return o.default.createElement(L,{condition:!t&&n>-1&&a>-1&&i?r>0:r>a},o.default.createElement(Sa,{currentPage:n,currentSize:a,totalResults:r,onPageChange:this.onPageChange,options:this.options,overridableId:s,maxTotalResults:this.options.maxTotalResults}))}}Ea.defaultProps={options:{},overridableId:"",showWhenOnlyOnePage:!0};const Sa=e=>{let{overridableId:t,currentPage:r,currentSize:n,totalResults:a,onPageChange:s,options:i,maxTotalResults:l,...u}=e;const c=i.boundaryRangeCount,p=i.siblingRangeCount,f=i.showEllipsis,h=i.showFirst,g=i.showLast,v=i.showPrev,b=i.showNext,S=i.size,m=Math.floor(l/n),_=Math.ceil(a/n),F=Math.min(_,m),{buildUID:A}=y.useContext(x);return r>_&&s(_),o.default.createElement(E.default,{id:A("Pagination.element",t),currentPage:r,currentSize:n,totalResults:a,options:i,onPageChange:s},o.default.createElement(d.Pagination,Object.assign({activePage:r,totalPages:F,onPageChange:(M,$)=>{let{activePage:q}=$;return s(q)},boundaryRange:c,siblingRange:p,ellipsisItem:f?void 0:null,firstItem:h?void 0:null,lastItem:g?void 0:null,prevItem:v?void 0:null,nextItem:b?void 0:null,size:S},u)))};Sa.defaultProps={options:{},overridableId:"",maxTotalResults:1e4};var Pv=E.default.component("Pagination",Ea);const kv=e=>({updateQueryPage:t=>e(qy(t))}),Dv=T.connect(e=>({currentPage:e.query.page,currentSize:e.query.size,loading:e.results.loading,totalResults:e.results.data.total}),kv)(Pv);function $a(e){let{loading:t,totalResults:r,results:n,resultsPerRow:a,overridableId:s,onResultsRendered:i}=e;return y.useEffect(()=>{i&&i()},[i]),o.default.createElement(L,{condition:!t&&r>0},o.default.createElement(_a,{results:n,resultsPerRow:a,overridableId:s}))}$a.defaultProps={resultsPerRow:3,overridableId:"",onResultsRendered:()=>{}};const Lv=e=>{let{result:t,overridableId:r}=e;const{buildUID:n}=y.useContext(x);return o.default.createElement(E.default,{id:n("ResultsGrid.item",r),result:t},o.default.createElement(d.Card,{fluid:!0,href:`#${t.id}`},o.default.createElement(d.Image,{src:t.imgSrc||"http://placehold.it/200"}),o.default.createElement(d.Card.Content,null,o.default.createElement(d.Card.Header,null,t.title),o.default.createElement(d.Card.Description,null,t.description))))},_a=e=>{let{overridableId:t,results:r,resultsPerRow:n}=e;const{buildUID:a}=y.useContext(x),s=r.map((i,l)=>o.default.createElement(Lv,{key:l,result:i,overridableId:t}));return o.default.createElement(E.default,{id:a("ResultsGrid.container",t),results:s,resultsPerRow:n},o.default.createElement(d.Card.Group,{itemsPerRow:n},s))};_a.defaultProps={resultsPerRow:3,overridableId:""};var Uv=E.default.component("ResultsGrid",$a);const Nv=T.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,results:e.results.data.hits}))(Uv);function Ca(e){let{loading:t,totalResults:r,results:n,overridableId:a,onResultsRendered:s}=e;return y.useEffect(()=>{s&&s()},[s]),o.default.createElement(L,{condition:!t&&r>0},o.default.createElement(xa,{results:n,overridableId:a}))}Ca.defaultProps={overridableId:"",onResultsRendered:()=>{}};const Bv=e=>{let{result:t,overridableId:r}=e;const{buildUID:n}=y.useContext(x);return o.default.createElement(E.default,{id:n("ResultsList.item",r),result:t},o.default.createElement(d.Item,{href:`#${t.id}`},o.default.createElement(d.Item.Image,{size:"small",src:t.imgSrc||"http://placehold.it/200"}),o.default.createElement(d.Item.Content,null,o.default.createElement(d.Item.Header,null,t.title),o.default.createElement(d.Item.Description,null,t.description))))},xa=e=>{let{results:t,overridableId:r}=e;const{buildUID:n}=y.useContext(x),a=t.map((s,i)=>o.default.createElement(Bv,{result:s,key:i,overridableId:r}));return o.default.createElement(E.default,{id:n("ResultsList.container",r),results:a},o.default.createElement(d.Item.Group,{divided:!0,relaxed:!0,link:!0},a))};xa.defaultProps={overridableId:""};var Mv=E.default.component("ResultsList",Ca);const wa=T.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,results:e.results.data.hits}))(Mv);function Ta(e){let{children:t,loading:r,overridableId:n}=e;return r?o.default.createElement(Fa,{overridableId:n}):t}Ta.defaultProps={overridableId:""};const Fa=e=>{let{overridableId:t}=e;const{buildUID:r}=y.useContext(x);return o.default.createElement(E.default,{id:r("ResultsLoader.element",t)},o.default.createElement(d.Loader,{active:!0,size:"huge",inline:"centered"}))};Fa.defaultProps={overridableId:""};var zv=E.default.component("ResultsLoader",Ta);const Qv=T.connect(e=>({loading:e.results.loading}))(zv);function Ia(e){let{loading:t,totalResults:r,currentLayout:n,overridableId:a,onResultsRendered:s}=e;return o.default.createElement(L,{condition:n!=null&&!t&&r>0},o.default.createElement(Aa,{layout:n,overridableId:a,onResultsRendered:s}))}Ia.defaultProps={currentLayout:null,overridableId:"",onResultsRendered:()=>{}};const Aa=e=>{let{layout:t,overridableId:r,onResultsRendered:n}=e;const{buildUID:a}=y.useContext(x);return o.default.createElement(E.default,{id:a("ResultsMultiLayout.element",r),layout:t,onResultsRendered:n},t==="list"?o.default.createElement(wa,{overridableId:r,onResultsRendered:n}):o.default.createElement(Nv,{overridableId:r,onResultsRendered:n}))};Aa.defaultProps={layout:"",overridableId:"",onResultsRendered:()=>{}};var jv=E.default.component("ResultsMultiLayout",Ia);T.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentLayout:e.query.layout}))(jv);class Oa extends y.Component{constructor(t){super(t),this.onChange=r=>{const{currentSize:n}=this.props;r!==n&&this.updateQuerySize(r)},this.options=t.values,this.updateQuerySize=t.updateQuerySize}render(){const{loading:t,currentSize:r,totalResults:n,label:a,overridableId:s,ariaLabel:i,selectOnNavigation:l,showWhenOnlyOnePage:u}=this.props;return o.default.createElement(L,{condition:!t&&r!==-1&&u?n>0:n>r},a(o.default.createElement(Ra,{currentSize:r,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:i,selectOnNavigation:l})))}}Oa.defaultProps={label:e=>e,overridableId:"",ariaLabel:"Results per page",selectOnNavigation:!1,showWhenOnlyOnePage:!0};const Ra=e=>{let{overridableId:t,currentSize:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:i}=e;const{buildUID:l}=y.useContext(x),u=n.map((c,p)=>({key:p,text:c.text,value:c.value}));return o.default.createElement(E.default,{id:l("ResultsPerPage.element",t),currentSize:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:i},o.default.createElement(d.Dropdown,{inline:!0,compact:!0,options:u,value:r,onChange:(c,p)=>{let{value:f}=p;return a(f)},"aria-label":s,selectOnNavigation:i}))};Ra.defaultProps={ariaLabel:"Results per page",selectOnNavigation:!1,overridableId:""};var qv=E.default.component("ResultsPerPage",Oa);const Gv=e=>({updateQuerySize:t=>e(Gy(t))}),Vv=T.connect(e=>({loading:e.results.loading,currentSize:e.query.size,totalResults:e.results.data.total}),Gv)(qv);class Pa extends y.Component{constructor(t){super(t),this.onInputChange=r=>{this.setState({currentValue:r})},this.executeSearch=()=>{const{currentValue:r}=this.state;this.updateQueryString(r)},this.onBtnSearchClick=()=>{this.executeSearch()},this.onKeyPress=r=>{r.key==="Enter"&&this.executeSearch()},this.updateQueryString=t.updateQueryString,this.state={currentValue:t.queryString||""}}render(){const{actionProps:t,autofocus:r,executeSearch:n,onBtnSearchClick:a,onInputChange:s,onKeyPress:i,overridableId:l,placeholder:u,uiProps:c}=this.props,{currentValue:p}=this.state;return o.default.createElement(Wt,{actionProps:t,autofocus:r,executeSearch:n||this.executeSearch,onBtnSearchClick:a||this.onBtnSearchClick,onInputChange:s||this.onInputChange,onKeyPress:i||this.onKeyPress,overridableId:l,placeholder:u,queryString:p,uiProps:c})}}Pa.defaultProps={actionProps:null,autofocus:!1,executeSearch:null,onBtnSearchClick:null,onInputChange:null,onKeyPress:null,overridableId:"",placeholder:"",queryString:"",uiProps:null};const ka=e=>{const{queryString:t}=e;return o.default.createElement(Pa,Object.assign({key:t},e))};ka.defaultProps={queryString:""};class Wt extends y.Component{componentDidMount(){const{autofocus:t}=this.props;t&&this.focusInput&&this.focusInput.focus()}render(){const{actionProps:t,onBtnSearchClick:r,onInputChange:n,onKeyPress:a,overridableId:s,placeholder:i,queryString:l,uiProps:u}=this.props,{buildUID:c}=this.context;return o.default.createElement(E.default,{id:c("SearchBar.element",s),queryString:l,onBtnSearchClick:r,onInputChange:n,onKeyPress:a,placeholder:i,actionProps:t,uiProps:u},o.default.createElement(d.Input,Object.assign({action:{content:"Search",onClick:r,...t},fluid:!0},u,{placeholder:i||"Type something",onChange:(p,f)=>{let{value:h}=f;n(h)},value:l,onKeyPress:a,ref:p=>{this.focusInput=p}})))}}Wt.defaultProps={actionProps:null,autofocus:!1,onBtnSearchClick:null,onInputChange:null,onKeyPress:null,overridableId:"",placeholder:"",queryString:"",uiProps:null};Wt.contextType=x;var Hv=E.default.component("SearchBar",ka);const Kv=e=>({updateQueryString:t=>e(ra(t))}),Yv=T.connect(e=>({queryString:e.query.queryString}),Kv)(Hv);class Da extends y.Component{constructor(t){super(t),this._computeValue=(r,n)=>n?`${r}-${n}`:r,this.onChange=r=>{const{currentSortBy:n,currentSortOrder:a}=this.props;if(r===this._computeValue(n,a))return;const s=this.options.find(i=>i.value===r);this.updateQuerySorting(s.sortBy,s.sortOrder)},this.options=t.values,this.updateQuerySorting=t.updateQuerySorting,this.options.forEach(r=>r.value=this._computeValue(r.sortBy,r.sortOrder))}render(){const{currentSortBy:t,currentSortOrder:r,loading:n,totalResults:a,label:s,overridableId:i,sortOrderDisabled:l,ariaLabel:u,selectOnNavigation:c}=this.props;return o.default.createElement(L,{condition:t!==null&&(l||t!==null)&&!n&&a>0},s(o.default.createElement(La,{currentSortBy:t,currentSortOrder:r,options:this.options,onValueChange:this.onChange,computeValue:this._computeValue,overridableId:i,ariaLabel:u,selectOnNavigation:c})))}}Da.defaultProps={currentSortBy:null,currentSortOrder:null,label:e=>e,overridableId:"",sortOrderDisabled:!1,ariaLabel:"Sort",selectOnNavigation:!1};const La=e=>{let{overridableId:t,currentSortBy:r,currentSortOrder:n,options:a,onValueChange:s,computeValue:i,ariaLabel:l,selectOnNavigation:u}=e;const{buildUID:c}=y.useContext(x),p=i(r,n),f=a.map((h,g)=>({key:g,text:h.text,value:h.value}));return o.default.createElement(E.default,{id:c("Sort.element",t),options:a,currentSortBy:r,currentSortOrder:n,onValueChange:s,ariaLabel:l,selectOnNavigation:u},o.default.createElement(d.Dropdown,{selection:!0,options:f,value:p,onChange:(h,g)=>{let{value:v}=g;return s(v)},"aria-label":l,selectOnNavigation:u}))};La.defaultProps={currentSortBy:null,currentSortOrder:null,overridableId:"",ariaLabel:"Sort",selectOnNavigation:!1};var Wv=E.default.component("Sort",Da);const Zv=e=>({updateQuerySorting:(t,r)=>e(zy(t,r))});T.connect(e=>({currentSortBy:e.query.sortBy,currentSortOrder:e.query.sortOrder,loading:e.results.loading,totalResults:e.results.data.total}),Zv)(Wv);class Ua extends y.Component{constructor(t){super(t),this.onChange=r=>{const{currentSortBy:n}=this.props;r!==n&&this.updateQuerySortBy(r)},this.options=t.values,this.updateQuerySortBy=t.updateQuerySortBy}render(){const{currentSortBy:t,loading:r,totalResults:n,label:a,overridableId:s,ariaLabel:i,selectOnNavigation:l}=this.props;return o.default.createElement(L,{condition:t!==null&&!r&&n>0},a(o.default.createElement(Na,{currentSortBy:t,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:i,selectOnNavigation:l})))}}Ua.defaultProps={currentSortBy:null,label:e=>e,overridableId:"",ariaLabel:"Sort Results By",selectOnNavigation:!1};const Na=e=>{let{overridableId:t,currentSortBy:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:i}=e;const{buildUID:l}=y.useContext(x),u=n.map((c,p)=>({key:p,text:c.text,value:c.value}));return o.default.createElement(E.default,{id:l("SortBy.element",t),options:n,currentSortBy:r,onValueChange:a,ariaLabel:s,selectOnNavigation:i},o.default.createElement(d.Dropdown,{selection:!0,compact:!0,options:u,value:r,onChange:(c,p)=>{let{value:f}=p;return a(f)},"aria-label":s,selectOnNavigation:i}))};Na.defaultProps={currentSortBy:null,overridableId:"",ariaLabel:"Sort Results By",selectOnNavigation:!1};var Jv=E.default.component("SortBy",Ua);const Xv=e=>({updateQuerySortBy:t=>e(Qy(t))});T.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentSortBy:e.query.sortBy}),Xv)(Jv);class Ba extends y.Component{constructor(t){super(t),this.onChange=r=>{const{currentSortOrder:n}=this.props;r!==n&&this.updateQuerySortOrder(r)},this.options=t.values,this.updateQuerySortOrder=t.updateQuerySortOrder}render(){const{currentSortOrder:t,loading:r,totalResults:n,label:a,overridableId:s,ariaLabel:i,selectOnNavigation:l}=this.props;return o.default.createElement(L,{condition:t!==null&&!r&&n>0},a(o.default.createElement(Ma,{currentSortOrder:t,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:i,selectOnNavigation:l})))}}Ba.defaultProps={currentSortOrder:null,label:e=>e,overridableId:"",ariaLabel:"Sort Order",selectOnNavigation:!1};const Ma=e=>{let{overridableId:t,currentSortOrder:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:i}=e;const{buildUID:l}=y.useContext(x),u=n.map((c,p)=>({key:p,text:c.text,value:c.value}));return o.default.createElement(E.default,{id:l("SortOrder.element",t),options:n,currentSortOrder:r,onValueChange:a,ariaLabel:s,selectOnNavigation:i},o.default.createElement(d.Dropdown,{selection:!0,compact:!0,options:u,value:r,onChange:(c,p)=>{let{value:f}=p;return a(f)},"aria-label":s,selectOnNavigation:i}))};Ma.defaultProps={currentSortOrder:null,overridableId:"",ariaLabel:"Sort Order",selectOnNavigation:!1};var eb=E.default.component("SortOrder",Ba);const tb=e=>({updateQuerySortOrder:t=>e(jy(t))});T.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentSortOrder:e.query.sortOrder}),tb)(eb);const za=e=>{let{overridableId:t,userSelectionFilters:r,title:n,label:a,filterValue:s,updateQueryFilters:i}=e;const l=f=>f.filter(g=>g[0]===s[0]).length>0,u=()=>{i(s)},{buildUID:c}=y.useContext(x),p=l(r);return o.default.createElement(E.default,{id:c("SearchFilters.Toggle.element",t),title:n,label:a,filterValue:s,userSelectionFilters:r,updateQueryFilters:i},o.default.createElement(d.Card,null,o.default.createElement(d.Card.Content,null,o.default.createElement(d.Card.Header,null,n)),o.default.createElement(d.Card.Content,null,o.default.createElement(d.Checkbox,{toggle:!0,label:a,onClick:u,checked:p}))))};za.defaultProps={overridableId:""};var rb=E.default.component("SearchFilters.Toggle",za);const nb=e=>({updateQueryFilters:t=>e(Ht(t))});T.connect(e=>({userSelectionFilters:e.query.filters}),nb)(rb);const Qa=o.default.createContext(null),ab=({config:e,children:t,updateQueryState:r,currentQueryState:n})=>{const a=y.useCallback(()=>{r({...n,queryString:n.queryString})},[r,n]);return o.default.createElement(Qa.Provider,{value:{config:e,refreshSearch:a}},t)},sb=ya(ab),et=()=>{const e=o.default.useContext(Qa);if(!e)throw new Error("useSearchConfig must be used within a SearchProvider");return e},ja=({status:e,children:t,...r})=>e==="damaged"||e==="imported with failures"||e==="validated with failures"||e==="serializer validation failed"||e==="validation failed"||e==="import failed"?o.default.createElement(d.Label,{color:"red",...r},o.default.createElement(d.Icon,{name:"warning sign"}),t):e==="success"||e==="validated"||e==="created"?o.default.createElement(d.Label,{color:"green",...r},o.default.createElement(d.Icon,{name:"check circle"}),t):e==="importing"||e==="validating"?o.default.createElement(d.Label,{color:"blue",...r},o.default.createElement(d.Icon,{name:"spinner",loading:!0}),t):o.default.createElement(d.Label,{...r},t),ge=e=>(e==null?void 0:e.charAt(0).toUpperCase())+(e==null?void 0:e.slice(1))||"",qa=e=>e.reduce((t,r)=>t+r.file.size,0),Zt=e=>tt(qa(e)),tt=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return`${Number.parseFloat((e/t**n).toFixed(2))} ${r[n]}`},Ga=e=>new Date(e).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});var Va={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(e,t){(function(r){var n;if(e.exports=r(),n=!0,!n){var a=window.Cookies,s=window.Cookies=r();s.noConflict=function(){return window.Cookies=a,s}}})(function(){function r(){for(var s=0,i={};s<arguments.length;s++){var l=arguments[s];for(var u in l)i[u]=l[u]}return i}function n(s){return s.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function a(s){function i(){}function l(c,p,f){if(!(typeof document>"u")){f=r({path:"/"},i.defaults,f),typeof f.expires=="number"&&(f.expires=new Date(new Date*1+f.expires*864e5)),f.expires=f.expires?f.expires.toUTCString():"";try{var h=JSON.stringify(p);/^[\{\[]/.test(h)&&(p=h)}catch{}p=s.write?s.write(p,c):encodeURIComponent(String(p)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),c=encodeURIComponent(String(c)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var g="";for(var v in f)f[v]&&(g+="; "+v,f[v]!==!0&&(g+="="+f[v].split(";")[0]));return document.cookie=c+"="+p+g}}function u(c,p){if(!(typeof document>"u")){for(var f={},h=document.cookie?document.cookie.split("; "):[],g=0;g<h.length;g++){var v=h[g].split("="),b=v.slice(1).join("=");!p&&b.charAt(0)==='"'&&(b=b.slice(1,-1));try{var S=n(v[0]);if(b=(s.read||s)(b,S)||n(b),p)try{b=JSON.parse(b)}catch{}if(f[S]=b,c===S)break}catch{}}return c?f[c]:f}}return i.set=l,i.get=function(c){return u(c,!1)},i.getJSON=function(c){return u(c,!0)},i.remove=function(c,p){l(c,"",r(p,{expires:-1}))},i.defaults={},i.withConverter=a,i}return a(function(){})})})(Va);var ib=Va.exports;const ob=I(ib),Ha=()=>ob.get("csrftoken")||null,Ka=e=>{switch(e){case"success":return"green";case"validation failed":case"serializer validation failed":case"import failed":case"imported with failures":case"validated with failures":case"damaged":return"red";case"validated":case"created":return"blue";case"importing":case"validating":return"yellow";default:return"grey"}},lb=e=>new jn(e),ub=(e,t={},r=!0)=>({axios:{url:e,headers:{Accept:"application/vnd.inveniordm.v1+json",...t},withCredentials:r}}),k=Fe.default.create({baseURL:"",timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});k.interceptors.request.use(e=>{const t=Ha();return t&&(e.headers["X-CSRFTOKEN"]=t),e},e=>Promise.reject(e));const Ya=async(e,t)=>{try{const r=await k.put(`/api/importer-tasks/${e}/metadata`,t,{headers:{"content-type":"application/octet-stream","X-Filename":`${t.name}`}});if(r.status===200)return r.data;throw new Error(`Failed to create task: ${r.statusText}`)}catch(r){throw new Error(`Error creating task: ${r instanceof Error?r.message:"Unknown error"}`)}},cb=async(e,t)=>{try{const r=await k.post(`/api/importer-tasks/${e}/files/${t}/commit`,{});if(r.status!==200)throw new Error(`Failed to commit file: ${r.statusText}`)}catch(r){throw console.error("Error committing file:",r),new Error(`Failed to commit file: ${r instanceof Error?r.message:"Unknown error"}`)}},db=async e=>{const t={title:e.title,description:e.description,mode:e.mode,status:e.status,record_type:e.recordType,serializer:e.serializer,start_time:e.startTime,end_time:e.endTime};try{const r=await k.post("/api/importer-tasks",t);if(r.status===201)return r.data;throw new Error(`Failed to create task: ${r.statusText}`)}catch(r){throw new Error(`Error creating task: ${r instanceof Error?r.message:"Unknown error"}`)}},fb=async e=>{try{const t=await k.delete(`/api/importer-tasks/${e}`);return t.status===204?!0:(console.error(`Failed to delete task: ${t.statusText}`),!1)}catch(t){return console.error(`Error deleting task: ${t instanceof Error?t.message:"Unknown error"}`),!1}},Wa=async e=>{try{const t=await k.post(`/api/importer-tasks/${e}/load`);if(t.status===200)return t.data;throw new Error(`Unexpected response status: ${t.status}`)}catch(t){throw console.error("Error executing bulk import:",t),new Error("Failed to execute bulk import")}},pb=async()=>{try{const e=await k.get("/api/importer-tasks/config");return e.status===200?e.data:(console.error("Failed to fetch record types:",e.statusText),[])}catch(e){return console.error("Error fetching record types:",e),[]}},hb=async e=>{try{const t=await k.get(`/api/importer-tasks/config/${e}`);if(t.status===200)return t.data;throw new Error(`Unexpected response status: ${t.status}`)}catch(t){throw console.error("Error fetching serializers:",t),new Error("Failed to fetch serializers")}},gt=async e=>{try{const t=await k.put(`/api/importer-tasks/${e}/status`,{});if(t.status===200)return t.data;throw new Error(`Failed to get status of importer task: ${t.statusText}`)}catch(t){throw new Error(`Error getting status of importer task: ${t instanceof Error?t.message:"Unknown error"}`)}},gb=async(e,t)=>{const r=t.map(n=>({key:n}));try{const n=await k.post(`/api/importer-tasks/${e}/files`,r);if(n.status!==201)throw new Error(`Failed to initialize files: ${n.statusText}`)}catch(n){throw console.error("Error initializing files:",n),new Error(`Failed to initialize files: ${n instanceof Error?n.message:"Unknown error"}`)}},mb=async(e,t,r)=>{try{const n=await k.put(`/api/importer-tasks/${e}/files/${t}/content`,r,{headers:{"Content-Type":"application/octet-stream"}});if(n.status!==200)throw new Error(`Failed to upload file content: ${n.statusText}`)}catch(n){throw console.error("Error uploading file content:",n),new Error(`Failed to upload file content: ${n instanceof Error?n.message:"Unknown error"}`)}},Za=async e=>{try{const t=await k.post(`/api/importer-tasks/${e}/validate`,{});if(t.status===200)return t.data;throw new Error(`Failed to validate task: ${t.statusText}`)}catch(t){throw new Error(`Error validating task: ${t instanceof Error?t.message:"Unknown error"}`)}},Ja=async(e,t={})=>{const{autoExecute:r=!1,onProgress:n,onError:a}=t;try{n==null||n("Validating",0),await Za(e),n==null||n("Validating",50);let s=await gt(e);return n==null||n("Validating",100),r&&(s.status==="validated"||s.status==="validated with failures")&&(n==null||n("Executing",0),await Wa(e),n==null||n("Executing",50),s=await gt(e),n==null||n("Executing",100)),s}catch(s){const i=s instanceof Error?s:new Error("Unknown error during workflow execution");throw a==null||a(i,"Executing"),i}},Xa=async(e,t,r)=>{if(!t||t.length===0)return;const n=t.map(a=>a.name);await gb(e,n);for(const a of t)try{r==null||r({fileName:a.name,loaded:0,total:a.size,percentage:0}),await mb(e,a.name,a),r==null||r({fileName:a.name,loaded:a.size,total:a.size,percentage:90}),await cb(e,a.name),r==null||r({fileName:a.name,loaded:a.size,total:a.size,percentage:100})}catch(s){throw new Error(`Failed to upload file ${a.name}: ${s instanceof Error?s.message:"Unknown error"}`)}},yb=async(e,t,r,n={})=>{const{autoValidate:a=!1,autoExecute:s=!1,onProgress:i,onError:l}=n;try{i==null||i("Creating Task",0);const u=await db(e);if(!u)throw new Error("Failed to create import task");return i==null||i("Creating Task",100),t&&(i==null||i("Uploading Metadata",0),await Ya(u.id,t),i==null||i("Uploading Metadata",100)),r&&r.length>0&&await Xa(u.id,r,c=>{i==null||i("Uploading Files",c.percentage)}),a&&t&&await Ja(u.id,{autoExecute:s,onProgress:i,onError:l}),u}catch(u){const c=u instanceof Error?u:new Error("Unknown error during task creation");throw l==null||l(c,"Creating Task"),c}},vb=async(e,t,r,n={})=>{const{onProgress:a,onError:s}=n;try{a==null||a("Updating",0),t&&(a==null||a("Updating Metadata",0),await Ya(e,t),a==null||a("Updating Metadata",100)),r&&r.length>0&&await Xa(e,r,i=>{a==null||a("Updating Files",i.percentage)}),a==null||a("Updating",100)}catch(i){const l=i instanceof Error?i:new Error("Unknown error during task update");throw s==null||s(l,"Updating"),l}},bb=async e=>{try{const t=await k.post(`/api/importer-records/${e}/run`,{});if(t.status===200)return t.data;throw new Error(`Failed to fetch import records: ${t.statusText}`)}catch(t){throw console.error("Failed to fetch import records:",t),t}},es=(e,t={})=>{const[r,n]=y.useState({isDeleting:!1,isValidating:!1,isBulkImporting:!1,isGettingStatus:!1,error:null}),{onDeleteSuccess:a,onDeleteError:s,onValidateSuccess:i,onValidateError:l,onBulkImportSuccess:u,onBulkImportError:c,onStatusChangeSuccess:p,onStatusChangeError:f}=t,h=y.useCallback(()=>{n(m=>({...m,error:null}))},[]),g=y.useCallback(async()=>{n(m=>({...m,isDeleting:!0,error:null}));try{if(!await fb(e))throw new Error(`Failed to delete task ${e}`);a==null||a()}catch(m){const _=m instanceof Error?m:new Error("Unknown error");throw n(F=>({...F,error:_})),s==null||s(_),_}finally{n(m=>({...m,isDeleting:!1}))}},[e,a,s]),v=y.useCallback(async()=>{n(m=>({...m,isValidating:!0,error:null}));try{const m=await Za(e);if(!m)throw new Error(`Validation failed for task ${e}`);return i==null||i(m),m}catch(m){const _=m instanceof Error?m:new Error("Unknown error");throw n(F=>({...F,error:_})),l==null||l(_),_}finally{n(m=>({...m,isValidating:!1}))}},[e,i,l]),b=y.useCallback(async()=>{n(m=>({...m,isBulkImporting:!0,error:null}));try{const m=await Wa(e);if(!m)throw new Error(`Failed to execute bulk import for task ${e}`);return u==null||u(m),m}catch(m){const _=m instanceof Error?m:new Error("Unknown error");throw n(F=>({...F,error:_})),c==null||c(_),_}finally{n(m=>({...m,isBulkImporting:!1}))}},[e,u,c]),S=y.useCallback(async()=>{n(m=>({...m,isGettingStatus:!0,error:null}));try{const m=await gt(e);if(!m)throw new Error(`Failed to retrieve status for task ${e}`);return p==null||p(m),m}catch(m){const _=m instanceof Error?m:new Error("Unknown error");throw n(F=>({...F,error:_})),f==null||f(_),_}finally{n(m=>({...m,isGettingStatus:!1}))}},[e,p,f]);return{isDeleting:r.isDeleting,isValidating:r.isValidating,isBulkImporting:r.isBulkImporting,isGettingStatus:r.isGettingStatus,error:r.error,deleteTask:g,validateTask:v,runBulkImport:b,getStatus:S,clearError:h}},Eb=({result:e,index:t})=>{var S;const{refreshSearch:r,config:n}=et(),{deleteTask:a,validateTask:s,runBulkImport:i,getStatus:l,isDeleting:u,isValidating:c,isBulkImporting:p,isGettingStatus:f,error:h,clearError:g}=es(e.id,{onDeleteSuccess:()=>{r()},onValidateSuccess:()=>{r()},onBulkImportSuccess:()=>{r()},onStatusChangeSuccess:()=>{r()}});if(!e)return null;const v=(m,_)=>_?`${m}...`:m,b=u||c||p||f;return o.default.createElement(d.TableRow,{key:t},o.default.createElement(d.TableCell,null,o.default.createElement("a",{href:`${n.resultPath}/${e.id}`},e.title||"No title")),o.default.createElement(d.TableCell,null,Ga(e.created)),o.default.createElement(d.TableCell,null,o.default.createElement(ja,{status:e.status},ge(e.status))),o.default.createElement(d.TableCell,null,((S=e.records_status)==null?void 0:S.total_records)??0),o.default.createElement(d.TableCell,null,e.serializer),o.default.createElement(d.TableCell,null,ge(e.mode)),o.default.createElement(d.TableCell,{style:{width:"220px"}},h&&o.default.createElement("div",{style:{color:"red",fontSize:"12px",marginBottom:"5px"}},h.message,o.default.createElement(d.Button,{onClick:g,style:{marginLeft:"5px",fontSize:"10px"}},"Clear")),o.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},o.default.createElement(d.Dropdown,{text:b?"Processing...":"Select Action",floating:!0,labeled:!0,className:"icon",disabled:b,options:[{key:"download",text:"Download",value:"download",disabled:!0},{key:"validate",text:v("Retry Validation",c),value:"validate",disabled:b,onClick:()=>s()},{key:"load",text:v("Load Bulk Import",p),value:"load",disabled:b,onClick:()=>i()},{key:"status",text:v("Get Status",f),value:"status",disabled:b,onClick:()=>l()},{key:"delete",text:v("Delete",u),value:"delete",disabled:b,onClick:()=>a()}]}),o.default.createElement(d.Button,{basic:!0,size:"tiny",disabled:b,as:"a",href:`${n.resultPath}/${e.id}`},o.default.createElement(d.Icon,{name:"eye"}),"View"))))},Sb=({children:e})=>o.default.createElement(d.Table,{padded:!0,size:"small",comp:!0},o.default.createElement(d.TableHeader,null,o.default.createElement(d.TableRow,null,o.default.createElement(d.TableHeaderCell,null,"ID"),o.default.createElement(d.TableHeaderCell,null,"Date Created"),o.default.createElement(d.TableHeaderCell,null,"Status"),o.default.createElement(d.TableHeaderCell,null,"Records"),o.default.createElement(d.TableHeaderCell,null,"Serializer"),o.default.createElement(d.TableHeaderCell,null,"Mode"),o.default.createElement(d.TableHeaderCell,null,"Actions"))),o.default.createElement(d.TableBody,null,e)),V={aggs:[],appId:"search",defaultSortingOnEmptyQueryString:[{sortBy:"newest"}],initialQueryState:{filters:[],hiddenParams:null,layout:"list",page:1,size:10,sortBy:"newest"},layoutOptions:{gridView:!1,listView:!0},paginationOptions:{defaultValue:10,maxTotalResults:1e4,resultsPerPage:[{text:"10",value:10},{text:"20",value:20},{text:"50",value:50}]},searchApi:{axios:{headers:{Accept:"application/vnd.inveniordm.v1+json"},url:"/api/importer-tasks",withCredentials:!0},invenio:{requestSerializer:"InvenioRecordsResourcesRequestSerializer"}},sortOptions:[{sortBy:"newest",text:"Newest"},{sortBy:"oldest",text:"Oldest"}],sortOrderDisabled:!0,resultPath:"/administration/importer-tasks"},$b=()=>{const[e,t]=y.useState({}),[r,n]=y.useState(!0),{values:a,submitForm:s,isSubmitting:i,isValid:l,setFieldValue:u}=Xs.useFormikContext(),c=y.useCallback(async()=>{try{const h=await pb(),g={};for(const v of h){const b=await hb(v);b&&(g[v]=b)}t(g)}catch(h){console.error("Error fetching record types:",h)}finally{n(!1)}},[]),p=h=>{var v;const g=((v=h.target.files)==null?void 0:v[0])||null;u("metadata",g)},f=h=>{u("files",h)};return y.useEffect(()=>{c()},[c]),{configs:e,isLoading:r,values:a,submitForm:s,setFieldValue:u,handleFileChange:p,handleFilesChange:f,isSubmitting:i,isValid:l}},_b=({progress:e})=>{const{configs:t,isLoading:r,submitForm:n,handleFileChange:a,handleFilesChange:s,values:i,isSubmitting:l,isValid:u}=$b();return r?o.default.createElement("p",null,"Loading record types..."):!t||Object.keys(t).length===0?o.default.createElement("p",null,"No record types available."):o.default.createElement(y.Fragment,null,o.default.createElement(ee.TextField,{fieldPath:"task.title",label:"Title",placeholder:"Enter a title for the import task",required:!0}),o.default.createElement(d.Form.Group,{widths:"equal"},o.default.createElement(ee.SelectField,{fieldPath:"task.recordType",label:"Record Type",options:Object.keys(t).map(c=>({key:c,value:c,text:c})),placeholder:"Select Record Type",required:!0}),o.default.createElement(ee.SelectField,{fieldPath:"task.serializer",label:"Serializer",options:i.task.recordType&&t[i.task.recordType]?t[i.task.recordType].serializers.map(c=>({key:c,value:c,text:c})):[],placeholder:"Select Serializer",disabled:!i.task.recordType,required:!0}),o.default.createElement(ee.SelectField,{fieldPath:"task.mode",label:"Mode",options:[{key:"import",value:"import",text:"Import"},{key:"delete",value:"delete",text:"Delete"}],placeholder:"Select Mode",disabled:!i.task.recordType||!i.task.serializer,required:!0})),o.default.createElement(d.Form.Field,null,o.default.createElement("label",{htmlFor:"file-input"},"Metadata File"),o.default.createElement("input",{id:"file-input",type:"file",accept:".csv",onChange:a,style:{marginTop:"8px"}}),i.metadata&&o.default.createElement("p",{style:{marginTop:"8px",fontSize:"12px",color:"#666"}},"Selected: ",i.metadata.name),o.default.createElement("p",{style:{marginTop:"8px",fontSize:"12px",color:"#666"}},"Upload a CSV file containing the records metadata to be imported or deleted.")),o.default.createElement(d.Form.Field,null,o.default.createElement(rr,{value:i.files||[],onChange:s,accept:"*",maxSize:10*1024*1024*1024,maxFiles:100}),o.default.createElement("p",{style:{marginTop:"8px",fontSize:"12px",color:"#666"}},"Upload files related to the records. You can upload multiple files, and they will be associated with the import task.")),o.default.createElement(ee.TextAreaField,{fieldPath:"task.description",label:"Notes",placeholder:"Enter a description for the import task",rows:3}),o.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"1rem"}},o.default.createElement(d.Button,{type:"button",primary:!0,onClick:n,disabled:!u||l,loading:l},"Submit"),e&&Object.entries(e).map(([c,p])=>o.default.createElement(d.Segment.Inline,{basic:!0,key:c},o.default.createElement(d.Icon,{name:"spinner",loading:!0,style:{marginInlineEnd:"0.5rem"}}),o.default.createElement("strong",null,c,":")," ",p,"%"))))};var mt;try{mt=Map}catch{}var yt;try{yt=Set}catch{}function ts(e,t,r){if(!e||typeof e!="object"||typeof e=="function")return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map(vt);if(mt&&e instanceof mt)return new Map(Array.from(e.entries()));if(yt&&e instanceof yt)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var n=Object.create(e);r.push(n);for(var a in e){var s=t.findIndex(function(i){return i===e[a]});n[a]=s>-1?r[s]:ts(e[a],t,r)}return n}return e}function vt(e){return ts(e,[],[])}const Cb=Object.prototype.toString,xb=Error.prototype.toString,wb=RegExp.prototype.toString,Tb=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Fb=/^Symbol\((.*)\)(.*)$/;function Ib(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function Qr(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return Ib(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return Tb.call(e).replace(Fb,"Symbol($1)");const n=Cb.call(e).slice(8,-1);return n==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):n==="Error"||e instanceof Error?"["+xb.call(e)+"]":n==="RegExp"?wb.call(e):null}function me(e,t){let r=Qr(e,t);return r!==null?r:JSON.stringify(e,function(n,a){let s=Qr(this[n],t);return s!==null?s:a},2)}let Z={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:n})=>{let a=n!=null&&n!==r,s=`${e} must be a \`${t}\` type, but the final value was: \`${me(r,!0)}\``+(a?` (cast from the value \`${me(n,!0)}\`).`:".");return r===null&&(s+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),s},defined:"${path} must be defined"},U={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Ab={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},bt={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Ob={isValue:"${path} field must be ${value}"},Et={noUnknown:"${path} field has unspecified keys: ${unknown}"},Rb={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"};Object.assign(Object.create(null),{mixed:Z,string:U,number:Ab,date:bt,object:Et,array:Rb,boolean:Ob});var Pb=Object.prototype,kb=Pb.hasOwnProperty;function Db(e,t){return e!=null&&kb.call(e,t)}var Lb=Db,Ub=Lb,Nb=Cn;function Bb(e,t){return e!=null&&Nb(e,t,Ub)}var Mb=Bb;const Le=I(Mb),rs=e=>e&&e.__isYupSchema__;class zb{constructor(t,r){if(this.fn=void 0,this.refs=t,this.refs=t,typeof r=="function"){this.fn=r;return}if(!Le(r,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:a,otherwise:s}=r,i=typeof n=="function"?n:(...l)=>l.every(u=>u===n);this.fn=function(...l){let u=l.pop(),c=l.pop(),p=i(...l)?a:s;if(p)return typeof p=="function"?p(c):c.concat(p.resolve(u))}}resolve(t,r){let n=this.refs.map(s=>s.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),a=this.fn.apply(t,n.concat(t,r));if(a===void 0||a===t)return t;if(!rs(a))throw new TypeError("conditions must return a schema object");return a.resolve(r)}}function ns(e){return e==null?[]:[].concat(e)}function St(){return St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},St.apply(this,arguments)}let Qb=/\$\{\s*(\w+)\s*\}/g;class R extends Error{static formatError(t,r){const n=r.label||r.path||"this";return n!==r.path&&(r=St({},r,{path:n})),typeof t=="string"?t.replace(Qb,(a,s)=>me(r[s])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,n,a){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this.name="ValidationError",this.value=r,this.path=n,this.type=a,this.errors=[],this.inner=[],ns(t).forEach(s=>{R.isError(s)?(this.errors.push(...s.errors),this.inner=this.inner.concat(s.inner.length?s.inner:s)):this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,R)}}const jb=e=>{let t=!1;return(...r)=>{t||(t=!0,e(...r))}};function $t(e,t){let{endEarly:r,tests:n,args:a,value:s,errors:i,sort:l,path:u}=e,c=jb(t),p=n.length;const f=[];if(i=i||[],!p)return i.length?c(new R(i,s,u)):c(null,s);for(let h=0;h<n.length;h++){const g=n[h];g(a,function(b){if(b){if(!R.isError(b))return c(b,s);if(r)return b.value=s,c(b,s);f.push(b)}if(--p<=0){if(f.length&&(l&&f.sort(l),i.length&&f.push(...i),i=f),i.length){c(new R(i,s,u),s);return}c(null,s)}})}}function qb(e){return function(t,r,n){for(var a=-1,s=Object(t),i=n(t),l=i.length;l--;){var u=i[e?l:++a];if(r(s[u],u,s)===!1)break}return t}}var Gb=qb,Vb=Gb,Hb=Vb(),Kb=Hb,Yb=Kb,Wb=Se;function Zb(e,t){return e&&Yb(e,t,Wb)}var as=Zb,Jb="__lodash_hash_undefined__";function Xb(e){return this.__data__.set(e,Jb),this}var eE=Xb;function tE(e){return this.__data__.has(e)}var rE=tE,nE=Pt,aE=eE,sE=rE;function Ue(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new nE;++t<r;)this.add(e[t])}Ue.prototype.add=Ue.prototype.push=aE;Ue.prototype.has=sE;var iE=Ue;function oE(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var lE=oE;function uE(e,t){return e.has(t)}var cE=uE,dE=iE,fE=lE,pE=cE,hE=1,gE=2;function mE(e,t,r,n,a,s){var i=r&hE,l=e.length,u=t.length;if(l!=u&&!(i&&u>l))return!1;var c=s.get(e),p=s.get(t);if(c&&p)return c==t&&p==e;var f=-1,h=!0,g=r&gE?new dE:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var v=e[f],b=t[f];if(n)var S=i?n(b,v,f,t,e,s):n(v,b,f,e,t,s);if(S!==void 0){if(S)continue;h=!1;break}if(g){if(!fE(t,function(m,_){if(!pE(g,_)&&(v===m||a(v,m,r,n,s)))return g.push(_)})){h=!1;break}}else if(!(v===b||a(v,b,r,n,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var ss=mE;function yE(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var vE=yE;function bE(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var EE=bE,jr=ie,qr=Dn,SE=Ge,$E=ss,_E=vE,CE=EE,xE=1,wE=2,TE="[object Boolean]",FE="[object Date]",IE="[object Error]",AE="[object Map]",OE="[object Number]",RE="[object RegExp]",PE="[object Set]",kE="[object String]",DE="[object Symbol]",LE="[object ArrayBuffer]",UE="[object DataView]",Gr=jr?jr.prototype:void 0,st=Gr?Gr.valueOf:void 0;function NE(e,t,r,n,a,s,i){switch(r){case UE:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case LE:return!(e.byteLength!=t.byteLength||!s(new qr(e),new qr(t)));case TE:case FE:case OE:return SE(+e,+t);case IE:return e.name==t.name&&e.message==t.message;case RE:case kE:return e==t+"";case AE:var l=_E;case PE:var u=n&xE;if(l||(l=CE),e.size!=t.size&&!u)return!1;var c=i.get(e);if(c)return c==t;n|=wE,i.set(e,t);var p=$E(l(e),l(t),n,a,s,i);return i.delete(e),p;case DE:if(st)return st.call(e)==st.call(t)}return!1}var BE=NE,Vr=kn,ME=1,zE=Object.prototype,QE=zE.hasOwnProperty;function jE(e,t,r,n,a,s){var i=r&ME,l=Vr(e),u=l.length,c=Vr(t),p=c.length;if(u!=p&&!i)return!1;for(var f=u;f--;){var h=l[f];if(!(i?h in t:QE.call(t,h)))return!1}var g=s.get(e),v=s.get(t);if(g&&v)return g==t&&v==e;var b=!0;s.set(e,t),s.set(t,e);for(var S=i;++f<u;){h=l[f];var m=e[h],_=t[h];if(n)var F=i?n(_,m,h,t,e,s):n(m,_,h,e,t,s);if(!(F===void 0?m===_||a(m,_,r,n,s):F)){b=!1;break}S||(S=h=="constructor")}if(b&&!S){var A=e.constructor,M=t.constructor;A!=M&&"constructor"in e&&"constructor"in t&&!(typeof A=="function"&&A instanceof A&&typeof M=="function"&&M instanceof M)&&(b=!1)}return s.delete(e),s.delete(t),b}var qE=jE,it=Mt,GE=ss,VE=BE,HE=qE,Hr=ye,Kr=P,Yr=je,KE=At,YE=1,Wr="[object Arguments]",Zr="[object Array]",xe="[object Object]",WE=Object.prototype,Jr=WE.hasOwnProperty;function ZE(e,t,r,n,a,s){var i=Kr(e),l=Kr(t),u=i?Zr:Hr(e),c=l?Zr:Hr(t);u=u==Wr?xe:u,c=c==Wr?xe:c;var p=u==xe,f=c==xe,h=u==c;if(h&&Yr(e)){if(!Yr(t))return!1;i=!0,p=!1}if(h&&!p)return s||(s=new it),i||KE(e)?GE(e,t,r,n,a,s):VE(e,t,u,r,n,a,s);if(!(r&YE)){var g=p&&Jr.call(e,"__wrapped__"),v=f&&Jr.call(t,"__wrapped__");if(g||v){var b=g?e.value():e,S=v?t.value():t;return s||(s=new it),a(b,S,r,n,s)}}return h?(s||(s=new it),HE(e,t,r,n,a,s)):!1}var JE=ZE,XE=JE,Xr=Q;function is(e,t,r,n,a){return e===t?!0:e==null||t==null||!Xr(e)&&!Xr(t)?e!==e&&t!==t:XE(e,t,r,n,is,a)}var os=is,e0=Mt,t0=os,r0=1,n0=2;function a0(e,t,r,n){var a=r.length,s=a,i=!n;if(e==null)return!s;for(e=Object(e);a--;){var l=r[a];if(i&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=r[a];var u=l[0],c=e[u],p=l[1];if(i&&l[2]){if(c===void 0&&!(u in e))return!1}else{var f=new e0;if(n)var h=n(c,p,u,e,t,f);if(!(h===void 0?t0(p,c,r0|n0,n,f):h))return!1}}return!0}var s0=a0,i0=H;function o0(e){return e===e&&!i0(e)}var ls=o0,l0=ls,u0=Se;function c0(e){for(var t=u0(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,l0(a)]}return t}var d0=c0;function f0(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var us=f0,p0=s0,h0=d0,g0=us;function m0(e){var t=h0(e);return t.length==1&&t[0][2]?g0(t[0][0],t[0][1]):function(r){return r===e||p0(r,e,t)}}var y0=m0,v0=os,b0=_n,E0=Lt,S0=Rt,$0=ls,_0=us,C0=be,x0=1,w0=2;function T0(e,t){return S0(e)&&$0(t)?_0(C0(e),t):function(r){var n=b0(r,e);return n===void 0&&n===t?E0(r,e):v0(t,n,x0|w0)}}var F0=T0;function I0(e){return function(t){return t==null?void 0:t[e]}}var A0=I0,O0=Dt;function R0(e){return function(t){return O0(t,e)}}var P0=R0,k0=A0,D0=P0,L0=Rt,U0=be;function N0(e){return L0(e)?k0(U0(e)):D0(e)}var B0=N0,M0=y0,z0=F0,Q0=Nt,j0=P,q0=B0;function G0(e){return typeof e=="function"?e:e==null?Q0:typeof e=="object"?j0(e)?z0(e[0],e[1]):M0(e):q0(e)}var cs=G0,V0=Ze,H0=as,K0=cs;function Y0(e,t){var r={};return t=K0(t),H0(e,function(n,a,s){V0(r,a,t(n,a,s))}),r}var W0=Y0;const ds=I(W0);function X(e){this._maxSize=e,this.clear()}X.prototype.clear=function(){this._size=0,this._values=Object.create(null)};X.prototype.get=function(e){return this._values[e]};X.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var Z0=/[^.^\]^[]+|(?=\[\]|\.\.)/g,fs=/^\d+$/,J0=/^\d/,X0=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,eS=/^\s*(['"]?)(.*?)(\1)\s*$/,Jt=512,en=new X(Jt),tn=new X(Jt),rn=new X(Jt),rt={Cache:X,split:_t,normalizePath:ot,setter:function(e){var t=ot(e);return tn.get(e)||tn.set(e,function(n,a){for(var s=0,i=t.length,l=n;s<i-1;){var u=t[s];if(u==="__proto__"||u==="constructor"||u==="prototype")return n;l=l[t[s++]]}l[t[s]]=a})},getter:function(e,t){var r=ot(e);return rn.get(e)||rn.set(e,function(a){for(var s=0,i=r.length;s<i;)if(a!=null||!t)a=a[r[s++]];else return;return a})},join:function(e){return e.reduce(function(t,r){return t+(Xt(r)||fs.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){tS(Array.isArray(e)?e:_t(e),t,r)}};function ot(e){return en.get(e)||en.set(e,_t(e).map(function(t){return t.replace(eS,"$2")}))}function _t(e){return e.match(Z0)||[""]}function tS(e,t,r){var n=e.length,a,s,i,l;for(s=0;s<n;s++)a=e[s],a&&(aS(a)&&(a='"'+a+'"'),l=Xt(a),i=!l&&/^\d+$/.test(a),t.call(r,a,l,i,s,e))}function Xt(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function rS(e){return e.match(J0)&&!e.match(fs)}function nS(e){return X0.test(e)}function aS(e){return!Xt(e)&&(rS(e)||nS(e))}const we={context:"$",value:"."};class K{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===we.context,this.isValue=this.key[0]===we.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?we.context:this.isValue?we.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&rt.getter(this.path,!0),this.map=r.map}getValue(t,r,n){let a=this.isContext?n:this.isValue?t:r;return this.getter&&(a=this.getter(a||{})),this.map&&(a=this.map(a)),a}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}K.prototype.__isYupRef=!0;function Ne(){return Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ne.apply(this,arguments)}function sS(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Te(e){function t(r,n){let{value:a,path:s="",label:i,options:l,originalValue:u,sync:c}=r,p=sS(r,["value","path","label","options","originalValue","sync"]);const{name:f,test:h,params:g,message:v}=e;let{parent:b,context:S}=l;function m($){return K.isRef($)?$.getValue(a,b,S):$}function _($={}){const q=ds(Ne({value:a,originalValue:u,label:i,path:$.path||s},g,$.params),m),G=new R(R.formatError($.message||v,q),a,q.path,$.type||f);return G.params=q,G}let F=Ne({path:s,parent:b,type:f,createError:_,resolve:m,options:l,originalValue:u},p);if(!c){try{Promise.resolve(h.call(F,a,F)).then($=>{R.isError($)?n($):$?n(null,$):n(_())}).catch(n)}catch($){n($)}return}let A;try{var M;if(A=h.call(F,a,F),typeof((M=A)==null?void 0:M.then)=="function")throw new Error(`Validation test of type: "${F.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch($){n($);return}R.isError(A)?n(A):A?n(null,A):n(_())}return t.OPTIONS=e,t}let iS=e=>e.substr(0,e.length-1).substr(1);function oS(e,t,r,n=r){let a,s,i;return t?(rt.forEach(t,(l,u,c)=>{let p=u?iS(l):l;if(e=e.resolve({context:n,parent:a,value:r}),e.innerType){let f=c?parseInt(p,10):0;if(r&&f>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${t}. because there is no value at that index. `);a=r,r=r&&r[f],e=e.innerType}if(!c){if(!e.fields||!e.fields[p])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${i} which is a type: "${e._type}")`);a=r,r=r&&r[p],e=e.fields[p]}s=p,i=u?"["+l+"]":"."+l}),{schema:e,parent:a,parentPath:s}):{parent:a,parentPath:t,schema:e}}class Be{constructor(){this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const t=[];for(const r of this.list)t.push(r);for(const[,r]of this.refs)t.push(r.describe());return t}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}resolveAll(t){return this.toArray().reduce((r,n)=>r.concat(K.isRef(n)?t(n):n),[])}add(t){K.isRef(t)?this.refs.set(t.key,t):this.list.add(t)}delete(t){K.isRef(t)?this.refs.delete(t.key):this.list.delete(t)}clone(){const t=new Be;return t.list=new Set(this.list),t.refs=new Map(this.refs),t}merge(t,r){const n=this.clone();return t.list.forEach(a=>n.add(a)),t.refs.forEach(a=>n.add(a)),r.list.forEach(a=>n.delete(a)),r.refs.forEach(a=>n.delete(a)),n}}function D(){return D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D.apply(this,arguments)}class O{constructor(t){this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new Be,this._blacklist=new Be,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Z.notType)}),this.type=(t==null?void 0:t.type)||"mixed",this.spec=D({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},t==null?void 0:t.spec)}get _type(){return this.type}_typeCheck(t){return!0}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeError=this._typeError,r._whitelistError=this._whitelistError,r._blacklistError=this._blacklistError,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.exclusiveTests=D({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=vt(D({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let n=t(this);return this._mutate=r,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,n=t.clone();const a=D({},r.spec,n.spec);return n.spec=a,n._typeError||(n._typeError=r._typeError),n._whitelistError||(n._whitelistError=r._whitelistError),n._blacklistError||(n._blacklistError=r._blacklistError),n._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),n.tests=r.tests,n.exclusiveTests=r.exclusiveTests,n.withMutation(s=>{t.tests.forEach(i=>{s.test(i.OPTIONS)})}),n.transforms=[...r.transforms,...n.transforms],n}isType(t){return this.spec.nullable&&t===null?!0:this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let n=r.conditions;r=r.clone(),r.conditions=[],r=n.reduce((a,s)=>s.resolve(a,t),r),r=r.resolve(t)}return r}cast(t,r={}){let n=this.resolve(D({value:t},r)),a=n._cast(t,r);if(t!==void 0&&r.assert!==!1&&n.isType(a)!==!0){let s=me(t),i=me(a);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${n._type}". 

attempted value: ${s} 
`+(i!==s?`result of cast: ${i}`:""))}return a}_cast(t,r){let n=t===void 0?t:this.transforms.reduce((a,s)=>s.call(this,a,t,this),t);return n===void 0&&(n=this.getDefault()),n}_validate(t,r={},n){let{sync:a,path:s,from:i=[],originalValue:l=t,strict:u=this.spec.strict,abortEarly:c=this.spec.abortEarly}=r,p=t;u||(p=this._cast(p,D({assert:!1},r)));let f={value:p,path:s,options:r,originalValue:l,schema:this,label:this.spec.label,sync:a,from:i},h=[];this._typeError&&h.push(this._typeError);let g=[];this._whitelistError&&g.push(this._whitelistError),this._blacklistError&&g.push(this._blacklistError),$t({args:f,value:p,path:s,sync:a,tests:h,endEarly:c},v=>{if(v)return void n(v,p);$t({tests:this.tests.concat(g),args:f,path:s,sync:a,value:p,endEarly:c},n)})}validate(t,r,n){let a=this.resolve(D({},r,{value:t}));return typeof n=="function"?a._validate(t,r,n):new Promise((s,i)=>a._validate(t,r,(l,u)=>{l?i(l):s(u)}))}validateSync(t,r){let n=this.resolve(D({},r,{value:t})),a;return n._validate(t,D({},r,{sync:!0}),(s,i)=>{if(s)throw s;a=i}),a}isValid(t,r){return this.validate(t,r).then(()=>!0,n=>{if(R.isError(n))return!1;throw n})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(n){if(R.isError(n))return!1;throw n}}_getDefault(){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this):vt(t)}getDefault(t){return this.resolve(t||{})._getDefault()}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){let r=this.clone();return r.spec.strict=t,r}_isPresent(t){return t!=null}defined(t=Z.defined){return this.test({message:t,name:"defined",exclusive:!0,test(r){return r!==void 0}})}required(t=Z.required){return this.clone({presence:"required"}).withMutation(r=>r.test({message:t,name:"required",exclusive:!0,test(n){return this.schema._isPresent(n)}}))}notRequired(){let t=this.clone({presence:"optional"});return t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t}nullable(t=!0){return this.clone({nullable:t!==!1})}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=Z.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),a=Te(r),s=r.exclusive||r.name&&n.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(n.exclusiveTests[r.name]=!!r.exclusive),n.tests=n.tests.filter(i=>!(i.OPTIONS.name===r.name&&(s||i.OPTIONS.test===a.OPTIONS.test))),n.tests.push(a),n}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let n=this.clone(),a=ns(t).map(s=>new K(s));return a.forEach(s=>{s.isSibling&&n.deps.push(s.key)}),n.conditions.push(new zb(a,r)),n}typeError(t){let r=this.clone();return r._typeError=Te({message:t,name:"typeError",test(n){return n!==void 0&&!this.schema.isType(n)?this.createError({params:{type:this.schema._type}}):!0}}),r}oneOf(t,r=Z.oneOf){let n=this.clone();return t.forEach(a=>{n._whitelist.add(a),n._blacklist.delete(a)}),n._whitelistError=Te({message:r,name:"oneOf",test(a){if(a===void 0)return!0;let s=this.schema._whitelist,i=s.resolveAll(this.resolve);return i.includes(a)?!0:this.createError({params:{values:s.toArray().join(", "),resolved:i}})}}),n}notOneOf(t,r=Z.notOneOf){let n=this.clone();return t.forEach(a=>{n._blacklist.add(a),n._whitelist.delete(a)}),n._blacklistError=Te({message:r,name:"notOneOf",test(a){let s=this.schema._blacklist,i=s.resolveAll(this.resolve);return i.includes(a)?this.createError({params:{values:s.toArray().join(", "),resolved:i}}):!0}}),n}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(){const t=this.clone(),{label:r,meta:n}=t.spec;return{meta:n,label:r,type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(s=>({name:s.OPTIONS.name,params:s.OPTIONS.params})).filter((s,i,l)=>l.findIndex(u=>u.name===s.name)===i)}}}O.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])O.prototype[`${e}At`]=function(t,r,n={}){const{parent:a,parentPath:s,schema:i}=oS(this,t,r,n.context);return i[e](a&&a[s],D({},n,{parent:a,path:t}))};for(const e of["equals","is"])O.prototype[e]=O.prototype.oneOf;for(const e of["not","nope"])O.prototype[e]=O.prototype.notOneOf;O.prototype.optional=O.prototype.notRequired;const lS=O;lS.prototype;const N=e=>e==null;let uS=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,cS=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,dS=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,fS=e=>N(e)||e===e.trim(),pS={}.toString();function he(){return new ps}class ps extends O{constructor(){super({type:"string"}),this.withMutation(()=>{this.transform(function(t){if(this.isType(t)||Array.isArray(t))return t;const r=t!=null&&t.toString?t.toString():t;return r===pS?t:r})})}_typeCheck(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}_isPresent(t){return super._isPresent(t)&&!!t.length}length(t,r=U.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},test(n){return N(n)||n.length===this.resolve(t)}})}min(t,r=U.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},test(n){return N(n)||n.length>=this.resolve(t)}})}max(t,r=U.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},test(n){return N(n)||n.length<=this.resolve(t)}})}matches(t,r){let n=!1,a,s;return r&&(typeof r=="object"?{excludeEmptyString:n=!1,message:a,name:s}=r:a=r),this.test({name:s||"matches",message:a||U.matches,params:{regex:t},test:i=>N(i)||i===""&&n||i.search(t)!==-1})}email(t=U.email){return this.matches(uS,{name:"email",message:t,excludeEmptyString:!0})}url(t=U.url){return this.matches(cS,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=U.uuid){return this.matches(dS,{name:"uuid",message:t,excludeEmptyString:!1})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=U.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:fS})}lowercase(t=U.lowercase){return this.transform(r=>N(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,test:r=>N(r)||r===r.toLowerCase()})}uppercase(t=U.uppercase){return this.transform(r=>N(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,test:r=>N(r)||r===r.toUpperCase()})}}he.prototype=ps.prototype;var hS=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function gS(e){var t=[1,4,5,6,7,10,11],r=0,n,a;if(a=hS.exec(e)){for(var s=0,i;i=t[s];++s)a[i]=+a[i]||0;a[2]=(+a[2]||1)-1,a[3]=+a[3]||1,a[7]=a[7]?String(a[7]).substr(0,3):0,(a[8]===void 0||a[8]==="")&&(a[9]===void 0||a[9]==="")?n=+new Date(a[1],a[2],a[3],a[4],a[5],a[6],a[7]):(a[8]!=="Z"&&a[9]!==void 0&&(r=a[10]*60+a[11],a[9]==="+"&&(r=0-r)),n=Date.UTC(a[1],a[2],a[3],a[4],a[5]+r,a[6],a[7]))}else n=Date.parse?Date.parse(e):NaN;return n}let hs=new Date(""),mS=e=>Object.prototype.toString.call(e)==="[object Date]";class gs extends O{constructor(){super({type:"date"}),this.withMutation(()=>{this.transform(function(t){return this.isType(t)?t:(t=gS(t),isNaN(t)?hs:new Date(t))})})}_typeCheck(t){return mS(t)&&!isNaN(t.getTime())}prepareParam(t,r){let n;if(K.isRef(t))n=t;else{let a=this.cast(t);if(!this._typeCheck(a))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);n=a}return n}min(t,r=bt.min){let n=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},test(a){return N(a)||a>=this.resolve(n)}})}max(t,r=bt.max){let n=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},test(a){return N(a)||a<=this.resolve(n)}})}}gs.INVALID_DATE=hs;gs.prototype;function yS(e,t,r,n){var a=-1,s=e==null?0:e.length;for(n&&s&&(r=e[++a]);++a<s;)r=t(r,e[a],a,e);return r}var vS=yS;function bS(e){return function(t){return e==null?void 0:e[t]}}var ES=bS,SS=ES,$S={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},_S=SS($S),CS=_S,xS=CS,wS=ve,TS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,FS="\\u0300-\\u036f",IS="\\ufe20-\\ufe2f",AS="\\u20d0-\\u20ff",OS=FS+IS+AS,RS="["+OS+"]",PS=RegExp(RS,"g");function kS(e){return e=wS(e),e&&e.replace(TS,xS).replace(PS,"")}var DS=kS,LS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function US(e){return e.match(LS)||[]}var NS=US,BS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function MS(e){return BS.test(e)}var zS=MS,ms="\\ud800-\\udfff",QS="\\u0300-\\u036f",jS="\\ufe20-\\ufe2f",qS="\\u20d0-\\u20ff",GS=QS+jS+qS,ys="\\u2700-\\u27bf",vs="a-z\\xdf-\\xf6\\xf8-\\xff",VS="\\xac\\xb1\\xd7\\xf7",HS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",KS="\\u2000-\\u206f",YS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bs="A-Z\\xc0-\\xd6\\xd8-\\xde",WS="\\ufe0e\\ufe0f",Es=VS+HS+KS+YS,Ss="[']",nn="["+Es+"]",ZS="["+GS+"]",$s="\\d+",JS="["+ys+"]",_s="["+vs+"]",Cs="[^"+ms+Es+$s+ys+vs+bs+"]",XS="\\ud83c[\\udffb-\\udfff]",e$="(?:"+ZS+"|"+XS+")",t$="[^"+ms+"]",xs="(?:\\ud83c[\\udde6-\\uddff]){2}",ws="[\\ud800-\\udbff][\\udc00-\\udfff]",te="["+bs+"]",r$="\\u200d",an="(?:"+_s+"|"+Cs+")",n$="(?:"+te+"|"+Cs+")",sn="(?:"+Ss+"(?:d|ll|m|re|s|t|ve))?",on="(?:"+Ss+"(?:D|LL|M|RE|S|T|VE))?",Ts=e$+"?",Fs="["+WS+"]?",a$="(?:"+r$+"(?:"+[t$,xs,ws].join("|")+")"+Fs+Ts+")*",s$="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",i$="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",o$=Fs+Ts+a$,l$="(?:"+[JS,xs,ws].join("|")+")"+o$,u$=RegExp([te+"?"+_s+"+"+sn+"(?="+[nn,te,"$"].join("|")+")",n$+"+"+on+"(?="+[nn,te+an,"$"].join("|")+")",te+"?"+an+"+"+sn,te+"+"+on,i$,s$,$s,l$].join("|"),"g");function c$(e){return e.match(u$)||[]}var d$=c$,f$=NS,p$=zS,h$=ve,g$=d$;function m$(e,t,r){return e=h$(e),t=r?void 0:t,t===void 0?p$(e)?g$(e):f$(e):e.match(t)||[]}var y$=m$,v$=vS,b$=DS,E$=y$,S$="[']",$$=RegExp(S$,"g");function _$(e){return function(t){return v$(E$(b$(t).replace($$,"")),e,"")}}var Is=_$,C$=Is,x$=C$(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),w$=x$;const ln=I(w$);function T$(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s}var F$=T$,I$=F$;function A$(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:I$(e,t,r)}var O$=A$,R$="\\ud800-\\udfff",P$="\\u0300-\\u036f",k$="\\ufe20-\\ufe2f",D$="\\u20d0-\\u20ff",L$=P$+k$+D$,U$="\\ufe0e\\ufe0f",N$="\\u200d",B$=RegExp("["+N$+R$+L$+U$+"]");function M$(e){return B$.test(e)}var As=M$;function z$(e){return e.split("")}var Q$=z$,Os="\\ud800-\\udfff",j$="\\u0300-\\u036f",q$="\\ufe20-\\ufe2f",G$="\\u20d0-\\u20ff",V$=j$+q$+G$,H$="\\ufe0e\\ufe0f",K$="["+Os+"]",Ct="["+V$+"]",xt="\\ud83c[\\udffb-\\udfff]",Y$="(?:"+Ct+"|"+xt+")",Rs="[^"+Os+"]",Ps="(?:\\ud83c[\\udde6-\\uddff]){2}",ks="[\\ud800-\\udbff][\\udc00-\\udfff]",W$="\\u200d",Ds=Y$+"?",Ls="["+H$+"]?",Z$="(?:"+W$+"(?:"+[Rs,Ps,ks].join("|")+")"+Ls+Ds+")*",J$=Ls+Ds+Z$,X$="(?:"+[Rs+Ct+"?",Ct,Ps,ks,K$].join("|")+")",e1=RegExp(xt+"(?="+xt+")|"+X$+J$,"g");function t1(e){return e.match(e1)||[]}var r1=t1,n1=Q$,a1=As,s1=r1;function i1(e){return a1(e)?s1(e):n1(e)}var o1=i1,l1=O$,u1=As,c1=o1,d1=ve;function f1(e){return function(t){t=d1(t);var r=u1(t)?c1(t):void 0,n=r?r[0]:t.charAt(0),a=r?l1(r,1).join(""):t.slice(1);return n[e]()+a}}var p1=f1,h1=p1,g1=h1("toUpperCase"),m1=g1,y1=ve,v1=m1;function b1(e){return v1(y1(e).toLowerCase())}var E1=b1,S1=E1,$1=Is,_1=$1(function(e,t,r){return t=t.toLowerCase(),e+(r?S1(t):t)}),C1=_1;const x1=I(C1);var w1=Ze,T1=as,F1=cs;function I1(e,t){var r={};return t=F1(t),T1(e,function(n,a,s){w1(r,t(n,a,s),n)}),r}var A1=I1;const O1=I(A1);var er={exports:{}};er.exports=function(e){return Us(R1(e),e)};er.exports.array=Us;function Us(e,t){var r=e.length,n=new Array(r),a={},s=r,i=P1(t),l=k1(e);for(t.forEach(function(c){if(!l.has(c[0])||!l.has(c[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)a[s]||u(e[s],s,new Set);return n;function u(c,p,f){if(f.has(c)){var h;try{h=", node was:"+JSON.stringify(c)}catch{h=""}throw new Error("Cyclic dependency"+h)}if(!l.has(c))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(!a[p]){a[p]=!0;var g=i.get(c)||new Set;if(g=Array.from(g),p=g.length){f.add(c);do{var v=g[--p];u(v,l.get(v),f)}while(p);f.delete(c)}n[--r]=c}}}function R1(e){for(var t=new Set,r=0,n=e.length;r<n;r++){var a=e[r];t.add(a[0]),t.add(a[1])}return Array.from(t)}function P1(e){for(var t=new Map,r=0,n=e.length;r<n;r++){var a=e[r];t.has(a[0])||t.set(a[0],new Set),t.has(a[1])||t.set(a[1],new Set),t.get(a[0]).add(a[1])}return t}function k1(e){for(var t=new Map,r=0,n=e.length;r<n;r++)t.set(e[r],r);return t}var D1=er.exports;const L1=I(D1);function U1(e,t=[]){let r=[],n=new Set,a=new Set(t.map(([i,l])=>`${i}-${l}`));function s(i,l){let u=rt.split(i)[0];n.add(u),a.has(`${l}-${u}`)||r.push([l,u])}for(const i in e)if(Le(e,i)){let l=e[i];n.add(i),K.isRef(l)&&l.isSibling?s(l.path,i):rs(l)&&"deps"in l&&l.deps.forEach(u=>s(u,i))}return L1.array(Array.from(n),r).reverse()}function un(e,t){let r=1/0;return e.some((n,a)=>{var s;if(((s=t.path)==null?void 0:s.indexOf(n))!==-1)return r=a,!0}),r}function Ns(e){return(t,r)=>un(e,t)-un(e,r)}function re(){return re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},re.apply(this,arguments)}let cn=e=>Object.prototype.toString.call(e)==="[object Object]";function N1(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(n=>r.indexOf(n)===-1)}const B1=Ns([]);class Bs extends O{constructor(t){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=B1,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{this.transform(function(n){if(typeof n=="string")try{n=JSON.parse(n)}catch{n=null}return this.isType(n)?n:null}),t&&this.shape(t)})}_typeCheck(t){return cn(t)||typeof t=="function"}_cast(t,r={}){var n;let a=super._cast(t,r);if(a===void 0)return this.getDefault();if(!this._typeCheck(a))return a;let s=this.fields,i=(n=r.stripUnknown)!=null?n:this.spec.noUnknown,l=this._nodes.concat(Object.keys(a).filter(f=>this._nodes.indexOf(f)===-1)),u={},c=re({},r,{parent:u,__validating:r.__validating||!1}),p=!1;for(const f of l){let h=s[f],g=Le(a,f);if(h){let v,b=a[f];c.path=(r.path?`${r.path}.`:"")+f,h=h.resolve({value:b,context:r.context,parent:u});let S="spec"in h?h.spec:void 0,m=S==null?void 0:S.strict;if(S!=null&&S.strip){p=p||f in a;continue}v=!r.__validating||!m?h.cast(a[f],c):a[f],v!==void 0&&(u[f]=v)}else g&&!i&&(u[f]=a[f]);u[f]!==a[f]&&(p=!0)}return p?u:a}_validate(t,r={},n){let a=[],{sync:s,from:i=[],originalValue:l=t,abortEarly:u=this.spec.abortEarly,recursive:c=this.spec.recursive}=r;i=[{schema:this,value:l},...i],r.__validating=!0,r.originalValue=l,r.from=i,super._validate(t,r,(p,f)=>{if(p){if(!R.isError(p)||u)return void n(p,f);a.push(p)}if(!c||!cn(f)){n(a[0]||null,f);return}l=l||f;let h=this._nodes.map(g=>(v,b)=>{let S=g.indexOf(".")===-1?(r.path?`${r.path}.`:"")+g:`${r.path||""}["${g}"]`,m=this.fields[g];if(m&&"validate"in m){m.validate(f[g],re({},r,{path:S,from:i,strict:!0,parent:f,originalValue:l[g]}),b);return}b(null)});$t({sync:s,tests:h,value:f,errors:a,endEarly:u,sort:this._sortErrors,path:r.path},n)})}clone(t){const r=super.clone(t);return r.fields=re({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),n=r.fields;for(let[a,s]of Object.entries(this.fields)){const i=n[a];i===void 0?n[a]=s:i instanceof O&&s instanceof O&&(n[a]=s.concat(i))}return r.withMutation(()=>r.shape(n,this._excludedEdges))}getDefaultFromShape(){let t={};return this._nodes.forEach(r=>{const n=this.fields[r];t[r]="default"in n?n.getDefault():void 0}),t}_getDefault(){if("default"in this.spec)return super._getDefault();if(this._nodes.length)return this.getDefaultFromShape()}shape(t,r=[]){let n=this.clone(),a=Object.assign(n.fields,t);return n.fields=a,n._sortErrors=Ns(Object.keys(a)),r.length&&(Array.isArray(r[0])||(r=[r]),n._excludedEdges=[...n._excludedEdges,...r]),n._nodes=U1(a,n._excludedEdges),n}pick(t){const r={};for(const n of t)this.fields[n]&&(r[n]=this.fields[n]);return this.clone().withMutation(n=>(n.fields={},n.shape(r)))}omit(t){const r=this.clone(),n=r.fields;r.fields={};for(const a of t)delete n[a];return r.withMutation(()=>r.shape(n))}from(t,r,n){let a=rt.getter(t,!0);return this.transform(s=>{if(s==null)return s;let i=s;return Le(s,t)&&(i=re({},s),n||delete i[t],i[r]=a(s)),i})}noUnknown(t=!0,r=Et.noUnknown){typeof t=="string"&&(r=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:r,test(a){if(a==null)return!0;const s=N1(this.schema,a);return!t||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,r=Et.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>r&&O1(r,(n,a)=>t(a)))}camelCase(){return this.transformKeys(x1)}snakeCase(){return this.transformKeys(ln)}constantCase(){return this.transformKeys(t=>ln(t).toUpperCase())}describe(){let t=super.describe();return t.fields=ds(this.fields,r=>r.describe()),t}}function Ae(e){return new Bs(e)}Ae.prototype=Bs.prototype;const M1={task:{title:"",description:"",mode:"import",status:"created",startTime:null,endTime:null,recordType:"",serializer:""},metadata:null,files:[]},z1=Ae({task:Ae({title:he().required("Title is required"),recordType:he().required("Record type is required"),serializer:he().required("Serializer is required"),mode:he().required("Mode is required")}),metadata:Ae().nullable()}),Q1=({onSubmit:e})=>{const[t,r]=y.useState(void 0),n=async a=>{try{await yb(a.task,a.metadata,a.files,{autoValidate:!!a.metadata,onProgress(s,i){r({[s]:i})}}),e==null||e()}catch(s){throw console.error("Error creating import task:",s),s}};return o.default.createElement(ee.BaseForm,{formik:{initialValues:M1,validationSchema:z1,onSubmit:n}},o.default.createElement(_b,{progress:t}))},Ms=()=>{const[e,t]=y.useState(!1),{refreshSearch:r}=et(),n=y.useCallback(()=>{t(!1),r()},[r]);return o.default.createElement(d.Modal,{closeIcon:!0,onClose:()=>t(!1),onOpen:()=>t(!0),open:e,trigger:o.default.createElement(d.Button,{color:"green",icon:!0,labelPosition:"left"},o.default.createElement(d.Icon,{name:"add"}),"New Import")},o.default.createElement(d.ModalHeader,null,"New Import Task"),o.default.createElement(d.ModalContent,null,o.default.createElement(Q1,{onSubmit:n})),o.default.createElement(d.ModalActions,null,o.default.createElement(d.Button,{onClick:()=>t(!1)},"Close")))},j1=({currentQueryState:e,updateQueryState:t})=>{var s;const r=[{key:"all",label:"All",value:null},{key:"pending",label:"Pending",value:"pending"},{key:"success",label:"Success",value:"success"},{key:"failed",label:"Failed",value:"failed"}],n=(s=e.filters)==null?void 0:s.find(i=>i[0]==="status"),a=i=>{var u;const l=((u=e.filters)==null?void 0:u.filter(c=>c[0]!=="status"))||[];i&&l.push(["status",i]),t({...e,filters:l,page:1})};return o.default.createElement(d.Menu,{activeIndex:0,compact:!0,size:"tiny"},r.map(({key:i,label:l,value:u})=>o.default.createElement(d.Menu.Item,{key:i,name:i,active:(n==null?void 0:n[1])===u||u===null&&!n,onClick:()=>a(u)},l)))},zs=ya(j1),q1=({appId:e="search"})=>{const{showFacets:t,showImportModal:r}=et().config;return o.default.createElement(E.default,{id:`${e}.SearchBarRow`},o.default.createElement("section",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"1rem",paddingBlock:"0.5rem",minBlockSize:"3rem"},"aria-label":"Records search and filters"},t&&o.default.createElement("div",{style:{flex:"0 0 auto"}},o.default.createElement(zs,null)),o.default.createElement("div",{style:{flex:"1 1 auto",minInlineSize:"15rem"}},o.default.createElement(Yv,{autofocus:!0,actionProps:{icon:"search",content:"Search",className:"search","aria-label":"Submit search",type:"submit"},placeholder:"Search","aria-describedby":"search-instructions"})),r&&o.default.createElement("div",{style:{flex:"0 0 auto"}},o.default.createElement(Ms,null))))},G1=()=>{const{config:e}=et();return o.default.createElement(d.Grid,null,o.default.createElement(d.Grid.Row,{verticalAlign:"middle"},o.default.createElement(d.Grid.Column,{width:4,textAlign:"left"},o.default.createElement(wv,{label:t=>o.default.createElement("div",null,t," item(s)")})),o.default.createElement(d.Grid.Column,{width:8,textAlign:"center"},o.default.createElement(Dv,{options:{size:"mini"}})),o.default.createElement(d.Grid.Column,{width:4,textAlign:"right"},o.default.createElement(Vv,{values:e.paginationOptions.resultsPerPage,label:t=>o.default.createElement("p",null,t," results per page")}))))},tr=({config:e={},overriddenComponents:t={}})=>{var s,i,l,u,c;const r={...V,...e,initialQueryState:{...V.initialQueryState,...e.initialQueryState},layoutOptions:{...V.layoutOptions,...e.layoutOptions},paginationOptions:{...V.paginationOptions,...e.paginationOptions,resultsPerPage:((s=e.paginationOptions)==null?void 0:s.resultsPerPage)||V.paginationOptions.resultsPerPage},searchApi:{...V.searchApi,...e.searchApi,axios:{...V.searchApi.axios,...(i=e.searchApi)==null?void 0:i.axios,headers:{...V.searchApi.axios.headers,...(u=(l=e.searchApi)==null?void 0:l.axios)==null?void 0:u.headers}},invenio:{...V.searchApi.invenio,...(c=e.searchApi)==null?void 0:c.invenio}},showFacets:e.showFacets??!0,showImportModal:e.showImportModal??!0,showSearchFooter:e.showSearchFooter??!0},n=new jn(r.searchApi),a={[`${r.appId}.ResultsList.item`]:Eb,[`${r.appId}.ResultsList.container`]:Sb,[`${r.appId}.SearchFacets`]:zs,...t};return o.default.createElement(dn.OverridableContext.Provider,{value:a},o.default.createElement(dv,{appName:r.appId,searchApi:n,initialQueryState:r.initialQueryState},o.default.createElement(sb,{config:r},o.default.createElement(q1,{appId:r.appId}),o.default.createElement(Qv,null,o.default.createElement(Iv,null),o.default.createElement(wa,null)),r.showSearchFooter&&o.default.createElement(G1,null))))},V1=({totalRecords:e=0,validatedRecords:t=0,errorRecords:r=0,successRecords:n=0,showWhenEmpty:a=!1,className:s="",style:i={}})=>{const l=e>0?t/e*100:0,u=e>0?r/e*100:0,c=e>0?n/e*100:0;if(e===0&&!a)return null;const p=[{color:"blue",icon:"check circle",title:"Validation",value:t,label:`of ${e} Validated`,progress:l,progressLabel:`${l.toFixed(1)}% Complete`},{color:"red",icon:"exclamation triangle",title:"Errors",value:r,label:"Records with Issues",progress:u,progressLabel:`${u.toFixed(1)}% of Total`},{color:"green",icon:"upload",title:"Import",value:n,label:"Successfully Imported",progress:c,progressLabel:`${c.toFixed(1)}% Complete`}];return o.default.createElement(d.Segment,{basic:!0,className:s,style:i},o.default.createElement(d.Grid,{columns:3,stackable:!0},p.map(f=>o.default.createElement(d.Grid.Column,{key:f.title},o.default.createElement(d.Card,{fluid:!0},o.default.createElement(d.Card.Content,null,o.default.createElement(d.Card.Header,{textAlign:"center"},f.title),o.default.createElement(d.Card.Description,{textAlign:"center"},o.default.createElement(d.Statistic,{size:"large",color:f.color,style:{margin:"1rem 0"}},o.default.createElement(d.Statistic.Value,null,f.value),o.default.createElement(d.Statistic.Label,null,f.label)),o.default.createElement(d.Segment,{basic:!0,textAlign:"center"},o.default.createElement(d.Segment.Inline,{basic:!0,size:"small",style:{marginBottom:"0.5rem"}},f.progressLabel),o.default.createElement(d.Progress,{percent:f.progress,color:f.color,size:"small",style:{marginBottom:"0.5rem"}})))))))))},Qs=y.createContext(void 0),H1=({taskId:e,children:t})=>o.default.createElement(Qs.Provider,{value:{taskId:e}},o.default.createElement("div",{style:{paddingBlockStart:"1rem",display:"flex",flexDirection:"column",gap:"1rem"}},t)),js=()=>{const e=y.useContext(Qs);if(!e)throw new Error("useTaskDetails must be used within a TaskDetailsProvider");return e},K1=({children:e})=>o.default.createElement(d.Table,{padded:!0,size:"small",comp:!0},o.default.createElement(d.TableHeader,null,o.default.createElement(d.TableRow,null,o.default.createElement(d.TableHeaderCell,null,"ID"),o.default.createElement(d.TableHeaderCell,null,"Title"),o.default.createElement(d.TableHeaderCell,null,"Status"),o.default.createElement(d.TableHeaderCell,null))),o.default.createElement(d.TableBody,null,e)),Y1=({openModal:e,setOpenModal:t,result:r})=>o.default.createElement(d.Modal,{open:e,onClose:()=>t(!1),closeIcon:!0},o.default.createElement(d.Modal.Header,null,"Record Errors"),o.default.createElement(d.Modal.Content,null,r.errors&&r.errors.length>0?o.default.createElement(d.Message,{negative:!0,icon:!0},o.default.createElement(d.Icon,{name:"exclamation triangle"}),o.default.createElement(d.Message.Content,null,o.default.createElement(d.Message.Header,null,"Serializer validation failed"),o.default.createElement(d.List,{bulleted:!0},r.errors.map(n=>o.default.createElement(d.List.Item,{key:`${n.type}-${r.id}`},n.msg))))):o.default.createElement(d.Message,{positive:!0,icon:!0},o.default.createElement(d.Icon,{name:"check circle"}),o.default.createElement(d.Message.Content,null,o.default.createElement(d.Message.Header,null,"Validation successful"),"No errors found for this record."))),o.default.createElement(d.Modal.Actions,null,o.default.createElement(d.Button,{onClick:()=>t(!1),content:"Close",primary:!0}))),qs=({result:e,index:t})=>{var f;const[r,n]=y.useState("idle"),[a,s]=y.useState(!1);if(!e)return null;const i=async()=>{try{n("copying"),await navigator.clipboard.writeText(e.id),n("copied"),setTimeout(()=>{n("idle")},2e3)}catch{n("idle")}},l=e.errors&&e.errors.length>0,u=Ka(e.status),c=h=>h==="red"?"times":h==="green"||h==="blue"?"check":"question",p=[...l?[{key:"view-errors",text:"View Errors",value:"view-errors",icon:"exclamation triangle",onClick:()=>s(!0)}]:[],{key:"run",disabled:e.status==="success",text:"Run Record",value:"run",icon:"play",onClick:async()=>{try{await bb(e.id),console.log(`Record ${e.id} is being processed.`)}catch(h){console.error("Error running record:",h)}}},{key:"view-details",text:"View Details",value:"view-details",icon:"info circle",onClick:()=>{console.log(`Viewing details for record ${e.id}`)}}];return o.default.createElement(d.TableRow,{key:t},o.default.createElement(d.TableCell,null,o.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"}},o.default.createElement("code",{style:{fontSize:"0.9em",color:"#666"}},e.id.length>20?`${e.id.substring(0,20)}`:e.id),o.default.createElement(d.Popup,{content:r==="copied"?"Copied!":"Copy ID",trigger:o.default.createElement(d.Button,{size:"mini",circular:!0,icon:!0,loading:r==="copying",onClick:i,color:r==="copied"?"green":void 0},o.default.createElement(d.Icon,{name:r==="copied"?"check":"copy"})),position:"top center",size:"mini"}))),o.default.createElement(d.TableCell,null,o.default.createElement("div",{style:{maxWidth:"300px"}},((f=e.src_data)==null?void 0:f.title)||o.default.createElement("em",{style:{color:"#999"}},"No Title Available"))),o.default.createElement(d.TableCell,null,o.default.createElement(d.Label,{color:u,size:"small"},o.default.createElement(d.Icon,{name:c(u)}),ge(e.status)),l&&o.default.createElement(d.Popup,{content:`${e.errors.length} error${e.errors.length>1?"s":""} found`,trigger:o.default.createElement(d.Icon,{name:"exclamation triangle",color:"red",style:{marginLeft:"0.5rem",cursor:"help"}}),position:"top center",size:"mini"})),o.default.createElement(d.TableCell,{textAlign:"right"},o.default.createElement(d.Dropdown,{button:!0,className:"icon",floating:!0,labeled:!0,icon:"ellipsis horizontal",text:"Actions",size:"mini"},o.default.createElement(d.Dropdown.Menu,null,p.map(h=>o.default.createElement(d.Dropdown.Item,{key:h.key,icon:h.icon,text:h.text,disabled:h.disabled,onClick:h.onClick})))),o.default.createElement(Y1,{setOpenModal:s,openModal:a,result:e})))},W1=()=>{const{taskId:e}=js(),t={"search.SearchBarRow":()=>null,"search.ResultsList.container":K1,"search.ResultsList.item":qs};return o.default.createElement("div",null,o.default.createElement(d.Header,{as:"h3"},"Task Records"),o.default.createElement(tr,{config:{searchApi:{axios:{url:"/api/importer-records",withCredentials:!0}},initialQueryState:{hiddenParams:[["q",`task.id:${e}`]]},showFacets:!1,showImportModal:!1},overriddenComponents:t}))},Z1=({fileInputRef:e,accept:t,maxSize:r,maxFiles:n,disabled:a=!1,isDragOver:s,uploadFiles:i,onInputChange:l,onDragOver:u,onDragLeave:c,onDrop:p,onFileDialogOpen:f})=>o.default.createElement(y.Fragment,null,o.default.createElement("input",{ref:e,type:"file",multiple:!0,accept:t,onChange:l,style:{display:"none"},disabled:a}),o.default.createElement(d.Segment,{placeholder:!0,className:`file-drop-zone ${s?"drag-over":""}`,onDragOver:u,onDragLeave:c,onDrop:p,style:{minHeight:"120px",border:s?"2px dashed #2185d0":"2px dashed #d4d4d5",backgroundColor:s?"#f8f9fa":"transparent",cursor:a?"not-allowed":"pointer",opacity:a?.6:1},onClick:f},o.default.createElement("div",{style:{textAlign:"center",padding:"20px"}},o.default.createElement(d.Icon,{name:"cloud upload",size:"huge",color:s?"blue":"grey"}),o.default.createElement("div",{style:{marginTop:"10px"}},o.default.createElement("p",null,o.default.createElement("strong",null,"Drop files here or click to select")),o.default.createElement("p",{style:{fontSize:"12px",color:"#666"}},"Max size: ",tt(r)," | Max files: ",n),i.length>0&&o.default.createElement("p",{style:{fontSize:"12px",color:"#2185d0",marginTop:"8px"}},o.default.createElement("strong",null,i.length," files selected "," ",Zt(i)," total")))))),Gs=({onUploadError:e}={})=>{const[t,r]=y.useState([]),[n]=y.useState(!1),a=y.useCallback((u,c,p)=>c&&!c.split(",").map(g=>g.trim()).some(g=>g.startsWith(".")?u.name.toLowerCase().endsWith(g.toLowerCase()):u.type.match(new RegExp(g.replace("*",".*"))))?`File type not accepted. Accepted types: ${c}`:p&&u.size>p?`File size exceeds maximum of ${(p/1024/1024).toFixed(2)}MB`:null,[]),s=y.useCallback((u,c,p,f)=>{const h=[],g=[];for(const v of u){if(f&&t.length+h.length>=f){g.push(`Maximum ${f} files allowed`);break}const b=a(v,c,p);if(b){g.push(`${v.name}: ${b}`);continue}if(t.some(m=>m.file.name===v.name&&m.file.size===v.size)){g.push(`${v.name}: File already selected`);continue}h.push({file:v,id:`${v.name}-${v.size}-${Date.now()}`})}return g.length>0&&(e==null||e(g.join(", "))),r(v=>[...v,...h]),h},[t,a,e]),i=y.useCallback(u=>{r(c=>c.filter(p=>p.id!==u))},[]),l=y.useCallback(()=>{r([])},[]);return{uploadFiles:t,isUploading:n,addFiles:s,removeFile:i,clearFiles:l}},J1=({uploadFiles:e,isUploading:t,handleRemoveFile:r,handleClearFiles:n})=>o.default.createElement(d.Segment,null,o.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"}},o.default.createElement("strong",null,"Selected Files (",e.length,") "," ",Zt(e)),o.default.createElement(d.Button,{size:"mini",basic:!0,icon:"trash",content:"Clear All",onClick:n,disabled:t})),o.default.createElement(d.List,{divided:!0},e.map(a=>o.default.createElement(d.List.Item,{key:a.id},o.default.createElement(d.List.Content,null,o.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},o.default.createElement("div",{style:{flex:1}},o.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},o.default.createElement(d.Icon,{name:"file"}),o.default.createElement("span",null,a.file.name),o.default.createElement(d.Label,{size:"mini",basic:!0},tt(a.file.size))),a.error&&o.default.createElement(d.Message,{negative:!0,size:"mini",style:{marginTop:"5px"}},a.error)),o.default.createElement(d.Button,{size:"mini",basic:!0,icon:"close",onClick:()=>r(a.id),disabled:t}))))))),rr=({onChange:e,accept:t=".csv,.json,.xlsx,.txt",maxSize:r=10*1024*1024,maxFiles:n=5,disabled:a=!1,error:s})=>{const i=y.useRef(null),[l,u]=o.default.useState(!1),{uploadFiles:c,isUploading:p,addFiles:f,removeFile:h,clearFiles:g}=Gs({onUploadComplete:$=>{e($)},onUploadError:$=>{console.error("Upload error:",$)}}),v=y.useCallback($=>{if(!$||$.length===0)return;const q=Array.from($),G=f(q,t,r,n);if(G.length>0){const Hs=[...c,...G].map(Ks=>Ks.file);e(Hs)}},[f,t,r,n,e,c]),b=y.useCallback($=>{v($.target.files),i.current&&(i.current.value="")},[v]),S=y.useCallback($=>{$.preventDefault(),a||u(!0)},[a]),m=y.useCallback($=>{$.preventDefault(),u(!1)},[]),_=y.useCallback($=>{$.preventDefault(),u(!1),!a&&v($.dataTransfer.files)},[a,v]),F=y.useCallback(()=>{var $;a||($=i.current)==null||$.click()},[a]),A=y.useCallback($=>{h($);const q=c.filter(G=>G.id!==$).map(G=>G.file);e(q)},[h,c,e]),M=y.useCallback(()=>{g(),e([])},[g,e]);return o.default.createElement("div",null,o.default.createElement(Z1,{fileInputRef:i,accept:t,maxSize:r,maxFiles:n,isDragOver:l,disabled:a,uploadFiles:c,onInputChange:b,onDragOver:S,onDragLeave:m,onDrop:_,onFileDialogOpen:F}),s&&o.default.createElement(d.Message,{negative:!0,size:"small"},o.default.createElement(d.Icon,{name:"exclamation triangle"}),s),c.length>0&&o.default.createElement(J1,{uploadFiles:c,isUploading:p,handleRemoveFile:A,handleClearFiles:M}))},X1=()=>{const{taskId:e}=js(),[t,r]=y.useState(null),[n,a]=y.useState([]),[s,i]=y.useState(!1),l=f=>{var g;const h=((g=f.target.files)==null?void 0:g[0])||null;r(h||null)},u=f=>{a(f)},c=()=>{i(!1),r(null),a([])},p=async()=>{if(!(!t&&n.length===0))try{await vb(e,t,n.length>0?n:void 0,{onProgress:(f,h,g)=>{console.log(`${f}: ${h}% ${g||""}`)},onError:(f,h)=>{console.error(`Error during ${h}:`,f)}}),t&&await Ja(e,{autoExecute:!0,onProgress:(f,h,g)=>{console.log(`${f}: ${h}% ${g||""}`)},onError:(f,h)=>{console.error(`Error during ${h}:`,f)}}),i(!1),r(null),a([])}catch(f){console.error("Error uploading content:",f)}};return o.default.createElement(d.Modal,{open:s,onOpen:()=>i(!0),onClose:c,size:"small",closeIcon:!0,trigger:o.default.createElement(d.Button,{icon:"upload",size:"small",content:"Upload Content"})},o.default.createElement(d.Header,{icon:!0},o.default.createElement(d.Icon,{name:"upload"}),"Upload Metadata & Files"),o.default.createElement(d.Modal.Content,null,o.default.createElement(d.Form,{onSubmit:p},o.default.createElement(d.Form.Field,null,o.default.createElement("label",{htmlFor:"fileInput"},"Select Metadata File (Optional)"),o.default.createElement("input",{id:"fileInput",type:"file",onChange:l,accept:".csv"}),t&&o.default.createElement("div",{style:{marginTop:"0.5rem",color:"#666"}},"Selected: ",t.name)),o.default.createElement(d.Form.Field,null,o.default.createElement("div",{style:{marginBottom:"8px",fontSize:"14px",fontWeight:"bold"}},"Additional Files (Optional)"),o.default.createElement(rr,{value:n,onChange:u,accept:"*",maxSize:10*1024*1024*1024,maxFiles:100})))),o.default.createElement(d.Modal.Actions,null,o.default.createElement(d.Button,{onClick:c,color:"grey"},o.default.createElement(d.Icon,{name:"cancel"}),"Cancel"),o.default.createElement(d.Button,{onClick:p,color:"blue",disabled:!t&&n.length===0},o.default.createElement(d.Icon,{name:"upload"}),"Upload")))},Vs=({taskId:e})=>{var h,g,v,b,S,m;const[t,r]=y.useState(null),{getStatus:n,isGettingStatus:a,runBulkImport:s,isBulkImporting:i,error:l}=es(e,{onStatusChangeSuccess:r});if(y.useEffect(()=>{n()},[n]),a||i)return o.default.createElement(d.Segment,null,o.default.createElement(d.Loader,{content:"Loading task details..."}));if(l)return o.default.createElement(d.Message,{negative:!0,icon:!0},o.default.createElement(d.Icon,{name:"exclamation triangle"}),o.default.createElement(d.Message.Content,null,o.default.createElement(d.Message.Header,null,"Error Loading Task"),l));if(!t)return o.default.createElement(d.Message,{warning:!0,icon:!0},o.default.createElement(d.Icon,{name:"search"}),o.default.createElement(d.Message.Content,null,o.default.createElement(d.Message.Header,null,"Task Not Found"),"The requested task could not be found."));const u=((h=t.records_status)==null?void 0:h.total_records)||0,c=((g=t.records_status)==null?void 0:g.validated)||0,p=((v=t.records_status)==null?void 0:v.success)||0,f=(((b=t.records_status)==null?void 0:b["import failed"])||0)+(((S=t.records_status)==null?void 0:S["validation failed"])||0)+(((m=t.records_status)==null?void 0:m["serializer validation failed"])||0);return o.default.createElement(H1,{taskId:e},o.default.createElement(d.Segment.Group,{compact:!0,style:{border:"none",boxShadow:"none"}},o.default.createElement(d.Segment,null,o.default.createElement(d.Grid,null,o.default.createElement(d.Grid.Row,{verticalAlign:"middle"},o.default.createElement(d.Grid.Column,{width:8,verticalAlign:"middle"},o.default.createElement(d.Header,{as:"h2"},o.default.createElement(d.Icon,{name:"tasks",circular:!0}),o.default.createElement(d.Header.Content,null,t.title)),t.status&&o.default.createElement(ja,{size:"large",status:t.status},ge(t.status))),o.default.createElement(d.Grid.Column,{width:8,textAlign:"right"},o.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",gap:"1rem"}},o.default.createElement("div",null,o.default.createElement(d.Button,{size:"small",color:"blue",icon:"refresh",content:"Refresh",onClick:()=>n(),loading:a}),o.default.createElement(X1,null),o.default.createElement(d.Button,{size:"small",color:"green",icon:"play",onClick:async()=>{await s(),await n()},loading:i,disabled:!(t.status==="created"||t.status==="validated"),content:"Run Task"}))))),t.description&&o.default.createElement(d.Grid.Row,null,o.default.createElement(d.Grid.Column,{width:16},o.default.createElement(d.Message,{info:!0,icon:!0,size:"small"},o.default.createElement(d.Icon,{name:"info circle"}),o.default.createElement(d.Message.Content,null,o.default.createElement(d.Message.Header,null,"Notes"),t.description)))))),u>0&&o.default.createElement(d.Segment,{basic:!0},o.default.createElement(V1,{totalRecords:u,validatedRecords:c,errorRecords:f,successRecords:p}))),o.default.createElement(W1,null))},e_={Search:tr,TaskDetails:Vs},t_={CREATED:"created",VALIDATING:"validating",SERIALIZER_VALIDATION_FAILED:"serializer validation failed",VALIDATION_FAILED:"validation failed",VALIDATED:"validated",IMPORT_FAILED:"import failed",IMPORTED:"success"},r_={CREATED:"created",VALIDATING:"validating",VALIDATION_FAILED:"validated with failures",VALIDATED:"validated",IMPORTING:"importing",IMPORT_FAILED:"imported with failures",SUCCESS:"success",DAMAGED:"damaged"},n_={CREATING_TASK:"Creating Task",UPLOADING_METADATA:"Uploading Metadata",UPLOADING_FILES:"Uploading Files",UPDATING_METADATA:"Updating Metadata",UPDATING_FILES:"Updating Files",VALIDATING:"Validating",EXECUTING:"Executing",UPDATING:"Updating"};exports.BulkImporter=e_;exports.FileUploader=rr;exports.ImportModal=Ms;exports.ImporterTaskStates=r_;exports.InvenioImporterRecordStatus=t_;exports.OrchestrationStepsEnum=n_;exports.Search=tr;exports.TaskDetails=Vs;exports.TaskRecordItem=qs;exports.capitalizeFirstLetter=ge;exports.createSearchApi=lb;exports.createSearchApiConfig=ub;exports.formatDate=Ga;exports.formatFileSize=tt;exports.getCsrfToken=Ha;exports.getStatusColor=Ka;exports.getTotalSize=qa;exports.getTotalSizeFormatted=Zt;exports.useFileUploader=Gs;
