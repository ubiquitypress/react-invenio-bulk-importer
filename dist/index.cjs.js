"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const m=require("react"),vn=require("react-overridable"),ei=require("axios"),ti=require("qs"),R=require("react-redux"),c=require("semantic-ui-react"),pt=require("redux"),ri=require("redux-thunk"),ni=require("lodash"),ne=require("react-invenio-forms"),ai=require("formik"),oe=e=>e&&e.__esModule?e:{default:e},i=oe(m),$=oe(vn),Pe=oe(ei),le=oe(ti),si=oe(ri),ii=oe(ni);var Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var oi=Object.prototype;function li(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||oi;return e===r}var Ge=li;function ui(e,t){return function(r){return e(t(r))}}var bn=ui,ci=bn,di=ci(Object.keys,Object),fi=di,pi=Ge,hi=fi,gi=Object.prototype,mi=gi.hasOwnProperty;function yi(e){if(!pi(e))return hi(e);var t=[];for(var r in Object(e))mi.call(e,r)&&r!="constructor"&&t.push(r);return t}var En=yi,vi=typeof Fe=="object"&&Fe&&Fe.Object===Object&&Fe,Sn=vi,bi=Sn,Ei=typeof self=="object"&&self&&self.Object===Object&&self,Si=bi||Ei||Function("return this")(),q=Si,$i=q,_i=$i.Symbol,ue=_i,cr=ue,$n=Object.prototype,Ci=$n.hasOwnProperty,xi=$n.toString,ge=cr?cr.toStringTag:void 0;function wi(e){var t=Ci.call(e,ge),r=e[ge];try{e[ge]=void 0;var n=!0}catch{}var a=xi.call(e);return n&&(t?e[ge]=r:delete e[ge]),a}var Ti=wi,Fi=Object.prototype,Ii=Fi.toString;function Ai(e){return Ii.call(e)}var Oi=Ai,dr=ue,Ri=Ti,Pi=Oi,ki="[object Null]",Di="[object Undefined]",fr=dr?dr.toStringTag:void 0;function Li(e){return e==null?e===void 0?Di:ki:fr&&fr in Object(e)?Ri(e):Pi(e)}var Z=Li;function Ui(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var K=Ui;const Ni=P(K);var Bi=Z,Mi=K,zi="[object AsyncFunction]",Qi="[object Function]",ji="[object GeneratorFunction]",qi="[object Proxy]";function Gi(e){if(!Mi(e))return!1;var t=Bi(e);return t==Qi||t==ji||t==zi||t==qi}var _n=Gi,Vi=q,Hi=Vi["__core-js_shared__"],Ki=Hi,lt=Ki,pr=function(){var e=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Yi(e){return!!pr&&pr in e}var Wi=Yi,Zi=Function.prototype,Ji=Zi.toString;function Xi(e){if(e!=null){try{return Ji.call(e)}catch{}try{return e+""}catch{}}return""}var Cn=Xi,eo=_n,to=Wi,ro=K,no=Cn,ao=/[\\^$.*+?()[\]{}|]/g,so=/^\[object .+?Constructor\]$/,io=Function.prototype,oo=Object.prototype,lo=io.toString,uo=oo.hasOwnProperty,co=RegExp("^"+lo.call(uo).replace(ao,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fo(e){if(!ro(e)||to(e))return!1;var t=eo(e)?co:so;return t.test(no(e))}var po=fo;function ho(e,t){return e==null?void 0:e[t]}var go=ho,mo=po,yo=go;function vo(e,t){var r=yo(e,t);return mo(r)?r:void 0}var te=vo,bo=te,Eo=q,So=bo(Eo,"DataView"),$o=So,_o=te,Co=q,xo=_o(Co,"Map"),At=xo,wo=te,To=q,Fo=wo(To,"Promise"),Io=Fo,Ao=te,Oo=q,Ro=Ao(Oo,"Set"),Po=Ro,ko=te,Do=q,Lo=ko(Do,"WeakMap"),Uo=Lo,ht=$o,gt=At,mt=Io,yt=Po,vt=Uo,xn=Z,ce=Cn,hr="[object Map]",No="[object Object]",gr="[object Promise]",mr="[object Set]",yr="[object WeakMap]",vr="[object DataView]",Bo=ce(ht),Mo=ce(gt),zo=ce(mt),Qo=ce(yt),jo=ce(vt),X=xn;(ht&&X(new ht(new ArrayBuffer(1)))!=vr||gt&&X(new gt)!=hr||mt&&X(mt.resolve())!=gr||yt&&X(new yt)!=mr||vt&&X(new vt)!=yr)&&(X=function(e){var t=xn(e),r=t==No?e.constructor:void 0,n=r?ce(r):"";if(n)switch(n){case Bo:return vr;case Mo:return hr;case zo:return gr;case Qo:return mr;case jo:return yr}return t});var Ee=X;function qo(e){return e!=null&&typeof e=="object"}var G=qo,Go=Z,Vo=G,Ho="[object Arguments]";function Ko(e){return Vo(e)&&Go(e)==Ho}var Yo=Ko,br=Yo,Wo=G,wn=Object.prototype,Zo=wn.hasOwnProperty,Jo=wn.propertyIsEnumerable,Xo=br(function(){return arguments}())?br:function(e){return Wo(e)&&Zo.call(e,"callee")&&!Jo.call(e,"callee")},Ve=Xo,el=Array.isArray,L=el;const Tn=P(L);var tl=9007199254740991;function rl(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=tl}var Ot=rl,nl=_n,al=Ot;function sl(e){return e!=null&&al(e.length)&&!nl(e)}var He=sl,Le={exports:{}};function il(){return!1}var ol=il;Le.exports;(function(e,t){var r=q,n=ol,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?r.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||n;e.exports=d})(Le,Le.exports);var Ke=Le.exports,ll=Z,ul=Ot,cl=G,dl="[object Arguments]",fl="[object Array]",pl="[object Boolean]",hl="[object Date]",gl="[object Error]",ml="[object Function]",yl="[object Map]",vl="[object Number]",bl="[object Object]",El="[object RegExp]",Sl="[object Set]",$l="[object String]",_l="[object WeakMap]",Cl="[object ArrayBuffer]",xl="[object DataView]",wl="[object Float32Array]",Tl="[object Float64Array]",Fl="[object Int8Array]",Il="[object Int16Array]",Al="[object Int32Array]",Ol="[object Uint8Array]",Rl="[object Uint8ClampedArray]",Pl="[object Uint16Array]",kl="[object Uint32Array]",A={};A[wl]=A[Tl]=A[Fl]=A[Il]=A[Al]=A[Ol]=A[Rl]=A[Pl]=A[kl]=!0;A[dl]=A[fl]=A[Cl]=A[pl]=A[xl]=A[hl]=A[gl]=A[ml]=A[yl]=A[vl]=A[bl]=A[El]=A[Sl]=A[$l]=A[_l]=!1;function Dl(e){return cl(e)&&ul(e.length)&&!!A[ll(e)]}var Ll=Dl;function Ul(e){return function(t){return e(t)}}var Rt=Ul,Ue={exports:{}};Ue.exports;(function(e,t){var r=Sn,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,o=s&&r.process,l=function(){try{var u=a&&a.require&&a.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Ue,Ue.exports);var Pt=Ue.exports,Nl=Ll,Bl=Rt,Er=Pt,Sr=Er&&Er.isTypedArray,Ml=Sr?Bl(Sr):Nl,kt=Ml,zl=En,Ql=Ee,jl=Ve,ql=L,Gl=He,Vl=Ke,Hl=Ge,Kl=kt,Yl="[object Map]",Wl="[object Set]",Zl=Object.prototype,Jl=Zl.hasOwnProperty;function Xl(e){if(e==null)return!0;if(Gl(e)&&(ql(e)||typeof e=="string"||typeof e.splice=="function"||Vl(e)||Kl(e)||jl(e)))return!e.length;var t=Ql(e);if(t==Yl||t==Wl)return!e.size;if(Hl(e))return!zl(e).length;for(var r in e)if(Jl.call(e,r))return!1;return!0}var eu=Xl;const V=P(eu);var tu=Z,ru=G,nu="[object Symbol]";function au(e){return typeof e=="symbol"||ru(e)&&tu(e)==nu}var Dt=au,su=L,iu=Dt,ou=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lu=/^\w*$/;function uu(e,t){if(su(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||iu(e)?!0:lu.test(e)||!ou.test(e)||t!=null&&e in Object(t)}var Lt=uu,cu=te,du=cu(Object,"create"),Ye=du,$r=Ye;function fu(){this.__data__=$r?$r(null):{},this.size=0}var pu=fu;function hu(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var gu=hu,mu=Ye,yu="__lodash_hash_undefined__",vu=Object.prototype,bu=vu.hasOwnProperty;function Eu(e){var t=this.__data__;if(mu){var r=t[e];return r===yu?void 0:r}return bu.call(t,e)?t[e]:void 0}var Su=Eu,$u=Ye,_u=Object.prototype,Cu=_u.hasOwnProperty;function xu(e){var t=this.__data__;return $u?t[e]!==void 0:Cu.call(t,e)}var wu=xu,Tu=Ye,Fu="__lodash_hash_undefined__";function Iu(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Tu&&t===void 0?Fu:t,this}var Au=Iu,Ou=pu,Ru=gu,Pu=Su,ku=wu,Du=Au;function de(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}de.prototype.clear=Ou;de.prototype.delete=Ru;de.prototype.get=Pu;de.prototype.has=ku;de.prototype.set=Du;var Lu=de;function Uu(){this.__data__=[],this.size=0}var Nu=Uu;function Bu(e,t){return e===t||e!==e&&t!==t}var We=Bu,Mu=We;function zu(e,t){for(var r=e.length;r--;)if(Mu(e[r][0],t))return r;return-1}var Ze=zu,Qu=Ze,ju=Array.prototype,qu=ju.splice;function Gu(e){var t=this.__data__,r=Qu(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():qu.call(t,r,1),--this.size,!0}var Vu=Gu,Hu=Ze;function Ku(e){var t=this.__data__,r=Hu(t,e);return r<0?void 0:t[r][1]}var Yu=Ku,Wu=Ze;function Zu(e){return Wu(this.__data__,e)>-1}var Ju=Zu,Xu=Ze;function ec(e,t){var r=this.__data__,n=Xu(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var tc=ec,rc=Nu,nc=Vu,ac=Yu,sc=Ju,ic=tc;function fe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}fe.prototype.clear=rc;fe.prototype.delete=nc;fe.prototype.get=ac;fe.prototype.has=sc;fe.prototype.set=ic;var Je=fe,_r=Lu,oc=Je,lc=At;function uc(){this.size=0,this.__data__={hash:new _r,map:new(lc||oc),string:new _r}}var cc=uc;function dc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var fc=dc,pc=fc;function hc(e,t){var r=e.__data__;return pc(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Xe=hc,gc=Xe;function mc(e){var t=gc(this,e).delete(e);return this.size-=t?1:0,t}var yc=mc,vc=Xe;function bc(e){return vc(this,e).get(e)}var Ec=bc,Sc=Xe;function $c(e){return Sc(this,e).has(e)}var _c=$c,Cc=Xe;function xc(e,t){var r=Cc(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var wc=xc,Tc=cc,Fc=yc,Ic=Ec,Ac=_c,Oc=wc;function pe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}pe.prototype.clear=Tc;pe.prototype.delete=Fc;pe.prototype.get=Ic;pe.prototype.has=Ac;pe.prototype.set=Oc;var Ut=pe,Fn=Ut,Rc="Expected a function";function Nt(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Rc);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var o=e.apply(this,n);return r.cache=s.set(a,o)||s,o};return r.cache=new(Nt.Cache||Fn),r}Nt.Cache=Fn;var Pc=Nt,kc=Pc,Dc=500;function Lc(e){var t=kc(e,function(n){return r.size===Dc&&r.clear(),n}),r=t.cache;return t}var Uc=Lc,Nc=Uc,Bc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mc=/\\(\\)?/g,zc=Nc(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Bc,function(r,n,a,s){t.push(a?s.replace(Mc,"$1"):n||r)}),t}),Qc=zc;function jc(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var qc=jc,Cr=ue,Gc=qc,Vc=L,Hc=Dt,Kc=1/0,xr=Cr?Cr.prototype:void 0,wr=xr?xr.toString:void 0;function In(e){if(typeof e=="string")return e;if(Vc(e))return Gc(e,In)+"";if(Hc(e))return wr?wr.call(e):"";var t=e+"";return t=="0"&&1/e==-Kc?"-0":t}var Yc=In,Wc=Yc;function Zc(e){return e==null?"":Wc(e)}var Se=Zc,Jc=L,Xc=Lt,ed=Qc,td=Se;function rd(e,t){return Jc(e)?e:Xc(e,t)?[e]:ed(td(e))}var et=rd,nd=Dt,ad=1/0;function sd(e){if(typeof e=="string"||nd(e))return e;var t=e+"";return t=="0"&&1/e==-ad?"-0":t}var $e=sd,id=et,od=$e;function ld(e,t){t=id(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[od(t[r++])];return r&&r==n?e:void 0}var Bt=ld,ud=Bt;function cd(e,t,r){var n=e==null?void 0:ud(e,t);return n===void 0?r:n}var An=cd;const me=P(An);function dd(e,t){return e!=null&&t in Object(e)}var fd=dd,pd=9007199254740991,hd=/^(?:0|[1-9]\d*)$/;function gd(e,t){var r=typeof e;return t=t??pd,!!t&&(r=="number"||r!="symbol"&&hd.test(e))&&e>-1&&e%1==0&&e<t}var tt=gd,md=et,yd=Ve,vd=L,bd=tt,Ed=Ot,Sd=$e;function $d(e,t,r){t=md(t,e);for(var n=-1,a=t.length,s=!1;++n<a;){var o=Sd(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=a?s:(a=e==null?0:e.length,!!a&&Ed(a)&&bd(o,a)&&(vd(e)||yd(e)))}var On=$d,_d=fd,Cd=On;function xd(e,t){return e!=null&&Cd(e,t,_d)}var Mt=xd;const wd=P(Mt);var Td=te,Fd=function(){try{var e=Td(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Rn=Fd,Tr=Rn;function Id(e,t,r){t=="__proto__"&&Tr?Tr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var rt=Id,Ad=rt,Od=We,Rd=Object.prototype,Pd=Rd.hasOwnProperty;function kd(e,t,r){var n=e[t];(!(Pd.call(e,t)&&Od(n,r))||r===void 0&&!(t in e))&&Ad(e,t,r)}var zt=kd,Dd=zt,Ld=rt;function Ud(e,t,r,n){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var l=t[s],u=n?n(r[l],e[l],l,r,e):void 0;u===void 0&&(u=e[l]),a?Ld(r,l,u):Dd(r,l,u)}return r}var _e=Ud;function Nd(e){return e}var Qt=Nd;function Bd(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Md=Bd,zd=Md,Fr=Math.max;function Qd(e,t,r){return t=Fr(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=Fr(n.length-t,0),o=Array(s);++a<s;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),zd(e,this,l)}}var Pn=Qd;function jd(e){return function(){return e}}var qd=jd,Gd=qd,Ir=Rn,Vd=Qt,Hd=Ir?function(e,t){return Ir(e,"toString",{configurable:!0,enumerable:!1,value:Gd(t),writable:!0})}:Vd,Kd=Hd,Yd=800,Wd=16,Zd=Date.now;function Jd(e){var t=0,r=0;return function(){var n=Zd(),a=Wd-(n-r);if(r=n,a>0){if(++t>=Yd)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Xd=Jd,ef=Kd,tf=Xd,rf=tf(ef),kn=rf,nf=Qt,af=Pn,sf=kn;function of(e,t){return sf(af(e,t,nf),e+"")}var lf=of,uf=We,cf=He,df=tt,ff=K;function pf(e,t,r){if(!ff(r))return!1;var n=typeof t;return(n=="number"?cf(r)&&df(t,r.length):n=="string"&&t in r)?uf(r[t],e):!1}var hf=pf,gf=lf,mf=hf;function yf(e){return gf(function(t,r){var n=-1,a=r.length,s=a>1?r[a-1]:void 0,o=a>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(a--,s):void 0,o&&mf(r[0],r[1],o)&&(s=a<3?void 0:s,a=1),t=Object(t);++n<a;){var l=r[n];l&&e(t,l,n,s)}return t})}var vf=yf;function bf(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Ef=bf,Sf=Ef,$f=Ve,_f=L,Cf=Ke,xf=tt,wf=kt,Tf=Object.prototype,Ff=Tf.hasOwnProperty;function If(e,t){var r=_f(e),n=!r&&$f(e),a=!r&&!n&&Cf(e),s=!r&&!n&&!a&&wf(e),o=r||n||a||s,l=o?Sf(e.length,String):[],u=l.length;for(var d in e)(t||Ff.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||xf(d,u)))&&l.push(d);return l}var Dn=If;function Af(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Of=Af,Rf=K,Pf=Ge,kf=Of,Df=Object.prototype,Lf=Df.hasOwnProperty;function Uf(e){if(!Rf(e))return kf(e);var t=Pf(e),r=[];for(var n in e)n=="constructor"&&(t||!Lf.call(e,n))||r.push(n);return r}var Nf=Uf,Bf=Dn,Mf=Nf,zf=He;function Qf(e){return zf(e)?Bf(e,!0):Mf(e)}var nt=Qf,jf=_e,qf=vf,Gf=nt,Vf=qf(function(e,t){jf(t,Gf(t),e)}),Hf=Vf,Kf=Hf;const Ne=P(Kf);function Yf(e){return e&&e.length?e[0]:void 0}var Wf=Yf;const Zf=P(Wf);var Jf=zt,Xf=et,ep=tt,Ar=K,tp=$e;function rp(e,t,r,n){if(!Ar(e))return e;t=Xf(t,e);for(var a=-1,s=t.length,o=s-1,l=e;l!=null&&++a<s;){var u=tp(t[a]),d=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(a!=o){var f=l[u];d=n?n(f,u,l):void 0,d===void 0&&(d=Ar(f)?f:ep(t[a+1])?[]:{})}Jf(l,u,d),l=l[u]}return e}var np=rp,ap=Bt,sp=np,ip=et;function op(e,t,r){for(var n=-1,a=t.length,s={};++n<a;){var o=t[n],l=ap(e,o);r(l,o)&&sp(s,ip(o,e),l)}return s}var lp=op,up=lp,cp=Mt;function dp(e,t){return up(e,t,function(r,n){return cp(e,n)})}var fp=dp;function pp(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var jt=pp,Or=ue,hp=Ve,gp=L,Rr=Or?Or.isConcatSpreadable:void 0;function mp(e){return gp(e)||hp(e)||!!(Rr&&e&&e[Rr])}var yp=mp,vp=jt,bp=yp;function Ln(e,t,r,n,a){var s=-1,o=e.length;for(r||(r=bp),a||(a=[]);++s<o;){var l=e[s];t>0&&r(l)?t>1?Ln(l,t-1,r,n,a):vp(a,l):n||(a[a.length]=l)}return a}var Ep=Ln,Sp=Ep;function $p(e){var t=e==null?0:e.length;return t?Sp(e,1):[]}var _p=$p,Cp=_p,xp=Pn,wp=kn;function Tp(e){return wp(xp(e,void 0,Cp),e+"")}var Fp=Tp,Ip=fp,Ap=Fp,Op=Ap(function(e,t){return e==null?{}:Ip(e,t)}),Rp=Op;const Pp=P(Rp);var kp=Je;function Dp(){this.__data__=new kp,this.size=0}var Lp=Dp;function Up(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Np=Up;function Bp(e){return this.__data__.get(e)}var Mp=Bp;function zp(e){return this.__data__.has(e)}var Qp=zp,jp=Je,qp=At,Gp=Ut,Vp=200;function Hp(e,t){var r=this.__data__;if(r instanceof jp){var n=r.__data__;if(!qp||n.length<Vp-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Gp(n)}return r.set(e,t),this.size=r.size,this}var Kp=Hp,Yp=Je,Wp=Lp,Zp=Np,Jp=Mp,Xp=Qp,eh=Kp;function he(e){var t=this.__data__=new Yp(e);this.size=t.size}he.prototype.clear=Wp;he.prototype.delete=Zp;he.prototype.get=Jp;he.prototype.has=Xp;he.prototype.set=eh;var qt=he;function th(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var rh=th,nh=Dn,ah=En,sh=He;function ih(e){return sh(e)?nh(e):ah(e)}var Ce=ih,oh=_e,lh=Ce;function uh(e,t){return e&&oh(t,lh(t),e)}var ch=uh,dh=_e,fh=nt;function ph(e,t){return e&&dh(t,fh(t),e)}var hh=ph,Be={exports:{}};Be.exports;(function(e,t){var r=q,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,o=s?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(d,f){if(f)return d.slice();var p=d.length,g=l?l(p):new d.constructor(p);return d.copy(g),g}e.exports=u})(Be,Be.exports);var gh=Be.exports;function mh(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var yh=mh;function vh(e,t){for(var r=-1,n=e==null?0:e.length,a=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}var bh=vh;function Eh(){return[]}var Un=Eh,Sh=bh,$h=Un,_h=Object.prototype,Ch=_h.propertyIsEnumerable,Pr=Object.getOwnPropertySymbols,xh=Pr?function(e){return e==null?[]:(e=Object(e),Sh(Pr(e),function(t){return Ch.call(e,t)}))}:$h,Gt=xh,wh=_e,Th=Gt;function Fh(e,t){return wh(e,Th(e),t)}var Ih=Fh,Ah=bn,Oh=Ah(Object.getPrototypeOf,Object),Nn=Oh,Rh=jt,Ph=Nn,kh=Gt,Dh=Un,Lh=Object.getOwnPropertySymbols,Uh=Lh?function(e){for(var t=[];e;)Rh(t,kh(e)),e=Ph(e);return t}:Dh,Bn=Uh,Nh=_e,Bh=Bn;function Mh(e,t){return Nh(e,Bh(e),t)}var zh=Mh,Qh=jt,jh=L;function qh(e,t,r){var n=t(e);return jh(e)?n:Qh(n,r(e))}var Mn=qh,Gh=Mn,Vh=Gt,Hh=Ce;function Kh(e){return Gh(e,Hh,Vh)}var zn=Kh,Yh=Mn,Wh=Bn,Zh=nt;function Jh(e){return Yh(e,Zh,Wh)}var Xh=Jh,eg=Object.prototype,tg=eg.hasOwnProperty;function rg(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&tg.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var ng=rg,ag=q,sg=ag.Uint8Array,Qn=sg,kr=Qn;function ig(e){var t=new e.constructor(e.byteLength);return new kr(t).set(new kr(e)),t}var Vt=ig,og=Vt;function lg(e,t){var r=t?og(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var ug=lg,cg=/\w*$/;function dg(e){var t=new e.constructor(e.source,cg.exec(e));return t.lastIndex=e.lastIndex,t}var fg=dg,Dr=ue,Lr=Dr?Dr.prototype:void 0,Ur=Lr?Lr.valueOf:void 0;function pg(e){return Ur?Object(Ur.call(e)):{}}var hg=pg,gg=Vt;function mg(e,t){var r=t?gg(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var yg=mg,vg=Vt,bg=ug,Eg=fg,Sg=hg,$g=yg,_g="[object Boolean]",Cg="[object Date]",xg="[object Map]",wg="[object Number]",Tg="[object RegExp]",Fg="[object Set]",Ig="[object String]",Ag="[object Symbol]",Og="[object ArrayBuffer]",Rg="[object DataView]",Pg="[object Float32Array]",kg="[object Float64Array]",Dg="[object Int8Array]",Lg="[object Int16Array]",Ug="[object Int32Array]",Ng="[object Uint8Array]",Bg="[object Uint8ClampedArray]",Mg="[object Uint16Array]",zg="[object Uint32Array]";function Qg(e,t,r){var n=e.constructor;switch(t){case Og:return vg(e);case _g:case Cg:return new n(+e);case Rg:return bg(e,r);case Pg:case kg:case Dg:case Lg:case Ug:case Ng:case Bg:case Mg:case zg:return $g(e,r);case xg:return new n;case wg:case Ig:return new n(e);case Tg:return Eg(e);case Fg:return new n;case Ag:return Sg(e)}}var jg=Qg,qg=K,Nr=Object.create,Gg=function(){function e(){}return function(t){if(!qg(t))return{};if(Nr)return Nr(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Vg=Gg,Hg=Vg,Kg=Nn,Yg=Ge;function Wg(e){return typeof e.constructor=="function"&&!Yg(e)?Hg(Kg(e)):{}}var Zg=Wg,Jg=Ee,Xg=G,em="[object Map]";function tm(e){return Xg(e)&&Jg(e)==em}var rm=tm,nm=rm,am=Rt,Br=Pt,Mr=Br&&Br.isMap,sm=Mr?am(Mr):nm,im=sm,om=Ee,lm=G,um="[object Set]";function cm(e){return lm(e)&&om(e)==um}var dm=cm,fm=dm,pm=Rt,zr=Pt,Qr=zr&&zr.isSet,hm=Qr?pm(Qr):fm,gm=hm,mm=qt,ym=rh,vm=zt,bm=ch,Em=hh,Sm=gh,$m=yh,_m=Ih,Cm=zh,xm=zn,wm=Xh,Tm=Ee,Fm=ng,Im=jg,Am=Zg,Om=L,Rm=Ke,Pm=im,km=K,Dm=gm,Lm=Ce,Um=nt,Nm=1,Bm=2,Mm=4,jn="[object Arguments]",zm="[object Array]",Qm="[object Boolean]",jm="[object Date]",qm="[object Error]",qn="[object Function]",Gm="[object GeneratorFunction]",Vm="[object Map]",Hm="[object Number]",Gn="[object Object]",Km="[object RegExp]",Ym="[object Set]",Wm="[object String]",Zm="[object Symbol]",Jm="[object WeakMap]",Xm="[object ArrayBuffer]",ey="[object DataView]",ty="[object Float32Array]",ry="[object Float64Array]",ny="[object Int8Array]",ay="[object Int16Array]",sy="[object Int32Array]",iy="[object Uint8Array]",oy="[object Uint8ClampedArray]",ly="[object Uint16Array]",uy="[object Uint32Array]",T={};T[jn]=T[zm]=T[Xm]=T[ey]=T[Qm]=T[jm]=T[ty]=T[ry]=T[ny]=T[ay]=T[sy]=T[Vm]=T[Hm]=T[Gn]=T[Km]=T[Ym]=T[Wm]=T[Zm]=T[iy]=T[oy]=T[ly]=T[uy]=!0;T[qm]=T[qn]=T[Jm]=!1;function ke(e,t,r,n,a,s){var o,l=t&Nm,u=t&Bm,d=t&Mm;if(r&&(o=a?r(e,n,a,s):r(e)),o!==void 0)return o;if(!km(e))return e;var f=Om(e);if(f){if(o=Fm(e),!l)return $m(e,o)}else{var p=Tm(e),g=p==qn||p==Gm;if(Rm(e))return Sm(e,l);if(p==Gn||p==jn||g&&!a){if(o=u||g?{}:Am(e),!l)return u?Cm(e,Em(o,e)):_m(e,bm(o,e))}else{if(!T[p])return a?e:{};o=Im(e,p,l)}}s||(s=new mm);var y=s.get(e);if(y)return y;s.set(e,o),Dm(e)?e.forEach(function(_){o.add(ke(_,t,r,_,e,s))}):Pm(e)&&e.forEach(function(_,h){o.set(h,ke(_,t,r,h,e,s))});var E=d?u?wm:xm:u?Um:Lm,v=f?void 0:E(e);return ym(v||e,function(_,h){v&&(h=_,_=e[h]),vm(o,h,ke(_,t,r,h,e,s))}),o}var cy=ke,dy=cy,fy=1,py=4;function hy(e){return dy(e,fy|py)}var gy=hy;const ie=P(gy);var my=Z,yy=G,vy="[object Boolean]";function by(e){return e===!0||e===!1||yy(e)&&my(e)==vy}var Ey=by;const Sy=P(Ey);var $y=Z,_y=L,Cy=G,xy="[object String]";function wy(e){return typeof e=="string"||!_y(e)&&Cy(e)&&$y(e)==xy}var Ty=wy;const Fy=P(Ty);var Iy=Z,Ay=G,Oy="[object Number]";function Ry(e){return typeof e=="number"||Ay(e)&&Iy(e)==Oy}var Py=Ry;const ky=P(Py);function Ht(){}Ht.prototype=new Error;class jr{constructor(){this._addFilter=(t,r)=>{if(!Array.isArray(t))throw new Error(`Filter value "${t}" in query state must be an array.`);if(!(t.length===2||t.length===3))throw new Error(`Filter value "${t}" in query state must be an array of 2 or 3 elements`);const n=t.length===3;var a=t[0],s=t[1];if(n){if(!Array.isArray(t[2]))throw new Error(`Filter value "${t[2]}" in query state must be an array.`);s=s+"::"+t[2][1]}a in r?r[a].push(s):r[a]=[s]},this._addFilters=t=>{if(!Array.isArray(t))throw new Error(`Filters query state "${t}" must be an array.`);const r={};return t.forEach(n=>{this._addFilter(n,r)}),r},this.serialize=this.serialize.bind(this)}serialize(t){const{queryString:r,sortBy:n,sortOrder:a,page:s,size:o,filters:l,hiddenParams:u}=t;let d={};r!==null&&(d.q=r),n!==null&&(d.sort=n,a!==null&&(d.sort=a==="desc"?`-${n}`:n)),s>0&&(d.page=s),o>0&&(d.size=o),V(u)||Ne(d,this._addFilters(u));const f=this._addFilters(l);return Ne(d,f),le.default.stringify(d,{arrayFormat:"repeat"})}}class Dy{constructor(){this.serialize=this.serialize.bind(this)}serialize(t){const{aggregations:r,hits:n,...a}=t;return{aggregations:r||{},hits:n.hits,total:n.total,extras:a}}}function Ie(e,t){return e.indexOf(t)===0&&(e.length===t.length||e.indexOf(t+"&")===0)}function ut(e){return le.default.stringify({q:e})}function Ly(e){return le.default.parse(e).q}function Vn(e){if(e.length===3){const r=[e[0],e[1]],n=Vn(e[2]);return n.length&&r.push(n),r}return[]}function qr(e,t){const r=ut(e),n=t.map(o=>ut(o));let a=!1;const s=n.filter(o=>{const l=Ie(o,r),u=Ie(r,o);return l&&!a&&(a=!0),!l&&!u});if(!a)s.push(r);else if(e.length===3){const l=Vn(e),u=ut(l),d=s.some(f=>{const p=Ie(f,u),g=Ie(u,f);return p||g});(V(s)||!d)&&s.push(u)}return s.map(o=>Ly(o))}const Hn=(e,t)=>{if(V(e))return;if(!Tn(Zf(e)))return qr(e,t);let r=t;for(const n of e)r=qr(n,r);return r},Kn=(e,t,r)=>{let n=Pp(t,r);return V(n.filters)||(n.filters=Hn(n.filters,e.filters)),n},Me={queryString:"",suggestions:[],sortBy:null,sortOrder:null,page:-1,size:-1,filters:[],hiddenParams:[],layout:null},Yn=Object.keys(Me),Uy={loading:!1,data:{hits:[],total:0,aggregations:{}},error:{}},Ny={hasUserChangedSorting:!1,initialSortBy:null,initialSortOrder:null};class By{constructor(){this._checkFilter=t=>{if(!Array.isArray(t))throw new Error(`Filter value "${t}" in query state must be an array.`);if(!(t.length===2||t.length===3))throw new Error(`Filter value "${t}" in query state must be an array of 2 or 3 elements`)},this._addFilter=(t,r)=>{this._checkFilter(t);const n=t[0],a=t[1],s=t.length===3;s&&this._checkFilter(t[2]),n in r?s?r[n].push(a+"::"+t[2][1]):r[n].push(a):s?r[n]=[a+"::"+t[2][1]]:r[n]=[a]},this._addFilters=t=>{if(!Array.isArray(t))throw new Error(`Filters query state "${t}" must be an array.`);const r={};return t.forEach(n=>{this._addFilter(n,r)}),r},this.serialize=this.serialize.bind(this)}serialize(t){const{queryString:r,sortBy:n,sortOrder:a,page:s,size:o,filters:l,hiddenParams:u}=t;let d={};r!==null&&(d.q=r),n!==null&&(d.sort=n,a!==null&&(d.sort=a==="desc"?`-${n}`:n)),s>0&&(d.page=s),o>0&&(d.size=o),V(u)||Ne(d,this._addFilters(u));const f=this._addFilters(l);return Ne(d,f),le.default.stringify(d,{arrayFormat:"repeat"})}}class Wn{constructor(t){this.axiosConfig=me(t,"axios",{}),this.validateAxiosConfig(),this.initSerializers(t),this.initInterceptors(t),this.initAxios(),this.search=this.search.bind(this),this.axiosCancelToken=Pe.default.CancelToken}validateAxiosConfig(){if(!wd(this.axiosConfig,"url"))throw new Error("InvenioSearchApi config: `url` field is required.")}initInterceptors(t){this.requestInterceptor=me(t,"interceptors.request",void 0),this.responseInterceptor=me(t,"interceptors.response",void 0)}getSerializer(t){const r={InvenioRecordsResourcesRequestSerializer:By,InvenioRequestSerializer:jr};return typeof t=="string"?r[t]:t||jr}initSerializers(t){var r;const n=this.getSerializer((r=t.invenio)===null||r===void 0?void 0:r.requestSerializer),a=me(t,"invenio.responseSerializer",Dy);this.requestSerializer=new n,this.responseSerializer=new a}initAxios(){const t={paramsSerializer:this.requestSerializer.serialize,...this.axiosConfig};this.http=Pe.default.create(t),this.addInterceptors()}addInterceptors(){this.requestInterceptor&&this.http.interceptors.request.use(this.requestInterceptor.resolve,this.requestInterceptor.reject),this.responseInterceptor&&this.http.interceptors.request.use(this.responseInterceptor.resolve,this.responseInterceptor.reject)}async search(t){this.axiosCancel&&this.axiosCancel.cancel(),this.axiosCancel=this.axiosCancelToken.source();try{let r=await this.http.request({url:this.axiosConfig.url,params:t,cancelToken:this.axiosCancel.token});r=this.responseSerializer.serialize(r.data);const n=Kn(t,r.extras,Yn);return V(n)||(r.newQueryState=n),delete r.extras,r}catch(r){throw Pe.default.isCancel(r)?new Ht:r}}}class My{constructor(){this.isValid=(t,r,n)=>{switch(r){case"queryString":case"sortBy":return!0;case"sortOrder":return["asc","desc"].includes(n);case"page":case"size":return ky(n)&&n>0;case"layout":return["grid","list"].includes(n);case"filters":case"hiddenParams":{const a=Tn(n)?n:[n],s=":",o=t.urlFilterSeparator,l=`[^\\${s}\\${o}]*`,u=`${l}\\${s}${l}`,d=`${u}(\\${o}${u})*`,f=new RegExp(`^${d}$`);return a.every(p=>String(p).match(f))}default:return!1}}}}const zy=e=>{window.history.pushState&&window.history.pushState({path:e},"",e)},Gr=e=>{window.history.replaceState&&window.history.replaceState({path:e},"",e)};class Qy{constructor(){this._convertValue=(t,r)=>{switch(t){case this.paramsMapping.page:case this.paramsMapping.size:return parseInt(r);default:return r}},this.parse=this.parse.bind(this),this.paramsMapping={}}set urlParamsMapping(t){this.paramsMapping=t}parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const r=le.default.parse(t,{ignoreQueryPrefix:!0}),n={};return Object.entries(r).forEach(a=>{const s=a[0],o=a[1];n[s]=this._convertValue(s,o)}),n}}class jy{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._filterListToString=r=>{const n=r.length===3?this.urlFilterSeparator.concat(this._filterListToString(r[2])):"";return`${r[0]}:${r[1]}${n}`},this._mapQueryStateToUrlParams=r=>{const n={};Object.keys(r).filter(s=>s in this.urlParamsMapping).filter(s=>(s==="page"||s==="size")&&r[s]<=0||s==="hiddenParams"?!1:r[s]!==null).forEach(s=>{const o=this.urlParamsMapping[s];s==="filters"?n[o]=r[s].map(l=>this._filterListToString(l)):n[o]=r[s]});const a=(s,o)=>{const l="q";return s===l?-1:o===l?1:s.localeCompare(o)};return le.default.stringify(n,{addQueryPrefix:!0,skipNulls:!0,indices:!1,sort:a})},this._filterStringToList=r=>{const n=r.indexOf(this.urlFilterSeparator),a=n>-1,s=r.indexOf(":");if(s===-1)throw new Error(`Filter "${r}" not parsable. Format expected: "<agg name>:<value>"`);const o=r.slice(0,s),l=a?n:r.length,u=r.slice(s+1,l);let d=[o,u];if(a){const f=r.slice(n+1,r.length);d.push(this._filterStringToList(f))}return d},this._mapUrlParamsToQueryState=r=>{const n={};return Object.keys(r).forEach(a=>{const s=this.fromUrlParamsMapping[a];this.urlParamValidator.isValid(this,s,r[a])?(n[s]=r[a],s==="filters"&&(Array.isArray(r[a])||(r[a]=[r[a]]),n[s]=r[a].map(o=>this._filterStringToList(o)))):console.warn(`URL parameter '${a}' with value '${r[a]}' is incorrect and was ignored.`)}),n},this._mergeParamsIntoState=(r,n)=>{const a=ie(n);return Object.keys(r).forEach(s=>{a[s]=r[s]}),a},this.urlParamsMapping=Ni(t.urlParamsMapping)?t.urlParamsMapping:{queryString:"q",sortBy:"sort",sortOrder:"order",page:"p",size:"s",layout:"l",filters:"f",hiddenParams:"hp"},this.keepHistory=t.keepHistory!==void 0?t.keepHistory:!0,!Sy(this.keepHistory))throw new Error(`"keepHistory configuration must be a boolean, ${this.keepHistory} provided.`);if(this.urlFilterSeparator=t.urlFilterSeparator!==void 0?t.urlFilterSeparator:"+",!Fy(this.urlFilterSeparator))throw new Error(`"urlFilterSeparator configuration must be a string, ${this.urlFilterSeparator} provided.`);this.urlParamValidator=t.urlParamValidator||new My,this.urlParser=t.urlParser||new Qy,this.urlParser.urlParamsMapping=this.urlParamsMapping,this.fromUrlParamsMapping={},Object.keys(this.urlParamsMapping).forEach(r=>{this.fromUrlParamsMapping[this.urlParamsMapping[r]]=r}),this.get=this.get.bind(this),this.set=this.set.bind(this),this.replace=this.replace.bind(this)}get(t){const r=this.urlParser.parse(window.location.search),n=this._mapUrlParamsToQueryState(r),a=this._mergeParamsIntoState(n,t),s=this._mapQueryStateToUrlParams(a);return Gr(s),a}set(t){if(this.keepHistory){const r=this._mapQueryStateToUrlParams(t);zy(r)}else this.replace(t)}replace(t){const r=this._mapQueryStateToUrlParams(t);Gr(r)}}const qy="SET_QUERY_COMPONENT_INITIAL_STATE",Zn="SET_QUERY_STRING",Kt="SET_QUERY_SORTING",Yt="SET_QUERY_SORT_BY",Wt="SET_QUERY_SORT_ORDER",xe="SET_QUERY_STATE",Jn="SET_QUERY_PAGINATION_PAGE",Xn="SET_QUERY_PAGINATION_SIZE",ea="SET_QUERY_FILTERS",ta="SET_QUERY_SUGGESTIONS",ra="SET_SUGGESTION_STRING",na="CLEAR_QUERY_SUGGESTIONS",aa="RESULTS_LOADING",sa="RESULTS_FETCH_SUCCESS",ia="RESULTS_FETCH_ERROR",bt="RESULTS_UPDATE_LAYOUT",oa="RESET_QUERY",Gy=e=>t=>{e&&t(Q({shouldUpdateUrlQueryString:!1,shouldReplaceUrlQueryString:!0}))},la=e=>t=>{t({type:xe,payload:e}),t(Q())},ua=e=>t=>{t({type:Zn,payload:e}),t(Q())},Vy=(e,t)=>r=>{r({type:Kt,payload:{sortBy:e,sortOrder:t}}),r(Q())},Hy=e=>t=>{t({type:Yt,payload:e}),t(Q())},Ky=e=>t=>{t({type:Wt,payload:e}),t(Q())},Yy=e=>t=>{t({type:Jn,payload:e}),t(Q())},Wy=e=>t=>{t({type:Xn,payload:e}),t(Q())},Zt=e=>t=>{t({type:ea,payload:e}),t(Q())},Zy=e=>async(t,r,n)=>{const a=n.urlHandlerApi;if(a){await t({type:bt,payload:e});const s=r().query;a.set(s)}else t({type:bt,payload:e})},Jy=()=>(e,t,r)=>{e({type:oa,payload:{queryString:"",page:1,filters:[],...r.initialQueryState}}),e(Q())},Xy=(e,t,r,n)=>{const a=t.urlHandlerApi;a&&(r?a.replace(e):n&&a.set(e))},ev=(e,t,r,n)=>{const a=r().query;t({type:xe,payload:{...a,...e.newQueryState}});const s=ie(r().query),o=n.urlHandlerApi;return o&&o.replace(s),delete e.newStateQuery,e},tv=(e,t,r,n)=>{function a(l,u,d,f){l.queryString===""?(l.sortBy=d.defaultSortingOnEmptyQueryString.sortBy,l.sortOrder=d.defaultSortingOnEmptyQueryString.sortOrder):(l.sortBy=u.initialSortBy,l.sortOrder=u.initialSortOrder),f({type:xe,payload:l})}function s(l,u,d,f){u.hasUserChangedSorting||a(l,u,d,f)}!V(r.defaultSortingOnEmptyQueryString)&&s(e,t,r,n)},Q=function(){let{shouldUpdateUrlQueryString:e=!0,shouldReplaceUrlQueryString:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return async(r,n,a)=>{const s=n().app;let o=ie(n().query);tv(o,s,a,r),o=ie(n().query),Xy(o,a,t,e),r({type:aa});try{let u=await a.searchApi.search(o);"newQueryState"in u&&(u=ev(ie(u),r,n,a)),r({type:sa,payload:{aggregations:u.aggregations,hits:u.hits,total:u.total}})}catch(l){if(l instanceof Ht){console.debug(l);return}else console.error(l),r({type:ia,payload:{error:l}})}}},rv=e=>t=>{t({type:ra,payload:e}),t(nv())},nv=()=>async(e,t,r)=>{const n=ie(t().query),a=r.suggestionApi;try{const s=await a.search(n);e({type:ta,payload:{suggestions:s.suggestions}})}catch(s){console.error("Could not load suggestions due to: "+s)}},av=()=>e=>{e({type:na,payload:{suggestions:[]}})},sv=()=>(e,t,r)=>{if(r.urlHandlerApi){const n=r.urlHandlerApi.get(r.initialQueryState);e({type:xe,payload:n}),e(Q({shouldReplaceUrlQueryString:!0}))}},F=i.default.createContext({}),iv=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case Kt:return{...e,hasUserChangedSorting:!0};case Yt:return{...e,hasUserChangedSorting:!0};case Wt:return{...e,hasUserChangedSorting:!0};default:return e}},ov=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zn:return{...e,queryString:t.payload,page:1};case Kt:return{...e,sortBy:t.payload.sortBy,sortOrder:t.payload.sortOrder,_sortUserChanged:!0,page:1};case Yt:return{...e,sortBy:t.payload,_sortUserChanged:!0,page:1};case Wt:return{...e,sortOrder:t.payload,_sortUserChanged:!0,page:1};case Jn:return{...e,page:t.payload};case Xn:return{...e,size:t.payload,page:1};case ea:return{...e,page:1,filters:Hn(t.payload,e.filters)};case ta:return{...e,suggestions:t.payload.suggestions};case na:return{...e,suggestions:t.payload.suggestions};case ra:return{...e,suggestionString:t.payload};case qy:return{...e,...t.payload};case xe:return{...e,...Me,...Kn(Me,t.payload,Yn)};case bt:return{...e,layout:t.payload};case oa:return{...e,...t.payload};default:return e}},lv=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case aa:return{...e,loading:!0,data:{...e.data}};case sa:return{loading:!1,data:{...e.data,aggregations:t.payload.aggregations,hits:t.payload.hits,total:t.payload.total},error:{}};case ia:return{loading:!1,data:{...e.data,aggregations:{},hits:[],total:0},error:t.payload.error};default:return e}};var uv=pt.combineReducers({app:iv,query:ov,results:lv});function Vr(e,t){let{sortBy:r,sortOrder:n}=e,{sortBy:a,sortOrder:s}=t;return r!==a||n!==s}function cv(e,t,r){const n=Vr(r,t),a=!V(e.defaultSortingOnEmptyQueryString);let s=!1;return a&&(s=Vr(r,e.defaultSortingOnEmptyQueryString)),n&&s}function dv(e){const t={...Me,...e.initialQueryState},r=e.urlHandlerApi?e.urlHandlerApi.get(t):t,n=cv(e,t,r),a={...Ny,hasUserChangedSorting:n,initialSortBy:t.sortBy,initialSortOrder:t.sortOrder},s={...Uy,loading:e.searchOnInit};return{app:a,query:r,results:s}}function fv(e){const t=dv(e);return pt.createStore(uv,t,pt.applyMiddleware(si.default.withExtraArgument(e)))}function Hr(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const n=t?`.${t}`:"";return`${r?`${r}.`:""}${e}${n}`}class Jt extends m.Component{constructor(t){super(t),this.updateQueryState=r=>{const{updateQueryState:n}=this.props;n(r)},this.onQueryChanged=r=>{let{detail:n}=r;const{appName:a}=this.context;if(!a)this.updateQueryState(n.searchQuery);else{const o=n.appName;o===a?this.updateQueryState(n.searchQuery):console.debug(`React-SearchKit '${a}': ignoring event sent for app '${o}'`)}},this.searchOnInit=t.searchOnInit,this.eventListenerEnabled=t.eventListenerEnabled,this.onAppInitialized=t.onAppInitialized,this.searchOnUrlQueryStringChanged=t.searchOnUrlQueryStringChanged}componentDidMount(){this.eventListenerEnabled&&window.addEventListener("queryChanged",this.onQueryChanged),window.onpopstate=()=>{this.searchOnUrlQueryStringChanged()},this.onAppInitialized(this.searchOnInit)}componentWillUnmount(){window.onpopstate=()=>{},window.removeEventListener("queryChanged",this.onQueryChanged)}render(){const{children:t}=this.props;return t}}Jt.defaultProps={searchOnInit:!0,eventListenerEnabled:!1};Jt.contextType=F;var pv=$.default.component("Bootstrap",Jt);const hv=e=>({onAppInitialized:t=>e(Gy(t)),updateQueryState:t=>e(la(t)),searchOnUrlQueryStringChanged:()=>e(sv())}),gv=R.connect(null,hv)(pv);class Xt extends m.Component{constructor(t){super(t);const r={searchApi:t.searchApi,suggestionApi:t.suggestionApi,urlHandlerApi:t.urlHandlerApi.enabled?t.urlHandlerApi.customHandler||new jy(t.urlHandlerApi.overrideConfig):null,searchOnInit:t.searchOnInit,initialQueryState:t.initialQueryState,defaultSortingOnEmptyQueryString:t.defaultSortingOnEmptyQueryString};this.store=fv(r),this.appName=t.appName,this.eventListenerEnabled=t.eventListenerEnabled,this.componentIndex=0}render(){const{appName:t,children:r,eventListenerEnabled:n,overridableId:a,searchOnInit:s}=this.props,o={appName:t,buildUID:(u,d)=>Hr(u,d,t),nextComponentIndex:()=>`${this.appName}_${this.componentIndex++}`},l=Hr("ReactSearchKit.children",a,t);return i.default.createElement(F.Provider,{value:o},i.default.createElement(R.Provider,{store:this.store},i.default.createElement(gv,{searchOnInit:s,eventListenerEnabled:n},i.default.createElement($.default,{id:l},r))))}}Xt.defaultProps={suggestionApi:null,urlHandlerApi:{enabled:!0,overrideConfig:{},customHandler:null},searchOnInit:!0,appName:"",eventListenerEnabled:!1,overridableId:"",initialQueryState:{},defaultSortingOnEmptyQueryString:{}};Xt.contextType=F;var mv=$.default.component("ReactSearchKit",Xt);class ca extends m.Component{constructor(t){super(t),this._getLabel=r=>{const n=r[0];let a=r[1],s=[n,a];if(r.length===3){const{label:l,activeFilter:u}=this._getLabel(r[2]);a=`${a}.${l}`,s.push(u)}return{label:a,activeFilter:s}},this.updateQueryFilters=t.updateQueryFilters}render(){const{filters:t,overridableId:r}=this.props;return!!t.length&&i.default.createElement(da,{filters:t,removeActiveFilter:this.updateQueryFilters,getLabel:this._getLabel,overridableId:r})}}ca.defaultProps={overridableId:""};const da=e=>{let{overridableId:t,filters:r,removeActiveFilter:n,getLabel:a}=e;const{buildUID:s}=m.useContext(F);return i.default.createElement($.default,{id:s("ActiveFilters.element",t),filters:r,removeActiveFilter:n,getLabel:a},i.default.createElement(i.default.Fragment,null,r.map((o,l)=>{const{label:u,activeFilter:d}=a(o);return i.default.createElement(c.Label,{image:!0,key:l,onClick:()=>n(d)},u,i.default.createElement(c.Icon,{name:"delete"}))})))};da.defaultProps={overridableId:""};var yv=$.default.component("ActiveFilters",ca);const vv=e=>({updateQueryFilters:t=>e(Zt(t))});R.connect(e=>({filters:e.query.filters}),vv)(yv);function bv(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var Ev=`.AutoCompleteText{position:relative;z-index:100}.AutoCompleteText .input button,.AutoCompleteText .input input{border:none;border-radius:0}.AutoCompleteText ul{background-color:#fff;border:1px solid #e0e1e2;border-radius:0 0 .3rem .3rem;color:#000;list-style-type:none;margin:0;padding:0;position:absolute;text-align:left;width:100%}.AutoCompleteText ul:before{content:""}.AutoCompleteText li{cursor:pointer;padding:.3em 1em}.AutoCompleteText li:hover{background-color:#e0e1e2;border-radius:.3rem;text-decoration:underline}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vaG9tZS9ydW5uZXIvd29yay9yZWFjdC1zZWFyY2hraXQvcmVhY3Qtc2VhcmNoa2l0L3NyYy9saWIvY29tcG9uZW50cy9BdXRvY29tcGxldGVTZWFyY2hCYXIvQXV0b2NvbXBsZXRlU2VhcmNoQmFyLnNjc3MiLCJBdXRvY29tcGxldGVTZWFyY2hCYXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxrQkFDRSxpQkFBQSxDQUNBLFdDQ0YsQ0RPQSwrREFDRSxXQUFBLENBQ0EsZUNDRixDREVBLHFCQU1FLHFCQUFBLENBR0Esd0JBQUEsQ0FDQSw2QkFBQSxDQUxBLFVBQUEsQ0FGQSxvQkFBQSxDQUlBLFFBQUEsQ0FDQSxTQUFBLENBTkEsaUJBQUEsQ0FFQSxlQUFBLENBSEEsVUNVRixDREVBLDRCQUNFLFVDQ0YsQ0RFQSxxQkFFRSxjQUFBLENBREEsZ0JDRUYsQ0RFQSwyQkFFRSx3QkFBQSxDQUNBLG1CQUFBLENBRkEseUJDR0YiLCJmaWxlIjoiQXV0b2NvbXBsZXRlU2VhcmNoQmFyLnNjc3MifQ== */`;bv(Ev);class fa extends m.Component{constructor(t){super(t),this._handleAutocompleteChange=r=>{r.length>=this.minCharsToAutocomplete&&this.updateSuggestions(r)},this.onInputChange=async r=>{await this.setState({currentValue:r}),this.handleAutocompleteChange(this.state.currentValue)},this.executeSearch=()=>{this.updateQueryString(this.state.currentValue)},this.updateQueryString=this.props.updateQueryString,this.updateSuggestions=this.props.debounce?ii.default.debounce(this.props.updateSuggestions,this.props.debounceTime,{leading:!0}):this.props.updateSuggestions,this.clearSuggestions=this.props.clearSuggestions,this.minCharsToAutocomplete=this.props.minCharsToAutocomplete,this.state={currentValue:this.props.queryString||""},this.handleAutocompleteChange=t.handleAutocompleteChange||this._handleAutocompleteChange}render(){const{placeholder:t,suggestions:r,overridableId:n}=this.props;return i.default.createElement($v,{placeholder:t,queryString:this.state.currentValue,querySuggestions:r,onInputChange:this.onInputChange,executeSearch:this.executeSearch,overridableId:n})}}fa.defaultProps={handleAutocompleteChange:null,placeholder:"Type something",minCharsToAutocomplete:3,overridableId:""};const Sv=e=>i.default.createElement(fa,Object.assign({key:e.queryString},e)),$v=e=>{let{overridableId:t,placeholder:r,queryString:n,querySuggestions:a,onInputChange:s,executeSearch:o,...l}=e;const{buildUID:u}=m.useContext(F),d=(p,g)=>{o()},f=(p,g)=>{p.key==="Enter"&&o()};return i.default.createElement($.default,Object.assign({id:u("AutocompleteSearchBar.element",t)},l),i.default.createElement("div",{className:"AutoCompleteText"},i.default.createElement(c.Input,{action:{content:"Search",onClick:d},fluid:!0,placeholder:r,onChange:(p,g)=>{let{value:y}=g;s(y)},value:n,onKeyPress:f}),i.default.createElement(_v,{querySuggestions:a,overridableId:t})))},_v=e=>{let{overridableId:t,...r}=e;const{querySuggestions:n}=r,{buildUID:a}=m.useContext(F),s=async o=>{await(void 0).setState({currentValue:o}),(void 0).clearSuggestions(),(void 0).executeSearch()};return n.length===0?null:i.default.createElement($.default,Object.assign({id:a("AutocompleteSearchBar.suggestions",t)},r),i.default.createElement("ul",null,n.map(o=>i.default.createElement(c.Button,{as:"li",onClick:()=>s(o),key:o},o))))};var Cv=$.default.component("AutocompleteSearchBar",Sv);const xv=e=>({updateQueryString:t=>e(ua(t)),updateSuggestions:t=>e(rv(t)),clearSuggestions:()=>e(av())}),wv=e=>({queryString:e.query.queryString,suggestions:e.query.suggestions});R.connect(wv,xv)(Cv);class at extends m.Component{constructor(t){super(t),this._isSelected=(r,n,a)=>a.filter(s=>s[0]===r&&s[1]===n).length>=1,this.getChildAggCmps=(r,n)=>{const a=this.childAgg&&this.childAgg.aggName in r;let s=[];if(a){const o=r[this.childAgg.aggName].buckets;n.forEach(u=>{const d=u[0]===this.aggName,f=u[1]===r.key,p=u.length===3;d&&f&&p&&s.push(u[2])});const l=u=>{this.onFilterClicked([this.aggName,r.key,u])};return i.default.createElement(at,{buckets:o,selectedFilters:s,field:this.childAgg.field,aggName:this.childAgg.aggName,childAgg:this.childAgg.childAgg,onFilterClicked:l})}return null},this.field=t.field,this.aggName=t.aggName,this.childAgg=t.childAgg,this.onFilterClicked=t.onFilterClicked}render(){const{buckets:t,selectedFilters:r,overridableId:n}=this.props,a=t.map(s=>{const o=s.key_as_string?s.key_as_string:s.key,l=this._isSelected(this.aggName,o,r),u=f=>{this.onFilterClicked([this.aggName,f])},d=f=>this.getChildAggCmps(f,r);return i.default.createElement(ha,{key:s.key,bucket:s,keyField:o,isSelected:l,onFilterClicked:u,getChildAggCmps:d,overridableId:n})});return i.default.createElement(pa,{valuesCmp:a,overridableId:n})}}at.defaultProps={childAgg:null,overridableId:""};const pa=e=>{let{valuesCmp:t,overridableId:r}=e;const{buildUID:n}=m.useContext(F);return i.default.createElement($.default,{id:n("BucketAggregationContainer.element",r),valuesCmp:t},i.default.createElement(c.List,null,t))};pa.defaultProps={overridableId:""};const ha=e=>{let{bucket:t,isSelected:r,onFilterClicked:n,getChildAggCmps:a,overridableId:s,keyField:o}=e;const{buildUID:l,nextComponentIndex:u}=m.useContext(F),d=t.label?t.label:`${o} (${t.doc_count.toLocaleString("en-US")})`,f=a(t);return i.default.createElement($.default,{id:l("BucketAggregationValues.element",s),bucket:t,label:d,onFilterClicked:n,isSelected:r,childAggCmps:f},i.default.createElement(c.List.Item,{key:t.key},i.default.createElement(c.Checkbox,{label:d,id:u(),value:t.key,onClick:()=>n(t.key),checked:r}),f))};ha.defaultProps={overridableId:""};var Tv=$.default.component("BucketAggregationValues",at);class ga extends m.Component{constructor(t){super(t),this.onFilterClicked=r=>{this.updateQueryFilters(r)},this._renderValues=(r,n)=>{const{overridableId:a}=this.props;return i.default.createElement(Tv,{buckets:r,selectedFilters:n,field:this.agg.field,aggName:this.agg.aggName,childAgg:this.agg.childAgg,onFilterClicked:this.onFilterClicked,overridableId:a})},this._getSelectedFilters=r=>r.filter(n=>n[0]===this.agg.aggName),this._getResultBuckets=r=>{const n=me(r,this.agg.aggName,{});return"buckets"in n?(Array.isArray(n.buckets)||(n.buckets=Object.entries(n.buckets).map(a=>{let[s,o]=a;return{...o,key:s}})),n.buckets):[]},this.title=t.title,this.agg=t.agg,this.updateQueryFilters=t.updateQueryFilters}render(){const{userSelectionFilters:t,resultsAggregations:r,overridableId:n,...a}=this.props,s=this._getSelectedFilters(t),o=this._getResultBuckets(r),l=o.length?this._renderValues(o,s):null;return i.default.createElement(ma,Object.assign({title:this.title,containerCmp:l,overridableId:n},a))}}ga.defaultProps={overridableId:""};const ma=e=>{let{overridableId:t,agg:r,title:n,containerCmp:a,updateQueryFilters:s}=e;const{buildUID:o}=m.useContext(F);return a&&i.default.createElement($.default,{id:o("BucketAggregation.element",t),agg:r,title:n,containerCmp:a,updateQueryFilters:s},i.default.createElement(c.Card,null,i.default.createElement(c.Card.Content,null,i.default.createElement(c.Card.Header,null,n)),i.default.createElement(c.Card.Content,null,a)))};ma.defaultProps={containerCmp:null,overridableId:""};var Fv=$.default.component("BucketAggregation",ga);const Iv=e=>({updateQueryFilters:t=>e(Zt(t))});R.connect(e=>({userSelectionFilters:e.query.filters,resultsAggregations:e.results.data.aggregations}),Iv)(Fv);class ya extends m.Component{render(){const{children:t,condition:r}=this.props;return r?t:null}}ya.defaultProps={condition:!0};var B=$.default.component("ShouldRender",ya);class va extends m.Component{render(){const{loading:t,totalResults:r,label:n,overridableId:a}=this.props;return i.default.createElement(B,{condition:!t&&r>0},n(i.default.createElement(ba,{totalResults:r,overridableId:a})))}}va.defaultProps={label:e=>e,overridableId:""};const ba=e=>{let{totalResults:t,overridableId:r}=e;const{buildUID:n}=m.useContext(F),a=n("Count.element",r);return i.default.createElement($.default,{id:a,totalResults:t},i.default.createElement(c.Label,{color:"blue"},t.toLocaleString("en-US")))};ba.defaultProps={overridableId:""};var Av=$.default.component("Count",va);const Ov=R.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total}))(Av);class Ea extends m.Component{constructor(t){super(t),this.resetQuery=t.resetQuery}render(){const{loading:t,totalResults:r,error:n,queryString:a,extraContent:s,overridableId:o,userSelectionFilters:l,...u}=this.props;return i.default.createElement(B,{condition:!t&&V(n)&&r===0},i.default.createElement(Sa,Object.assign({},u,{queryString:a,resetQuery:this.resetQuery,extraContent:s,userSelectionFilters:l,overridableId:o})))}}Ea.defaultProps={queryString:"",extraContent:null,overridableId:""};const Sa=e=>{let{overridableId:t,queryString:r,resetQuery:n,extraContent:a,userSelectionFilters:s}=e;const{buildUID:o}=m.useContext(F);return i.default.createElement($.default,{id:o("EmptyResults.element",t),queryString:r,resetQuery:n,extraContent:a,userSelectionFilters:s},i.default.createElement(c.Segment,{placeholder:!0,textAlign:"center"},i.default.createElement(c.Header,{icon:!0},i.default.createElement(c.Icon,{name:"search"}),"No results found!"),r&&i.default.createElement("em",null,'Current search "',r,'"'),i.default.createElement("br",null),i.default.createElement(c.Button,{primary:!0,onClick:()=>n()},"Clear query"),a))};Sa.defaultProps={queryString:"",extraContent:null,overridableId:""};var Rv=$.default.component("EmptyResults",Ea);const Pv=e=>({resetQuery:()=>e(Jy())}),kv=R.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,error:e.results.error,queryString:e.query.queryString,userSelectionFilters:e.query.filters}),Pv)(Rv);function $a(e){let{loading:t,error:r,overridableId:n}=e;return i.default.createElement(B,{condition:!t&&!V(r)},i.default.createElement(_a,{error:r,overridableId:n}))}$a.defaultProps={overridableId:""};const _a=e=>{let{error:t,overridableId:r}=e;const{buildUID:n}=m.useContext(F);return i.default.createElement($.default,{id:n("Error.element",r),error:t},i.default.createElement("div",null,"Oops! Something went wrong while fetching results."))};_a.defaultProps={overridableId:""};var Dv=$.default.component("Error",$a);R.connect(e=>({loading:e.results.loading,error:e.results.error}))(Dv);function Ca(e){const t=a=>i.default.createElement(e,a),r=a=>({currentQueryState:a.query,currentResultsState:a.results}),n=a=>({updateQueryState:s=>a(la(s))});return R.connect(r,n)(t)}class xa extends m.Component{constructor(t){super(t),this.onLayoutChange=r=>{this.updateLayout(r)},this.updateLayout=t.updateLayout}render(){const{currentLayout:t,loading:r,totalResults:n,overridableId:a}=this.props;return i.default.createElement(B,{condition:t!==null&&!r&&n>0},i.default.createElement(wa,{currentLayout:t,onLayoutChange:this.onLayoutChange,overridableId:a}))}}xa.defaultProps={currentLayout:null,overridableId:""};const wa=e=>{let{overridableId:t,currentLayout:r,onLayoutChange:n}=e;const{buildUID:a}=m.useContext(F);return i.default.createElement($.default,{id:a("LayoutSwitcher.element",t),currentLayout:r,onLayoutChange:n},i.default.createElement(c.Menu,{compact:!0,icon:!0},i.default.createElement(c.Menu.Item,{name:"list",active:r==="list",onClick:(s,o)=>{let{name:l}=o;return n(l)}},i.default.createElement(c.Icon,{name:"list layout"})),i.default.createElement(c.Menu.Item,{name:"grid",active:r==="grid",onClick:(s,o)=>{let{name:l}=o;return n(l)}},i.default.createElement(c.Icon,{name:"grid layout"}))))};wa.defaultProps={currentLayout:null,overridableId:""};var Lv=$.default.component("LayoutSwitcher",xa);const Uv=e=>({updateLayout:t=>e(Zy(t))});R.connect(e=>({loading:e.results.loading,currentLayout:e.query.layout,totalResults:e.results.data.total}),Uv)(Lv);const Kr={boundaryRangeCount:1,siblingRangeCount:1,showEllipsis:!0,showFirst:!0,showLast:!0,showPrev:!0,showNext:!0,size:"large"};class Ta extends m.Component{constructor(t){super(t),this.onPageChange=r=>{const{currentPage:n}=this.props;r!==n&&this.updateQueryPage(r)},this.updateQueryPage=t.updateQueryPage,this.options=t.options?{...Kr,...t.options}:Kr}render(){const{loading:t,totalResults:r,currentPage:n,currentSize:a,overridableId:s,showWhenOnlyOnePage:o}=this.props;return i.default.createElement(B,{condition:!t&&n>-1&&a>-1&&o?r>0:r>a},i.default.createElement(Fa,{currentPage:n,currentSize:a,totalResults:r,onPageChange:this.onPageChange,options:this.options,overridableId:s,maxTotalResults:this.options.maxTotalResults}))}}Ta.defaultProps={options:{},overridableId:"",showWhenOnlyOnePage:!0};const Fa=e=>{let{overridableId:t,currentPage:r,currentSize:n,totalResults:a,onPageChange:s,options:o,maxTotalResults:l,...u}=e;const d=o.boundaryRangeCount,f=o.siblingRangeCount,p=o.showEllipsis,g=o.showFirst,y=o.showLast,E=o.showPrev,v=o.showNext,_=o.size,h=Math.floor(l/n),b=Math.ceil(a/n),w=Math.min(b,h),{buildUID:C}=m.useContext(F);return r>b&&s(b),i.default.createElement($.default,{id:C("Pagination.element",t),currentPage:r,currentSize:n,totalResults:a,options:o,onPageChange:s},i.default.createElement(c.Pagination,Object.assign({activePage:r,totalPages:w,onPageChange:(I,x)=>{let{activePage:O}=x;return s(O)},boundaryRange:d,siblingRange:f,ellipsisItem:p?void 0:null,firstItem:g?void 0:null,lastItem:y?void 0:null,prevItem:E?void 0:null,nextItem:v?void 0:null,size:_},u)))};Fa.defaultProps={options:{},overridableId:"",maxTotalResults:1e4};var Nv=$.default.component("Pagination",Ta);const Bv=e=>({updateQueryPage:t=>e(Yy(t))}),Mv=R.connect(e=>({currentPage:e.query.page,currentSize:e.query.size,loading:e.results.loading,totalResults:e.results.data.total}),Bv)(Nv);function Ia(e){let{loading:t,totalResults:r,results:n,resultsPerRow:a,overridableId:s,onResultsRendered:o}=e;return m.useEffect(()=>{o&&o()},[o]),i.default.createElement(B,{condition:!t&&r>0},i.default.createElement(Aa,{results:n,resultsPerRow:a,overridableId:s}))}Ia.defaultProps={resultsPerRow:3,overridableId:"",onResultsRendered:()=>{}};const zv=e=>{let{result:t,overridableId:r}=e;const{buildUID:n}=m.useContext(F);return i.default.createElement($.default,{id:n("ResultsGrid.item",r),result:t},i.default.createElement(c.Card,{fluid:!0,href:`#${t.id}`},i.default.createElement(c.Image,{src:t.imgSrc||"http://placehold.it/200"}),i.default.createElement(c.Card.Content,null,i.default.createElement(c.Card.Header,null,t.title),i.default.createElement(c.Card.Description,null,t.description))))},Aa=e=>{let{overridableId:t,results:r,resultsPerRow:n}=e;const{buildUID:a}=m.useContext(F),s=r.map((o,l)=>i.default.createElement(zv,{key:l,result:o,overridableId:t}));return i.default.createElement($.default,{id:a("ResultsGrid.container",t),results:s,resultsPerRow:n},i.default.createElement(c.Card.Group,{itemsPerRow:n},s))};Aa.defaultProps={resultsPerRow:3,overridableId:""};var Qv=$.default.component("ResultsGrid",Ia);const jv=R.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,results:e.results.data.hits}))(Qv);function Oa(e){let{loading:t,totalResults:r,results:n,overridableId:a,onResultsRendered:s}=e;return m.useEffect(()=>{s&&s()},[s]),i.default.createElement(B,{condition:!t&&r>0},i.default.createElement(Ra,{results:n,overridableId:a}))}Oa.defaultProps={overridableId:"",onResultsRendered:()=>{}};const qv=e=>{let{result:t,overridableId:r}=e;const{buildUID:n}=m.useContext(F);return i.default.createElement($.default,{id:n("ResultsList.item",r),result:t},i.default.createElement(c.Item,{href:`#${t.id}`},i.default.createElement(c.Item.Image,{size:"small",src:t.imgSrc||"http://placehold.it/200"}),i.default.createElement(c.Item.Content,null,i.default.createElement(c.Item.Header,null,t.title),i.default.createElement(c.Item.Description,null,t.description))))},Ra=e=>{let{results:t,overridableId:r}=e;const{buildUID:n}=m.useContext(F),a=t.map((s,o)=>i.default.createElement(qv,{result:s,key:o,overridableId:r}));return i.default.createElement($.default,{id:n("ResultsList.container",r),results:a},i.default.createElement(c.Item.Group,{divided:!0,relaxed:!0,link:!0},a))};Ra.defaultProps={overridableId:""};var Gv=$.default.component("ResultsList",Oa);const Pa=R.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,results:e.results.data.hits}))(Gv);function ka(e){let{children:t,loading:r,overridableId:n}=e;return r?i.default.createElement(Da,{overridableId:n}):t}ka.defaultProps={overridableId:""};const Da=e=>{let{overridableId:t}=e;const{buildUID:r}=m.useContext(F);return i.default.createElement($.default,{id:r("ResultsLoader.element",t)},i.default.createElement(c.Loader,{active:!0,size:"huge",inline:"centered"}))};Da.defaultProps={overridableId:""};var Vv=$.default.component("ResultsLoader",ka);const Hv=R.connect(e=>({loading:e.results.loading}))(Vv);function La(e){let{loading:t,totalResults:r,currentLayout:n,overridableId:a,onResultsRendered:s}=e;return i.default.createElement(B,{condition:n!=null&&!t&&r>0},i.default.createElement(Ua,{layout:n,overridableId:a,onResultsRendered:s}))}La.defaultProps={currentLayout:null,overridableId:"",onResultsRendered:()=>{}};const Ua=e=>{let{layout:t,overridableId:r,onResultsRendered:n}=e;const{buildUID:a}=m.useContext(F);return i.default.createElement($.default,{id:a("ResultsMultiLayout.element",r),layout:t,onResultsRendered:n},t==="list"?i.default.createElement(Pa,{overridableId:r,onResultsRendered:n}):i.default.createElement(jv,{overridableId:r,onResultsRendered:n}))};Ua.defaultProps={layout:"",overridableId:"",onResultsRendered:()=>{}};var Kv=$.default.component("ResultsMultiLayout",La);R.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentLayout:e.query.layout}))(Kv);class Na extends m.Component{constructor(t){super(t),this.onChange=r=>{const{currentSize:n}=this.props;r!==n&&this.updateQuerySize(r)},this.options=t.values,this.updateQuerySize=t.updateQuerySize}render(){const{loading:t,currentSize:r,totalResults:n,label:a,overridableId:s,ariaLabel:o,selectOnNavigation:l,showWhenOnlyOnePage:u}=this.props;return i.default.createElement(B,{condition:!t&&r!==-1&&u?n>0:n>r},a(i.default.createElement(Ba,{currentSize:r,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:o,selectOnNavigation:l})))}}Na.defaultProps={label:e=>e,overridableId:"",ariaLabel:"Results per page",selectOnNavigation:!1,showWhenOnlyOnePage:!0};const Ba=e=>{let{overridableId:t,currentSize:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:o}=e;const{buildUID:l}=m.useContext(F),u=n.map((d,f)=>({key:f,text:d.text,value:d.value}));return i.default.createElement($.default,{id:l("ResultsPerPage.element",t),currentSize:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:o},i.default.createElement(c.Dropdown,{inline:!0,compact:!0,options:u,value:r,onChange:(d,f)=>{let{value:p}=f;return a(p)},"aria-label":s,selectOnNavigation:o}))};Ba.defaultProps={ariaLabel:"Results per page",selectOnNavigation:!1,overridableId:""};var Yv=$.default.component("ResultsPerPage",Na);const Wv=e=>({updateQuerySize:t=>e(Wy(t))}),Zv=R.connect(e=>({loading:e.results.loading,currentSize:e.query.size,totalResults:e.results.data.total}),Wv)(Yv);class Ma extends m.Component{constructor(t){super(t),this.onInputChange=r=>{this.setState({currentValue:r})},this.executeSearch=()=>{const{currentValue:r}=this.state;this.updateQueryString(r)},this.onBtnSearchClick=()=>{this.executeSearch()},this.onKeyPress=r=>{r.key==="Enter"&&this.executeSearch()},this.updateQueryString=t.updateQueryString,this.state={currentValue:t.queryString||""}}render(){const{actionProps:t,autofocus:r,executeSearch:n,onBtnSearchClick:a,onInputChange:s,onKeyPress:o,overridableId:l,placeholder:u,uiProps:d}=this.props,{currentValue:f}=this.state;return i.default.createElement(er,{actionProps:t,autofocus:r,executeSearch:n||this.executeSearch,onBtnSearchClick:a||this.onBtnSearchClick,onInputChange:s||this.onInputChange,onKeyPress:o||this.onKeyPress,overridableId:l,placeholder:u,queryString:f,uiProps:d})}}Ma.defaultProps={actionProps:null,autofocus:!1,executeSearch:null,onBtnSearchClick:null,onInputChange:null,onKeyPress:null,overridableId:"",placeholder:"",queryString:"",uiProps:null};const za=e=>{const{queryString:t}=e;return i.default.createElement(Ma,Object.assign({key:t},e))};za.defaultProps={queryString:""};class er extends m.Component{componentDidMount(){const{autofocus:t}=this.props;t&&this.focusInput&&this.focusInput.focus()}render(){const{actionProps:t,onBtnSearchClick:r,onInputChange:n,onKeyPress:a,overridableId:s,placeholder:o,queryString:l,uiProps:u}=this.props,{buildUID:d}=this.context;return i.default.createElement($.default,{id:d("SearchBar.element",s),queryString:l,onBtnSearchClick:r,onInputChange:n,onKeyPress:a,placeholder:o,actionProps:t,uiProps:u},i.default.createElement(c.Input,Object.assign({action:{content:"Search",onClick:r,...t},fluid:!0},u,{placeholder:o||"Type something",onChange:(f,p)=>{let{value:g}=p;n(g)},value:l,onKeyPress:a,ref:f=>{this.focusInput=f}})))}}er.defaultProps={actionProps:null,autofocus:!1,onBtnSearchClick:null,onInputChange:null,onKeyPress:null,overridableId:"",placeholder:"",queryString:"",uiProps:null};er.contextType=F;var Jv=$.default.component("SearchBar",za);const Xv=e=>({updateQueryString:t=>e(ua(t))}),eb=R.connect(e=>({queryString:e.query.queryString}),Xv)(Jv);class Qa extends m.Component{constructor(t){super(t),this._computeValue=(r,n)=>n?`${r}-${n}`:r,this.onChange=r=>{const{currentSortBy:n,currentSortOrder:a}=this.props;if(r===this._computeValue(n,a))return;const s=this.options.find(o=>o.value===r);this.updateQuerySorting(s.sortBy,s.sortOrder)},this.options=t.values,this.updateQuerySorting=t.updateQuerySorting,this.options.forEach(r=>r.value=this._computeValue(r.sortBy,r.sortOrder))}render(){const{currentSortBy:t,currentSortOrder:r,loading:n,totalResults:a,label:s,overridableId:o,sortOrderDisabled:l,ariaLabel:u,selectOnNavigation:d}=this.props;return i.default.createElement(B,{condition:t!==null&&(l||t!==null)&&!n&&a>0},s(i.default.createElement(ja,{currentSortBy:t,currentSortOrder:r,options:this.options,onValueChange:this.onChange,computeValue:this._computeValue,overridableId:o,ariaLabel:u,selectOnNavigation:d})))}}Qa.defaultProps={currentSortBy:null,currentSortOrder:null,label:e=>e,overridableId:"",sortOrderDisabled:!1,ariaLabel:"Sort",selectOnNavigation:!1};const ja=e=>{let{overridableId:t,currentSortBy:r,currentSortOrder:n,options:a,onValueChange:s,computeValue:o,ariaLabel:l,selectOnNavigation:u}=e;const{buildUID:d}=m.useContext(F),f=o(r,n),p=a.map((g,y)=>({key:y,text:g.text,value:g.value}));return i.default.createElement($.default,{id:d("Sort.element",t),options:a,currentSortBy:r,currentSortOrder:n,onValueChange:s,ariaLabel:l,selectOnNavigation:u},i.default.createElement(c.Dropdown,{selection:!0,options:p,value:f,onChange:(g,y)=>{let{value:E}=y;return s(E)},"aria-label":l,selectOnNavigation:u}))};ja.defaultProps={currentSortBy:null,currentSortOrder:null,overridableId:"",ariaLabel:"Sort",selectOnNavigation:!1};var tb=$.default.component("Sort",Qa);const rb=e=>({updateQuerySorting:(t,r)=>e(Vy(t,r))});R.connect(e=>({currentSortBy:e.query.sortBy,currentSortOrder:e.query.sortOrder,loading:e.results.loading,totalResults:e.results.data.total}),rb)(tb);class qa extends m.Component{constructor(t){super(t),this.onChange=r=>{const{currentSortBy:n}=this.props;r!==n&&this.updateQuerySortBy(r)},this.options=t.values,this.updateQuerySortBy=t.updateQuerySortBy}render(){const{currentSortBy:t,loading:r,totalResults:n,label:a,overridableId:s,ariaLabel:o,selectOnNavigation:l}=this.props;return i.default.createElement(B,{condition:t!==null&&!r&&n>0},a(i.default.createElement(Ga,{currentSortBy:t,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:o,selectOnNavigation:l})))}}qa.defaultProps={currentSortBy:null,label:e=>e,overridableId:"",ariaLabel:"Sort Results By",selectOnNavigation:!1};const Ga=e=>{let{overridableId:t,currentSortBy:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:o}=e;const{buildUID:l}=m.useContext(F),u=n.map((d,f)=>({key:f,text:d.text,value:d.value}));return i.default.createElement($.default,{id:l("SortBy.element",t),options:n,currentSortBy:r,onValueChange:a,ariaLabel:s,selectOnNavigation:o},i.default.createElement(c.Dropdown,{selection:!0,compact:!0,options:u,value:r,onChange:(d,f)=>{let{value:p}=f;return a(p)},"aria-label":s,selectOnNavigation:o}))};Ga.defaultProps={currentSortBy:null,overridableId:"",ariaLabel:"Sort Results By",selectOnNavigation:!1};var nb=$.default.component("SortBy",qa);const ab=e=>({updateQuerySortBy:t=>e(Hy(t))});R.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentSortBy:e.query.sortBy}),ab)(nb);class Va extends m.Component{constructor(t){super(t),this.onChange=r=>{const{currentSortOrder:n}=this.props;r!==n&&this.updateQuerySortOrder(r)},this.options=t.values,this.updateQuerySortOrder=t.updateQuerySortOrder}render(){const{currentSortOrder:t,loading:r,totalResults:n,label:a,overridableId:s,ariaLabel:o,selectOnNavigation:l}=this.props;return i.default.createElement(B,{condition:t!==null&&!r&&n>0},a(i.default.createElement(Ha,{currentSortOrder:t,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:o,selectOnNavigation:l})))}}Va.defaultProps={currentSortOrder:null,label:e=>e,overridableId:"",ariaLabel:"Sort Order",selectOnNavigation:!1};const Ha=e=>{let{overridableId:t,currentSortOrder:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:o}=e;const{buildUID:l}=m.useContext(F),u=n.map((d,f)=>({key:f,text:d.text,value:d.value}));return i.default.createElement($.default,{id:l("SortOrder.element",t),options:n,currentSortOrder:r,onValueChange:a,ariaLabel:s,selectOnNavigation:o},i.default.createElement(c.Dropdown,{selection:!0,compact:!0,options:u,value:r,onChange:(d,f)=>{let{value:p}=f;return a(p)},"aria-label":s,selectOnNavigation:o}))};Ha.defaultProps={currentSortOrder:null,overridableId:"",ariaLabel:"Sort Order",selectOnNavigation:!1};var sb=$.default.component("SortOrder",Va);const ib=e=>({updateQuerySortOrder:t=>e(Ky(t))});R.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentSortOrder:e.query.sortOrder}),ib)(sb);const Ka=e=>{let{overridableId:t,userSelectionFilters:r,title:n,label:a,filterValue:s,updateQueryFilters:o}=e;const l=p=>p.filter(y=>y[0]===s[0]).length>0,u=()=>{o(s)},{buildUID:d}=m.useContext(F),f=l(r);return i.default.createElement($.default,{id:d("SearchFilters.Toggle.element",t),title:n,label:a,filterValue:s,userSelectionFilters:r,updateQueryFilters:o},i.default.createElement(c.Card,null,i.default.createElement(c.Card.Content,null,i.default.createElement(c.Card.Header,null,n)),i.default.createElement(c.Card.Content,null,i.default.createElement(c.Checkbox,{toggle:!0,label:a,onClick:u,checked:f}))))};Ka.defaultProps={overridableId:""};var ob=$.default.component("SearchFilters.Toggle",Ka);const lb=e=>({updateQueryFilters:t=>e(Zt(t))});R.connect(e=>({userSelectionFilters:e.query.filters}),lb)(ob);const Ya=i.default.createContext(null),ub=({config:e,children:t,updateQueryState:r,currentQueryState:n})=>{const a=m.useCallback(()=>{r({...n,queryString:n.queryString})},[r,n]);return i.default.createElement(Ya.Provider,{value:{config:e,refreshSearch:a}},t)},cb=Ca(ub),st=()=>{const e=i.default.useContext(Ya);if(!e)throw new Error("useSearchConfig must be used within a SearchProvider");return e},ve=e=>(e==null?void 0:e.charAt(0).toUpperCase())+(e==null?void 0:e.slice(1))||"",Wa=e=>new Date(e).toISOString().split("T")[0];var Za={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(e,t){(function(r){var n;if(e.exports=r(),n=!0,!n){var a=window.Cookies,s=window.Cookies=r();s.noConflict=function(){return window.Cookies=a,s}}})(function(){function r(){for(var s=0,o={};s<arguments.length;s++){var l=arguments[s];for(var u in l)o[u]=l[u]}return o}function n(s){return s.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function a(s){function o(){}function l(d,f,p){if(!(typeof document>"u")){p=r({path:"/"},o.defaults,p),typeof p.expires=="number"&&(p.expires=new Date(new Date*1+p.expires*864e5)),p.expires=p.expires?p.expires.toUTCString():"";try{var g=JSON.stringify(f);/^[\{\[]/.test(g)&&(f=g)}catch{}f=s.write?s.write(f,d):encodeURIComponent(String(f)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),d=encodeURIComponent(String(d)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var y="";for(var E in p)p[E]&&(y+="; "+E,p[E]!==!0&&(y+="="+p[E].split(";")[0]));return document.cookie=d+"="+f+y}}function u(d,f){if(!(typeof document>"u")){for(var p={},g=document.cookie?document.cookie.split("; "):[],y=0;y<g.length;y++){var E=g[y].split("="),v=E.slice(1).join("=");!f&&v.charAt(0)==='"'&&(v=v.slice(1,-1));try{var _=n(E[0]);if(v=(s.read||s)(v,_)||n(v),f)try{v=JSON.parse(v)}catch{}if(p[_]=v,d===_)break}catch{}}return d?p[d]:p}}return o.set=l,o.get=function(d){return u(d,!1)},o.getJSON=function(d){return u(d,!0)},o.remove=function(d,f){l(d,"",r(f,{expires:-1}))},o.defaults={},o.withConverter=a,o}return a(function(){})})})(Za);var db=Za.exports;const fb=P(db),Ja=()=>fb.get("csrftoken")||null,Xa=e=>{switch(e){case"success":return"green";case"validation failed":case"serializer validation failed":case"import failed":case"imported with failures":case"validated with failures":case"damaged":return"red";case"validated":case"created":return"blue";case"importing":case"validating":return"yellow";default:return"grey"}},pb=e=>new Wn(e),hb=(e,t={},r=!0)=>({axios:{url:e,headers:{Accept:"application/vnd.inveniordm.v1+json",...t},withCredentials:r}}),U=Pe.default.create({baseURL:"",timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});U.interceptors.request.use(e=>{const t=Ja();return t&&(e.headers["X-CSRFTOKEN"]=t),e},e=>Promise.reject(e));const gb=async e=>{try{const t=await U.post(`/api/importer-records/${e}/run`,{});if(t.status===200)return t.data;throw new Error(`Failed to fetch import records: ${t.statusText}`)}catch(t){throw console.error("Failed to fetch import records:",t),t}},es=async(e,t)=>{try{const r=await U.put(`/api/importer-tasks/${e}/metadata`,t,{headers:{"content-type":"application/octet-stream","X-Filename":`${t.name}`}});if(r.status===200)return r.data;throw new Error(`Failed to create task: ${r.statusText}`)}catch(r){throw new Error(`Error creating task: ${r instanceof Error?r.message:"Unknown error"}`)}},ts=async(e,t)=>{try{const r=await U.post(`/api/importer-tasks/${e}/files/${t}/commit`,{});if(r.status!==200)throw new Error(`Failed to commit file: ${r.statusText}`)}catch(r){throw console.error("Error committing file:",r),new Error(`Failed to commit file: ${r instanceof Error?r.message:"Unknown error"}`)}},mb=async e=>{const t={title:e.title,description:e.description,mode:e.mode,status:e.status,record_type:e.recordType,serializer:e.serializer,start_time:e.startTime,end_time:e.endTime};try{const r=await U.post("/api/importer-tasks",t);if(r.status===201)return r.data;throw new Error(`Failed to create task: ${r.statusText}`)}catch(r){throw new Error(`Error creating task: ${r instanceof Error?r.message:"Unknown error"}`)}},yb=async e=>{try{const t=await U.delete(`/api/importer-tasks/${e}`);return t.status===204?!0:(console.error(`Failed to delete task: ${t.statusText}`),!1)}catch(t){return console.error(`Error deleting task: ${t instanceof Error?t.message:"Unknown error"}`),!1}},rs=async e=>{try{const t=await U.post(`/api/importer-tasks/${e}/load`);if(t.status===200)return t.data;throw new Error(`Unexpected response status: ${t.status}`)}catch(t){throw console.error("Error executing bulk import:",t),new Error("Failed to execute bulk import")}},vb=async()=>{try{const e=await U.get("/api/importer-tasks/config");return e.status===200?e.data:(console.error("Failed to fetch record types:",e.statusText),[])}catch(e){return console.error("Error fetching record types:",e),[]}},bb=async e=>{try{const t=await U.get(`/api/importer-tasks/config/${e}`);if(t.status===200)return t.data;throw new Error(`Unexpected response status: ${t.status}`)}catch(t){throw console.error("Error fetching serializers:",t),new Error("Failed to fetch serializers")}},tr=async e=>{try{const t=await U.put(`/api/importer-tasks/${e}/status`,{});if(t.status===200)return t.data;throw new Error(`Failed to get status of importer task: ${t.statusText}`)}catch(t){throw new Error(`Error getting status of importer task: ${t instanceof Error?t.message:"Unknown error"}`)}},ns=async(e,t)=>{const r=t.map(n=>({key:n}));try{const n=await U.post(`/api/importer-tasks/${e}/files`,r);if(n.status!==201)throw new Error(`Failed to initialize files: ${n.statusText}`)}catch(n){throw console.error("Error initializing files:",n),new Error(`Failed to initialize files: ${n instanceof Error?n.message:"Unknown error"}`)}},as=async(e,t,r)=>{try{const n=await U.put(`/api/importer-tasks/${e}/files/${t}/content`,r,{headers:{"Content-Type":"application/octet-stream"}});if(n.status!==200)throw new Error(`Failed to upload file content: ${n.statusText}`)}catch(n){throw console.error("Error uploading file content:",n),new Error(`Failed to upload file content: ${n instanceof Error?n.message:"Unknown error"}`)}},rr=async e=>{try{const t=await U.post(`/api/importer-tasks/${e}/validate`,{});if(t.status===200)return t.data;throw new Error(`Failed to validate task: ${t.statusText}`)}catch(t){throw new Error(`Error validating task: ${t instanceof Error?t.message:"Unknown error"}`)}},ss=(e,t={})=>{const[r,n]=m.useState({isDeleting:!1,isValidating:!1,isBulkImporting:!1,isGettingStatus:!1,error:null}),{onDeleteSuccess:a,onDeleteError:s,onValidateSuccess:o,onValidateError:l,onBulkImportSuccess:u,onBulkImportError:d,onStatusChangeSuccess:f,onStatusChangeError:p}=t,g=m.useCallback(()=>{n(h=>({...h,error:null}))},[]),y=m.useCallback(async()=>{n(h=>({...h,isDeleting:!0,error:null}));try{if(!await yb(e))throw new Error(`Failed to delete task ${e}`);a==null||a()}catch(h){const b=h instanceof Error?h:new Error("Unknown error");throw n(w=>({...w,error:b})),s==null||s(b),b}finally{n(h=>({...h,isDeleting:!1}))}},[e,a,s]),E=m.useCallback(async()=>{n(h=>({...h,isValidating:!0,error:null}));try{const h=await rr(e);if(!h)throw new Error(`Validation failed for task ${e}`);return o==null||o(h),h}catch(h){const b=h instanceof Error?h:new Error("Unknown error");throw n(w=>({...w,error:b})),l==null||l(b),b}finally{n(h=>({...h,isValidating:!1}))}},[e,o,l]),v=m.useCallback(async()=>{n(h=>({...h,isBulkImporting:!0,error:null}));try{const h=await rs(e);if(!h)throw new Error(`Failed to execute bulk import for task ${e}`);return u==null||u(h),h}catch(h){const b=h instanceof Error?h:new Error("Unknown error");throw n(w=>({...w,error:b})),d==null||d(b),b}finally{n(h=>({...h,isBulkImporting:!1}))}},[e,u,d]),_=m.useCallback(async()=>{n(h=>({...h,isGettingStatus:!0,error:null}));try{const h=await tr(e);if(!h)throw new Error(`Failed to retrieve status for task ${e}`);return f==null||f(h),h}catch(h){const b=h instanceof Error?h:new Error("Unknown error");throw n(w=>({...w,error:b})),p==null||p(b),b}finally{n(h=>({...h,isGettingStatus:!1}))}},[e,f,p]);return{isDeleting:r.isDeleting,isValidating:r.isValidating,isBulkImporting:r.isBulkImporting,isGettingStatus:r.isGettingStatus,error:r.error,deleteTask:y,validateTask:E,runBulkImport:v,getStatus:_,clearError:g}},Eb=({result:e,index:t})=>{var _;const{refreshSearch:r,config:n}=st(),{deleteTask:a,validateTask:s,runBulkImport:o,getStatus:l,isDeleting:u,isValidating:d,isBulkImporting:f,isGettingStatus:p,error:g,clearError:y}=ss(e.id,{onDeleteSuccess:()=>{r()},onValidateSuccess:()=>{r()},onBulkImportSuccess:()=>{r()},onStatusChangeSuccess:()=>{r()}});if(!e)return null;const E=(h,b)=>b?`${h}...`:h,v=u||d||f||p;return i.default.createElement(c.TableRow,{key:t},i.default.createElement(c.TableCell,null,i.default.createElement("a",{href:`${n.resultPath}/${e.id}`},e.title||"No title")),i.default.createElement(c.TableCell,null,Wa(e.created)),i.default.createElement(c.TableCell,null,ve(e.status)),i.default.createElement(c.TableCell,null,((_=e.records_status)==null?void 0:_.total_records)??0),i.default.createElement(c.TableCell,null,0),i.default.createElement(c.TableCell,null,e.serializer),i.default.createElement(c.TableCell,null,ve(e.mode)),i.default.createElement(c.TableCell,{style:{width:"220px"}},g&&i.default.createElement("div",{style:{color:"red",fontSize:"12px",marginBottom:"5px"}},g.message,i.default.createElement(c.Button,{onClick:y,style:{marginLeft:"5px",fontSize:"10px"}},"Clear")),i.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"10px"}},i.default.createElement(c.Dropdown,{text:v?"Processing...":"Select Action",floating:!0,labeled:!0,className:"icon",disabled:v,options:[{key:"download",text:"Download",value:"download",disabled:!0},{key:"validate",text:E("Retry Validation",d),value:"validate",disabled:v,onClick:()=>s()},{key:"load",text:E("Load Bulk Import",f),value:"load",disabled:v,onClick:()=>o()},{key:"status",text:E("Get Status",p),value:"status",disabled:v,onClick:()=>l()},{key:"delete",text:E("Delete",u),value:"delete",disabled:v,onClick:()=>a()}]}),i.default.createElement(c.Button,{basic:!0,size:"tiny",disabled:v,as:"a",href:`${n.resultPath}/${e.id}`},i.default.createElement(c.Icon,{name:"eye"}),"View"))))},Sb=({children:e})=>i.default.createElement(c.Table,{padded:!0,size:"small",comp:!0},i.default.createElement(c.TableHeader,null,i.default.createElement(c.TableRow,null,i.default.createElement(c.TableHeaderCell,null,"ID"),i.default.createElement(c.TableHeaderCell,null,"Date Created"),i.default.createElement(c.TableHeaderCell,null,"Status"),i.default.createElement(c.TableHeaderCell,null,"Records"),i.default.createElement(c.TableHeaderCell,null,"Files"),i.default.createElement(c.TableHeaderCell,null,"Serializer"),i.default.createElement(c.TableHeaderCell,null,"Mode"),i.default.createElement(c.TableHeaderCell,null,"Actions"))),i.default.createElement(c.TableBody,null,e)),H={aggs:[],appId:"search",defaultSortingOnEmptyQueryString:[{sortBy:"newest"}],initialQueryState:{filters:[],hiddenParams:null,layout:"list",page:1,size:10,sortBy:"newest"},layoutOptions:{gridView:!1,listView:!0},paginationOptions:{defaultValue:10,maxTotalResults:1e4,resultsPerPage:[{text:"10",value:10},{text:"20",value:20},{text:"50",value:50}]},searchApi:{axios:{headers:{Accept:"application/vnd.inveniordm.v1+json"},url:"/api/importer-tasks",withCredentials:!0},invenio:{requestSerializer:"InvenioRecordsResourcesRequestSerializer"}},sortOptions:[{sortBy:"newest",text:"Newest"},{sortBy:"oldest",text:"Oldest"}],sortOrderDisabled:!0,resultPath:"/administration/importer-tasks"},$b=({taskId:e,onUploadComplete:t,onUploadError:r}={})=>{const[n,a]=m.useState([]),[s,o]=m.useState(!1),l=m.useCallback((h,b,w,C)=>{a(I=>I.map(x=>x.id===h?{...x,status:b,error:w,progress:C}:x))},[]),u=m.useCallback((h,b,w)=>b&&!b.split(",").map(x=>x.trim()).some(x=>x.startsWith(".")?h.name.toLowerCase().endsWith(x.toLowerCase()):h.type.match(new RegExp(x.replace("*",".*"))))?`File type not accepted. Accepted types: ${b}`:w&&h.size>w?`File size exceeds maximum of ${(w/1024/1024).toFixed(2)}MB`:null,[]),d=m.useCallback((h,b,w,C)=>{const I=[],x=[];for(const O of h){if(C&&n.length+I.length>=C){x.push(`Maximum ${C} files allowed`);break}const J=u(O,b,w);if(J){x.push(`${O.name}: ${J}`);continue}if(n.some(we=>we.file.name===O.name&&we.file.size===O.size)){x.push(`${O.name}: File already selected`);continue}I.push({file:O,id:`${O.name}-${O.size}-${Date.now()}`,status:"idle"})}return x.length>0&&(r==null||r(x.join(", "))),a(O=>[...O,...I]),I},[n,u,r]),f=m.useCallback(h=>{a(b=>b.filter(w=>w.id!==h))},[]),p=m.useCallback(()=>{a([])},[]),g=m.useCallback(async h=>{if(!e)throw new Error("Task ID is required for file upload");o(!0);try{const b=h.map(C=>C.file.name);h.forEach(C=>l(C.id,"initializing")),await ns(e,b);for(const C of h)try{l(C.id,"uploading",void 0,{loaded:0,total:C.file.size,percentage:0}),await as(e,C.file.name,C.file),l(C.id,"committing",void 0,{loaded:C.file.size,total:C.file.size,percentage:100}),await ts(e,C.file.name),l(C.id,"completed")}catch(I){const x=I instanceof Error?I.message:"Upload failed";throw l(C.id,"error",x),I}const w=h.map(C=>C.file);t==null||t(w)}catch(b){const w=b instanceof Error?b.message:"Upload failed";throw r==null||r(w),b}finally{o(!1)}},[e,l,t,r]),y=m.useCallback(()=>n.filter(h=>h.status==="idle"),[n]),E=n.some(h=>h.status==="error"),v=n.some(h=>h.status==="completed"),_=n.length>0&&n.every(h=>h.status==="completed");return{uploadFiles:n,isUploading:s,hasErrors:E,hasCompleted:v,allCompleted:_,addFiles:d,removeFile:f,clearFiles:p,uploadToServer:g,getUploadableFiles:y}},_b=({taskId:e,onChange:t,accept:r=".csv,.json,.xlsx,.txt",maxSize:n=10*1024*1024,maxFiles:a=5,disabled:s=!1,error:o})=>{const l=m.useRef(null),[u,d]=i.default.useState(!1),{uploadFiles:f,isUploading:p,hasErrors:g,addFiles:y,removeFile:E,clearFiles:v,uploadToServer:_,getUploadableFiles:h}=$b({taskId:e,onUploadComplete:S=>{t(S)},onUploadError:S=>{console.error("Upload error:",S)}}),b=m.useCallback(S=>{if(!S||S.length===0)return;const j=Array.from(S),Y=y(j,r,n,a);if(Y.length>0){const Te=[...f,...Y].map(Xs=>Xs.file);t(Te)}},[y,r,n,a,t,f]),w=m.useCallback(S=>{b(S.target.files),l.current&&(l.current.value="")},[b]),C=m.useCallback(S=>{S.preventDefault(),s||d(!0)},[s]),I=m.useCallback(S=>{S.preventDefault(),d(!1)},[]),x=m.useCallback(S=>{S.preventDefault(),d(!1),!s&&b(S.dataTransfer.files)},[s,b]),O=m.useCallback(async()=>{const S=h();if(S.length!==0)try{await _(S)}catch(j){console.error("Upload failed:",j)}},[h,_]),J=m.useCallback(()=>{var S;s||(S=l.current)==null||S.click()},[s]),or=m.useCallback(S=>{E(S);const j=f.filter(Y=>Y.id!==S).map(Y=>Y.file);t(j)},[E,f,t]),we=m.useCallback(()=>{v(),t([])},[v,t]),lr=S=>{switch(S){case"completed":return"green";case"error":return"red";case"uploading":case"committing":case"initializing":return"blue";default:return"grey"}},Zs=S=>{switch(S){case"completed":return"check circle";case"error":return"exclamation triangle";case"uploading":case"committing":case"initializing":return"spinner";default:return"file"}},ot=S=>{if(S===0)return"0 Bytes";const j=1024,Y=["Bytes","KB","MB","GB"],Te=Math.floor(Math.log(S)/Math.log(j));return`${Number.parseFloat((S/j**Te).toFixed(2))} ${Y[Te]}`},Js=()=>f.reduce((S,j)=>S+j.file.size,0),ur=()=>ot(Js());return i.default.createElement("div",null,i.default.createElement("input",{ref:l,type:"file",multiple:!0,accept:r,onChange:w,style:{display:"none"},disabled:s}),i.default.createElement(c.Segment,{placeholder:!0,className:`file-drop-zone ${u?"drag-over":""}`,onDragOver:C,onDragLeave:I,onDrop:x,style:{minHeight:"120px",border:u?"2px dashed #2185d0":"2px dashed #d4d4d5",backgroundColor:u?"#f8f9fa":"transparent",cursor:s?"not-allowed":"pointer",opacity:s?.6:1},onClick:J},i.default.createElement("div",{style:{textAlign:"center",padding:"20px"}},i.default.createElement(c.Icon,{name:"cloud upload",size:"huge",color:u?"blue":"grey"}),i.default.createElement("div",{style:{marginTop:"10px"}},i.default.createElement("p",null,i.default.createElement("strong",null,"Drop files here or click to select")),i.default.createElement("p",{style:{fontSize:"12px",color:"#666"}},"Max size: ",ot(n)," | Max files: ",a),f.length>0&&i.default.createElement("p",{style:{fontSize:"12px",color:"#2185d0",marginTop:"8px"}},i.default.createElement("strong",null,f.length," files selected •"," ",ur()," total"))))),o&&i.default.createElement(c.Message,{negative:!0,size:"small"},i.default.createElement(c.Icon,{name:"exclamation triangle"}),o),f.length>0&&i.default.createElement(c.Segment,null,i.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"}},i.default.createElement("strong",null,"Selected Files (",f.length,") • ",ur()),i.default.createElement(c.Button,{size:"mini",basic:!0,icon:"trash",content:"Clear All",onClick:we,disabled:p})),i.default.createElement(c.List,{divided:!0},f.map(S=>i.default.createElement(c.List.Item,{key:S.id},i.default.createElement(c.List.Content,null,i.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},i.default.createElement("div",{style:{flex:1}},i.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},i.default.createElement(c.Icon,{name:Zs(S.status),color:lr(S.status),loading:S.status==="uploading"||S.status==="committing"||S.status==="initializing"}),i.default.createElement("span",null,S.file.name),i.default.createElement(c.Label,{size:"mini",basic:!0},ot(S.file.size)),i.default.createElement(c.Label,{size:"mini",color:lr(S.status)},S.status)),S.progress&&S.status==="uploading"&&i.default.createElement(c.Progress,{percent:S.progress.percentage,size:"tiny",color:"blue",style:{marginTop:"5px"}}),S.error&&i.default.createElement(c.Message,{negative:!0,size:"mini",style:{marginTop:"5px"}},S.error)),i.default.createElement(c.Button,{size:"mini",basic:!0,icon:"close",onClick:()=>or(S.id),disabled:p})))))),e&&h().length>0&&i.default.createElement("div",{style:{marginTop:"15px",textAlign:"center"}},i.default.createElement(c.Button,{primary:!0,icon:"upload",content:`Upload ${h().length} file(s)`,onClick:O,loading:p,disabled:p||g}))))},Cb=()=>{const[e,t]=m.useState({}),[r,n]=m.useState(!0),{values:a,submitForm:s,isSubmitting:o,isValid:l,setFieldValue:u}=ai.useFormikContext(),d=m.useCallback(async()=>{try{const f=await vb(),p={};for(const g of f){const y=await bb(g);y&&(p[g]=y)}t(p)}catch(f){console.error("Error fetching record types:",f)}finally{n(!1)}},[]);return m.useEffect(()=>{d()},[d]),{configs:e,isLoading:r,values:a,submitForm:s,setFieldValue:u,isSubmitting:o,isValid:l}},xb=()=>{const{configs:e,isLoading:t,submitForm:r,setFieldValue:n,values:a,isSubmitting:s,isValid:o}=Cb(),l=d=>{var p;const f=((p=d.target.files)==null?void 0:p[0])||null;n("metadata",f)},u=d=>{n("files",d)};return t?i.default.createElement("p",null,"Loading record types..."):!e||Object.keys(e).length===0?i.default.createElement("p",null,"No record types available."):i.default.createElement(m.Fragment,null,i.default.createElement(ne.TextField,{fieldPath:"task.title",label:"Title",placeholder:"Enter a title for the import task",required:!0}),i.default.createElement(c.Form.Group,{widths:"equal"},i.default.createElement(ne.SelectField,{fieldPath:"task.recordType",label:"Record Type",options:Object.keys(e).map(d=>({key:d,value:d,text:d})),placeholder:"Select Record Type",required:!0}),i.default.createElement(ne.SelectField,{fieldPath:"task.serializer",label:"Serializer",options:a.task.recordType&&e[a.task.recordType]?e[a.task.recordType].serializers.map(d=>({key:d,value:d,text:d})):[],placeholder:"Select Serializer",disabled:!a.task.recordType,required:!0}),i.default.createElement(ne.SelectField,{fieldPath:"task.mode",label:"Mode",options:[{key:"import",value:"import",text:"Import"},{key:"delete",value:"delete",text:"Delete"}],placeholder:"Select Mode",disabled:!a.task.recordType||!a.task.serializer,required:!0})),i.default.createElement(c.Form.Field,null,i.default.createElement("label",{htmlFor:"file-input"},"Metadata File"),i.default.createElement("input",{id:"file-input",type:"file",accept:".csv",onChange:l,style:{marginTop:"8px"}}),a.metadata&&i.default.createElement("p",{style:{marginTop:"8px",fontSize:"12px",color:"#666"}},"Selected: ",a.metadata.name),i.default.createElement("p",{style:{marginTop:"8px",fontSize:"12px",color:"#666"}},"Upload a CSV or JSON file containing the record metadata to be imported.")),i.default.createElement(c.Form.Field,null,i.default.createElement(_b,{value:a.files||[],onChange:u,accept:"*",maxSize:10*1024*1024*1024,maxFiles:100}),i.default.createElement("p",{style:{marginTop:"8px",fontSize:"12px",color:"#666"}},i.default.createElement("strong",null,"Attachment Files:")," Upload files that will be attached to the imported records.")),i.default.createElement(ne.TextAreaField,{fieldPath:"task.description",label:"Notes",placeholder:"Enter a description for the import task",rows:3}),i.default.createElement(c.Button,{type:"button",primary:!0,onClick:r,disabled:!o||s,loading:s},"Submit"))};var Et;try{Et=Map}catch{}var St;try{St=Set}catch{}function is(e,t,r){if(!e||typeof e!="object"||typeof e=="function")return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map($t);if(Et&&e instanceof Et)return new Map(Array.from(e.entries()));if(St&&e instanceof St)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var n=Object.create(e);r.push(n);for(var a in e){var s=t.findIndex(function(o){return o===e[a]});n[a]=s>-1?r[s]:is(e[a],t,r)}return n}return e}function $t(e){return is(e,[],[])}const wb=Object.prototype.toString,Tb=Error.prototype.toString,Fb=RegExp.prototype.toString,Ib=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Ab=/^Symbol\((.*)\)(.*)$/;function Ob(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function Yr(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return Ob(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return Ib.call(e).replace(Ab,"Symbol($1)");const n=wb.call(e).slice(8,-1);return n==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):n==="Error"||e instanceof Error?"["+Tb.call(e)+"]":n==="RegExp"?Fb.call(e):null}function be(e,t){let r=Yr(e,t);return r!==null?r:JSON.stringify(e,function(n,a){let s=Yr(this[n],t);return s!==null?s:a},2)}let ee={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:n})=>{let a=n!=null&&n!==r,s=`${e} must be a \`${t}\` type, but the final value was: \`${be(r,!0)}\``+(a?` (cast from the value \`${be(n,!0)}\`).`:".");return r===null&&(s+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),s},defined:"${path} must be defined"},M={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Rb={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},_t={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Pb={isValue:"${path} field must be ${value}"},Ct={noUnknown:"${path} field has unspecified keys: ${unknown}"},kb={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"};Object.assign(Object.create(null),{mixed:ee,string:M,number:Rb,date:_t,object:Ct,array:kb,boolean:Pb});var Db=Object.prototype,Lb=Db.hasOwnProperty;function Ub(e,t){return e!=null&&Lb.call(e,t)}var Nb=Ub,Bb=Nb,Mb=On;function zb(e,t){return e!=null&&Mb(e,t,Bb)}var Qb=zb;const ze=P(Qb),os=e=>e&&e.__isYupSchema__;class jb{constructor(t,r){if(this.fn=void 0,this.refs=t,this.refs=t,typeof r=="function"){this.fn=r;return}if(!ze(r,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:a,otherwise:s}=r,o=typeof n=="function"?n:(...l)=>l.every(u=>u===n);this.fn=function(...l){let u=l.pop(),d=l.pop(),f=o(...l)?a:s;if(f)return typeof f=="function"?f(d):d.concat(f.resolve(u))}}resolve(t,r){let n=this.refs.map(s=>s.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),a=this.fn.apply(t,n.concat(t,r));if(a===void 0||a===t)return t;if(!os(a))throw new TypeError("conditions must return a schema object");return a.resolve(r)}}function ls(e){return e==null?[]:[].concat(e)}function xt(){return xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xt.apply(this,arguments)}let qb=/\$\{\s*(\w+)\s*\}/g;class D extends Error{static formatError(t,r){const n=r.label||r.path||"this";return n!==r.path&&(r=xt({},r,{path:n})),typeof t=="string"?t.replace(qb,(a,s)=>be(r[s])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,n,a){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this.name="ValidationError",this.value=r,this.path=n,this.type=a,this.errors=[],this.inner=[],ls(t).forEach(s=>{D.isError(s)?(this.errors.push(...s.errors),this.inner=this.inner.concat(s.inner.length?s.inner:s)):this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,D)}}const Gb=e=>{let t=!1;return(...r)=>{t||(t=!0,e(...r))}};function wt(e,t){let{endEarly:r,tests:n,args:a,value:s,errors:o,sort:l,path:u}=e,d=Gb(t),f=n.length;const p=[];if(o=o||[],!f)return o.length?d(new D(o,s,u)):d(null,s);for(let g=0;g<n.length;g++){const y=n[g];y(a,function(v){if(v){if(!D.isError(v))return d(v,s);if(r)return v.value=s,d(v,s);p.push(v)}if(--f<=0){if(p.length&&(l&&p.sort(l),o.length&&p.push(...o),o=p),o.length){d(new D(o,s,u),s);return}d(null,s)}})}}function Vb(e){return function(t,r,n){for(var a=-1,s=Object(t),o=n(t),l=o.length;l--;){var u=o[e?l:++a];if(r(s[u],u,s)===!1)break}return t}}var Hb=Vb,Kb=Hb,Yb=Kb(),Wb=Yb,Zb=Wb,Jb=Ce;function Xb(e,t){return e&&Zb(e,t,Jb)}var us=Xb,eE="__lodash_hash_undefined__";function tE(e){return this.__data__.set(e,eE),this}var rE=tE;function nE(e){return this.__data__.has(e)}var aE=nE,sE=Ut,iE=rE,oE=aE;function Qe(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new sE;++t<r;)this.add(e[t])}Qe.prototype.add=Qe.prototype.push=iE;Qe.prototype.has=oE;var lE=Qe;function uE(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var cE=uE;function dE(e,t){return e.has(t)}var fE=dE,pE=lE,hE=cE,gE=fE,mE=1,yE=2;function vE(e,t,r,n,a,s){var o=r&mE,l=e.length,u=t.length;if(l!=u&&!(o&&u>l))return!1;var d=s.get(e),f=s.get(t);if(d&&f)return d==t&&f==e;var p=-1,g=!0,y=r&yE?new pE:void 0;for(s.set(e,t),s.set(t,e);++p<l;){var E=e[p],v=t[p];if(n)var _=o?n(v,E,p,t,e,s):n(E,v,p,e,t,s);if(_!==void 0){if(_)continue;g=!1;break}if(y){if(!hE(t,function(h,b){if(!gE(y,b)&&(E===h||a(E,h,r,n,s)))return y.push(b)})){g=!1;break}}else if(!(E===v||a(E,v,r,n,s))){g=!1;break}}return s.delete(e),s.delete(t),g}var cs=vE;function bE(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var EE=bE;function SE(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var $E=SE,Wr=ue,Zr=Qn,_E=We,CE=cs,xE=EE,wE=$E,TE=1,FE=2,IE="[object Boolean]",AE="[object Date]",OE="[object Error]",RE="[object Map]",PE="[object Number]",kE="[object RegExp]",DE="[object Set]",LE="[object String]",UE="[object Symbol]",NE="[object ArrayBuffer]",BE="[object DataView]",Jr=Wr?Wr.prototype:void 0,ct=Jr?Jr.valueOf:void 0;function ME(e,t,r,n,a,s,o){switch(r){case BE:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case NE:return!(e.byteLength!=t.byteLength||!s(new Zr(e),new Zr(t)));case IE:case AE:case PE:return _E(+e,+t);case OE:return e.name==t.name&&e.message==t.message;case kE:case LE:return e==t+"";case RE:var l=xE;case DE:var u=n&TE;if(l||(l=wE),e.size!=t.size&&!u)return!1;var d=o.get(e);if(d)return d==t;n|=FE,o.set(e,t);var f=CE(l(e),l(t),n,a,s,o);return o.delete(e),f;case UE:if(ct)return ct.call(e)==ct.call(t)}return!1}var zE=ME,Xr=zn,QE=1,jE=Object.prototype,qE=jE.hasOwnProperty;function GE(e,t,r,n,a,s){var o=r&QE,l=Xr(e),u=l.length,d=Xr(t),f=d.length;if(u!=f&&!o)return!1;for(var p=u;p--;){var g=l[p];if(!(o?g in t:qE.call(t,g)))return!1}var y=s.get(e),E=s.get(t);if(y&&E)return y==t&&E==e;var v=!0;s.set(e,t),s.set(t,e);for(var _=o;++p<u;){g=l[p];var h=e[g],b=t[g];if(n)var w=o?n(b,h,g,t,e,s):n(h,b,g,e,t,s);if(!(w===void 0?h===b||a(h,b,r,n,s):w)){v=!1;break}_||(_=g=="constructor")}if(v&&!_){var C=e.constructor,I=t.constructor;C!=I&&"constructor"in e&&"constructor"in t&&!(typeof C=="function"&&C instanceof C&&typeof I=="function"&&I instanceof I)&&(v=!1)}return s.delete(e),s.delete(t),v}var VE=GE,dt=qt,HE=cs,KE=zE,YE=VE,en=Ee,tn=L,rn=Ke,WE=kt,ZE=1,nn="[object Arguments]",an="[object Array]",Ae="[object Object]",JE=Object.prototype,sn=JE.hasOwnProperty;function XE(e,t,r,n,a,s){var o=tn(e),l=tn(t),u=o?an:en(e),d=l?an:en(t);u=u==nn?Ae:u,d=d==nn?Ae:d;var f=u==Ae,p=d==Ae,g=u==d;if(g&&rn(e)){if(!rn(t))return!1;o=!0,f=!1}if(g&&!f)return s||(s=new dt),o||WE(e)?HE(e,t,r,n,a,s):KE(e,t,u,r,n,a,s);if(!(r&ZE)){var y=f&&sn.call(e,"__wrapped__"),E=p&&sn.call(t,"__wrapped__");if(y||E){var v=y?e.value():e,_=E?t.value():t;return s||(s=new dt),a(v,_,r,n,s)}}return g?(s||(s=new dt),YE(e,t,r,n,a,s)):!1}var eS=XE,tS=eS,on=G;function ds(e,t,r,n,a){return e===t?!0:e==null||t==null||!on(e)&&!on(t)?e!==e&&t!==t:tS(e,t,r,n,ds,a)}var fs=ds,rS=qt,nS=fs,aS=1,sS=2;function iS(e,t,r,n){var a=r.length,s=a,o=!n;if(e==null)return!s;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=r[a];var u=l[0],d=e[u],f=l[1];if(o&&l[2]){if(d===void 0&&!(u in e))return!1}else{var p=new rS;if(n)var g=n(d,f,u,e,t,p);if(!(g===void 0?nS(f,d,aS|sS,n,p):g))return!1}}return!0}var oS=iS,lS=K;function uS(e){return e===e&&!lS(e)}var ps=uS,cS=ps,dS=Ce;function fS(e){for(var t=dS(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,cS(a)]}return t}var pS=fS;function hS(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var hs=hS,gS=oS,mS=pS,yS=hs;function vS(e){var t=mS(e);return t.length==1&&t[0][2]?yS(t[0][0],t[0][1]):function(r){return r===e||gS(r,e,t)}}var bS=vS,ES=fs,SS=An,$S=Mt,_S=Lt,CS=ps,xS=hs,wS=$e,TS=1,FS=2;function IS(e,t){return _S(e)&&CS(t)?xS(wS(e),t):function(r){var n=SS(r,e);return n===void 0&&n===t?$S(r,e):ES(t,n,TS|FS)}}var AS=IS;function OS(e){return function(t){return t==null?void 0:t[e]}}var RS=OS,PS=Bt;function kS(e){return function(t){return PS(t,e)}}var DS=kS,LS=RS,US=DS,NS=Lt,BS=$e;function MS(e){return NS(e)?LS(BS(e)):US(e)}var zS=MS,QS=bS,jS=AS,qS=Qt,GS=L,VS=zS;function HS(e){return typeof e=="function"?e:e==null?qS:typeof e=="object"?GS(e)?jS(e[0],e[1]):QS(e):VS(e)}var gs=HS,KS=rt,YS=us,WS=gs;function ZS(e,t){var r={};return t=WS(t),YS(e,function(n,a,s){KS(r,a,t(n,a,s))}),r}var JS=ZS;const ms=P(JS);function re(e){this._maxSize=e,this.clear()}re.prototype.clear=function(){this._size=0,this._values=Object.create(null)};re.prototype.get=function(e){return this._values[e]};re.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var XS=/[^.^\]^[]+|(?=\[\]|\.\.)/g,ys=/^\d+$/,e0=/^\d/,t0=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,r0=/^\s*(['"]?)(.*?)(\1)\s*$/,nr=512,ln=new re(nr),un=new re(nr),cn=new re(nr),it={Cache:re,split:Tt,normalizePath:ft,setter:function(e){var t=ft(e);return un.get(e)||un.set(e,function(n,a){for(var s=0,o=t.length,l=n;s<o-1;){var u=t[s];if(u==="__proto__"||u==="constructor"||u==="prototype")return n;l=l[t[s++]]}l[t[s]]=a})},getter:function(e,t){var r=ft(e);return cn.get(e)||cn.set(e,function(a){for(var s=0,o=r.length;s<o;)if(a!=null||!t)a=a[r[s++]];else return;return a})},join:function(e){return e.reduce(function(t,r){return t+(ar(r)||ys.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){n0(Array.isArray(e)?e:Tt(e),t,r)}};function ft(e){return ln.get(e)||ln.set(e,Tt(e).map(function(t){return t.replace(r0,"$2")}))}function Tt(e){return e.match(XS)||[""]}function n0(e,t,r){var n=e.length,a,s,o,l;for(s=0;s<n;s++)a=e[s],a&&(i0(a)&&(a='"'+a+'"'),l=ar(a),o=!l&&/^\d+$/.test(a),t.call(r,a,l,o,s,e))}function ar(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function a0(e){return e.match(e0)&&!e.match(ys)}function s0(e){return t0.test(e)}function i0(e){return!ar(e)&&(a0(e)||s0(e))}const Oe={context:"$",value:"."};class W{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Oe.context,this.isValue=this.key[0]===Oe.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?Oe.context:this.isValue?Oe.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&it.getter(this.path,!0),this.map=r.map}getValue(t,r,n){let a=this.isContext?n:this.isValue?t:r;return this.getter&&(a=this.getter(a||{})),this.map&&(a=this.map(a)),a}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}W.prototype.__isYupRef=!0;function je(){return je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},je.apply(this,arguments)}function o0(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Re(e){function t(r,n){let{value:a,path:s="",label:o,options:l,originalValue:u,sync:d}=r,f=o0(r,["value","path","label","options","originalValue","sync"]);const{name:p,test:g,params:y,message:E}=e;let{parent:v,context:_}=l;function h(x){return W.isRef(x)?x.getValue(a,v,_):x}function b(x={}){const O=ms(je({value:a,originalValue:u,label:o,path:x.path||s},y,x.params),h),J=new D(D.formatError(x.message||E,O),a,O.path,x.type||p);return J.params=O,J}let w=je({path:s,parent:v,type:p,createError:b,resolve:h,options:l,originalValue:u},f);if(!d){try{Promise.resolve(g.call(w,a,w)).then(x=>{D.isError(x)?n(x):x?n(null,x):n(b())}).catch(n)}catch(x){n(x)}return}let C;try{var I;if(C=g.call(w,a,w),typeof((I=C)==null?void 0:I.then)=="function")throw new Error(`Validation test of type: "${w.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(x){n(x);return}D.isError(C)?n(C):C?n(null,C):n(b())}return t.OPTIONS=e,t}let l0=e=>e.substr(0,e.length-1).substr(1);function u0(e,t,r,n=r){let a,s,o;return t?(it.forEach(t,(l,u,d)=>{let f=u?l0(l):l;if(e=e.resolve({context:n,parent:a,value:r}),e.innerType){let p=d?parseInt(f,10):0;if(r&&p>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${t}. because there is no value at that index. `);a=r,r=r&&r[p],e=e.innerType}if(!d){if(!e.fields||!e.fields[f])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${o} which is a type: "${e._type}")`);a=r,r=r&&r[f],e=e.fields[f]}s=f,o=u?"["+l+"]":"."+l}),{schema:e,parent:a,parentPath:s}):{parent:a,parentPath:t,schema:e}}class qe{constructor(){this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const t=[];for(const r of this.list)t.push(r);for(const[,r]of this.refs)t.push(r.describe());return t}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}resolveAll(t){return this.toArray().reduce((r,n)=>r.concat(W.isRef(n)?t(n):n),[])}add(t){W.isRef(t)?this.refs.set(t.key,t):this.list.add(t)}delete(t){W.isRef(t)?this.refs.delete(t.key):this.list.delete(t)}clone(){const t=new qe;return t.list=new Set(this.list),t.refs=new Map(this.refs),t}merge(t,r){const n=this.clone();return t.list.forEach(a=>n.add(a)),t.refs.forEach(a=>n.add(a)),r.list.forEach(a=>n.delete(a)),r.refs.forEach(a=>n.delete(a)),n}}function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N.apply(this,arguments)}class k{constructor(t){this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new qe,this._blacklist=new qe,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(ee.notType)}),this.type=(t==null?void 0:t.type)||"mixed",this.spec=N({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},t==null?void 0:t.spec)}get _type(){return this.type}_typeCheck(t){return!0}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeError=this._typeError,r._whitelistError=this._whitelistError,r._blacklistError=this._blacklistError,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.exclusiveTests=N({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=$t(N({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let n=t(this);return this._mutate=r,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,n=t.clone();const a=N({},r.spec,n.spec);return n.spec=a,n._typeError||(n._typeError=r._typeError),n._whitelistError||(n._whitelistError=r._whitelistError),n._blacklistError||(n._blacklistError=r._blacklistError),n._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),n.tests=r.tests,n.exclusiveTests=r.exclusiveTests,n.withMutation(s=>{t.tests.forEach(o=>{s.test(o.OPTIONS)})}),n.transforms=[...r.transforms,...n.transforms],n}isType(t){return this.spec.nullable&&t===null?!0:this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let n=r.conditions;r=r.clone(),r.conditions=[],r=n.reduce((a,s)=>s.resolve(a,t),r),r=r.resolve(t)}return r}cast(t,r={}){let n=this.resolve(N({value:t},r)),a=n._cast(t,r);if(t!==void 0&&r.assert!==!1&&n.isType(a)!==!0){let s=be(t),o=be(a);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${n._type}". 

attempted value: ${s} 
`+(o!==s?`result of cast: ${o}`:""))}return a}_cast(t,r){let n=t===void 0?t:this.transforms.reduce((a,s)=>s.call(this,a,t,this),t);return n===void 0&&(n=this.getDefault()),n}_validate(t,r={},n){let{sync:a,path:s,from:o=[],originalValue:l=t,strict:u=this.spec.strict,abortEarly:d=this.spec.abortEarly}=r,f=t;u||(f=this._cast(f,N({assert:!1},r)));let p={value:f,path:s,options:r,originalValue:l,schema:this,label:this.spec.label,sync:a,from:o},g=[];this._typeError&&g.push(this._typeError);let y=[];this._whitelistError&&y.push(this._whitelistError),this._blacklistError&&y.push(this._blacklistError),wt({args:p,value:f,path:s,sync:a,tests:g,endEarly:d},E=>{if(E)return void n(E,f);wt({tests:this.tests.concat(y),args:p,path:s,sync:a,value:f,endEarly:d},n)})}validate(t,r,n){let a=this.resolve(N({},r,{value:t}));return typeof n=="function"?a._validate(t,r,n):new Promise((s,o)=>a._validate(t,r,(l,u)=>{l?o(l):s(u)}))}validateSync(t,r){let n=this.resolve(N({},r,{value:t})),a;return n._validate(t,N({},r,{sync:!0}),(s,o)=>{if(s)throw s;a=o}),a}isValid(t,r){return this.validate(t,r).then(()=>!0,n=>{if(D.isError(n))return!1;throw n})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(n){if(D.isError(n))return!1;throw n}}_getDefault(){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this):$t(t)}getDefault(t){return this.resolve(t||{})._getDefault()}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){let r=this.clone();return r.spec.strict=t,r}_isPresent(t){return t!=null}defined(t=ee.defined){return this.test({message:t,name:"defined",exclusive:!0,test(r){return r!==void 0}})}required(t=ee.required){return this.clone({presence:"required"}).withMutation(r=>r.test({message:t,name:"required",exclusive:!0,test(n){return this.schema._isPresent(n)}}))}notRequired(){let t=this.clone({presence:"optional"});return t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t}nullable(t=!0){return this.clone({nullable:t!==!1})}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=ee.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),a=Re(r),s=r.exclusive||r.name&&n.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(n.exclusiveTests[r.name]=!!r.exclusive),n.tests=n.tests.filter(o=>!(o.OPTIONS.name===r.name&&(s||o.OPTIONS.test===a.OPTIONS.test))),n.tests.push(a),n}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let n=this.clone(),a=ls(t).map(s=>new W(s));return a.forEach(s=>{s.isSibling&&n.deps.push(s.key)}),n.conditions.push(new jb(a,r)),n}typeError(t){let r=this.clone();return r._typeError=Re({message:t,name:"typeError",test(n){return n!==void 0&&!this.schema.isType(n)?this.createError({params:{type:this.schema._type}}):!0}}),r}oneOf(t,r=ee.oneOf){let n=this.clone();return t.forEach(a=>{n._whitelist.add(a),n._blacklist.delete(a)}),n._whitelistError=Re({message:r,name:"oneOf",test(a){if(a===void 0)return!0;let s=this.schema._whitelist,o=s.resolveAll(this.resolve);return o.includes(a)?!0:this.createError({params:{values:s.toArray().join(", "),resolved:o}})}}),n}notOneOf(t,r=ee.notOneOf){let n=this.clone();return t.forEach(a=>{n._blacklist.add(a),n._whitelist.delete(a)}),n._blacklistError=Re({message:r,name:"notOneOf",test(a){let s=this.schema._blacklist,o=s.resolveAll(this.resolve);return o.includes(a)?this.createError({params:{values:s.toArray().join(", "),resolved:o}}):!0}}),n}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(){const t=this.clone(),{label:r,meta:n}=t.spec;return{meta:n,label:r,type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(s=>({name:s.OPTIONS.name,params:s.OPTIONS.params})).filter((s,o,l)=>l.findIndex(u=>u.name===s.name)===o)}}}k.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])k.prototype[`${e}At`]=function(t,r,n={}){const{parent:a,parentPath:s,schema:o}=u0(this,t,r,n.context);return o[e](a&&a[s],N({},n,{parent:a,path:t}))};for(const e of["equals","is"])k.prototype[e]=k.prototype.oneOf;for(const e of["not","nope"])k.prototype[e]=k.prototype.notOneOf;k.prototype.optional=k.prototype.notRequired;const c0=k;c0.prototype;const z=e=>e==null;let d0=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,f0=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,p0=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,h0=e=>z(e)||e===e.trim(),g0={}.toString();function ye(){return new vs}class vs extends k{constructor(){super({type:"string"}),this.withMutation(()=>{this.transform(function(t){if(this.isType(t)||Array.isArray(t))return t;const r=t!=null&&t.toString?t.toString():t;return r===g0?t:r})})}_typeCheck(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}_isPresent(t){return super._isPresent(t)&&!!t.length}length(t,r=M.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},test(n){return z(n)||n.length===this.resolve(t)}})}min(t,r=M.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},test(n){return z(n)||n.length>=this.resolve(t)}})}max(t,r=M.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},test(n){return z(n)||n.length<=this.resolve(t)}})}matches(t,r){let n=!1,a,s;return r&&(typeof r=="object"?{excludeEmptyString:n=!1,message:a,name:s}=r:a=r),this.test({name:s||"matches",message:a||M.matches,params:{regex:t},test:o=>z(o)||o===""&&n||o.search(t)!==-1})}email(t=M.email){return this.matches(d0,{name:"email",message:t,excludeEmptyString:!0})}url(t=M.url){return this.matches(f0,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=M.uuid){return this.matches(p0,{name:"uuid",message:t,excludeEmptyString:!1})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=M.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:h0})}lowercase(t=M.lowercase){return this.transform(r=>z(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,test:r=>z(r)||r===r.toLowerCase()})}uppercase(t=M.uppercase){return this.transform(r=>z(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,test:r=>z(r)||r===r.toUpperCase()})}}ye.prototype=vs.prototype;var m0=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function y0(e){var t=[1,4,5,6,7,10,11],r=0,n,a;if(a=m0.exec(e)){for(var s=0,o;o=t[s];++s)a[o]=+a[o]||0;a[2]=(+a[2]||1)-1,a[3]=+a[3]||1,a[7]=a[7]?String(a[7]).substr(0,3):0,(a[8]===void 0||a[8]==="")&&(a[9]===void 0||a[9]==="")?n=+new Date(a[1],a[2],a[3],a[4],a[5],a[6],a[7]):(a[8]!=="Z"&&a[9]!==void 0&&(r=a[10]*60+a[11],a[9]==="+"&&(r=0-r)),n=Date.UTC(a[1],a[2],a[3],a[4],a[5]+r,a[6],a[7]))}else n=Date.parse?Date.parse(e):NaN;return n}let bs=new Date(""),v0=e=>Object.prototype.toString.call(e)==="[object Date]";class Es extends k{constructor(){super({type:"date"}),this.withMutation(()=>{this.transform(function(t){return this.isType(t)?t:(t=y0(t),isNaN(t)?bs:new Date(t))})})}_typeCheck(t){return v0(t)&&!isNaN(t.getTime())}prepareParam(t,r){let n;if(W.isRef(t))n=t;else{let a=this.cast(t);if(!this._typeCheck(a))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);n=a}return n}min(t,r=_t.min){let n=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},test(a){return z(a)||a>=this.resolve(n)}})}max(t,r=_t.max){let n=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},test(a){return z(a)||a<=this.resolve(n)}})}}Es.INVALID_DATE=bs;Es.prototype;function b0(e,t,r,n){var a=-1,s=e==null?0:e.length;for(n&&s&&(r=e[++a]);++a<s;)r=t(r,e[a],a,e);return r}var E0=b0;function S0(e){return function(t){return e==null?void 0:e[t]}}var $0=S0,_0=$0,C0={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},x0=_0(C0),w0=x0,T0=w0,F0=Se,I0=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,A0="\\u0300-\\u036f",O0="\\ufe20-\\ufe2f",R0="\\u20d0-\\u20ff",P0=A0+O0+R0,k0="["+P0+"]",D0=RegExp(k0,"g");function L0(e){return e=F0(e),e&&e.replace(I0,T0).replace(D0,"")}var U0=L0,N0=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function B0(e){return e.match(N0)||[]}var M0=B0,z0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Q0(e){return z0.test(e)}var j0=Q0,Ss="\\ud800-\\udfff",q0="\\u0300-\\u036f",G0="\\ufe20-\\ufe2f",V0="\\u20d0-\\u20ff",H0=q0+G0+V0,$s="\\u2700-\\u27bf",_s="a-z\\xdf-\\xf6\\xf8-\\xff",K0="\\xac\\xb1\\xd7\\xf7",Y0="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",W0="\\u2000-\\u206f",Z0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cs="A-Z\\xc0-\\xd6\\xd8-\\xde",J0="\\ufe0e\\ufe0f",xs=K0+Y0+W0+Z0,ws="['’]",dn="["+xs+"]",X0="["+H0+"]",Ts="\\d+",e$="["+$s+"]",Fs="["+_s+"]",Is="[^"+Ss+xs+Ts+$s+_s+Cs+"]",t$="\\ud83c[\\udffb-\\udfff]",r$="(?:"+X0+"|"+t$+")",n$="[^"+Ss+"]",As="(?:\\ud83c[\\udde6-\\uddff]){2}",Os="[\\ud800-\\udbff][\\udc00-\\udfff]",ae="["+Cs+"]",a$="\\u200d",fn="(?:"+Fs+"|"+Is+")",s$="(?:"+ae+"|"+Is+")",pn="(?:"+ws+"(?:d|ll|m|re|s|t|ve))?",hn="(?:"+ws+"(?:D|LL|M|RE|S|T|VE))?",Rs=r$+"?",Ps="["+J0+"]?",i$="(?:"+a$+"(?:"+[n$,As,Os].join("|")+")"+Ps+Rs+")*",o$="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",l$="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",u$=Ps+Rs+i$,c$="(?:"+[e$,As,Os].join("|")+")"+u$,d$=RegExp([ae+"?"+Fs+"+"+pn+"(?="+[dn,ae,"$"].join("|")+")",s$+"+"+hn+"(?="+[dn,ae+fn,"$"].join("|")+")",ae+"?"+fn+"+"+pn,ae+"+"+hn,l$,o$,Ts,c$].join("|"),"g");function f$(e){return e.match(d$)||[]}var p$=f$,h$=M0,g$=j0,m$=Se,y$=p$;function v$(e,t,r){return e=m$(e),t=r?void 0:t,t===void 0?g$(e)?y$(e):h$(e):e.match(t)||[]}var b$=v$,E$=E0,S$=U0,$$=b$,_$="['’]",C$=RegExp(_$,"g");function x$(e){return function(t){return E$($$(S$(t).replace(C$,"")),e,"")}}var ks=x$,w$=ks,T$=w$(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),F$=T$;const gn=P(F$);function I$(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s}var A$=I$,O$=A$;function R$(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:O$(e,t,r)}var P$=R$,k$="\\ud800-\\udfff",D$="\\u0300-\\u036f",L$="\\ufe20-\\ufe2f",U$="\\u20d0-\\u20ff",N$=D$+L$+U$,B$="\\ufe0e\\ufe0f",M$="\\u200d",z$=RegExp("["+M$+k$+N$+B$+"]");function Q$(e){return z$.test(e)}var Ds=Q$;function j$(e){return e.split("")}var q$=j$,Ls="\\ud800-\\udfff",G$="\\u0300-\\u036f",V$="\\ufe20-\\ufe2f",H$="\\u20d0-\\u20ff",K$=G$+V$+H$,Y$="\\ufe0e\\ufe0f",W$="["+Ls+"]",Ft="["+K$+"]",It="\\ud83c[\\udffb-\\udfff]",Z$="(?:"+Ft+"|"+It+")",Us="[^"+Ls+"]",Ns="(?:\\ud83c[\\udde6-\\uddff]){2}",Bs="[\\ud800-\\udbff][\\udc00-\\udfff]",J$="\\u200d",Ms=Z$+"?",zs="["+Y$+"]?",X$="(?:"+J$+"(?:"+[Us,Ns,Bs].join("|")+")"+zs+Ms+")*",e_=zs+Ms+X$,t_="(?:"+[Us+Ft+"?",Ft,Ns,Bs,W$].join("|")+")",r_=RegExp(It+"(?="+It+")|"+t_+e_,"g");function n_(e){return e.match(r_)||[]}var a_=n_,s_=q$,i_=Ds,o_=a_;function l_(e){return i_(e)?o_(e):s_(e)}var u_=l_,c_=P$,d_=Ds,f_=u_,p_=Se;function h_(e){return function(t){t=p_(t);var r=d_(t)?f_(t):void 0,n=r?r[0]:t.charAt(0),a=r?c_(r,1).join(""):t.slice(1);return n[e]()+a}}var g_=h_,m_=g_,y_=m_("toUpperCase"),v_=y_,b_=Se,E_=v_;function S_(e){return E_(b_(e).toLowerCase())}var $_=S_,__=$_,C_=ks,x_=C_(function(e,t,r){return t=t.toLowerCase(),e+(r?__(t):t)}),w_=x_;const T_=P(w_);var F_=rt,I_=us,A_=gs;function O_(e,t){var r={};return t=A_(t),I_(e,function(n,a,s){F_(r,t(n,a,s),n)}),r}var R_=O_;const P_=P(R_);var sr={exports:{}};sr.exports=function(e){return Qs(k_(e),e)};sr.exports.array=Qs;function Qs(e,t){var r=e.length,n=new Array(r),a={},s=r,o=D_(t),l=L_(e);for(t.forEach(function(d){if(!l.has(d[0])||!l.has(d[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)a[s]||u(e[s],s,new Set);return n;function u(d,f,p){if(p.has(d)){var g;try{g=", node was:"+JSON.stringify(d)}catch{g=""}throw new Error("Cyclic dependency"+g)}if(!l.has(d))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(d));if(!a[f]){a[f]=!0;var y=o.get(d)||new Set;if(y=Array.from(y),f=y.length){p.add(d);do{var E=y[--f];u(E,l.get(E),p)}while(f);p.delete(d)}n[--r]=d}}}function k_(e){for(var t=new Set,r=0,n=e.length;r<n;r++){var a=e[r];t.add(a[0]),t.add(a[1])}return Array.from(t)}function D_(e){for(var t=new Map,r=0,n=e.length;r<n;r++){var a=e[r];t.has(a[0])||t.set(a[0],new Set),t.has(a[1])||t.set(a[1],new Set),t.get(a[0]).add(a[1])}return t}function L_(e){for(var t=new Map,r=0,n=e.length;r<n;r++)t.set(e[r],r);return t}var U_=sr.exports;const N_=P(U_);function B_(e,t=[]){let r=[],n=new Set,a=new Set(t.map(([o,l])=>`${o}-${l}`));function s(o,l){let u=it.split(o)[0];n.add(u),a.has(`${l}-${u}`)||r.push([l,u])}for(const o in e)if(ze(e,o)){let l=e[o];n.add(o),W.isRef(l)&&l.isSibling?s(l.path,o):os(l)&&"deps"in l&&l.deps.forEach(u=>s(u,o))}return N_.array(Array.from(n),r).reverse()}function mn(e,t){let r=1/0;return e.some((n,a)=>{var s;if(((s=t.path)==null?void 0:s.indexOf(n))!==-1)return r=a,!0}),r}function js(e){return(t,r)=>mn(e,t)-mn(e,r)}function se(){return se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},se.apply(this,arguments)}let yn=e=>Object.prototype.toString.call(e)==="[object Object]";function M_(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(n=>r.indexOf(n)===-1)}const z_=js([]);class qs extends k{constructor(t){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=z_,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{this.transform(function(n){if(typeof n=="string")try{n=JSON.parse(n)}catch{n=null}return this.isType(n)?n:null}),t&&this.shape(t)})}_typeCheck(t){return yn(t)||typeof t=="function"}_cast(t,r={}){var n;let a=super._cast(t,r);if(a===void 0)return this.getDefault();if(!this._typeCheck(a))return a;let s=this.fields,o=(n=r.stripUnknown)!=null?n:this.spec.noUnknown,l=this._nodes.concat(Object.keys(a).filter(p=>this._nodes.indexOf(p)===-1)),u={},d=se({},r,{parent:u,__validating:r.__validating||!1}),f=!1;for(const p of l){let g=s[p],y=ze(a,p);if(g){let E,v=a[p];d.path=(r.path?`${r.path}.`:"")+p,g=g.resolve({value:v,context:r.context,parent:u});let _="spec"in g?g.spec:void 0,h=_==null?void 0:_.strict;if(_!=null&&_.strip){f=f||p in a;continue}E=!r.__validating||!h?g.cast(a[p],d):a[p],E!==void 0&&(u[p]=E)}else y&&!o&&(u[p]=a[p]);u[p]!==a[p]&&(f=!0)}return f?u:a}_validate(t,r={},n){let a=[],{sync:s,from:o=[],originalValue:l=t,abortEarly:u=this.spec.abortEarly,recursive:d=this.spec.recursive}=r;o=[{schema:this,value:l},...o],r.__validating=!0,r.originalValue=l,r.from=o,super._validate(t,r,(f,p)=>{if(f){if(!D.isError(f)||u)return void n(f,p);a.push(f)}if(!d||!yn(p)){n(a[0]||null,p);return}l=l||p;let g=this._nodes.map(y=>(E,v)=>{let _=y.indexOf(".")===-1?(r.path?`${r.path}.`:"")+y:`${r.path||""}["${y}"]`,h=this.fields[y];if(h&&"validate"in h){h.validate(p[y],se({},r,{path:_,from:o,strict:!0,parent:p,originalValue:l[y]}),v);return}v(null)});wt({sync:s,tests:g,value:p,errors:a,endEarly:u,sort:this._sortErrors,path:r.path},n)})}clone(t){const r=super.clone(t);return r.fields=se({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),n=r.fields;for(let[a,s]of Object.entries(this.fields)){const o=n[a];o===void 0?n[a]=s:o instanceof k&&s instanceof k&&(n[a]=s.concat(o))}return r.withMutation(()=>r.shape(n,this._excludedEdges))}getDefaultFromShape(){let t={};return this._nodes.forEach(r=>{const n=this.fields[r];t[r]="default"in n?n.getDefault():void 0}),t}_getDefault(){if("default"in this.spec)return super._getDefault();if(this._nodes.length)return this.getDefaultFromShape()}shape(t,r=[]){let n=this.clone(),a=Object.assign(n.fields,t);return n.fields=a,n._sortErrors=js(Object.keys(a)),r.length&&(Array.isArray(r[0])||(r=[r]),n._excludedEdges=[...n._excludedEdges,...r]),n._nodes=B_(a,n._excludedEdges),n}pick(t){const r={};for(const n of t)this.fields[n]&&(r[n]=this.fields[n]);return this.clone().withMutation(n=>(n.fields={},n.shape(r)))}omit(t){const r=this.clone(),n=r.fields;r.fields={};for(const a of t)delete n[a];return r.withMutation(()=>r.shape(n))}from(t,r,n){let a=it.getter(t,!0);return this.transform(s=>{if(s==null)return s;let o=s;return ze(s,t)&&(o=se({},s),n||delete o[t],o[r]=a(s)),o})}noUnknown(t=!0,r=Ct.noUnknown){typeof t=="string"&&(r=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:r,test(a){if(a==null)return!0;const s=M_(this.schema,a);return!t||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,r=Ct.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>r&&P_(r,(n,a)=>t(a)))}camelCase(){return this.transformKeys(T_)}snakeCase(){return this.transformKeys(gn)}constantCase(){return this.transformKeys(t=>gn(t).toUpperCase())}describe(){let t=super.describe();return t.fields=ms(this.fields,r=>r.describe()),t}}function De(e){return new qs(e)}De.prototype=qs.prototype;const Q_={task:{title:"",description:"",mode:"import",status:"created",startTime:null,endTime:null,recordType:"",serializer:""},metadata:null,files:[]},j_=De({task:De({title:ye().required("Title is required"),recordType:ye().required("Record type is required"),serializer:ye().required("Serializer is required"),mode:ye().required("Mode is required")}),metadata:De().nullable()}),q_=({onSubmit:e})=>{const t=async r=>{try{const n=await mb(r.task);if(!n)throw new Error("Failed to create import task");if(r.metadata&&(console.log("Uploading metadata file..."),await es(n.id,r.metadata),console.log("Metadata file uploaded successfully")),r.files&&r.files.length>0){console.log(`Uploading ${r.files.length} attachment files...`);const a=r.files.map(s=>s.name);await ns(n.id,a),console.log("Files initialized on server");for(const s of r.files)console.log(`Uploading file: ${s.name}`),await as(n.id,s.name,s),console.log(`File uploaded: ${s.name}`),console.log(`Committing file: ${s.name}`),await ts(n.id,s.name),console.log(`File committed: ${s.name}`);console.log("All attachment files uploaded and committed successfully")}if(r.metadata&&(console.log("Starting task validation..."),await rr(n.id))){console.log("Checking task status...");const s=await tr(n.id);console.log("Task status:",s)}e==null||e()}catch(n){throw console.error("Error creating import task:",n),n}};return i.default.createElement(ne.BaseForm,{formik:{initialValues:Q_,validationSchema:j_,onSubmit:t}},i.default.createElement(xb,null))},Gs=()=>{const[e,t]=m.useState(!1),{refreshSearch:r}=st(),n=m.useCallback(()=>{t(!1),r()},[r]);return i.default.createElement(c.Modal,{closeIcon:!0,onClose:()=>t(!1),onOpen:()=>t(!0),open:e,trigger:i.default.createElement(c.Button,{color:"green",icon:!0,labelPosition:"left"},i.default.createElement(c.Icon,{name:"add"}),"New Import")},i.default.createElement(c.ModalHeader,null,"New Import Task"),i.default.createElement(c.ModalContent,null,i.default.createElement(q_,{onSubmit:n})),i.default.createElement(c.ModalActions,null,i.default.createElement(c.Button,{onClick:()=>t(!1)},"Close")))},G_=({currentQueryState:e,updateQueryState:t})=>{var s;const r=[{key:"all",label:"All",value:null},{key:"pending",label:"Pending",value:"pending"},{key:"success",label:"Success",value:"success"},{key:"failed",label:"Failed",value:"failed"}],n=(s=e.filters)==null?void 0:s.find(o=>o[0]==="status"),a=o=>{var u;const l=((u=e.filters)==null?void 0:u.filter(d=>d[0]!=="status"))||[];o&&l.push(["status",o]),t({...e,filters:l,page:1})};return i.default.createElement(c.Menu,{activeIndex:0,compact:!0,size:"tiny"},r.map(({key:o,label:l,value:u})=>i.default.createElement(c.Menu.Item,{key:o,name:o,active:(n==null?void 0:n[1])===u||u===null&&!n,onClick:()=>a(u)},l)))},Vs=Ca(G_),V_=({appId:e="search"})=>{const{showFacets:t,showImportModal:r}=st().config;return i.default.createElement($.default,{id:`${e}.SearchBarRow`},i.default.createElement("section",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"1rem",paddingBlock:"0.5rem",minBlockSize:"3rem"},"aria-label":"Records search and filters"},t&&i.default.createElement("div",{style:{flex:"0 0 auto"}},i.default.createElement(Vs,null)),i.default.createElement("div",{style:{flex:"1 1 auto",minInlineSize:"15rem"}},i.default.createElement(eb,{autofocus:!0,actionProps:{icon:"search",content:"Search",className:"search","aria-label":"Submit search",type:"submit"},placeholder:"Search…","aria-describedby":"search-instructions"})),r&&i.default.createElement("div",{style:{flex:"0 0 auto"}},i.default.createElement(Gs,null))))},H_=()=>{const{config:e}=st();return i.default.createElement(c.Grid,null,i.default.createElement(c.Grid.Row,{verticalAlign:"middle"},i.default.createElement(c.Grid.Column,{width:4,textAlign:"left"},i.default.createElement(Ov,{label:t=>i.default.createElement("div",null,t," item(s)")})),i.default.createElement(c.Grid.Column,{width:8,textAlign:"center"},i.default.createElement(Mv,{options:{size:"mini"}})),i.default.createElement(c.Grid.Column,{width:4,textAlign:"right"},i.default.createElement(Zv,{values:e.paginationOptions.resultsPerPage,label:t=>i.default.createElement("p",null,t," results per page")}))))},ir=({config:e={},overriddenComponents:t={}})=>{var s,o,l,u,d;const r={...H,...e,initialQueryState:{...H.initialQueryState,...e.initialQueryState},layoutOptions:{...H.layoutOptions,...e.layoutOptions},paginationOptions:{...H.paginationOptions,...e.paginationOptions,resultsPerPage:((s=e.paginationOptions)==null?void 0:s.resultsPerPage)||H.paginationOptions.resultsPerPage},searchApi:{...H.searchApi,...e.searchApi,axios:{...H.searchApi.axios,...(o=e.searchApi)==null?void 0:o.axios,headers:{...H.searchApi.axios.headers,...(u=(l=e.searchApi)==null?void 0:l.axios)==null?void 0:u.headers}},invenio:{...H.searchApi.invenio,...(d=e.searchApi)==null?void 0:d.invenio}},showFacets:e.showFacets??!0,showImportModal:e.showImportModal??!0,showSearchFooter:e.showSearchFooter??!0},n=new Wn(r.searchApi),a={[`${r.appId}.ResultsList.item`]:Eb,[`${r.appId}.ResultsList.container`]:Sb,[`${r.appId}.SearchFacets`]:Vs,...t};return i.default.createElement(vn.OverridableContext.Provider,{value:a},i.default.createElement(mv,{appName:r.appId,searchApi:n,initialQueryState:r.initialQueryState},i.default.createElement(cb,{config:r},i.default.createElement(V_,{appId:r.appId}),i.default.createElement(Hv,null,i.default.createElement(kv,null),i.default.createElement(Pa,null)),r.showSearchFooter&&i.default.createElement(H_,null))))},K_=({status:e,children:t,...r})=>e==="damaged"||e==="imported with failures"||e==="validated with failures"||e==="serializer validation failed"||e==="validation failed"||e==="import failed"?i.default.createElement(c.Label,{color:"red",...r},i.default.createElement(c.Icon,{name:"warning sign"}),t):e==="success"||e==="validated"||e==="created"?i.default.createElement(c.Label,{color:"green",...r},i.default.createElement(c.Icon,{name:"check circle"}),t):e==="importing"||e==="validating"?i.default.createElement(c.Label,{color:"blue",...r},i.default.createElement(c.Icon,{name:"spinner",loading:!0}),t):i.default.createElement(c.Label,{...r},t),Hs=m.createContext(void 0),Y_=({taskId:e,children:t})=>i.default.createElement(Hs.Provider,{value:{taskId:e}},i.default.createElement("div",{style:{paddingBlockStart:"1rem",display:"flex",flexDirection:"column",gap:"1rem"}},t)),Ks=()=>{const e=m.useContext(Hs);if(!e)throw new Error("useTaskDetails must be used within a TaskDetailsProvider");return e},W_=({children:e})=>i.default.createElement(c.Table,{padded:!0,size:"small",comp:!0},i.default.createElement(c.TableHeader,null,i.default.createElement(c.TableRow,null,i.default.createElement(c.TableHeaderCell,null,"ID"),i.default.createElement(c.TableHeaderCell,null,"Title"),i.default.createElement(c.TableHeaderCell,null,"Status"),i.default.createElement(c.TableHeaderCell,null))),i.default.createElement(c.TableBody,null,e)),Z_=({openModal:e,setOpenModal:t,result:r})=>i.default.createElement(c.Modal,{open:e,onClose:()=>t(!1),closeIcon:!0},i.default.createElement(c.Modal.Header,null,"Record Errors"),i.default.createElement(c.Modal.Content,null,r.errors&&r.errors.length>0?i.default.createElement(c.Message,{negative:!0,icon:!0},i.default.createElement(c.Icon,{name:"exclamation triangle"}),i.default.createElement(c.Message.Content,null,i.default.createElement(c.Message.Header,null,"Serializer validation failed"),i.default.createElement(c.List,{bulleted:!0},r.errors.map(n=>i.default.createElement(c.List.Item,{key:`${n.type}-${r.id}`},n.msg))))):i.default.createElement(c.Message,{positive:!0,icon:!0},i.default.createElement(c.Icon,{name:"check circle"}),i.default.createElement(c.Message.Content,null,i.default.createElement(c.Message.Header,null,"Validation successful"),"No errors found for this record."))),i.default.createElement(c.Modal.Actions,null,i.default.createElement(c.Button,{onClick:()=>t(!1),content:"Close",primary:!0}))),Ys=({result:e,index:t})=>{var p;const[r,n]=m.useState("idle"),[a,s]=m.useState(!1);if(!e)return null;const o=async()=>{try{n("copying"),await navigator.clipboard.writeText(e.id),n("copied"),setTimeout(()=>{n("idle")},2e3)}catch{n("idle")}},l=e.errors&&e.errors.length>0,u=Xa(e.status),d=g=>g==="red"?"times":g==="green"||g==="blue"?"check":"question",f=[...l?[{key:"view-errors",text:"View Errors",value:"view-errors",icon:"exclamation triangle",onClick:()=>s(!0)}]:[],{key:"run",disabled:e.status==="success",text:"Run Record",value:"run",icon:"play",onClick:async()=>{try{await gb(e.id),console.log(`Record ${e.id} is being processed.`)}catch(g){console.error("Error running record:",g)}}}];return i.default.createElement(c.TableRow,{key:t},i.default.createElement(c.TableCell,null,i.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"}},i.default.createElement("code",{style:{fontSize:"0.9em",color:"#666"}},e.id.length>20?`${e.id.substring(0,20)}…`:e.id),i.default.createElement(c.Popup,{content:r==="copied"?"Copied!":"Copy ID",trigger:i.default.createElement(c.Button,{size:"mini",circular:!0,icon:!0,loading:r==="copying",onClick:o,color:r==="copied"?"green":void 0},i.default.createElement(c.Icon,{name:r==="copied"?"check":"copy"})),position:"top center",size:"mini"}))),i.default.createElement(c.TableCell,null,i.default.createElement("div",{style:{maxWidth:"300px"}},((p=e.src_data)==null?void 0:p.title)||i.default.createElement("em",{style:{color:"#999"}},"No Title Available"))),i.default.createElement(c.TableCell,null,i.default.createElement(c.Label,{color:u,size:"small"},i.default.createElement(c.Icon,{name:d(u)}),ve(e.status)),l&&i.default.createElement(c.Popup,{content:`${e.errors.length} error${e.errors.length>1?"s":""} found`,trigger:i.default.createElement(c.Icon,{name:"exclamation triangle",color:"red",style:{marginLeft:"0.5rem",cursor:"help"}}),position:"top center",size:"mini"})),i.default.createElement(c.TableCell,{textAlign:"right"},i.default.createElement(c.Dropdown,{button:!0,className:"icon",floating:!0,labeled:!0,icon:"ellipsis horizontal",text:"Actions",size:"mini"},i.default.createElement(c.Dropdown.Menu,null,f.map(g=>i.default.createElement(c.Dropdown.Item,{key:g.key,icon:g.icon,text:g.text,disabled:g.disabled,onClick:g.onClick})))),i.default.createElement(Z_,{setOpenModal:s,openModal:a,result:e})))},J_=()=>{const{taskId:e}=Ks(),t={"search.SearchBarRow":()=>null,"search.ResultsList.container":W_,"search.ResultsList.item":Ys};return i.default.createElement("div",null,i.default.createElement(c.Header,{as:"h3"},"Task Records"),i.default.createElement(ir,{config:{searchApi:{axios:{url:"/api/importer-records",withCredentials:!0}},initialQueryState:{hiddenParams:[["q",`task.id:${e}`]]},showFacets:!1,showImportModal:!1},overriddenComponents:t}))},X_=()=>{const{taskId:e}=Ks(),[t,r]=m.useState(null),[n,a]=m.useState(!1),s=u=>{var f;const d=((f=u.target.files)==null?void 0:f[0])||null;r(d||null)},o=()=>{a(!1),r(null)},l=async()=>{if(t)try{await es(e,t);const u=await rr(e);if(console.log("validate",u),u){const d=await rs(e);d&&console.log("Task started successfully:",d);const f=await tr(e);console.log("Task status:",f)}a(!1),r(null)}catch(u){console.error("Error uploading metadata:",u)}};return i.default.createElement(c.Modal,{open:n,onOpen:()=>a(!0),onClose:o,size:"small",closeIcon:!0,trigger:i.default.createElement(c.Button,{icon:"upload",size:"small",content:"Upload New Metadata"})},i.default.createElement(c.Header,{icon:!0},i.default.createElement(c.Icon,{name:"upload"}),"Upload Metadata"),i.default.createElement(c.Modal.Content,null,i.default.createElement(c.Form,{onSubmit:l},i.default.createElement(c.Form.Field,null,i.default.createElement("label",{htmlFor:"fileInput"},"Select Metadata File"),i.default.createElement("input",{id:"fileInput",type:"file",onChange:s,accept:".csv"}),t&&i.default.createElement("div",{style:{marginTop:"0.5rem",color:"#666"}},"Selected: ",t.name)))),i.default.createElement(c.Modal.Actions,null,i.default.createElement(c.Button,{onClick:o,color:"grey"},i.default.createElement(c.Icon,{name:"cancel"}),"Cancel"),i.default.createElement(c.Button,{onClick:l,color:"blue",disabled:!t},i.default.createElement(c.Icon,{name:"upload"}),"Upload")))},Ws=({taskId:e})=>{var h,b,w,C,I,x;const[t,r]=m.useState(null),[n,a]=m.useState(!0),[s,o]=m.useState(null),{getStatus:l,isGettingStatus:u}=ss(e,{onStatusChangeSuccess:r}),d=m.useCallback(async()=>{try{if(a(!0),o(null),!await l())throw new Error("Task not found")}catch(O){console.error("Error fetching task details:",O),o(O instanceof Error?O.message:"Failed to fetch task details")}finally{a(!1)}},[l]);if(m.useEffect(()=>{e&&d()},[e,d]),n||u)return i.default.createElement(c.Segment,null,i.default.createElement(c.Loader,{content:"Loading task details..."}));if(s)return i.default.createElement(c.Message,{negative:!0,icon:!0},i.default.createElement(c.Icon,{name:"exclamation triangle"}),i.default.createElement(c.Message.Content,null,i.default.createElement(c.Message.Header,null,"Error Loading Task"),s));if(!t)return i.default.createElement(c.Message,{warning:!0,icon:!0},i.default.createElement(c.Icon,{name:"search"}),i.default.createElement(c.Message.Content,null,i.default.createElement(c.Message.Header,null,"Task Not Found"),"The requested task could not be found."));const f=((h=t.records_status)==null?void 0:h.total_records)||0,p=((b=t.records_status)==null?void 0:b.validated)||0,g=((w=t.records_status)==null?void 0:w.success)||0,y=(((C=t.records_status)==null?void 0:C["import failed"])||0)+(((I=t.records_status)==null?void 0:I["validation failed"])||0)+(((x=t.records_status)==null?void 0:x["serializer validation failed"])||0),E=f>0?p/f*100:0,v=f>0?g/f*100:0,_=f>0?y/f*100:0;return i.default.createElement(Y_,{taskId:e},i.default.createElement(c.Segment.Group,{compact:!0},i.default.createElement(c.Segment,null,i.default.createElement(c.Grid,null,i.default.createElement(c.Grid.Row,{verticalAlign:"middle"},i.default.createElement(c.Grid.Column,{width:8,verticalAlign:"middle"},i.default.createElement(c.Header,{as:"h2"},i.default.createElement(c.Icon,{name:"tasks"}),i.default.createElement(c.Header.Content,null,t.title,t.description&&i.default.createElement(c.Header.Subheader,null,t.description)))),i.default.createElement(c.Grid.Column,{width:8,textAlign:"right"},i.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",gap:"1rem"}},t.status&&i.default.createElement(K_,{size:"large",status:t.status},ve(t.status)),i.default.createElement("div",null,i.default.createElement(c.Button,{size:"small",color:"blue",icon:"refresh",content:"Refresh",onClick:()=>l(),loading:n}),i.default.createElement(X_,null),i.default.createElement(c.Button,{size:"small",disabled:!0,color:"green",icon:"play",content:"Run Task"}))))))),f>0&&i.default.createElement(c.Segment,null,i.default.createElement(c.Header,{as:"h4"},i.default.createElement(c.Icon,{name:"chart bar"}),"Progress Overview"),i.default.createElement(c.Statistic.Group,{widths:"three"},i.default.createElement(c.Statistic,{color:"blue"},i.default.createElement(c.Statistic.Value,null,p),i.default.createElement(c.Statistic.Label,null,"Validated")),i.default.createElement(c.Statistic,{color:"red"},i.default.createElement(c.Statistic.Value,null,y),i.default.createElement(c.Statistic.Label,null,"With Errors")),i.default.createElement(c.Statistic,{color:"green"},i.default.createElement(c.Statistic.Value,null,g),i.default.createElement(c.Statistic.Label,null,"Imported"))),i.default.createElement(c.Divider,null),i.default.createElement(c.Grid,{columns:3,divided:!0},i.default.createElement(c.Grid.Column,null,i.default.createElement("div",{style:{textAlign:"center",marginBottom:"0.5rem"}},i.default.createElement("strong",null,"Validation Progress")),i.default.createElement(c.Progress,{percent:E,color:"blue"},p," / ",f)),i.default.createElement(c.Grid.Column,null,i.default.createElement("div",{style:{textAlign:"center",marginBottom:"0.5rem"}},i.default.createElement("strong",null,"Error Records")),i.default.createElement(c.Progress,{percent:_,color:"red"},y," / ",f)),i.default.createElement(c.Grid.Column,null,i.default.createElement("div",{style:{textAlign:"center",marginBottom:"0.5rem"}},i.default.createElement("strong",null,"Import Progress")),i.default.createElement(c.Progress,{percent:v,color:"green"},g," / ",f))))),i.default.createElement(J_,null))},e1={Search:ir,TaskDetails:Ws},t1={CREATED:"created",VALIDATING:"validating",SERIALIZER_VALIDATION_FAILED:"serializer validation failed",VALIDATION_FAILED:"validation failed",VALIDATED:"validated",IMPORT_FAILED:"import failed",IMPORTED:"success"},r1={CREATED:"created",VALIDATING:"validating",VALIDATION_FAILED:"validated with failures",VALIDATED:"validated",IMPORTING:"importing",IMPORT_FAILED:"imported with failures",SUCCESS:"success",DAMAGED:"damaged"};exports.BulkImporter=e1;exports.ImportModal=Gs;exports.ImporterTaskStates=r1;exports.InvenioImporterRecordStatus=t1;exports.Search=ir;exports.TaskDetails=Ws;exports.TaskRecordItem=Ys;exports.capitalizeFirstLetter=ve;exports.createSearchApi=pb;exports.createSearchApiConfig=hb;exports.formatDate=Wa;exports.getCsrfToken=Ja;exports.getStatusColor=Xa;
