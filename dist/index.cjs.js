"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=require("react"),Dn=require("react-overridable"),Ii=require("axios"),Fi=require("qs"),A=require("react-redux"),u=require("semantic-ui-react"),Ct=require("redux"),Ai=require("redux-thunk"),Oi=require("lodash"),ne=require("react-invenio-forms"),Ri=require("formik"),le=e=>e&&e.__esModule?e:{default:e},i=le(g),E=le(Dn),Be=le(Ii),ue=le(Fi),ki=le(Ai),Pi=le(Oi);var Oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Di=Object.prototype;function Li(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Di;return e===r}var Ke=Li;function Bi(e,t){return function(r){return e(t(r))}}var Ln=Bi,Ni=Ln,Ui=Ni(Object.keys,Object),Mi=Ui,zi=Ke,ji=Mi,Qi=Object.prototype,qi=Qi.hasOwnProperty;function Gi(e){if(!zi(e))return ji(e);var t=[];for(var r in Object(e))qi.call(e,r)&&r!="constructor"&&t.push(r);return t}var Bn=Gi,Vi=typeof Oe=="object"&&Oe&&Oe.Object===Object&&Oe,Nn=Vi,Hi=Nn,Yi=typeof self=="object"&&self&&self.Object===Object&&self,Wi=Hi||Yi||Function("return this")(),Q=Wi,Ki=Q,Xi=Ki.Symbol,ce=Xi,Cr=ce,Un=Object.prototype,Zi=Un.hasOwnProperty,Ji=Un.toString,ge=Cr?Cr.toStringTag:void 0;function eo(e){var t=Zi.call(e,ge),r=e[ge];try{e[ge]=void 0;var n=!0}catch{}var a=Ji.call(e);return n&&(t?e[ge]=r:delete e[ge]),a}var to=eo,ro=Object.prototype,no=ro.toString;function ao(e){return no.call(e)}var so=ao,$r=ce,io=to,oo=so,lo="[object Null]",uo="[object Undefined]",xr=$r?$r.toStringTag:void 0;function co(e){return e==null?e===void 0?uo:lo:xr&&xr in Object(e)?io(e):oo(e)}var K=co;function fo(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var H=fo;const po=O(H);var ho=K,mo=H,go="[object AsyncFunction]",yo="[object Function]",bo="[object GeneratorFunction]",vo="[object Proxy]";function Eo(e){if(!mo(e))return!1;var t=ho(e);return t==yo||t==bo||t==go||t==vo}var Mn=Eo,So=Q,_o=So["__core-js_shared__"],Co=_o,ht=Co,wr=function(){var e=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function $o(e){return!!wr&&wr in e}var xo=$o,wo=Function.prototype,To=wo.toString;function Io(e){if(e!=null){try{return To.call(e)}catch{}try{return e+""}catch{}}return""}var zn=Io,Fo=Mn,Ao=xo,Oo=H,Ro=zn,ko=/[\\^$.*+?()[\]{}|]/g,Po=/^\[object .+?Constructor\]$/,Do=Function.prototype,Lo=Object.prototype,Bo=Do.toString,No=Lo.hasOwnProperty,Uo=RegExp("^"+Bo.call(No).replace(ko,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mo(e){if(!Oo(e)||Ao(e))return!1;var t=Fo(e)?Uo:Po;return t.test(Ro(e))}var zo=Mo;function jo(e,t){return e==null?void 0:e[t]}var Qo=jo,qo=zo,Go=Qo;function Vo(e,t){var r=Go(e,t);return qo(r)?r:void 0}var ee=Vo,Ho=ee,Yo=Q,Wo=Ho(Yo,"DataView"),Ko=Wo,Xo=ee,Zo=Q,Jo=Xo(Zo,"Map"),zt=Jo,el=ee,tl=Q,rl=el(tl,"Promise"),nl=rl,al=ee,sl=Q,il=al(sl,"Set"),ol=il,ll=ee,ul=Q,cl=ll(ul,"WeakMap"),dl=cl,$t=Ko,xt=zt,wt=nl,Tt=ol,It=dl,jn=K,de=zn,Tr="[object Map]",fl="[object Object]",Ir="[object Promise]",Fr="[object Set]",Ar="[object WeakMap]",Or="[object DataView]",pl=de($t),hl=de(xt),ml=de(wt),gl=de(Tt),yl=de(It),Z=jn;($t&&Z(new $t(new ArrayBuffer(1)))!=Or||xt&&Z(new xt)!=Tr||wt&&Z(wt.resolve())!=Ir||Tt&&Z(new Tt)!=Fr||It&&Z(new It)!=Ar)&&(Z=function(e){var t=jn(e),r=t==fl?e.constructor:void 0,n=r?de(r):"";if(n)switch(n){case pl:return Or;case hl:return Tr;case ml:return Ir;case gl:return Fr;case yl:return Ar}return t});var $e=Z;function bl(e){return e!=null&&typeof e=="object"}var q=bl,vl=K,El=q,Sl="[object Arguments]";function _l(e){return El(e)&&vl(e)==Sl}var Cl=_l,Rr=Cl,$l=q,Qn=Object.prototype,xl=Qn.hasOwnProperty,wl=Qn.propertyIsEnumerable,Tl=Rr(function(){return arguments}())?Rr:function(e){return $l(e)&&xl.call(e,"callee")&&!wl.call(e,"callee")},Xe=Tl,Il=Array.isArray,D=Il;const qn=O(D);var Fl=9007199254740991;function Al(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Fl}var jt=Al,Ol=Mn,Rl=jt;function kl(e){return e!=null&&Rl(e.length)&&!Ol(e)}var Ze=kl,Me={exports:{}};function Pl(){return!1}var Dl=Pl;Me.exports;(function(e,t){var r=Q,n=Dl,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;e.exports=d})(Me,Me.exports);var Je=Me.exports,Ll=K,Bl=jt,Nl=q,Ul="[object Arguments]",Ml="[object Array]",zl="[object Boolean]",jl="[object Date]",Ql="[object Error]",ql="[object Function]",Gl="[object Map]",Vl="[object Number]",Hl="[object Object]",Yl="[object RegExp]",Wl="[object Set]",Kl="[object String]",Xl="[object WeakMap]",Zl="[object ArrayBuffer]",Jl="[object DataView]",eu="[object Float32Array]",tu="[object Float64Array]",ru="[object Int8Array]",nu="[object Int16Array]",au="[object Int32Array]",su="[object Uint8Array]",iu="[object Uint8ClampedArray]",ou="[object Uint16Array]",lu="[object Uint32Array]",w={};w[eu]=w[tu]=w[ru]=w[nu]=w[au]=w[su]=w[iu]=w[ou]=w[lu]=!0;w[Ul]=w[Ml]=w[Zl]=w[zl]=w[Jl]=w[jl]=w[Ql]=w[ql]=w[Gl]=w[Vl]=w[Hl]=w[Yl]=w[Wl]=w[Kl]=w[Xl]=!1;function uu(e){return Nl(e)&&Bl(e.length)&&!!w[Ll(e)]}var cu=uu;function du(e){return function(t){return e(t)}}var Qt=du,ze={exports:{}};ze.exports;(function(e,t){var r=Nn,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,o=s&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(ze,ze.exports);var qt=ze.exports,fu=cu,pu=Qt,kr=qt,Pr=kr&&kr.isTypedArray,hu=Pr?pu(Pr):fu,Gt=hu,mu=Bn,gu=$e,yu=Xe,bu=D,vu=Ze,Eu=Je,Su=Ke,_u=Gt,Cu="[object Map]",$u="[object Set]",xu=Object.prototype,wu=xu.hasOwnProperty;function Tu(e){if(e==null)return!0;if(vu(e)&&(bu(e)||typeof e=="string"||typeof e.splice=="function"||Eu(e)||_u(e)||yu(e)))return!e.length;var t=gu(e);if(t==Cu||t==$u)return!e.size;if(Su(e))return!mu(e).length;for(var r in e)if(wu.call(e,r))return!1;return!0}var Iu=Tu;const G=O(Iu);var Fu=K,Au=q,Ou="[object Symbol]";function Ru(e){return typeof e=="symbol"||Au(e)&&Fu(e)==Ou}var Vt=Ru,ku=D,Pu=Vt,Du=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lu=/^\w*$/;function Bu(e,t){if(ku(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Pu(e)?!0:Lu.test(e)||!Du.test(e)||t!=null&&e in Object(t)}var Ht=Bu,Nu=ee,Uu=Nu(Object,"create"),et=Uu,Dr=et;function Mu(){this.__data__=Dr?Dr(null):{},this.size=0}var zu=Mu;function ju(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Qu=ju,qu=et,Gu="__lodash_hash_undefined__",Vu=Object.prototype,Hu=Vu.hasOwnProperty;function Yu(e){var t=this.__data__;if(qu){var r=t[e];return r===Gu?void 0:r}return Hu.call(t,e)?t[e]:void 0}var Wu=Yu,Ku=et,Xu=Object.prototype,Zu=Xu.hasOwnProperty;function Ju(e){var t=this.__data__;return Ku?t[e]!==void 0:Zu.call(t,e)}var ec=Ju,tc=et,rc="__lodash_hash_undefined__";function nc(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=tc&&t===void 0?rc:t,this}var ac=nc,sc=zu,ic=Qu,oc=Wu,lc=ec,uc=ac;function fe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}fe.prototype.clear=sc;fe.prototype.delete=ic;fe.prototype.get=oc;fe.prototype.has=lc;fe.prototype.set=uc;var cc=fe;function dc(){this.__data__=[],this.size=0}var fc=dc;function pc(e,t){return e===t||e!==e&&t!==t}var tt=pc,hc=tt;function mc(e,t){for(var r=e.length;r--;)if(hc(e[r][0],t))return r;return-1}var rt=mc,gc=rt,yc=Array.prototype,bc=yc.splice;function vc(e){var t=this.__data__,r=gc(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():bc.call(t,r,1),--this.size,!0}var Ec=vc,Sc=rt;function _c(e){var t=this.__data__,r=Sc(t,e);return r<0?void 0:t[r][1]}var Cc=_c,$c=rt;function xc(e){return $c(this.__data__,e)>-1}var wc=xc,Tc=rt;function Ic(e,t){var r=this.__data__,n=Tc(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var Fc=Ic,Ac=fc,Oc=Ec,Rc=Cc,kc=wc,Pc=Fc;function pe(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}pe.prototype.clear=Ac;pe.prototype.delete=Oc;pe.prototype.get=Rc;pe.prototype.has=kc;pe.prototype.set=Pc;var nt=pe,Lr=cc,Dc=nt,Lc=zt;function Bc(){this.size=0,this.__data__={hash:new Lr,map:new(Lc||Dc),string:new Lr}}var Nc=Bc;function Uc(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Mc=Uc,zc=Mc;function jc(e,t){var r=e.__data__;return zc(t)?r[typeof t=="string"?"string":"hash"]:r.map}var at=jc,Qc=at;function qc(e){var t=Qc(this,e).delete(e);return this.size-=t?1:0,t}var Gc=qc,Vc=at;function Hc(e){return Vc(this,e).get(e)}var Yc=Hc,Wc=at;function Kc(e){return Wc(this,e).has(e)}var Xc=Kc,Zc=at;function Jc(e,t){var r=Zc(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var ed=Jc,td=Nc,rd=Gc,nd=Yc,ad=Xc,sd=ed;function he(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}he.prototype.clear=td;he.prototype.delete=rd;he.prototype.get=nd;he.prototype.has=ad;he.prototype.set=sd;var Yt=he,Gn=Yt,id="Expected a function";function Wt(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(id);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var o=e.apply(this,n);return r.cache=s.set(a,o)||s,o};return r.cache=new(Wt.Cache||Gn),r}Wt.Cache=Gn;var od=Wt,ld=od,ud=500;function cd(e){var t=ld(e,function(n){return r.size===ud&&r.clear(),n}),r=t.cache;return t}var dd=cd,fd=dd,pd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hd=/\\(\\)?/g,md=fd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(pd,function(r,n,a,s){t.push(a?s.replace(hd,"$1"):n||r)}),t}),gd=md;function yd(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var bd=yd,Br=ce,vd=bd,Ed=D,Sd=Vt,_d=1/0,Nr=Br?Br.prototype:void 0,Ur=Nr?Nr.toString:void 0;function Vn(e){if(typeof e=="string")return e;if(Ed(e))return vd(e,Vn)+"";if(Sd(e))return Ur?Ur.call(e):"";var t=e+"";return t=="0"&&1/e==-_d?"-0":t}var Cd=Vn,$d=Cd;function xd(e){return e==null?"":$d(e)}var xe=xd,wd=D,Td=Ht,Id=gd,Fd=xe;function Ad(e,t){return wd(e)?e:Td(e,t)?[e]:Id(Fd(e))}var st=Ad,Od=Vt,Rd=1/0;function kd(e){if(typeof e=="string"||Od(e))return e;var t=e+"";return t=="0"&&1/e==-Rd?"-0":t}var we=kd,Pd=st,Dd=we;function Ld(e,t){t=Pd(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Dd(t[r++])];return r&&r==n?e:void 0}var Kt=Ld,Bd=Kt;function Nd(e,t,r){var n=e==null?void 0:Bd(e,t);return n===void 0?r:n}var Hn=Nd;const Ee=O(Hn);function Ud(e,t){return e!=null&&t in Object(e)}var Md=Ud,zd=9007199254740991,jd=/^(?:0|[1-9]\d*)$/;function Qd(e,t){var r=typeof e;return t=t??zd,!!t&&(r=="number"||r!="symbol"&&jd.test(e))&&e>-1&&e%1==0&&e<t}var it=Qd,qd=st,Gd=Xe,Vd=D,Hd=it,Yd=jt,Wd=we;function Kd(e,t,r){t=qd(t,e);for(var n=-1,a=t.length,s=!1;++n<a;){var o=Wd(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=a?s:(a=e==null?0:e.length,!!a&&Yd(a)&&Hd(o,a)&&(Vd(e)||Gd(e)))}var Yn=Kd,Xd=Md,Zd=Yn;function Jd(e,t){return e!=null&&Zd(e,t,Xd)}var Xt=Jd;const ef=O(Xt);var tf=ee,rf=function(){try{var e=tf(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Wn=rf,Mr=Wn;function nf(e,t,r){t=="__proto__"&&Mr?Mr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var ot=nf,af=ot,sf=tt,of=Object.prototype,lf=of.hasOwnProperty;function uf(e,t,r){var n=e[t];(!(lf.call(e,t)&&sf(n,r))||r===void 0&&!(t in e))&&af(e,t,r)}var Zt=uf,cf=Zt,df=ot;function ff(e,t,r,n){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var l=t[s],c=n?n(r[l],e[l],l,r,e):void 0;c===void 0&&(c=e[l]),a?df(r,l,c):cf(r,l,c)}return r}var Te=ff;function pf(e){return e}var Jt=pf;function hf(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var mf=hf,gf=mf,zr=Math.max;function yf(e,t,r){return t=zr(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=zr(n.length-t,0),o=Array(s);++a<s;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),gf(e,this,l)}}var Kn=yf;function bf(e){return function(){return e}}var vf=bf,Ef=vf,jr=Wn,Sf=Jt,_f=jr?function(e,t){return jr(e,"toString",{configurable:!0,enumerable:!1,value:Ef(t),writable:!0})}:Sf,Cf=_f,$f=800,xf=16,wf=Date.now;function Tf(e){var t=0,r=0;return function(){var n=wf(),a=xf-(n-r);if(r=n,a>0){if(++t>=$f)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var If=Tf,Ff=Cf,Af=If,Of=Af(Ff),Xn=Of,Rf=Jt,kf=Kn,Pf=Xn;function Df(e,t){return Pf(kf(e,t,Rf),e+"")}var Lf=Df,Bf=tt,Nf=Ze,Uf=it,Mf=H;function zf(e,t,r){if(!Mf(r))return!1;var n=typeof t;return(n=="number"?Nf(r)&&Uf(t,r.length):n=="string"&&t in r)?Bf(r[t],e):!1}var jf=zf,Qf=Lf,qf=jf;function Gf(e){return Qf(function(t,r){var n=-1,a=r.length,s=a>1?r[a-1]:void 0,o=a>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(a--,s):void 0,o&&qf(r[0],r[1],o)&&(s=a<3?void 0:s,a=1),t=Object(t);++n<a;){var l=r[n];l&&e(t,l,n,s)}return t})}var Vf=Gf;function Hf(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Yf=Hf,Wf=Yf,Kf=Xe,Xf=D,Zf=Je,Jf=it,ep=Gt,tp=Object.prototype,rp=tp.hasOwnProperty;function np(e,t){var r=Xf(e),n=!r&&Kf(e),a=!r&&!n&&Zf(e),s=!r&&!n&&!a&&ep(e),o=r||n||a||s,l=o?Wf(e.length,String):[],c=l.length;for(var d in e)(t||rp.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Jf(d,c)))&&l.push(d);return l}var Zn=np;function ap(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var sp=ap,ip=H,op=Ke,lp=sp,up=Object.prototype,cp=up.hasOwnProperty;function dp(e){if(!ip(e))return lp(e);var t=op(e),r=[];for(var n in e)n=="constructor"&&(t||!cp.call(e,n))||r.push(n);return r}var fp=dp,pp=Zn,hp=fp,mp=Ze;function gp(e){return mp(e)?pp(e,!0):hp(e)}var lt=gp,yp=Te,bp=Vf,vp=lt,Ep=bp(function(e,t){yp(t,vp(t),e)}),Sp=Ep,_p=Sp;const je=O(_p);function Cp(e){return e&&e.length?e[0]:void 0}var $p=Cp;const xp=O($p);var wp=Zt,Tp=st,Ip=it,Qr=H,Fp=we;function Ap(e,t,r,n){if(!Qr(e))return e;t=Tp(t,e);for(var a=-1,s=t.length,o=s-1,l=e;l!=null&&++a<s;){var c=Fp(t[a]),d=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(a!=o){var f=l[c];d=n?n(f,c,l):void 0,d===void 0&&(d=Qr(f)?f:Ip(t[a+1])?[]:{})}wp(l,c,d),l=l[c]}return e}var Op=Ap,Rp=Kt,kp=Op,Pp=st;function Dp(e,t,r){for(var n=-1,a=t.length,s={};++n<a;){var o=t[n],l=Rp(e,o);r(l,o)&&kp(s,Pp(o,e),l)}return s}var Lp=Dp,Bp=Lp,Np=Xt;function Up(e,t){return Bp(e,t,function(r,n){return Np(e,n)})}var Mp=Up;function zp(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var er=zp,qr=ce,jp=Xe,Qp=D,Gr=qr?qr.isConcatSpreadable:void 0;function qp(e){return Qp(e)||jp(e)||!!(Gr&&e&&e[Gr])}var Gp=qp,Vp=er,Hp=Gp;function Jn(e,t,r,n,a){var s=-1,o=e.length;for(r||(r=Hp),a||(a=[]);++s<o;){var l=e[s];t>0&&r(l)?t>1?Jn(l,t-1,r,n,a):Vp(a,l):n||(a[a.length]=l)}return a}var Yp=Jn,Wp=Yp;function Kp(e){var t=e==null?0:e.length;return t?Wp(e,1):[]}var Xp=Kp,Zp=Xp,Jp=Kn,eh=Xn;function th(e){return eh(Jp(e,void 0,Zp),e+"")}var rh=th,nh=Mp,ah=rh,sh=ah(function(e,t){return e==null?{}:nh(e,t)}),ih=sh;const oh=O(ih);var lh=nt;function uh(){this.__data__=new lh,this.size=0}var ch=uh;function dh(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var fh=dh;function ph(e){return this.__data__.get(e)}var hh=ph;function mh(e){return this.__data__.has(e)}var gh=mh,yh=nt,bh=zt,vh=Yt,Eh=200;function Sh(e,t){var r=this.__data__;if(r instanceof yh){var n=r.__data__;if(!bh||n.length<Eh-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new vh(n)}return r.set(e,t),this.size=r.size,this}var _h=Sh,Ch=nt,$h=ch,xh=fh,wh=hh,Th=gh,Ih=_h;function me(e){var t=this.__data__=new Ch(e);this.size=t.size}me.prototype.clear=$h;me.prototype.delete=xh;me.prototype.get=wh;me.prototype.has=Th;me.prototype.set=Ih;var tr=me;function Fh(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Ah=Fh,Oh=Zn,Rh=Bn,kh=Ze;function Ph(e){return kh(e)?Oh(e):Rh(e)}var Ie=Ph,Dh=Te,Lh=Ie;function Bh(e,t){return e&&Dh(t,Lh(t),e)}var Nh=Bh,Uh=Te,Mh=lt;function zh(e,t){return e&&Uh(t,Mh(t),e)}var jh=zh,Qe={exports:{}};Qe.exports;(function(e,t){var r=Q,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===n,o=s?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(d,f){if(f)return d.slice();var p=d.length,h=l?l(p):new d.constructor(p);return d.copy(h),h}e.exports=c})(Qe,Qe.exports);var Qh=Qe.exports;function qh(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Gh=qh;function Vh(e,t){for(var r=-1,n=e==null?0:e.length,a=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}var Hh=Vh;function Yh(){return[]}var ea=Yh,Wh=Hh,Kh=ea,Xh=Object.prototype,Zh=Xh.propertyIsEnumerable,Vr=Object.getOwnPropertySymbols,Jh=Vr?function(e){return e==null?[]:(e=Object(e),Wh(Vr(e),function(t){return Zh.call(e,t)}))}:Kh,rr=Jh,em=Te,tm=rr;function rm(e,t){return em(e,tm(e),t)}var nm=rm,am=Ln,sm=am(Object.getPrototypeOf,Object),ta=sm,im=er,om=ta,lm=rr,um=ea,cm=Object.getOwnPropertySymbols,dm=cm?function(e){for(var t=[];e;)im(t,lm(e)),e=om(e);return t}:um,ra=dm,fm=Te,pm=ra;function hm(e,t){return fm(e,pm(e),t)}var mm=hm,gm=er,ym=D;function bm(e,t,r){var n=t(e);return ym(e)?n:gm(n,r(e))}var na=bm,vm=na,Em=rr,Sm=Ie;function _m(e){return vm(e,Sm,Em)}var aa=_m,Cm=na,$m=ra,xm=lt;function wm(e){return Cm(e,xm,$m)}var Tm=wm,Im=Object.prototype,Fm=Im.hasOwnProperty;function Am(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Fm.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Om=Am,Rm=Q,km=Rm.Uint8Array,sa=km,Hr=sa;function Pm(e){var t=new e.constructor(e.byteLength);return new Hr(t).set(new Hr(e)),t}var nr=Pm,Dm=nr;function Lm(e,t){var r=t?Dm(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Bm=Lm,Nm=/\w*$/;function Um(e){var t=new e.constructor(e.source,Nm.exec(e));return t.lastIndex=e.lastIndex,t}var Mm=Um,Yr=ce,Wr=Yr?Yr.prototype:void 0,Kr=Wr?Wr.valueOf:void 0;function zm(e){return Kr?Object(Kr.call(e)):{}}var jm=zm,Qm=nr;function qm(e,t){var r=t?Qm(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Gm=qm,Vm=nr,Hm=Bm,Ym=Mm,Wm=jm,Km=Gm,Xm="[object Boolean]",Zm="[object Date]",Jm="[object Map]",eg="[object Number]",tg="[object RegExp]",rg="[object Set]",ng="[object String]",ag="[object Symbol]",sg="[object ArrayBuffer]",ig="[object DataView]",og="[object Float32Array]",lg="[object Float64Array]",ug="[object Int8Array]",cg="[object Int16Array]",dg="[object Int32Array]",fg="[object Uint8Array]",pg="[object Uint8ClampedArray]",hg="[object Uint16Array]",mg="[object Uint32Array]";function gg(e,t,r){var n=e.constructor;switch(t){case sg:return Vm(e);case Xm:case Zm:return new n(+e);case ig:return Hm(e,r);case og:case lg:case ug:case cg:case dg:case fg:case pg:case hg:case mg:return Km(e,r);case Jm:return new n;case eg:case ng:return new n(e);case tg:return Ym(e);case rg:return new n;case ag:return Wm(e)}}var yg=gg,bg=H,Xr=Object.create,vg=function(){function e(){}return function(t){if(!bg(t))return{};if(Xr)return Xr(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Eg=vg,Sg=Eg,_g=ta,Cg=Ke;function $g(e){return typeof e.constructor=="function"&&!Cg(e)?Sg(_g(e)):{}}var xg=$g,wg=$e,Tg=q,Ig="[object Map]";function Fg(e){return Tg(e)&&wg(e)==Ig}var Ag=Fg,Og=Ag,Rg=Qt,Zr=qt,Jr=Zr&&Zr.isMap,kg=Jr?Rg(Jr):Og,Pg=kg,Dg=$e,Lg=q,Bg="[object Set]";function Ng(e){return Lg(e)&&Dg(e)==Bg}var Ug=Ng,Mg=Ug,zg=Qt,en=qt,tn=en&&en.isSet,jg=tn?zg(tn):Mg,Qg=jg,qg=tr,Gg=Ah,Vg=Zt,Hg=Nh,Yg=jh,Wg=Qh,Kg=Gh,Xg=nm,Zg=mm,Jg=aa,ey=Tm,ty=$e,ry=Om,ny=yg,ay=xg,sy=D,iy=Je,oy=Pg,ly=H,uy=Qg,cy=Ie,dy=lt,fy=1,py=2,hy=4,ia="[object Arguments]",my="[object Array]",gy="[object Boolean]",yy="[object Date]",by="[object Error]",oa="[object Function]",vy="[object GeneratorFunction]",Ey="[object Map]",Sy="[object Number]",la="[object Object]",_y="[object RegExp]",Cy="[object Set]",$y="[object String]",xy="[object Symbol]",wy="[object WeakMap]",Ty="[object ArrayBuffer]",Iy="[object DataView]",Fy="[object Float32Array]",Ay="[object Float64Array]",Oy="[object Int8Array]",Ry="[object Int16Array]",ky="[object Int32Array]",Py="[object Uint8Array]",Dy="[object Uint8ClampedArray]",Ly="[object Uint16Array]",By="[object Uint32Array]",$={};$[ia]=$[my]=$[Ty]=$[Iy]=$[gy]=$[yy]=$[Fy]=$[Ay]=$[Oy]=$[Ry]=$[ky]=$[Ey]=$[Sy]=$[la]=$[_y]=$[Cy]=$[$y]=$[xy]=$[Py]=$[Dy]=$[Ly]=$[By]=!0;$[by]=$[oa]=$[wy]=!1;function Ne(e,t,r,n,a,s){var o,l=t&fy,c=t&py,d=t&hy;if(r&&(o=a?r(e,n,a,s):r(e)),o!==void 0)return o;if(!ly(e))return e;var f=sy(e);if(f){if(o=ry(e),!l)return Kg(e,o)}else{var p=ty(e),h=p==oa||p==vy;if(iy(e))return Wg(e,l);if(p==la||p==ia||h&&!a){if(o=c||h?{}:ay(e),!l)return c?Zg(e,Yg(o,e)):Xg(e,Hg(o,e))}else{if(!$[p])return a?e:{};o=ny(e,p,l)}}s||(s=new qg);var m=s.get(e);if(m)return m;s.set(e,o),uy(e)?e.forEach(function(S){o.add(Ne(S,t,r,S,e,s))}):oy(e)&&e.forEach(function(S,b){o.set(b,Ne(S,t,r,b,e,s))});var v=d?c?ey:Jg:c?dy:cy,y=f?void 0:v(e);return Gg(y||e,function(S,b){y&&(b=S,S=e[b]),Vg(o,b,Ne(S,t,r,b,e,s))}),o}var Ny=Ne,Uy=Ny,My=1,zy=4;function jy(e){return Uy(e,My|zy)}var Qy=jy;const ie=O(Qy);var qy=K,Gy=q,Vy="[object Boolean]";function Hy(e){return e===!0||e===!1||Gy(e)&&qy(e)==Vy}var Yy=Hy;const Wy=O(Yy);var Ky=K,Xy=D,Zy=q,Jy="[object String]";function eb(e){return typeof e=="string"||!Xy(e)&&Zy(e)&&Ky(e)==Jy}var tb=eb;const rb=O(tb);var nb=K,ab=q,sb="[object Number]";function ib(e){return typeof e=="number"||ab(e)&&nb(e)==sb}var ob=ib;const lb=O(ob);function ar(){}ar.prototype=new Error;class rn{constructor(){this._addFilter=(t,r)=>{if(!Array.isArray(t))throw new Error(`Filter value "${t}" in query state must be an array.`);if(!(t.length===2||t.length===3))throw new Error(`Filter value "${t}" in query state must be an array of 2 or 3 elements`);const n=t.length===3;var a=t[0],s=t[1];if(n){if(!Array.isArray(t[2]))throw new Error(`Filter value "${t[2]}" in query state must be an array.`);s=s+"::"+t[2][1]}a in r?r[a].push(s):r[a]=[s]},this._addFilters=t=>{if(!Array.isArray(t))throw new Error(`Filters query state "${t}" must be an array.`);const r={};return t.forEach(n=>{this._addFilter(n,r)}),r},this.serialize=this.serialize.bind(this)}serialize(t){const{queryString:r,sortBy:n,sortOrder:a,page:s,size:o,filters:l,hiddenParams:c}=t;let d={};r!==null&&(d.q=r),n!==null&&(d.sort=n,a!==null&&(d.sort=a==="desc"?`-${n}`:n)),s>0&&(d.page=s),o>0&&(d.size=o),G(c)||je(d,this._addFilters(c));const f=this._addFilters(l);return je(d,f),ue.default.stringify(d,{arrayFormat:"repeat"})}}class ub{constructor(){this.serialize=this.serialize.bind(this)}serialize(t){const{aggregations:r,hits:n,...a}=t;return{aggregations:r||{},hits:n.hits,total:n.total,extras:a}}}function Re(e,t){return e.indexOf(t)===0&&(e.length===t.length||e.indexOf(t+"&")===0)}function mt(e){return ue.default.stringify({q:e})}function cb(e){return ue.default.parse(e).q}function ua(e){if(e.length===3){const r=[e[0],e[1]],n=ua(e[2]);return n.length&&r.push(n),r}return[]}function nn(e,t){const r=mt(e),n=t.map(o=>mt(o));let a=!1;const s=n.filter(o=>{const l=Re(o,r),c=Re(r,o);return l&&!a&&(a=!0),!l&&!c});if(!a)s.push(r);else if(e.length===3){const l=ua(e),c=mt(l),d=s.some(f=>{const p=Re(f,c),h=Re(c,f);return p||h});(G(s)||!d)&&s.push(c)}return s.map(o=>cb(o))}const ca=(e,t)=>{if(G(e))return;if(!qn(xp(e)))return nn(e,t);let r=t;for(const n of e)r=nn(n,r);return r},da=(e,t,r)=>{let n=oh(t,r);return G(n.filters)||(n.filters=ca(n.filters,e.filters)),n},qe={queryString:"",suggestions:[],sortBy:null,sortOrder:null,page:-1,size:-1,filters:[],hiddenParams:[],layout:null},fa=Object.keys(qe),db={loading:!1,data:{hits:[],total:0,aggregations:{}},error:{}},fb={hasUserChangedSorting:!1,initialSortBy:null,initialSortOrder:null};class pb{constructor(){this._checkFilter=t=>{if(!Array.isArray(t))throw new Error(`Filter value "${t}" in query state must be an array.`);if(!(t.length===2||t.length===3))throw new Error(`Filter value "${t}" in query state must be an array of 2 or 3 elements`)},this._addFilter=(t,r)=>{this._checkFilter(t);const n=t[0],a=t[1],s=t.length===3;s&&this._checkFilter(t[2]),n in r?s?r[n].push(a+"::"+t[2][1]):r[n].push(a):s?r[n]=[a+"::"+t[2][1]]:r[n]=[a]},this._addFilters=t=>{if(!Array.isArray(t))throw new Error(`Filters query state "${t}" must be an array.`);const r={};return t.forEach(n=>{this._addFilter(n,r)}),r},this.serialize=this.serialize.bind(this)}serialize(t){const{queryString:r,sortBy:n,sortOrder:a,page:s,size:o,filters:l,hiddenParams:c}=t;let d={};r!==null&&(d.q=r),n!==null&&(d.sort=n,a!==null&&(d.sort=a==="desc"?`-${n}`:n)),s>0&&(d.page=s),o>0&&(d.size=o),G(c)||je(d,this._addFilters(c));const f=this._addFilters(l);return je(d,f),ue.default.stringify(d,{arrayFormat:"repeat"})}}class pa{constructor(t){this.axiosConfig=Ee(t,"axios",{}),this.validateAxiosConfig(),this.initSerializers(t),this.initInterceptors(t),this.initAxios(),this.search=this.search.bind(this),this.axiosCancelToken=Be.default.CancelToken}validateAxiosConfig(){if(!ef(this.axiosConfig,"url"))throw new Error("InvenioSearchApi config: `url` field is required.")}initInterceptors(t){this.requestInterceptor=Ee(t,"interceptors.request",void 0),this.responseInterceptor=Ee(t,"interceptors.response",void 0)}getSerializer(t){const r={InvenioRecordsResourcesRequestSerializer:pb,InvenioRequestSerializer:rn};return typeof t=="string"?r[t]:t||rn}initSerializers(t){var r;const n=this.getSerializer((r=t.invenio)===null||r===void 0?void 0:r.requestSerializer),a=Ee(t,"invenio.responseSerializer",ub);this.requestSerializer=new n,this.responseSerializer=new a}initAxios(){const t={paramsSerializer:this.requestSerializer.serialize,...this.axiosConfig};this.http=Be.default.create(t),this.addInterceptors()}addInterceptors(){this.requestInterceptor&&this.http.interceptors.request.use(this.requestInterceptor.resolve,this.requestInterceptor.reject),this.responseInterceptor&&this.http.interceptors.request.use(this.responseInterceptor.resolve,this.responseInterceptor.reject)}async search(t){this.axiosCancel&&this.axiosCancel.cancel(),this.axiosCancel=this.axiosCancelToken.source();try{let r=await this.http.request({url:this.axiosConfig.url,params:t,cancelToken:this.axiosCancel.token});r=this.responseSerializer.serialize(r.data);const n=da(t,r.extras,fa);return G(n)||(r.newQueryState=n),delete r.extras,r}catch(r){throw Be.default.isCancel(r)?new ar:r}}}class hb{constructor(){this.isValid=(t,r,n)=>{switch(r){case"queryString":case"sortBy":return!0;case"sortOrder":return["asc","desc"].includes(n);case"page":case"size":return lb(n)&&n>0;case"layout":return["grid","list"].includes(n);case"filters":case"hiddenParams":{const a=qn(n)?n:[n],s=":",o=t.urlFilterSeparator,l=`[^\\${s}\\${o}]*`,c=`${l}\\${s}${l}`,d=`${c}(\\${o}${c})*`,f=new RegExp(`^${d}$`);return a.every(p=>String(p).match(f))}default:return!1}}}}const mb=e=>{window.history.pushState&&window.history.pushState({path:e},"",e)},an=e=>{window.history.replaceState&&window.history.replaceState({path:e},"",e)};class gb{constructor(){this._convertValue=(t,r)=>{switch(t){case this.paramsMapping.page:case this.paramsMapping.size:return parseInt(r);default:return r}},this.parse=this.parse.bind(this),this.paramsMapping={}}set urlParamsMapping(t){this.paramsMapping=t}parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const r=ue.default.parse(t,{ignoreQueryPrefix:!0}),n={};return Object.entries(r).forEach(a=>{const s=a[0],o=a[1];n[s]=this._convertValue(s,o)}),n}}class yb{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._filterListToString=r=>{const n=r.length===3?this.urlFilterSeparator.concat(this._filterListToString(r[2])):"";return`${r[0]}:${r[1]}${n}`},this._mapQueryStateToUrlParams=r=>{const n={};Object.keys(r).filter(s=>s in this.urlParamsMapping).filter(s=>(s==="page"||s==="size")&&r[s]<=0||s==="hiddenParams"?!1:r[s]!==null).forEach(s=>{const o=this.urlParamsMapping[s];s==="filters"?n[o]=r[s].map(l=>this._filterListToString(l)):n[o]=r[s]});const a=(s,o)=>{const l="q";return s===l?-1:o===l?1:s.localeCompare(o)};return ue.default.stringify(n,{addQueryPrefix:!0,skipNulls:!0,indices:!1,sort:a})},this._filterStringToList=r=>{const n=r.indexOf(this.urlFilterSeparator),a=n>-1,s=r.indexOf(":");if(s===-1)throw new Error(`Filter "${r}" not parsable. Format expected: "<agg name>:<value>"`);const o=r.slice(0,s),l=a?n:r.length,c=r.slice(s+1,l);let d=[o,c];if(a){const f=r.slice(n+1,r.length);d.push(this._filterStringToList(f))}return d},this._mapUrlParamsToQueryState=r=>{const n={};return Object.keys(r).forEach(a=>{const s=this.fromUrlParamsMapping[a];this.urlParamValidator.isValid(this,s,r[a])?(n[s]=r[a],s==="filters"&&(Array.isArray(r[a])||(r[a]=[r[a]]),n[s]=r[a].map(o=>this._filterStringToList(o)))):console.warn(`URL parameter '${a}' with value '${r[a]}' is incorrect and was ignored.`)}),n},this._mergeParamsIntoState=(r,n)=>{const a=ie(n);return Object.keys(r).forEach(s=>{a[s]=r[s]}),a},this.urlParamsMapping=po(t.urlParamsMapping)?t.urlParamsMapping:{queryString:"q",sortBy:"sort",sortOrder:"order",page:"p",size:"s",layout:"l",filters:"f",hiddenParams:"hp"},this.keepHistory=t.keepHistory!==void 0?t.keepHistory:!0,!Wy(this.keepHistory))throw new Error(`"keepHistory configuration must be a boolean, ${this.keepHistory} provided.`);if(this.urlFilterSeparator=t.urlFilterSeparator!==void 0?t.urlFilterSeparator:"+",!rb(this.urlFilterSeparator))throw new Error(`"urlFilterSeparator configuration must be a string, ${this.urlFilterSeparator} provided.`);this.urlParamValidator=t.urlParamValidator||new hb,this.urlParser=t.urlParser||new gb,this.urlParser.urlParamsMapping=this.urlParamsMapping,this.fromUrlParamsMapping={},Object.keys(this.urlParamsMapping).forEach(r=>{this.fromUrlParamsMapping[this.urlParamsMapping[r]]=r}),this.get=this.get.bind(this),this.set=this.set.bind(this),this.replace=this.replace.bind(this)}get(t){const r=this.urlParser.parse(window.location.search),n=this._mapUrlParamsToQueryState(r),a=this._mergeParamsIntoState(n,t),s=this._mapQueryStateToUrlParams(a);return an(s),a}set(t){if(this.keepHistory){const r=this._mapQueryStateToUrlParams(t);mb(r)}else this.replace(t)}replace(t){const r=this._mapQueryStateToUrlParams(t);an(r)}}const bb="SET_QUERY_COMPONENT_INITIAL_STATE",ha="SET_QUERY_STRING",sr="SET_QUERY_SORTING",ir="SET_QUERY_SORT_BY",or="SET_QUERY_SORT_ORDER",Fe="SET_QUERY_STATE",ma="SET_QUERY_PAGINATION_PAGE",ga="SET_QUERY_PAGINATION_SIZE",ya="SET_QUERY_FILTERS",ba="SET_QUERY_SUGGESTIONS",va="SET_SUGGESTION_STRING",Ea="CLEAR_QUERY_SUGGESTIONS",Sa="RESULTS_LOADING",_a="RESULTS_FETCH_SUCCESS",Ca="RESULTS_FETCH_ERROR",Ft="RESULTS_UPDATE_LAYOUT",$a="RESET_QUERY",vb=e=>t=>{e&&t(z({shouldUpdateUrlQueryString:!1,shouldReplaceUrlQueryString:!0}))},xa=e=>t=>{t({type:Fe,payload:e}),t(z())},wa=e=>t=>{t({type:ha,payload:e}),t(z())},Eb=(e,t)=>r=>{r({type:sr,payload:{sortBy:e,sortOrder:t}}),r(z())},Sb=e=>t=>{t({type:ir,payload:e}),t(z())},_b=e=>t=>{t({type:or,payload:e}),t(z())},Cb=e=>t=>{t({type:ma,payload:e}),t(z())},$b=e=>t=>{t({type:ga,payload:e}),t(z())},lr=e=>t=>{t({type:ya,payload:e}),t(z())},xb=e=>async(t,r,n)=>{const a=n.urlHandlerApi;if(a){await t({type:Ft,payload:e});const s=r().query;a.set(s)}else t({type:Ft,payload:e})},wb=()=>(e,t,r)=>{e({type:$a,payload:{queryString:"",page:1,filters:[],...r.initialQueryState}}),e(z())},Tb=(e,t,r,n)=>{const a=t.urlHandlerApi;a&&(r?a.replace(e):n&&a.set(e))},Ib=(e,t,r,n)=>{const a=r().query;t({type:Fe,payload:{...a,...e.newQueryState}});const s=ie(r().query),o=n.urlHandlerApi;return o&&o.replace(s),delete e.newStateQuery,e},Fb=(e,t,r,n)=>{function a(l,c,d,f){l.queryString===""?(l.sortBy=d.defaultSortingOnEmptyQueryString.sortBy,l.sortOrder=d.defaultSortingOnEmptyQueryString.sortOrder):(l.sortBy=c.initialSortBy,l.sortOrder=c.initialSortOrder),f({type:Fe,payload:l})}function s(l,c,d,f){c.hasUserChangedSorting||a(l,c,d,f)}!G(r.defaultSortingOnEmptyQueryString)&&s(e,t,r,n)},z=function(){let{shouldUpdateUrlQueryString:e=!0,shouldReplaceUrlQueryString:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return async(r,n,a)=>{const s=n().app;let o=ie(n().query);Fb(o,s,a,r),o=ie(n().query),Tb(o,a,t,e),r({type:Sa});try{let c=await a.searchApi.search(o);"newQueryState"in c&&(c=Ib(ie(c),r,n,a)),r({type:_a,payload:{aggregations:c.aggregations,hits:c.hits,total:c.total}})}catch(l){if(l instanceof ar){console.debug(l);return}else console.error(l),r({type:Ca,payload:{error:l}})}}},Ab=e=>t=>{t({type:va,payload:e}),t(Ob())},Ob=()=>async(e,t,r)=>{const n=ie(t().query),a=r.suggestionApi;try{const s=await a.search(n);e({type:ba,payload:{suggestions:s.suggestions}})}catch(s){console.error("Could not load suggestions due to: "+s)}},Rb=()=>e=>{e({type:Ea,payload:{suggestions:[]}})},kb=()=>(e,t,r)=>{if(r.urlHandlerApi){const n=r.urlHandlerApi.get(r.initialQueryState);e({type:Fe,payload:n}),e(z({shouldReplaceUrlQueryString:!0}))}},x=i.default.createContext({}),Pb=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case sr:return{...e,hasUserChangedSorting:!0};case ir:return{...e,hasUserChangedSorting:!0};case or:return{...e,hasUserChangedSorting:!0};default:return e}},Db=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ha:return{...e,queryString:t.payload,page:1};case sr:return{...e,sortBy:t.payload.sortBy,sortOrder:t.payload.sortOrder,_sortUserChanged:!0,page:1};case ir:return{...e,sortBy:t.payload,_sortUserChanged:!0,page:1};case or:return{...e,sortOrder:t.payload,_sortUserChanged:!0,page:1};case ma:return{...e,page:t.payload};case ga:return{...e,size:t.payload,page:1};case ya:return{...e,page:1,filters:ca(t.payload,e.filters)};case ba:return{...e,suggestions:t.payload.suggestions};case Ea:return{...e,suggestions:t.payload.suggestions};case va:return{...e,suggestionString:t.payload};case bb:return{...e,...t.payload};case Fe:return{...e,...qe,...da(qe,t.payload,fa)};case Ft:return{...e,layout:t.payload};case $a:return{...e,...t.payload};default:return e}},Lb=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Sa:return{...e,loading:!0,data:{...e.data}};case _a:return{loading:!1,data:{...e.data,aggregations:t.payload.aggregations,hits:t.payload.hits,total:t.payload.total},error:{}};case Ca:return{loading:!1,data:{...e.data,aggregations:{},hits:[],total:0},error:t.payload.error};default:return e}};var Bb=Ct.combineReducers({app:Pb,query:Db,results:Lb});function sn(e,t){let{sortBy:r,sortOrder:n}=e,{sortBy:a,sortOrder:s}=t;return r!==a||n!==s}function Nb(e,t,r){const n=sn(r,t),a=!G(e.defaultSortingOnEmptyQueryString);let s=!1;return a&&(s=sn(r,e.defaultSortingOnEmptyQueryString)),n&&s}function Ub(e){const t={...qe,...e.initialQueryState},r=e.urlHandlerApi?e.urlHandlerApi.get(t):t,n=Nb(e,t,r),a={...fb,hasUserChangedSorting:n,initialSortBy:t.sortBy,initialSortOrder:t.sortOrder},s={...db,loading:e.searchOnInit};return{app:a,query:r,results:s}}function Mb(e){const t=Ub(e);return Ct.createStore(Bb,t,Ct.applyMiddleware(ki.default.withExtraArgument(e)))}function on(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const n=t?`.${t}`:"";return`${r?`${r}.`:""}${e}${n}`}class ur extends g.Component{constructor(t){super(t),this.updateQueryState=r=>{const{updateQueryState:n}=this.props;n(r)},this.onQueryChanged=r=>{let{detail:n}=r;const{appName:a}=this.context;if(!a)this.updateQueryState(n.searchQuery);else{const o=n.appName;o===a?this.updateQueryState(n.searchQuery):console.debug(`React-SearchKit '${a}': ignoring event sent for app '${o}'`)}},this.searchOnInit=t.searchOnInit,this.eventListenerEnabled=t.eventListenerEnabled,this.onAppInitialized=t.onAppInitialized,this.searchOnUrlQueryStringChanged=t.searchOnUrlQueryStringChanged}componentDidMount(){this.eventListenerEnabled&&window.addEventListener("queryChanged",this.onQueryChanged),window.onpopstate=()=>{this.searchOnUrlQueryStringChanged()},this.onAppInitialized(this.searchOnInit)}componentWillUnmount(){window.onpopstate=()=>{},window.removeEventListener("queryChanged",this.onQueryChanged)}render(){const{children:t}=this.props;return t}}ur.defaultProps={searchOnInit:!0,eventListenerEnabled:!1};ur.contextType=x;var zb=E.default.component("Bootstrap",ur);const jb=e=>({onAppInitialized:t=>e(vb(t)),updateQueryState:t=>e(xa(t)),searchOnUrlQueryStringChanged:()=>e(kb())}),Qb=A.connect(null,jb)(zb);class cr extends g.Component{constructor(t){super(t);const r={searchApi:t.searchApi,suggestionApi:t.suggestionApi,urlHandlerApi:t.urlHandlerApi.enabled?t.urlHandlerApi.customHandler||new yb(t.urlHandlerApi.overrideConfig):null,searchOnInit:t.searchOnInit,initialQueryState:t.initialQueryState,defaultSortingOnEmptyQueryString:t.defaultSortingOnEmptyQueryString};this.store=Mb(r),this.appName=t.appName,this.eventListenerEnabled=t.eventListenerEnabled,this.componentIndex=0}render(){const{appName:t,children:r,eventListenerEnabled:n,overridableId:a,searchOnInit:s}=this.props,o={appName:t,buildUID:(c,d)=>on(c,d,t),nextComponentIndex:()=>`${this.appName}_${this.componentIndex++}`},l=on("ReactSearchKit.children",a,t);return i.default.createElement(x.Provider,{value:o},i.default.createElement(A.Provider,{store:this.store},i.default.createElement(Qb,{searchOnInit:s,eventListenerEnabled:n},i.default.createElement(E.default,{id:l},r))))}}cr.defaultProps={suggestionApi:null,urlHandlerApi:{enabled:!0,overrideConfig:{},customHandler:null},searchOnInit:!0,appName:"",eventListenerEnabled:!1,overridableId:"",initialQueryState:{},defaultSortingOnEmptyQueryString:{}};cr.contextType=x;var qb=E.default.component("ReactSearchKit",cr);class Ta extends g.Component{constructor(t){super(t),this._getLabel=r=>{const n=r[0];let a=r[1],s=[n,a];if(r.length===3){const{label:l,activeFilter:c}=this._getLabel(r[2]);a=`${a}.${l}`,s.push(c)}return{label:a,activeFilter:s}},this.updateQueryFilters=t.updateQueryFilters}render(){const{filters:t,overridableId:r}=this.props;return!!t.length&&i.default.createElement(Ia,{filters:t,removeActiveFilter:this.updateQueryFilters,getLabel:this._getLabel,overridableId:r})}}Ta.defaultProps={overridableId:""};const Ia=e=>{let{overridableId:t,filters:r,removeActiveFilter:n,getLabel:a}=e;const{buildUID:s}=g.useContext(x);return i.default.createElement(E.default,{id:s("ActiveFilters.element",t),filters:r,removeActiveFilter:n,getLabel:a},i.default.createElement(i.default.Fragment,null,r.map((o,l)=>{const{label:c,activeFilter:d}=a(o);return i.default.createElement(u.Label,{image:!0,key:l,onClick:()=>n(d)},c,i.default.createElement(u.Icon,{name:"delete"}))})))};Ia.defaultProps={overridableId:""};var Gb=E.default.component("ActiveFilters",Ta);const Vb=e=>({updateQueryFilters:t=>e(lr(t))});A.connect(e=>({filters:e.query.filters}),Vb)(Gb);function Hb(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var Yb=`.AutoCompleteText{position:relative;z-index:100}.AutoCompleteText .input button,.AutoCompleteText .input input{border:none;border-radius:0}.AutoCompleteText ul{background-color:#fff;border:1px solid #e0e1e2;border-radius:0 0 .3rem .3rem;color:#000;list-style-type:none;margin:0;padding:0;position:absolute;text-align:left;width:100%}.AutoCompleteText ul:before{content:""}.AutoCompleteText li{cursor:pointer;padding:.3em 1em}.AutoCompleteText li:hover{background-color:#e0e1e2;border-radius:.3rem;text-decoration:underline}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vaG9tZS9ydW5uZXIvd29yay9yZWFjdC1zZWFyY2hraXQvcmVhY3Qtc2VhcmNoa2l0L3NyYy9saWIvY29tcG9uZW50cy9BdXRvY29tcGxldGVTZWFyY2hCYXIvQXV0b2NvbXBsZXRlU2VhcmNoQmFyLnNjc3MiLCJBdXRvY29tcGxldGVTZWFyY2hCYXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxrQkFDRSxpQkFBQSxDQUNBLFdDQ0YsQ0RPQSwrREFDRSxXQUFBLENBQ0EsZUNDRixDREVBLHFCQU1FLHFCQUFBLENBR0Esd0JBQUEsQ0FDQSw2QkFBQSxDQUxBLFVBQUEsQ0FGQSxvQkFBQSxDQUlBLFFBQUEsQ0FDQSxTQUFBLENBTkEsaUJBQUEsQ0FFQSxlQUFBLENBSEEsVUNVRixDREVBLDRCQUNFLFVDQ0YsQ0RFQSxxQkFFRSxjQUFBLENBREEsZ0JDRUYsQ0RFQSwyQkFFRSx3QkFBQSxDQUNBLG1CQUFBLENBRkEseUJDR0YiLCJmaWxlIjoiQXV0b2NvbXBsZXRlU2VhcmNoQmFyLnNjc3MifQ== */`;Hb(Yb);class Fa extends g.Component{constructor(t){super(t),this._handleAutocompleteChange=r=>{r.length>=this.minCharsToAutocomplete&&this.updateSuggestions(r)},this.onInputChange=async r=>{await this.setState({currentValue:r}),this.handleAutocompleteChange(this.state.currentValue)},this.executeSearch=()=>{this.updateQueryString(this.state.currentValue)},this.updateQueryString=this.props.updateQueryString,this.updateSuggestions=this.props.debounce?Pi.default.debounce(this.props.updateSuggestions,this.props.debounceTime,{leading:!0}):this.props.updateSuggestions,this.clearSuggestions=this.props.clearSuggestions,this.minCharsToAutocomplete=this.props.minCharsToAutocomplete,this.state={currentValue:this.props.queryString||""},this.handleAutocompleteChange=t.handleAutocompleteChange||this._handleAutocompleteChange}render(){const{placeholder:t,suggestions:r,overridableId:n}=this.props;return i.default.createElement(Kb,{placeholder:t,queryString:this.state.currentValue,querySuggestions:r,onInputChange:this.onInputChange,executeSearch:this.executeSearch,overridableId:n})}}Fa.defaultProps={handleAutocompleteChange:null,placeholder:"Type something",minCharsToAutocomplete:3,overridableId:""};const Wb=e=>i.default.createElement(Fa,Object.assign({key:e.queryString},e)),Kb=e=>{let{overridableId:t,placeholder:r,queryString:n,querySuggestions:a,onInputChange:s,executeSearch:o,...l}=e;const{buildUID:c}=g.useContext(x),d=(p,h)=>{o()},f=(p,h)=>{p.key==="Enter"&&o()};return i.default.createElement(E.default,Object.assign({id:c("AutocompleteSearchBar.element",t)},l),i.default.createElement("div",{className:"AutoCompleteText"},i.default.createElement(u.Input,{action:{content:"Search",onClick:d},fluid:!0,placeholder:r,onChange:(p,h)=>{let{value:m}=h;s(m)},value:n,onKeyPress:f}),i.default.createElement(Xb,{querySuggestions:a,overridableId:t})))},Xb=e=>{let{overridableId:t,...r}=e;const{querySuggestions:n}=r,{buildUID:a}=g.useContext(x),s=async o=>{await(void 0).setState({currentValue:o}),(void 0).clearSuggestions(),(void 0).executeSearch()};return n.length===0?null:i.default.createElement(E.default,Object.assign({id:a("AutocompleteSearchBar.suggestions",t)},r),i.default.createElement("ul",null,n.map(o=>i.default.createElement(u.Button,{as:"li",onClick:()=>s(o),key:o},o))))};var Zb=E.default.component("AutocompleteSearchBar",Wb);const Jb=e=>({updateQueryString:t=>e(wa(t)),updateSuggestions:t=>e(Ab(t)),clearSuggestions:()=>e(Rb())}),ev=e=>({queryString:e.query.queryString,suggestions:e.query.suggestions});A.connect(ev,Jb)(Zb);class ut extends g.Component{constructor(t){super(t),this._isSelected=(r,n,a)=>a.filter(s=>s[0]===r&&s[1]===n).length>=1,this.getChildAggCmps=(r,n)=>{const a=this.childAgg&&this.childAgg.aggName in r;let s=[];if(a){const o=r[this.childAgg.aggName].buckets;n.forEach(c=>{const d=c[0]===this.aggName,f=c[1]===r.key,p=c.length===3;d&&f&&p&&s.push(c[2])});const l=c=>{this.onFilterClicked([this.aggName,r.key,c])};return i.default.createElement(ut,{buckets:o,selectedFilters:s,field:this.childAgg.field,aggName:this.childAgg.aggName,childAgg:this.childAgg.childAgg,onFilterClicked:l})}return null},this.field=t.field,this.aggName=t.aggName,this.childAgg=t.childAgg,this.onFilterClicked=t.onFilterClicked}render(){const{buckets:t,selectedFilters:r,overridableId:n}=this.props,a=t.map(s=>{const o=s.key_as_string?s.key_as_string:s.key,l=this._isSelected(this.aggName,o,r),c=f=>{this.onFilterClicked([this.aggName,f])},d=f=>this.getChildAggCmps(f,r);return i.default.createElement(Oa,{key:s.key,bucket:s,keyField:o,isSelected:l,onFilterClicked:c,getChildAggCmps:d,overridableId:n})});return i.default.createElement(Aa,{valuesCmp:a,overridableId:n})}}ut.defaultProps={childAgg:null,overridableId:""};const Aa=e=>{let{valuesCmp:t,overridableId:r}=e;const{buildUID:n}=g.useContext(x);return i.default.createElement(E.default,{id:n("BucketAggregationContainer.element",r),valuesCmp:t},i.default.createElement(u.List,null,t))};Aa.defaultProps={overridableId:""};const Oa=e=>{let{bucket:t,isSelected:r,onFilterClicked:n,getChildAggCmps:a,overridableId:s,keyField:o}=e;const{buildUID:l,nextComponentIndex:c}=g.useContext(x),d=t.label?t.label:`${o} (${t.doc_count.toLocaleString("en-US")})`,f=a(t);return i.default.createElement(E.default,{id:l("BucketAggregationValues.element",s),bucket:t,label:d,onFilterClicked:n,isSelected:r,childAggCmps:f},i.default.createElement(u.List.Item,{key:t.key},i.default.createElement(u.Checkbox,{label:d,id:c(),value:t.key,onClick:()=>n(t.key),checked:r}),f))};Oa.defaultProps={overridableId:""};var tv=E.default.component("BucketAggregationValues",ut);class Ra extends g.Component{constructor(t){super(t),this.onFilterClicked=r=>{this.updateQueryFilters(r)},this._renderValues=(r,n)=>{const{overridableId:a}=this.props;return i.default.createElement(tv,{buckets:r,selectedFilters:n,field:this.agg.field,aggName:this.agg.aggName,childAgg:this.agg.childAgg,onFilterClicked:this.onFilterClicked,overridableId:a})},this._getSelectedFilters=r=>r.filter(n=>n[0]===this.agg.aggName),this._getResultBuckets=r=>{const n=Ee(r,this.agg.aggName,{});return"buckets"in n?(Array.isArray(n.buckets)||(n.buckets=Object.entries(n.buckets).map(a=>{let[s,o]=a;return{...o,key:s}})),n.buckets):[]},this.title=t.title,this.agg=t.agg,this.updateQueryFilters=t.updateQueryFilters}render(){const{userSelectionFilters:t,resultsAggregations:r,overridableId:n,...a}=this.props,s=this._getSelectedFilters(t),o=this._getResultBuckets(r),l=o.length?this._renderValues(o,s):null;return i.default.createElement(ka,Object.assign({title:this.title,containerCmp:l,overridableId:n},a))}}Ra.defaultProps={overridableId:""};const ka=e=>{let{overridableId:t,agg:r,title:n,containerCmp:a,updateQueryFilters:s}=e;const{buildUID:o}=g.useContext(x);return a&&i.default.createElement(E.default,{id:o("BucketAggregation.element",t),agg:r,title:n,containerCmp:a,updateQueryFilters:s},i.default.createElement(u.Card,null,i.default.createElement(u.Card.Content,null,i.default.createElement(u.Card.Header,null,n)),i.default.createElement(u.Card.Content,null,a)))};ka.defaultProps={containerCmp:null,overridableId:""};var rv=E.default.component("BucketAggregation",Ra);const nv=e=>({updateQueryFilters:t=>e(lr(t))});A.connect(e=>({userSelectionFilters:e.query.filters,resultsAggregations:e.results.data.aggregations}),nv)(rv);class Pa extends g.Component{render(){const{children:t,condition:r}=this.props;return r?t:null}}Pa.defaultProps={condition:!0};var N=E.default.component("ShouldRender",Pa);class Da extends g.Component{render(){const{loading:t,totalResults:r,label:n,overridableId:a}=this.props;return i.default.createElement(N,{condition:!t&&r>0},n(i.default.createElement(La,{totalResults:r,overridableId:a})))}}Da.defaultProps={label:e=>e,overridableId:""};const La=e=>{let{totalResults:t,overridableId:r}=e;const{buildUID:n}=g.useContext(x),a=n("Count.element",r);return i.default.createElement(E.default,{id:a,totalResults:t},i.default.createElement(u.Label,{color:"blue"},t.toLocaleString("en-US")))};La.defaultProps={overridableId:""};var av=E.default.component("Count",Da);const sv=A.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total}))(av);class Ba extends g.Component{constructor(t){super(t),this.resetQuery=t.resetQuery}render(){const{loading:t,totalResults:r,error:n,queryString:a,extraContent:s,overridableId:o,userSelectionFilters:l,...c}=this.props;return i.default.createElement(N,{condition:!t&&G(n)&&r===0},i.default.createElement(Na,Object.assign({},c,{queryString:a,resetQuery:this.resetQuery,extraContent:s,userSelectionFilters:l,overridableId:o})))}}Ba.defaultProps={queryString:"",extraContent:null,overridableId:""};const Na=e=>{let{overridableId:t,queryString:r,resetQuery:n,extraContent:a,userSelectionFilters:s}=e;const{buildUID:o}=g.useContext(x);return i.default.createElement(E.default,{id:o("EmptyResults.element",t),queryString:r,resetQuery:n,extraContent:a,userSelectionFilters:s},i.default.createElement(u.Segment,{placeholder:!0,textAlign:"center"},i.default.createElement(u.Header,{icon:!0},i.default.createElement(u.Icon,{name:"search"}),"No results found!"),r&&i.default.createElement("em",null,'Current search "',r,'"'),i.default.createElement("br",null),i.default.createElement(u.Button,{primary:!0,onClick:()=>n()},"Clear query"),a))};Na.defaultProps={queryString:"",extraContent:null,overridableId:""};var iv=E.default.component("EmptyResults",Ba);const ov=e=>({resetQuery:()=>e(wb())}),lv=A.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,error:e.results.error,queryString:e.query.queryString,userSelectionFilters:e.query.filters}),ov)(iv);function Ua(e){let{loading:t,error:r,overridableId:n}=e;return i.default.createElement(N,{condition:!t&&!G(r)},i.default.createElement(Ma,{error:r,overridableId:n}))}Ua.defaultProps={overridableId:""};const Ma=e=>{let{error:t,overridableId:r}=e;const{buildUID:n}=g.useContext(x);return i.default.createElement(E.default,{id:n("Error.element",r),error:t},i.default.createElement("div",null,"Oops! Something went wrong while fetching results."))};Ma.defaultProps={overridableId:""};var uv=E.default.component("Error",Ua);A.connect(e=>({loading:e.results.loading,error:e.results.error}))(uv);function za(e){const t=a=>i.default.createElement(e,a),r=a=>({currentQueryState:a.query,currentResultsState:a.results}),n=a=>({updateQueryState:s=>a(xa(s))});return A.connect(r,n)(t)}class ja extends g.Component{constructor(t){super(t),this.onLayoutChange=r=>{this.updateLayout(r)},this.updateLayout=t.updateLayout}render(){const{currentLayout:t,loading:r,totalResults:n,overridableId:a}=this.props;return i.default.createElement(N,{condition:t!==null&&!r&&n>0},i.default.createElement(Qa,{currentLayout:t,onLayoutChange:this.onLayoutChange,overridableId:a}))}}ja.defaultProps={currentLayout:null,overridableId:""};const Qa=e=>{let{overridableId:t,currentLayout:r,onLayoutChange:n}=e;const{buildUID:a}=g.useContext(x);return i.default.createElement(E.default,{id:a("LayoutSwitcher.element",t),currentLayout:r,onLayoutChange:n},i.default.createElement(u.Menu,{compact:!0,icon:!0},i.default.createElement(u.Menu.Item,{name:"list",active:r==="list",onClick:(s,o)=>{let{name:l}=o;return n(l)}},i.default.createElement(u.Icon,{name:"list layout"})),i.default.createElement(u.Menu.Item,{name:"grid",active:r==="grid",onClick:(s,o)=>{let{name:l}=o;return n(l)}},i.default.createElement(u.Icon,{name:"grid layout"}))))};Qa.defaultProps={currentLayout:null,overridableId:""};var cv=E.default.component("LayoutSwitcher",ja);const dv=e=>({updateLayout:t=>e(xb(t))});A.connect(e=>({loading:e.results.loading,currentLayout:e.query.layout,totalResults:e.results.data.total}),dv)(cv);const ln={boundaryRangeCount:1,siblingRangeCount:1,showEllipsis:!0,showFirst:!0,showLast:!0,showPrev:!0,showNext:!0,size:"large"};class qa extends g.Component{constructor(t){super(t),this.onPageChange=r=>{const{currentPage:n}=this.props;r!==n&&this.updateQueryPage(r)},this.updateQueryPage=t.updateQueryPage,this.options=t.options?{...ln,...t.options}:ln}render(){const{loading:t,totalResults:r,currentPage:n,currentSize:a,overridableId:s,showWhenOnlyOnePage:o}=this.props;return i.default.createElement(N,{condition:!t&&n>-1&&a>-1&&o?r>0:r>a},i.default.createElement(Ga,{currentPage:n,currentSize:a,totalResults:r,onPageChange:this.onPageChange,options:this.options,overridableId:s,maxTotalResults:this.options.maxTotalResults}))}}qa.defaultProps={options:{},overridableId:"",showWhenOnlyOnePage:!0};const Ga=e=>{let{overridableId:t,currentPage:r,currentSize:n,totalResults:a,onPageChange:s,options:o,maxTotalResults:l,...c}=e;const d=o.boundaryRangeCount,f=o.siblingRangeCount,p=o.showEllipsis,h=o.showFirst,m=o.showLast,v=o.showPrev,y=o.showNext,S=o.size,b=Math.floor(l/n),C=Math.ceil(a/n),I=Math.min(C,b),{buildUID:R}=g.useContext(x);return r>C&&s(C),i.default.createElement(E.default,{id:R("Pagination.element",t),currentPage:r,currentSize:n,totalResults:a,options:o,onPageChange:s},i.default.createElement(u.Pagination,Object.assign({activePage:r,totalPages:I,onPageChange:(j,F)=>{let{activePage:X}=F;return s(X)},boundaryRange:d,siblingRange:f,ellipsisItem:p?void 0:null,firstItem:h?void 0:null,lastItem:m?void 0:null,prevItem:v?void 0:null,nextItem:y?void 0:null,size:S},c)))};Ga.defaultProps={options:{},overridableId:"",maxTotalResults:1e4};var fv=E.default.component("Pagination",qa);const pv=e=>({updateQueryPage:t=>e(Cb(t))}),hv=A.connect(e=>({currentPage:e.query.page,currentSize:e.query.size,loading:e.results.loading,totalResults:e.results.data.total}),pv)(fv);function Va(e){let{loading:t,totalResults:r,results:n,resultsPerRow:a,overridableId:s,onResultsRendered:o}=e;return g.useEffect(()=>{o&&o()},[o]),i.default.createElement(N,{condition:!t&&r>0},i.default.createElement(Ha,{results:n,resultsPerRow:a,overridableId:s}))}Va.defaultProps={resultsPerRow:3,overridableId:"",onResultsRendered:()=>{}};const mv=e=>{let{result:t,overridableId:r}=e;const{buildUID:n}=g.useContext(x);return i.default.createElement(E.default,{id:n("ResultsGrid.item",r),result:t},i.default.createElement(u.Card,{fluid:!0,href:`#${t.id}`},i.default.createElement(u.Image,{src:t.imgSrc||"http://placehold.it/200"}),i.default.createElement(u.Card.Content,null,i.default.createElement(u.Card.Header,null,t.title),i.default.createElement(u.Card.Description,null,t.description))))},Ha=e=>{let{overridableId:t,results:r,resultsPerRow:n}=e;const{buildUID:a}=g.useContext(x),s=r.map((o,l)=>i.default.createElement(mv,{key:l,result:o,overridableId:t}));return i.default.createElement(E.default,{id:a("ResultsGrid.container",t),results:s,resultsPerRow:n},i.default.createElement(u.Card.Group,{itemsPerRow:n},s))};Ha.defaultProps={resultsPerRow:3,overridableId:""};var gv=E.default.component("ResultsGrid",Va);const yv=A.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,results:e.results.data.hits}))(gv);function Ya(e){let{loading:t,totalResults:r,results:n,overridableId:a,onResultsRendered:s}=e;return g.useEffect(()=>{s&&s()},[s]),i.default.createElement(N,{condition:!t&&r>0},i.default.createElement(Wa,{results:n,overridableId:a}))}Ya.defaultProps={overridableId:"",onResultsRendered:()=>{}};const bv=e=>{let{result:t,overridableId:r}=e;const{buildUID:n}=g.useContext(x);return i.default.createElement(E.default,{id:n("ResultsList.item",r),result:t},i.default.createElement(u.Item,{href:`#${t.id}`},i.default.createElement(u.Item.Image,{size:"small",src:t.imgSrc||"http://placehold.it/200"}),i.default.createElement(u.Item.Content,null,i.default.createElement(u.Item.Header,null,t.title),i.default.createElement(u.Item.Description,null,t.description))))},Wa=e=>{let{results:t,overridableId:r}=e;const{buildUID:n}=g.useContext(x),a=t.map((s,o)=>i.default.createElement(bv,{result:s,key:o,overridableId:r}));return i.default.createElement(E.default,{id:n("ResultsList.container",r),results:a},i.default.createElement(u.Item.Group,{divided:!0,relaxed:!0,link:!0},a))};Wa.defaultProps={overridableId:""};var vv=E.default.component("ResultsList",Ya);const Ka=A.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,results:e.results.data.hits}))(vv);function Xa(e){let{children:t,loading:r,overridableId:n}=e;return r?i.default.createElement(Za,{overridableId:n}):t}Xa.defaultProps={overridableId:""};const Za=e=>{let{overridableId:t}=e;const{buildUID:r}=g.useContext(x);return i.default.createElement(E.default,{id:r("ResultsLoader.element",t)},i.default.createElement(u.Loader,{active:!0,size:"huge",inline:"centered"}))};Za.defaultProps={overridableId:""};var Ev=E.default.component("ResultsLoader",Xa);const Sv=A.connect(e=>({loading:e.results.loading}))(Ev);function Ja(e){let{loading:t,totalResults:r,currentLayout:n,overridableId:a,onResultsRendered:s}=e;return i.default.createElement(N,{condition:n!=null&&!t&&r>0},i.default.createElement(es,{layout:n,overridableId:a,onResultsRendered:s}))}Ja.defaultProps={currentLayout:null,overridableId:"",onResultsRendered:()=>{}};const es=e=>{let{layout:t,overridableId:r,onResultsRendered:n}=e;const{buildUID:a}=g.useContext(x);return i.default.createElement(E.default,{id:a("ResultsMultiLayout.element",r),layout:t,onResultsRendered:n},t==="list"?i.default.createElement(Ka,{overridableId:r,onResultsRendered:n}):i.default.createElement(yv,{overridableId:r,onResultsRendered:n}))};es.defaultProps={layout:"",overridableId:"",onResultsRendered:()=>{}};var _v=E.default.component("ResultsMultiLayout",Ja);A.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentLayout:e.query.layout}))(_v);class ts extends g.Component{constructor(t){super(t),this.onChange=r=>{const{currentSize:n}=this.props;r!==n&&this.updateQuerySize(r)},this.options=t.values,this.updateQuerySize=t.updateQuerySize}render(){const{loading:t,currentSize:r,totalResults:n,label:a,overridableId:s,ariaLabel:o,selectOnNavigation:l,showWhenOnlyOnePage:c}=this.props;return i.default.createElement(N,{condition:!t&&r!==-1&&c?n>0:n>r},a(i.default.createElement(rs,{currentSize:r,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:o,selectOnNavigation:l})))}}ts.defaultProps={label:e=>e,overridableId:"",ariaLabel:"Results per page",selectOnNavigation:!1,showWhenOnlyOnePage:!0};const rs=e=>{let{overridableId:t,currentSize:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:o}=e;const{buildUID:l}=g.useContext(x),c=n.map((d,f)=>({key:f,text:d.text,value:d.value}));return i.default.createElement(E.default,{id:l("ResultsPerPage.element",t),currentSize:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:o},i.default.createElement(u.Dropdown,{inline:!0,compact:!0,options:c,value:r,onChange:(d,f)=>{let{value:p}=f;return a(p)},"aria-label":s,selectOnNavigation:o}))};rs.defaultProps={ariaLabel:"Results per page",selectOnNavigation:!1,overridableId:""};var Cv=E.default.component("ResultsPerPage",ts);const $v=e=>({updateQuerySize:t=>e($b(t))}),xv=A.connect(e=>({loading:e.results.loading,currentSize:e.query.size,totalResults:e.results.data.total}),$v)(Cv);class ns extends g.Component{constructor(t){super(t),this.onInputChange=r=>{this.setState({currentValue:r})},this.executeSearch=()=>{const{currentValue:r}=this.state;this.updateQueryString(r)},this.onBtnSearchClick=()=>{this.executeSearch()},this.onKeyPress=r=>{r.key==="Enter"&&this.executeSearch()},this.updateQueryString=t.updateQueryString,this.state={currentValue:t.queryString||""}}render(){const{actionProps:t,autofocus:r,executeSearch:n,onBtnSearchClick:a,onInputChange:s,onKeyPress:o,overridableId:l,placeholder:c,uiProps:d}=this.props,{currentValue:f}=this.state;return i.default.createElement(dr,{actionProps:t,autofocus:r,executeSearch:n||this.executeSearch,onBtnSearchClick:a||this.onBtnSearchClick,onInputChange:s||this.onInputChange,onKeyPress:o||this.onKeyPress,overridableId:l,placeholder:c,queryString:f,uiProps:d})}}ns.defaultProps={actionProps:null,autofocus:!1,executeSearch:null,onBtnSearchClick:null,onInputChange:null,onKeyPress:null,overridableId:"",placeholder:"",queryString:"",uiProps:null};const as=e=>{const{queryString:t}=e;return i.default.createElement(ns,Object.assign({key:t},e))};as.defaultProps={queryString:""};class dr extends g.Component{componentDidMount(){const{autofocus:t}=this.props;t&&this.focusInput&&this.focusInput.focus()}render(){const{actionProps:t,onBtnSearchClick:r,onInputChange:n,onKeyPress:a,overridableId:s,placeholder:o,queryString:l,uiProps:c}=this.props,{buildUID:d}=this.context;return i.default.createElement(E.default,{id:d("SearchBar.element",s),queryString:l,onBtnSearchClick:r,onInputChange:n,onKeyPress:a,placeholder:o,actionProps:t,uiProps:c},i.default.createElement(u.Input,Object.assign({action:{content:"Search",onClick:r,...t},fluid:!0},c,{placeholder:o||"Type something",onChange:(f,p)=>{let{value:h}=p;n(h)},value:l,onKeyPress:a,ref:f=>{this.focusInput=f}})))}}dr.defaultProps={actionProps:null,autofocus:!1,onBtnSearchClick:null,onInputChange:null,onKeyPress:null,overridableId:"",placeholder:"",queryString:"",uiProps:null};dr.contextType=x;var wv=E.default.component("SearchBar",as);const Tv=e=>({updateQueryString:t=>e(wa(t))}),Iv=A.connect(e=>({queryString:e.query.queryString}),Tv)(wv);class ss extends g.Component{constructor(t){super(t),this._computeValue=(r,n)=>n?`${r}-${n}`:r,this.onChange=r=>{const{currentSortBy:n,currentSortOrder:a}=this.props;if(r===this._computeValue(n,a))return;const s=this.options.find(o=>o.value===r);this.updateQuerySorting(s.sortBy,s.sortOrder)},this.options=t.values,this.updateQuerySorting=t.updateQuerySorting,this.options.forEach(r=>r.value=this._computeValue(r.sortBy,r.sortOrder))}render(){const{currentSortBy:t,currentSortOrder:r,loading:n,totalResults:a,label:s,overridableId:o,sortOrderDisabled:l,ariaLabel:c,selectOnNavigation:d}=this.props;return i.default.createElement(N,{condition:t!==null&&(l||t!==null)&&!n&&a>0},s(i.default.createElement(is,{currentSortBy:t,currentSortOrder:r,options:this.options,onValueChange:this.onChange,computeValue:this._computeValue,overridableId:o,ariaLabel:c,selectOnNavigation:d})))}}ss.defaultProps={currentSortBy:null,currentSortOrder:null,label:e=>e,overridableId:"",sortOrderDisabled:!1,ariaLabel:"Sort",selectOnNavigation:!1};const is=e=>{let{overridableId:t,currentSortBy:r,currentSortOrder:n,options:a,onValueChange:s,computeValue:o,ariaLabel:l,selectOnNavigation:c}=e;const{buildUID:d}=g.useContext(x),f=o(r,n),p=a.map((h,m)=>({key:m,text:h.text,value:h.value}));return i.default.createElement(E.default,{id:d("Sort.element",t),options:a,currentSortBy:r,currentSortOrder:n,onValueChange:s,ariaLabel:l,selectOnNavigation:c},i.default.createElement(u.Dropdown,{selection:!0,options:p,value:f,onChange:(h,m)=>{let{value:v}=m;return s(v)},"aria-label":l,selectOnNavigation:c}))};is.defaultProps={currentSortBy:null,currentSortOrder:null,overridableId:"",ariaLabel:"Sort",selectOnNavigation:!1};var Fv=E.default.component("Sort",ss);const Av=e=>({updateQuerySorting:(t,r)=>e(Eb(t,r))});A.connect(e=>({currentSortBy:e.query.sortBy,currentSortOrder:e.query.sortOrder,loading:e.results.loading,totalResults:e.results.data.total}),Av)(Fv);class os extends g.Component{constructor(t){super(t),this.onChange=r=>{const{currentSortBy:n}=this.props;r!==n&&this.updateQuerySortBy(r)},this.options=t.values,this.updateQuerySortBy=t.updateQuerySortBy}render(){const{currentSortBy:t,loading:r,totalResults:n,label:a,overridableId:s,ariaLabel:o,selectOnNavigation:l}=this.props;return i.default.createElement(N,{condition:t!==null&&!r&&n>0},a(i.default.createElement(ls,{currentSortBy:t,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:o,selectOnNavigation:l})))}}os.defaultProps={currentSortBy:null,label:e=>e,overridableId:"",ariaLabel:"Sort Results By",selectOnNavigation:!1};const ls=e=>{let{overridableId:t,currentSortBy:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:o}=e;const{buildUID:l}=g.useContext(x),c=n.map((d,f)=>({key:f,text:d.text,value:d.value}));return i.default.createElement(E.default,{id:l("SortBy.element",t),options:n,currentSortBy:r,onValueChange:a,ariaLabel:s,selectOnNavigation:o},i.default.createElement(u.Dropdown,{selection:!0,compact:!0,options:c,value:r,onChange:(d,f)=>{let{value:p}=f;return a(p)},"aria-label":s,selectOnNavigation:o}))};ls.defaultProps={currentSortBy:null,overridableId:"",ariaLabel:"Sort Results By",selectOnNavigation:!1};var Ov=E.default.component("SortBy",os);const Rv=e=>({updateQuerySortBy:t=>e(Sb(t))});A.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentSortBy:e.query.sortBy}),Rv)(Ov);class us extends g.Component{constructor(t){super(t),this.onChange=r=>{const{currentSortOrder:n}=this.props;r!==n&&this.updateQuerySortOrder(r)},this.options=t.values,this.updateQuerySortOrder=t.updateQuerySortOrder}render(){const{currentSortOrder:t,loading:r,totalResults:n,label:a,overridableId:s,ariaLabel:o,selectOnNavigation:l}=this.props;return i.default.createElement(N,{condition:t!==null&&!r&&n>0},a(i.default.createElement(cs,{currentSortOrder:t,options:this.options,onValueChange:this.onChange,overridableId:s,ariaLabel:o,selectOnNavigation:l})))}}us.defaultProps={currentSortOrder:null,label:e=>e,overridableId:"",ariaLabel:"Sort Order",selectOnNavigation:!1};const cs=e=>{let{overridableId:t,currentSortOrder:r,options:n,onValueChange:a,ariaLabel:s,selectOnNavigation:o}=e;const{buildUID:l}=g.useContext(x),c=n.map((d,f)=>({key:f,text:d.text,value:d.value}));return i.default.createElement(E.default,{id:l("SortOrder.element",t),options:n,currentSortOrder:r,onValueChange:a,ariaLabel:s,selectOnNavigation:o},i.default.createElement(u.Dropdown,{selection:!0,compact:!0,options:c,value:r,onChange:(d,f)=>{let{value:p}=f;return a(p)},"aria-label":s,selectOnNavigation:o}))};cs.defaultProps={currentSortOrder:null,overridableId:"",ariaLabel:"Sort Order",selectOnNavigation:!1};var kv=E.default.component("SortOrder",us);const Pv=e=>({updateQuerySortOrder:t=>e(_b(t))});A.connect(e=>({loading:e.results.loading,totalResults:e.results.data.total,currentSortOrder:e.query.sortOrder}),Pv)(kv);const ds=e=>{let{overridableId:t,userSelectionFilters:r,title:n,label:a,filterValue:s,updateQueryFilters:o}=e;const l=p=>p.filter(m=>m[0]===s[0]).length>0,c=()=>{o(s)},{buildUID:d}=g.useContext(x),f=l(r);return i.default.createElement(E.default,{id:d("SearchFilters.Toggle.element",t),title:n,label:a,filterValue:s,userSelectionFilters:r,updateQueryFilters:o},i.default.createElement(u.Card,null,i.default.createElement(u.Card.Content,null,i.default.createElement(u.Card.Header,null,n)),i.default.createElement(u.Card.Content,null,i.default.createElement(u.Checkbox,{toggle:!0,label:a,onClick:c,checked:f}))))};ds.defaultProps={overridableId:""};var Dv=E.default.component("SearchFilters.Toggle",ds);const Lv=e=>({updateQueryFilters:t=>e(lr(t))});A.connect(e=>({userSelectionFilters:e.query.filters}),Lv)(Dv);const fs=i.default.createContext(null),Bv=({config:e,children:t,updateQueryState:r,currentQueryState:n})=>{const a=g.useCallback(()=>{r({...n,queryString:n.queryString})},[r,n]);return i.default.createElement(fs.Provider,{value:{config:e,refreshSearch:a}},t)},Nv=za(Bv),ct=()=>{const e=i.default.useContext(fs);if(!e)throw new Error("useSearchConfig must be used within a SearchProvider");return e};function At(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}var Uv=e=>typeof e=="object"&&e!==null;function Mv(e){return Object.fromEntries(Object.entries(e??{}).filter(([t,r])=>r!==void 0))}var zv=e=>e==="base";function jv(e){return e.slice().filter(t=>!zv(t))}function un(e){return String.fromCharCode(e+(e>25?39:97))}function Qv(e){let t="",r;for(r=Math.abs(e);r>52;r=r/52|0)t=un(r%52)+t;return un(r%52)+t}function qv(e,t){let r=t.length;for(;r;)e=e*33^t.charCodeAt(--r);return e}function Gv(e){return Qv(qv(5381,e)>>>0)}var ps=/\s*!(important)?/i;function Vv(e){return typeof e=="string"?ps.test(e):!1}function Hv(e){return typeof e=="string"?e.replace(ps,"").trim():e}function hs(e){return typeof e=="string"?e.replaceAll(" ","_"):e}var fr=e=>{const t=new Map;return(...n)=>{const a=JSON.stringify(n);if(t.has(a))return t.get(a);const s=e(...n);return t.set(a,s),s}},Yv=new Set(["__proto__","constructor","prototype"]);function ms(...e){return e.reduce((t,r)=>(r&&Object.keys(r).forEach(n=>{if(Yv.has(n))return;const a=t[n],s=r[n];At(a)&&At(s)?t[n]=ms(a,s):t[n]=s}),t),{})}var Wv=e=>e!=null;function gs(e,t,r={}){const{stop:n,getKey:a}=r;function s(o,l=[]){if(Uv(o)){const c={};for(const[d,f]of Object.entries(o)){const p=(a==null?void 0:a(d,f))??d,h=[...l,p];if(n!=null&&n(o,h))return t(o,l);const m=s(f,h);Wv(m)&&(c[p]=m)}return c}return t(o,l)}return s(e)}function Kv(e,t){return e.reduce((r,n,a)=>{const s=t[a];return n!=null&&(r[s]=n),r},{})}function ys(e,t,r=!0){const{utility:n,conditions:a}=t,{hasShorthand:s,resolveShorthand:o}=n;return gs(e,l=>Array.isArray(l)?Kv(l,a.breakpoints.keys):l,{stop:l=>Array.isArray(l),getKey:r?l=>s?o(l):l:void 0})}var Xv={shift:e=>e,finalize:e=>e,breakpoints:{keys:[]}},Zv=e=>typeof e=="string"?e.replaceAll(/[\n\s]+/g," "):e;function Jv(e){const{utility:t,hash:r,conditions:n=Xv}=e,a=o=>[t.prefix,o].filter(Boolean).join("-"),s=(o,l)=>{let c;if(r){const d=[...n.finalize(o),l];c=a(t.toHash(d,Gv))}else c=[...n.finalize(o),a(l)].join(":");return c};return fr(({base:o,...l}={})=>{const c=Object.assign(l,o),d=ys(c,e),f=new Set;return gs(d,(p,h)=>{if(p==null)return;const m=Vv(p),[v,...y]=n.shift(h),S=jv(y),b=t.transform(v,Hv(Zv(p)));let C=s(S,b.className);m&&(C=`${C}!`),f.add(C)}),Array.from(f).join(" ")})}function eE(...e){return e.flat().filter(t=>At(t)&&Object.keys(Mv(t)).length>0)}function tE(e){function t(a){const s=eE(...a);return s.length===1?s:s.map(o=>ys(o,e))}function r(...a){return ms(...t(a))}function n(...a){return Object.assign({},...t(a))}return{mergeCss:fr(r),assignCss:n}}var rE=/([A-Z])/g,nE=/^ms-/,aE=fr(e=>e.startsWith("--")?e:e.replace(rE,"-$1").replace(nE,"-ms-").toLowerCase()),sE="cm,mm,Q,in,pc,pt,px,em,ex,ch,rem,lh,rlh,vw,vh,vmin,vmax,vb,vi,svw,svh,lvw,lvh,dvw,dvh,cqw,cqh,cqi,cqb,cqmin,cqmax,%";`${sE.split(",").join("|")}`;const iE="_hover,_focus,_focusWithin,_focusVisible,_disabled,_active,_visited,_target,_readOnly,_readWrite,_empty,_checked,_enabled,_expanded,_highlighted,_complete,_incomplete,_dragging,_before,_after,_firstLetter,_firstLine,_marker,_selection,_file,_backdrop,_first,_last,_only,_even,_odd,_firstOfType,_lastOfType,_onlyOfType,_peerFocus,_peerHover,_peerActive,_peerFocusWithin,_peerFocusVisible,_peerDisabled,_peerChecked,_peerInvalid,_peerExpanded,_peerPlaceholderShown,_groupFocus,_groupHover,_groupActive,_groupFocusWithin,_groupFocusVisible,_groupDisabled,_groupChecked,_groupExpanded,_groupInvalid,_indeterminate,_required,_valid,_invalid,_autofill,_inRange,_outOfRange,_placeholder,_placeholderShown,_pressed,_selected,_grabbed,_underValue,_overValue,_atValue,_default,_optional,_open,_closed,_fullscreen,_loading,_hidden,_current,_currentPage,_currentStep,_today,_unavailable,_rangeStart,_rangeEnd,_now,_topmost,_motionReduce,_motionSafe,_print,_landscape,_portrait,_dark,_light,_osDark,_osLight,_highContrast,_lessContrast,_moreContrast,_ltr,_rtl,_scrollbar,_scrollbarThumb,_scrollbarTrack,_horizontal,_vertical,_icon,_starting,sm,smOnly,smDown,md,mdOnly,mdDown,lg,lgOnly,lgDown,xl,xlOnly,xlDown,2xl,2xlOnly,2xlDown,smToMd,smToLg,smToXl,smTo2xl,mdToLg,mdToXl,mdTo2xl,lgToXl,lgTo2xl,xlTo2xl,@/xs,@/sm,@/md,@/lg,@/xl,@/2xl,@/3xl,@/4xl,@/5xl,@/6xl,@/7xl,@/8xl,base",bs=new Set(iE.split(",")),oE=/^@|&|&$/;function cn(e){return bs.has(e)||oE.test(e)}const lE=/^_/,uE=/&|@/;function cE(e){return e.map(t=>bs.has(t)?t.replace(lE,""):uE.test(t)?`[${hs(t.trim())}]`:t)}function dE(e){return e.sort((t,r)=>{const n=cn(t),a=cn(r);return n&&!a?1:!n&&a?-1:0})}const fE="aspectRatio:asp,boxDecorationBreak:bx-db,zIndex:z,boxSizing:bx-s,objectPosition:obj-p,objectFit:obj-f,overscrollBehavior:ovs-b,overscrollBehaviorX:ovs-bx,overscrollBehaviorY:ovs-by,position:pos/1,top:top,left:left,inset:inset,insetInline:inset-x/insetX,insetBlock:inset-y/insetY,insetBlockEnd:inset-be,insetBlockStart:inset-bs,insetInlineEnd:inset-e/insetEnd/end,insetInlineStart:inset-s/insetStart/start,right:right,bottom:bottom,float:float,visibility:vis,display:d,hideFrom:hide,hideBelow:show,flexBasis:flex-b,flex:flex,flexDirection:flex-d/flexDir,flexGrow:flex-g,flexShrink:flex-sh,gridTemplateColumns:grid-tc,gridTemplateRows:grid-tr,gridColumn:grid-c,gridRow:grid-r,gridColumnStart:grid-cs,gridColumnEnd:grid-ce,gridAutoFlow:grid-af,gridAutoColumns:grid-ac,gridAutoRows:grid-ar,gap:gap,gridGap:grid-g,gridRowGap:grid-rg,gridColumnGap:grid-cg,rowGap:rg,columnGap:cg,justifyContent:jc,alignContent:ac,alignItems:ai,alignSelf:as,padding:p/1,paddingLeft:pl/1,paddingRight:pr/1,paddingTop:pt/1,paddingBottom:pb/1,paddingBlock:py/1/paddingY,paddingBlockEnd:pbe,paddingBlockStart:pbs,paddingInline:px/paddingX/1,paddingInlineEnd:pe/1/paddingEnd,paddingInlineStart:ps/1/paddingStart,marginLeft:ml/1,marginRight:mr/1,marginTop:mt/1,marginBottom:mb/1,margin:m/1,marginBlock:my/1/marginY,marginBlockEnd:mbe,marginBlockStart:mbs,marginInline:mx/1/marginX,marginInlineEnd:me/1/marginEnd,marginInlineStart:ms/1/marginStart,spaceX:sx,spaceY:sy,outlineWidth:ring-w/ringWidth,outlineColor:ring-c/ringColor,outline:ring/1,outlineOffset:ring-o/ringOffset,divideX:dvd-x,divideY:dvd-y,divideColor:dvd-c,divideStyle:dvd-s,width:w/1,inlineSize:w-is,minWidth:min-w/minW,minInlineSize:min-w-is,maxWidth:max-w/maxW,maxInlineSize:max-w-is,height:h/1,blockSize:h-bs,minHeight:min-h/minH,minBlockSize:min-h-bs,maxHeight:max-h/maxH,maxBlockSize:max-b,color:c,fontFamily:ff,fontSize:fs,fontSizeAdjust:fs-a,fontPalette:fp,fontKerning:fk,fontFeatureSettings:ff-s,fontWeight:fw,fontSmoothing:fsmt,fontVariant:fv,fontVariantAlternates:fv-alt,fontVariantCaps:fv-caps,fontVariationSettings:fv-s,fontVariantNumeric:fv-num,letterSpacing:ls,lineHeight:lh,textAlign:ta,textDecoration:td,textDecorationColor:td-c,textEmphasisColor:te-c,textDecorationStyle:td-s,textDecorationThickness:td-t,textUnderlineOffset:tu-o,textTransform:tt,textIndent:ti,textShadow:tsh,textShadowColor:tsh-c/textShadowColor,textOverflow:tov,verticalAlign:va,wordBreak:wb,textWrap:tw,truncate:trunc,lineClamp:lc,listStyleType:li-t,listStylePosition:li-pos,listStyleImage:li-img,listStyle:li-s,backgroundPosition:bg-p/bgPosition,backgroundPositionX:bg-p-x/bgPositionX,backgroundPositionY:bg-p-y/bgPositionY,backgroundAttachment:bg-a/bgAttachment,backgroundClip:bg-cp/bgClip,background:bg/1,backgroundColor:bg-c/bgColor,backgroundOrigin:bg-o/bgOrigin,backgroundImage:bg-i/bgImage,backgroundRepeat:bg-r/bgRepeat,backgroundBlendMode:bg-bm/bgBlendMode,backgroundSize:bg-s/bgSize,backgroundGradient:bg-grad/bgGradient,textGradient:txt-grad,gradientFromPosition:grad-from-pos,gradientToPosition:grad-to-pos,gradientFrom:grad-from,gradientTo:grad-to,gradientVia:grad-via,gradientViaPosition:grad-via-pos,borderRadius:bdr/rounded,borderTopLeftRadius:bdr-tl/roundedTopLeft,borderTopRightRadius:bdr-tr/roundedTopRight,borderBottomRightRadius:bdr-br/roundedBottomRight,borderBottomLeftRadius:bdr-bl/roundedBottomLeft,borderTopRadius:bdr-t/roundedTop,borderRightRadius:bdr-r/roundedRight,borderBottomRadius:bdr-b/roundedBottom,borderLeftRadius:bdr-l/roundedLeft,borderStartStartRadius:bdr-ss/roundedStartStart,borderStartEndRadius:bdr-se/roundedStartEnd,borderStartRadius:bdr-s/roundedStart,borderEndStartRadius:bdr-es/roundedEndStart,borderEndEndRadius:bdr-ee/roundedEndEnd,borderEndRadius:bdr-e/roundedEnd,border:bd,borderWidth:bd-w,borderTopWidth:bd-t-w,borderLeftWidth:bd-l-w,borderRightWidth:bd-r-w,borderBottomWidth:bd-b-w,borderBlockStartWidth:bd-bs-w,borderBlockEndWidth:bd-be-w,borderColor:bd-c,borderInline:bd-x/borderX,borderInlineWidth:bd-x-w/borderXWidth,borderInlineColor:bd-x-c/borderXColor,borderBlock:bd-y/borderY,borderBlockWidth:bd-y-w/borderYWidth,borderBlockColor:bd-y-c/borderYColor,borderLeft:bd-l,borderLeftColor:bd-l-c,borderInlineStart:bd-s/borderStart,borderInlineStartWidth:bd-s-w/borderStartWidth,borderInlineStartColor:bd-s-c/borderStartColor,borderRight:bd-r,borderRightColor:bd-r-c,borderInlineEnd:bd-e/borderEnd,borderInlineEndWidth:bd-e-w/borderEndWidth,borderInlineEndColor:bd-e-c/borderEndColor,borderTop:bd-t,borderTopColor:bd-t-c,borderBottom:bd-b,borderBottomColor:bd-b-c,borderBlockEnd:bd-be,borderBlockEndColor:bd-be-c,borderBlockStart:bd-bs,borderBlockStartColor:bd-bs-c,opacity:op,boxShadow:bx-sh/shadow,boxShadowColor:bx-sh-c/shadowColor,mixBlendMode:mix-bm,filter:filter,brightness:brightness,contrast:contrast,grayscale:grayscale,hueRotate:hue-rotate,invert:invert,saturate:saturate,sepia:sepia,dropShadow:drop-shadow,blur:blur,backdropFilter:bkdp,backdropBlur:bkdp-blur,backdropBrightness:bkdp-brightness,backdropContrast:bkdp-contrast,backdropGrayscale:bkdp-grayscale,backdropHueRotate:bkdp-hue-rotate,backdropInvert:bkdp-invert,backdropOpacity:bkdp-opacity,backdropSaturate:bkdp-saturate,backdropSepia:bkdp-sepia,borderCollapse:bd-cl,borderSpacing:bd-sp,borderSpacingX:bd-sx,borderSpacingY:bd-sy,tableLayout:tbl,transitionTimingFunction:trs-tmf,transitionDelay:trs-dly,transitionDuration:trs-dur,transitionProperty:trs-prop,transition:trs,animation:anim,animationName:anim-n,animationTimingFunction:anim-tmf,animationDuration:anim-dur,animationDelay:anim-dly,animationPlayState:anim-ps,animationComposition:anim-comp,animationFillMode:anim-fm,animationDirection:anim-dir,animationIterationCount:anim-ic,animationRange:anim-r,animationState:anim-s,animationRangeStart:anim-rs,animationRangeEnd:anim-re,animationTimeline:anim-tl,transformOrigin:trf-o,transformBox:trf-b,transformStyle:trf-s,transform:trf,rotate:rotate,rotateX:rotate-x,rotateY:rotate-y,rotateZ:rotate-z,scale:scale,scaleX:scale-x,scaleY:scale-y,translate:translate,translateX:translate-x/x,translateY:translate-y/y,translateZ:translate-z/z,accentColor:ac-c,caretColor:ca-c,scrollBehavior:scr-bhv,scrollbar:scr-bar,scrollbarColor:scr-bar-c,scrollbarGutter:scr-bar-g,scrollbarWidth:scr-bar-w,scrollMargin:scr-m,scrollMarginLeft:scr-ml,scrollMarginRight:scr-mr,scrollMarginTop:scr-mt,scrollMarginBottom:scr-mb,scrollMarginBlock:scr-my/scrollMarginY,scrollMarginBlockEnd:scr-mbe,scrollMarginBlockStart:scr-mbt,scrollMarginInline:scr-mx/scrollMarginX,scrollMarginInlineEnd:scr-me,scrollMarginInlineStart:scr-ms,scrollPadding:scr-p,scrollPaddingBlock:scr-py/scrollPaddingY,scrollPaddingBlockStart:scr-pbs,scrollPaddingBlockEnd:scr-pbe,scrollPaddingInline:scr-px/scrollPaddingX,scrollPaddingInlineEnd:scr-pe,scrollPaddingInlineStart:scr-ps,scrollPaddingLeft:scr-pl,scrollPaddingRight:scr-pr,scrollPaddingTop:scr-pt,scrollPaddingBottom:scr-pb,scrollSnapAlign:scr-sa,scrollSnapStop:scrs-s,scrollSnapType:scrs-t,scrollSnapStrictness:scrs-strt,scrollSnapMargin:scrs-m,scrollSnapMarginTop:scrs-mt,scrollSnapMarginBottom:scrs-mb,scrollSnapMarginLeft:scrs-ml,scrollSnapMarginRight:scrs-mr,scrollSnapCoordinate:scrs-c,scrollSnapDestination:scrs-d,scrollSnapPointsX:scrs-px,scrollSnapPointsY:scrs-py,scrollSnapTypeX:scrs-tx,scrollSnapTypeY:scrs-ty,scrollTimeline:scrtl,scrollTimelineAxis:scrtl-a,scrollTimelineName:scrtl-n,touchAction:tch-a,userSelect:us,overflow:ov,overflowWrap:ov-wrap,overflowX:ov-x,overflowY:ov-y,overflowAnchor:ov-a,overflowBlock:ov-b,overflowInline:ov-i,overflowClipBox:ovcp-bx,overflowClipMargin:ovcp-m,overscrollBehaviorBlock:ovs-bb,overscrollBehaviorInline:ovs-bi,fill:fill,stroke:stk,strokeWidth:stk-w,strokeDasharray:stk-dsh,strokeDashoffset:stk-do,strokeLinecap:stk-lc,strokeLinejoin:stk-lj,strokeMiterlimit:stk-ml,strokeOpacity:stk-op,srOnly:sr,debug:debug,appearance:ap,backfaceVisibility:bfv,clipPath:cp-path,hyphens:hy,mask:msk,maskImage:msk-i,maskSize:msk-s,textSizeAdjust:txt-adj,container:cq,containerName:cq-n,containerType:cq-t,cursor:cursor,textStyle:textStyle",vs=new Map,Es=new Map;fE.split(",").forEach(e=>{const[t,r]=e.split(":"),[n,...a]=r.split("/");vs.set(t,n),a.length&&a.forEach(s=>{Es.set(s==="1"?n:s,t)})});const dn=e=>Es.get(e)||e,Ss={conditions:{shift:dE,finalize:cE,breakpoints:{keys:["base","sm","md","lg","xl","2xl"]}},utility:{transform:(e,t)=>{const r=dn(e);return{className:`${vs.get(r)||aE(r)}_${hs(t)}`}},hasShorthand:!0,toHash:(e,t)=>t(e.join(":")),resolveShorthand:dn}},pE=Jv(Ss),_=(...e)=>pE(_s(...e));_.raw=(...e)=>_s(...e);const{mergeCss:_s,assignCss:$1}=tE(Ss),hE={spinnerIcon:_({marginInlineEnd:"0.5rem"})},pr=({progress:e,showPercentage:t=!1})=>i.default.createElement(g.Fragment,null,Object.entries(e).map(([r,n])=>i.default.createElement(u.Segment.Inline,{basic:!0,key:r},i.default.createElement(u.Icon,{name:"spinner",loading:!0,className:hE.spinnerIcon}),i.default.createElement("strong",null,r)," ",t?`${n}%`:null))),hr=()=>i.default.createElement(u.Segment,{basic:!0,padded:"very"},i.default.createElement(u.Dimmer,{active:!0,inverted:!0},i.default.createElement(u.Loader,{inverted:!0},"Loading"))),Cs=({status:e,...t})=>e==="damaged"||e==="imported with failures"||e==="validated with failures"||e==="serializer validation failed"||e==="validation failed"||e==="import failed"?i.default.createElement(u.Icon,{name:"close",color:"red",...t}):e==="success"||e==="created"?i.default.createElement(u.Icon,{name:"check circle",color:"green",...t}):e==="importing"||e==="validating"?i.default.createElement(u.Icon,{name:"spinner",loading:!0,...t}):e==="validated"?i.default.createElement(u.Icon,{name:"check circle",color:"blue",...t}):i.default.createElement(u.Icon,{...t}),mr=({status:e,children:t,...r})=>e==="damaged"||e==="imported with failures"||e==="validated with failures"||e==="serializer validation failed"||e==="validation failed"||e==="import failed"?i.default.createElement(u.Label,{color:"red",...r},i.default.createElement(u.Icon,{name:"warning sign"}),t):e==="success"||e==="validated"||e==="created"?i.default.createElement(u.Label,{color:"green",...r},i.default.createElement(u.Icon,{name:"check circle"}),t):e==="importing"||e==="validating"?i.default.createElement(u.Label,{color:"blue",...r},i.default.createElement(u.Icon,{name:"spinner",loading:!0}),t):i.default.createElement(u.Label,{...r},t),oe=e=>(e==null?void 0:e.charAt(0).toUpperCase())+(e==null?void 0:e.slice(1))||"";var $s={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var s="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(s=a(s,n(l)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return r.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var l in s)t.call(s,l)&&s[l]&&(o=a(o,l));return o}function a(s,o){return o?s?s+" "+o:s+o:s}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})($s);var mE=$s.exports;const xs=O(mE),gr=e=>e.reduce((t,r)=>t+r.file.size,0),yr=e=>dt(gr(e)),dt=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return`${Number.parseFloat((e/t**n).toFixed(2))} ${r[n]}`},Ge=e=>new Date(e).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});var ws={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(e,t){(function(r){var n;if(e.exports=r(),n=!0,!n){var a=window.Cookies,s=window.Cookies=r();s.noConflict=function(){return window.Cookies=a,s}}})(function(){function r(){for(var s=0,o={};s<arguments.length;s++){var l=arguments[s];for(var c in l)o[c]=l[c]}return o}function n(s){return s.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function a(s){function o(){}function l(d,f,p){if(!(typeof document>"u")){p=r({path:"/"},o.defaults,p),typeof p.expires=="number"&&(p.expires=new Date(new Date*1+p.expires*864e5)),p.expires=p.expires?p.expires.toUTCString():"";try{var h=JSON.stringify(f);/^[\{\[]/.test(h)&&(f=h)}catch{}f=s.write?s.write(f,d):encodeURIComponent(String(f)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),d=encodeURIComponent(String(d)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var m="";for(var v in p)p[v]&&(m+="; "+v,p[v]!==!0&&(m+="="+p[v].split(";")[0]));return document.cookie=d+"="+f+m}}function c(d,f){if(!(typeof document>"u")){for(var p={},h=document.cookie?document.cookie.split("; "):[],m=0;m<h.length;m++){var v=h[m].split("="),y=v.slice(1).join("=");!f&&y.charAt(0)==='"'&&(y=y.slice(1,-1));try{var S=n(v[0]);if(y=(s.read||s)(y,S)||n(y),f)try{y=JSON.parse(y)}catch{}if(p[S]=y,d===S)break}catch{}}return d?p[d]:p}}return o.set=l,o.get=function(d){return c(d,!1)},o.getJSON=function(d){return c(d,!0)},o.remove=function(d,f){l(d,"",r(f,{expires:-1}))},o.defaults={},o.withConverter=a,o}return a(function(){})})})(ws);var gE=ws.exports;const yE=O(gE),Ts=()=>yE.get("csrftoken")||null,Is=e=>{switch(e){case"success":return"green";case"validation failed":case"serializer validation failed":case"import failed":case"imported with failures":case"validated with failures":case"damaged":return"red";case"validated":case"created":return"blue";case"importing":case"validating":return"yellow";default:return"grey"}},bE=e=>new pa(e),vE=(e,t={},r=!0)=>({axios:{url:e,headers:{Accept:"application/vnd.inveniordm.v1+json",...t},withCredentials:r}}),L=Be.default.create({baseURL:"",timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}});L.interceptors.request.use(e=>{const t=Ts();return t&&(e.headers["X-CSRFTOKEN"]=t),e},e=>Promise.reject(e));const Fs=async(e,t)=>{try{const r=await L.put(`/api/importer-tasks/${e}/metadata`,t,{headers:{"content-type":"application/octet-stream","X-Filename":`${t.name}`}});if(r.status===200)return r.data;throw new Error(`Failed to create task: ${r.statusText}`)}catch(r){throw new Error(`Error creating task: ${r instanceof Error?r.message:"Unknown error"}`)}},EE=async(e,t)=>{try{const r=await L.post(`/api/importer-tasks/${e}/files/${t}/commit`,{});if(r.status!==200)throw new Error(`Failed to commit file: ${r.statusText}`)}catch(r){throw console.error("Error committing file:",r),new Error(`Failed to commit file: ${r instanceof Error?r.message:"Unknown error"}`)}},SE=async e=>{const t={title:e.title,description:e.description,mode:e.mode,status:e.status,record_type:e.recordType,serializer:e.serializer,start_time:e.startTime,end_time:e.endTime};try{const r=await L.post("/api/importer-tasks",t);if(r.status===201)return r.data;throw new Error(`Failed to create task: ${r.statusText}`)}catch(r){throw new Error(`Error creating task: ${r instanceof Error?r.message:"Unknown error"}`)}},_E=async e=>{try{const t=await L.delete(`/api/importer-tasks/${e}`);return t.status===204?!0:(console.error(`Failed to delete task: ${t.statusText}`),!1)}catch(t){return console.error(`Error deleting task: ${t instanceof Error?t.message:"Unknown error"}`),!1}},As=async e=>{try{const t=await L.post(`/api/importer-tasks/${e}/load`);if(t.status===200)return t.data;throw new Error(`Unexpected response status: ${t.status}`)}catch(t){throw console.error("Error executing bulk import:",t),new Error("Failed to execute bulk import")}},CE=async()=>{try{const e=await L.get("/api/importer-tasks/config");return e.status===200?e.data:(console.error("Failed to fetch record types:",e.statusText),[])}catch(e){return console.error("Error fetching record types:",e),[]}},$E=async e=>{try{const t=await L.get(`/api/importer-tasks/config/${e}`);if(t.status===200)return t.data;throw new Error(`Unexpected response status: ${t.status}`)}catch(t){throw console.error("Error fetching serializers:",t),new Error("Failed to fetch serializers")}},_e=async e=>{try{const t=await L.put(`/api/importer-tasks/${e}/status`,{});if(t.status===200)return t.data;throw new Error(`Failed to get status of importer task: ${t.statusText}`)}catch(t){throw new Error(`Error getting status of importer task: ${t instanceof Error?t.message:"Unknown error"}`)}},xE=async(e,t)=>{const r=t.map(n=>({key:n}));try{const n=await L.post(`/api/importer-tasks/${e}/files`,r);if(n.status!==201)throw new Error(`Failed to initialize files: ${n.statusText}`)}catch(n){throw console.error("Error initializing files:",n),new Error(`Failed to initialize files: ${n instanceof Error?n.message:"Unknown error"}`)}},wE=async(e,t,r)=>{try{const n=await L.put(`/api/importer-tasks/${e}/files/${t}/content`,r,{headers:{"Content-Type":"application/octet-stream"}});if(n.status!==200)throw new Error(`Failed to upload file content: ${n.statusText}`)}catch(n){throw console.error("Error uploading file content:",n),new Error(`Failed to upload file content: ${n instanceof Error?n.message:"Unknown error"}`)}},Os=async e=>{try{const t=await L.post(`/api/importer-tasks/${e}/validate`,{});if(t.status===200)return t.data;throw new Error(`Failed to validate task: ${t.statusText}`)}catch(t){throw new Error(`Error validating task: ${t instanceof Error?t.message:"Unknown error"}`)}},Rs=async(e,t={})=>{const{autoExecute:r=!1,onProgress:n,onError:a}=t;try{n==null||n("Validating",0),await Os(e),n==null||n("Validating",50);let s=await _e(e);return n==null||n("Validating",100),r&&(s.status==="validated"||s.status==="validated with failures")&&(n==null||n("Executing",0),await As(e),n==null||n("Executing",50),s=await _e(e),n==null||n("Executing",100)),s}catch(s){const o=s instanceof Error?s:new Error("Unknown error during workflow execution");throw a==null||a(o,"Executing"),o}},ks=async(e,t,r)=>{if(!t||t.length===0)return;const n=t.map(a=>a.name);await xE(e,n);for(const a of t)try{r==null||r({fileName:a.name,loaded:0,total:a.size,percentage:0}),await wE(e,a.name,a),r==null||r({fileName:a.name,loaded:a.size,total:a.size,percentage:90}),await EE(e,a.name),r==null||r({fileName:a.name,loaded:a.size,total:a.size,percentage:100})}catch(s){throw new Error(`Failed to upload file ${a.name}: ${s instanceof Error?s.message:"Unknown error"}`)}},TE=async(e,t,r,n={})=>{const{autoValidate:a=!1,autoExecute:s=!1,onProgress:o,onError:l}=n;try{o==null||o("Creating Task",0);const c=await SE(e);if(!c)throw new Error("Failed to create import task");return o==null||o("Creating Task",100),t&&(o==null||o("Uploading Metadata",0),await Fs(c.id,t),o==null||o("Uploading Metadata",100)),r&&r.length>0&&await ks(c.id,r,d=>{o==null||o("Uploading Files",d.percentage)}),a&&t&&await Rs(c.id,{autoExecute:s,onProgress:o,onError:l}),c}catch(c){const d=c instanceof Error?c:new Error("Unknown error during task creation");throw l==null||l(d,"Creating Task"),d}},IE=async(e,t,r,n={})=>{const{onProgress:a,onError:s}=n;try{a==null||a("Updating",0),t&&(a==null||a("Updating Metadata",0),await Fs(e,t),a==null||a("Updating Metadata",100)),r&&r.length>0&&await ks(e,r,o=>{a==null||a("Updating Files",o.percentage)}),a==null||a("Updating",100)}catch(o){const l=o instanceof Error?o:new Error("Unknown error during task update");throw s==null||s(l,"Updating"),l}},FE=async e=>{try{const t=await L.post(`/api/importer-records/${e}/run`,{});if(t.status===200)return t.data;throw new Error(`Failed to fetch import records: ${t.statusText}`)}catch(t){throw console.error("Failed to fetch import records:",t),t}},Ps=(e,t={})=>{const[r,n]=g.useState({isDeleting:!1,isValidating:!1,isBulkImporting:!1,isGettingStatus:!1,error:null}),{onDeleteSuccess:a,onDeleteError:s,onValidateSuccess:o,onValidateError:l,onBulkImportSuccess:c,onBulkImportError:d,onStatusChangeSuccess:f,onStatusChangeError:p}=t,h=g.useCallback(()=>{n(b=>({...b,error:null}))},[]),m=g.useCallback(async()=>{n(b=>({...b,isDeleting:!0,error:null}));try{if(!await _E(e))throw new Error(`Failed to delete task ${e}`);a==null||a()}catch(b){const C=b instanceof Error?b:new Error("Unknown error");throw n(I=>({...I,error:C})),s==null||s(C),C}finally{n(b=>({...b,isDeleting:!1}))}},[e,a,s]),v=g.useCallback(async()=>{n(b=>({...b,isValidating:!0,error:null}));try{const b=await Os(e);if(!b)throw new Error(`Validation failed for task ${e}`);return o==null||o(b),await _e(e),b}catch(b){const C=b instanceof Error?b:new Error("Unknown error");throw n(I=>({...I,error:C})),l==null||l(C),C}finally{n(b=>({...b,isValidating:!1}))}},[e,o,l]),y=g.useCallback(async()=>{n(b=>({...b,isBulkImporting:!0,error:null}));try{const b=await As(e);if(!b)throw new Error(`Failed to execute bulk import for task ${e}`);return c==null||c(b),await _e(e),b}catch(b){const C=b instanceof Error?b:new Error("Unknown error");throw n(I=>({...I,error:C})),d==null||d(C),C}finally{n(b=>({...b,isBulkImporting:!1}))}},[e,c,d]),S=g.useCallback(async()=>{n(b=>({...b,isGettingStatus:!0,error:null}));try{const b=await _e(e);if(!b)throw new Error(`Failed to retrieve status for task ${e}`);return n(C=>({...C,error:null})),f==null||f(b),b}catch(b){const C=b instanceof Error?b:new Error("Unknown error");throw n(I=>({...I,error:C})),p==null||p(C),C}finally{n(b=>({...b,isGettingStatus:!1}))}},[e,f,p]);return{isDeleting:r.isDeleting,isValidating:r.isValidating,isBulkImporting:r.isBulkImporting,isGettingStatus:r.isGettingStatus,error:r.error,deleteTask:m,validateTask:v,runBulkImport:y,getStatus:S,clearError:h}},ke={actionsCell:_({inlineSize:"15rem"}),errorContainer:_({display:"flex",alignItems:"center",gap:"0.3125rem",color:"red",fontSize:"0.75rem",marginBlockEnd:"0.3125rem"}),clearErrorButton:_({marginInlineStart:"0.3125rem",fontSize:"0.625rem"}),actionsContainer:_({display:"flex",alignItems:"center",gap:"0.625rem"})},AE=({result:e,index:t})=>{var v;const{config:r,refreshSearch:n}=ct(),{deleteTask:a,runBulkImport:s,getStatus:o,isDeleting:l,isValidating:c,isBulkImporting:d,isGettingStatus:f,error:p,clearError:h}=Ps(e.id,{onDeleteSuccess:()=>{n()},onBulkImportSuccess:()=>{n()},onStatusChangeSuccess:()=>{n()}});if(!e)return null;const m=l||c||d||f;return i.default.createElement(u.TableRow,{key:t},i.default.createElement(u.TableCell,null,i.default.createElement("a",{href:`${r.resultPath}/${e.id}`},e.title||"No title")),i.default.createElement(u.TableCell,null,Ge(e.created)),i.default.createElement(u.TableCell,null,i.default.createElement(mr,{status:e.status},oe(e.status))),i.default.createElement(u.TableCell,null,i.default.createElement(u.Label,null,oe(e.record_type))),i.default.createElement(u.TableCell,null,((v=e.records_status)==null?void 0:v.total_records)??0),i.default.createElement(u.TableCell,null,e.serializer),i.default.createElement(u.TableCell,null,oe(e.mode)),i.default.createElement(u.TableCell,{className:ke.actionsCell},p&&i.default.createElement("div",{className:ke.errorContainer},p.message,i.default.createElement(u.Button,{onClick:h,className:ke.clearErrorButton,size:"mini",basic:!0},"Clear")),i.default.createElement("div",{className:ke.actionsContainer},i.default.createElement(u.Dropdown,{text:m?"Processing...":"Select Action",floating:!0,labeled:!0,className:"icon",disabled:m,options:[{key:"load",text:"Run",value:"load",disabled:m,onClick:()=>s()},{key:"status",text:"Refresh Status",value:"status",disabled:m,onClick:()=>o()},{key:"delete",text:"Delete",value:"delete",disabled:m,onClick:()=>a()}]}),i.default.createElement(u.Button,{basic:!0,size:"tiny",disabled:m,as:"a",href:`${r.resultPath}/${e.id}`},i.default.createElement(u.Icon,{name:"eye"}),"View"))))},OE=({children:e})=>i.default.createElement(u.Table,{padded:!0,size:"small",comp:!0},i.default.createElement(u.TableHeader,null,i.default.createElement(u.TableRow,null,i.default.createElement(u.TableHeaderCell,null,"Title"),i.default.createElement(u.TableHeaderCell,null,"Date Created"),i.default.createElement(u.TableHeaderCell,null,"Status"),i.default.createElement(u.TableHeaderCell,null,"Type"),i.default.createElement(u.TableHeaderCell,null,"Items"),i.default.createElement(u.TableHeaderCell,null,"Serializer"),i.default.createElement(u.TableHeaderCell,null,"Mode"),i.default.createElement(u.TableHeaderCell,null,"Actions"))),i.default.createElement(u.TableBody,null,e)),V={aggs:[],appId:"search",defaultSortingOnEmptyQueryString:[{sortBy:"newest"}],initialQueryState:{filters:[],hiddenParams:null,layout:"list",page:1,size:10,sortBy:"newest"},layoutOptions:{gridView:!1,listView:!0},paginationOptions:{defaultValue:10,maxTotalResults:1e4,resultsPerPage:[{text:"10",value:10},{text:"20",value:20},{text:"50",value:50}]},searchApi:{axios:{headers:{Accept:"application/vnd.inveniordm.v1+json"},url:"/api/importer-tasks",withCredentials:!0},invenio:{requestSerializer:"InvenioRecordsResourcesRequestSerializer"}},sortOptions:[{sortBy:"newest",text:"Newest"},{sortBy:"oldest",text:"Oldest"}],sortOrderDisabled:!0,resultPath:"/administration/importer-tasks"},ye={fileInput:_({marginBlockStart:"0.5rem"}),helpText:_({marginBlockStart:"0.5rem",fontSize:"0.75rem",color:"#666"}),buttonContainer:_({display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"0.5rem"})},RE=()=>{const[e,t]=g.useState({}),[r,n]=g.useState(!0),{values:a,submitForm:s,isSubmitting:o,isValid:l,setFieldValue:c}=Ri.useFormikContext(),d=g.useCallback(async()=>{try{const h=await CE(),m={};for(const v of h){const y=await $E(v);y&&(m[v]=y)}t(m)}catch(h){console.error("Error fetching record types:",h)}finally{n(!1)}},[]),f=h=>{var v;const m=((v=h.target.files)==null?void 0:v[0])||null;c("metadata",m)},p=h=>{c("files",h)};return g.useEffect(()=>{d()},[d]),{configs:e,isLoading:r,values:a,submitForm:s,setFieldValue:c,handleFileChange:f,handleFilesChange:p,isSubmitting:o,isValid:l}},kE=({progress:e})=>{const{configs:t,isLoading:r,submitForm:n,handleFileChange:a,handleFilesChange:s,values:o,isSubmitting:l,isValid:c}=RE();return r?i.default.createElement(hr,null):!t||Object.keys(t).length===0?i.default.createElement("p",null,"No record types available."):i.default.createElement(g.Fragment,null,i.default.createElement(ne.TextField,{fieldPath:"task.title",label:"Title",placeholder:"Enter a title for the import task",required:!0}),i.default.createElement(u.Form.Group,{widths:"equal"},i.default.createElement(ne.SelectField,{fieldPath:"task.recordType",label:"Record Type",options:Object.keys(t).map(d=>({key:d,value:d,text:d})),placeholder:"Select Record Type",required:!0}),i.default.createElement(ne.SelectField,{fieldPath:"task.serializer",label:"Serializer",options:o.task.recordType&&t[o.task.recordType]?t[o.task.recordType].serializers.map(d=>({key:d,value:d,text:d})):[],placeholder:"Select Serializer",disabled:!o.task.recordType,required:!0}),i.default.createElement(ne.SelectField,{fieldPath:"task.mode",label:"Mode",options:[{key:"import",value:"import",text:"Import"},{key:"delete",value:"delete",text:"Delete"}],placeholder:"Select Mode",disabled:!o.task.recordType||!o.task.serializer,required:!0})),i.default.createElement(u.Form.Field,null,i.default.createElement("label",{htmlFor:"file-input"},"Metadata File"),i.default.createElement("input",{id:"file-input",type:"file",accept:".csv",onChange:a,className:ye.fileInput}),o.metadata&&i.default.createElement("p",{className:ye.helpText},"Selected: ",o.metadata.name),i.default.createElement("p",{className:ye.helpText},"Upload a CSV file containing the records metadata to be imported or deleted.")),i.default.createElement(u.Form.Field,null,i.default.createElement(_r,{value:o.files||[],onChange:s,accept:"*",skipEmptyFiles:!0,maxTotalSize:10*1024*1024*1024,maxFiles:100}),i.default.createElement("p",{className:ye.helpText},"Upload files related to the records. You can upload multiple files, and they will be associated with the import task.")),i.default.createElement(ne.TextAreaField,{fieldPath:"task.description",label:"Notes",placeholder:"Enter a description for the import task",rows:3}),i.default.createElement("div",{className:ye.buttonContainer},e&&i.default.createElement(pr,{progress:e}),i.default.createElement(u.Button,{type:"button",primary:!0,onClick:n,disabled:!c||l,loading:l},"Submit")))};var Ot;try{Ot=Map}catch{}var Rt;try{Rt=Set}catch{}function Ds(e,t,r){if(!e||typeof e!="object"||typeof e=="function")return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map(kt);if(Ot&&e instanceof Ot)return new Map(Array.from(e.entries()));if(Rt&&e instanceof Rt)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var n=Object.create(e);r.push(n);for(var a in e){var s=t.findIndex(function(o){return o===e[a]});n[a]=s>-1?r[s]:Ds(e[a],t,r)}return n}return e}function kt(e){return Ds(e,[],[])}const PE=Object.prototype.toString,DE=Error.prototype.toString,LE=RegExp.prototype.toString,BE=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",NE=/^Symbol\((.*)\)(.*)$/;function UE(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function fn(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return UE(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return BE.call(e).replace(NE,"Symbol($1)");const n=PE.call(e).slice(8,-1);return n==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):n==="Error"||e instanceof Error?"["+DE.call(e)+"]":n==="RegExp"?LE.call(e):null}function Ce(e,t){let r=fn(e,t);return r!==null?r:JSON.stringify(e,function(n,a){let s=fn(this[n],t);return s!==null?s:a},2)}let J={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:n})=>{let a=n!=null&&n!==r,s=`${e} must be a \`${t}\` type, but the final value was: \`${Ce(r,!0)}\``+(a?` (cast from the value \`${Ce(n,!0)}\`).`:".");return r===null&&(s+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),s},defined:"${path} must be defined"},U={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},ME={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Pt={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},zE={isValue:"${path} field must be ${value}"},Dt={noUnknown:"${path} field has unspecified keys: ${unknown}"},jE={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"};Object.assign(Object.create(null),{mixed:J,string:U,number:ME,date:Pt,object:Dt,array:jE,boolean:zE});var QE=Object.prototype,qE=QE.hasOwnProperty;function GE(e,t){return e!=null&&qE.call(e,t)}var VE=GE,HE=VE,YE=Yn;function WE(e,t){return e!=null&&YE(e,t,HE)}var KE=WE;const Ve=O(KE),Ls=e=>e&&e.__isYupSchema__;class XE{constructor(t,r){if(this.fn=void 0,this.refs=t,this.refs=t,typeof r=="function"){this.fn=r;return}if(!Ve(r,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:a,otherwise:s}=r,o=typeof n=="function"?n:(...l)=>l.every(c=>c===n);this.fn=function(...l){let c=l.pop(),d=l.pop(),f=o(...l)?a:s;if(f)return typeof f=="function"?f(d):d.concat(f.resolve(c))}}resolve(t,r){let n=this.refs.map(s=>s.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),a=this.fn.apply(t,n.concat(t,r));if(a===void 0||a===t)return t;if(!Ls(a))throw new TypeError("conditions must return a schema object");return a.resolve(r)}}function Bs(e){return e==null?[]:[].concat(e)}function Lt(){return Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lt.apply(this,arguments)}let ZE=/\$\{\s*(\w+)\s*\}/g;class P extends Error{static formatError(t,r){const n=r.label||r.path||"this";return n!==r.path&&(r=Lt({},r,{path:n})),typeof t=="string"?t.replace(ZE,(a,s)=>Ce(r[s])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,n,a){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this.name="ValidationError",this.value=r,this.path=n,this.type=a,this.errors=[],this.inner=[],Bs(t).forEach(s=>{P.isError(s)?(this.errors.push(...s.errors),this.inner=this.inner.concat(s.inner.length?s.inner:s)):this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,P)}}const JE=e=>{let t=!1;return(...r)=>{t||(t=!0,e(...r))}};function Bt(e,t){let{endEarly:r,tests:n,args:a,value:s,errors:o,sort:l,path:c}=e,d=JE(t),f=n.length;const p=[];if(o=o||[],!f)return o.length?d(new P(o,s,c)):d(null,s);for(let h=0;h<n.length;h++){const m=n[h];m(a,function(y){if(y){if(!P.isError(y))return d(y,s);if(r)return y.value=s,d(y,s);p.push(y)}if(--f<=0){if(p.length&&(l&&p.sort(l),o.length&&p.push(...o),o=p),o.length){d(new P(o,s,c),s);return}d(null,s)}})}}function eS(e){return function(t,r,n){for(var a=-1,s=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(s[c],c,s)===!1)break}return t}}var tS=eS,rS=tS,nS=rS(),aS=nS,sS=aS,iS=Ie;function oS(e,t){return e&&sS(e,t,iS)}var Ns=oS,lS="__lodash_hash_undefined__";function uS(e){return this.__data__.set(e,lS),this}var cS=uS;function dS(e){return this.__data__.has(e)}var fS=dS,pS=Yt,hS=cS,mS=fS;function He(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new pS;++t<r;)this.add(e[t])}He.prototype.add=He.prototype.push=hS;He.prototype.has=mS;var gS=He;function yS(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var bS=yS;function vS(e,t){return e.has(t)}var ES=vS,SS=gS,_S=bS,CS=ES,$S=1,xS=2;function wS(e,t,r,n,a,s){var o=r&$S,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=s.get(e),f=s.get(t);if(d&&f)return d==t&&f==e;var p=-1,h=!0,m=r&xS?new SS:void 0;for(s.set(e,t),s.set(t,e);++p<l;){var v=e[p],y=t[p];if(n)var S=o?n(y,v,p,t,e,s):n(v,y,p,e,t,s);if(S!==void 0){if(S)continue;h=!1;break}if(m){if(!_S(t,function(b,C){if(!CS(m,C)&&(v===b||a(v,b,r,n,s)))return m.push(C)})){h=!1;break}}else if(!(v===y||a(v,y,r,n,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var Us=wS;function TS(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var IS=TS;function FS(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var AS=FS,pn=ce,hn=sa,OS=tt,RS=Us,kS=IS,PS=AS,DS=1,LS=2,BS="[object Boolean]",NS="[object Date]",US="[object Error]",MS="[object Map]",zS="[object Number]",jS="[object RegExp]",QS="[object Set]",qS="[object String]",GS="[object Symbol]",VS="[object ArrayBuffer]",HS="[object DataView]",mn=pn?pn.prototype:void 0,gt=mn?mn.valueOf:void 0;function YS(e,t,r,n,a,s,o){switch(r){case HS:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case VS:return!(e.byteLength!=t.byteLength||!s(new hn(e),new hn(t)));case BS:case NS:case zS:return OS(+e,+t);case US:return e.name==t.name&&e.message==t.message;case jS:case qS:return e==t+"";case MS:var l=kS;case QS:var c=n&DS;if(l||(l=PS),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;n|=LS,o.set(e,t);var f=RS(l(e),l(t),n,a,s,o);return o.delete(e),f;case GS:if(gt)return gt.call(e)==gt.call(t)}return!1}var WS=YS,gn=aa,KS=1,XS=Object.prototype,ZS=XS.hasOwnProperty;function JS(e,t,r,n,a,s){var o=r&KS,l=gn(e),c=l.length,d=gn(t),f=d.length;if(c!=f&&!o)return!1;for(var p=c;p--;){var h=l[p];if(!(o?h in t:ZS.call(t,h)))return!1}var m=s.get(e),v=s.get(t);if(m&&v)return m==t&&v==e;var y=!0;s.set(e,t),s.set(t,e);for(var S=o;++p<c;){h=l[p];var b=e[h],C=t[h];if(n)var I=o?n(C,b,h,t,e,s):n(b,C,h,e,t,s);if(!(I===void 0?b===C||a(b,C,r,n,s):I)){y=!1;break}S||(S=h=="constructor")}if(y&&!S){var R=e.constructor,j=t.constructor;R!=j&&"constructor"in e&&"constructor"in t&&!(typeof R=="function"&&R instanceof R&&typeof j=="function"&&j instanceof j)&&(y=!1)}return s.delete(e),s.delete(t),y}var e0=JS,yt=tr,t0=Us,r0=WS,n0=e0,yn=$e,bn=D,vn=Je,a0=Gt,s0=1,En="[object Arguments]",Sn="[object Array]",Pe="[object Object]",i0=Object.prototype,_n=i0.hasOwnProperty;function o0(e,t,r,n,a,s){var o=bn(e),l=bn(t),c=o?Sn:yn(e),d=l?Sn:yn(t);c=c==En?Pe:c,d=d==En?Pe:d;var f=c==Pe,p=d==Pe,h=c==d;if(h&&vn(e)){if(!vn(t))return!1;o=!0,f=!1}if(h&&!f)return s||(s=new yt),o||a0(e)?t0(e,t,r,n,a,s):r0(e,t,c,r,n,a,s);if(!(r&s0)){var m=f&&_n.call(e,"__wrapped__"),v=p&&_n.call(t,"__wrapped__");if(m||v){var y=m?e.value():e,S=v?t.value():t;return s||(s=new yt),a(y,S,r,n,s)}}return h?(s||(s=new yt),n0(e,t,r,n,a,s)):!1}var l0=o0,u0=l0,Cn=q;function Ms(e,t,r,n,a){return e===t?!0:e==null||t==null||!Cn(e)&&!Cn(t)?e!==e&&t!==t:u0(e,t,r,n,Ms,a)}var zs=Ms,c0=tr,d0=zs,f0=1,p0=2;function h0(e,t,r,n){var a=r.length,s=a,o=!n;if(e==null)return!s;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=r[a];var c=l[0],d=e[c],f=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var p=new c0;if(n)var h=n(d,f,c,e,t,p);if(!(h===void 0?d0(f,d,f0|p0,n,p):h))return!1}}return!0}var m0=h0,g0=H;function y0(e){return e===e&&!g0(e)}var js=y0,b0=js,v0=Ie;function E0(e){for(var t=v0(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,b0(a)]}return t}var S0=E0;function _0(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Qs=_0,C0=m0,$0=S0,x0=Qs;function w0(e){var t=$0(e);return t.length==1&&t[0][2]?x0(t[0][0],t[0][1]):function(r){return r===e||C0(r,e,t)}}var T0=w0,I0=zs,F0=Hn,A0=Xt,O0=Ht,R0=js,k0=Qs,P0=we,D0=1,L0=2;function B0(e,t){return O0(e)&&R0(t)?k0(P0(e),t):function(r){var n=F0(r,e);return n===void 0&&n===t?A0(r,e):I0(t,n,D0|L0)}}var N0=B0;function U0(e){return function(t){return t==null?void 0:t[e]}}var M0=U0,z0=Kt;function j0(e){return function(t){return z0(t,e)}}var Q0=j0,q0=M0,G0=Q0,V0=Ht,H0=we;function Y0(e){return V0(e)?q0(H0(e)):G0(e)}var W0=Y0,K0=T0,X0=N0,Z0=Jt,J0=D,e_=W0;function t_(e){return typeof e=="function"?e:e==null?Z0:typeof e=="object"?J0(e)?X0(e[0],e[1]):K0(e):e_(e)}var qs=t_,r_=ot,n_=Ns,a_=qs;function s_(e,t){var r={};return t=a_(t),n_(e,function(n,a,s){r_(r,a,t(n,a,s))}),r}var i_=s_;const Gs=O(i_);function te(e){this._maxSize=e,this.clear()}te.prototype.clear=function(){this._size=0,this._values=Object.create(null)};te.prototype.get=function(e){return this._values[e]};te.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var o_=/[^.^\]^[]+|(?=\[\]|\.\.)/g,Vs=/^\d+$/,l_=/^\d/,u_=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,c_=/^\s*(['"]?)(.*?)(\1)\s*$/,br=512,$n=new te(br),xn=new te(br),wn=new te(br),ft={Cache:te,split:Nt,normalizePath:bt,setter:function(e){var t=bt(e);return xn.get(e)||xn.set(e,function(n,a){for(var s=0,o=t.length,l=n;s<o-1;){var c=t[s];if(c==="__proto__"||c==="constructor"||c==="prototype")return n;l=l[t[s++]]}l[t[s]]=a})},getter:function(e,t){var r=bt(e);return wn.get(e)||wn.set(e,function(a){for(var s=0,o=r.length;s<o;)if(a!=null||!t)a=a[r[s++]];else return;return a})},join:function(e){return e.reduce(function(t,r){return t+(vr(r)||Vs.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){d_(Array.isArray(e)?e:Nt(e),t,r)}};function bt(e){return $n.get(e)||$n.set(e,Nt(e).map(function(t){return t.replace(c_,"$2")}))}function Nt(e){return e.match(o_)||[""]}function d_(e,t,r){var n=e.length,a,s,o,l;for(s=0;s<n;s++)a=e[s],a&&(h_(a)&&(a='"'+a+'"'),l=vr(a),o=!l&&/^\d+$/.test(a),t.call(r,a,l,o,s,e))}function vr(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function f_(e){return e.match(l_)&&!e.match(Vs)}function p_(e){return u_.test(e)}function h_(e){return!vr(e)&&(f_(e)||p_(e))}const De={context:"$",value:"."};class W{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===De.context,this.isValue=this.key[0]===De.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?De.context:this.isValue?De.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&ft.getter(this.path,!0),this.map=r.map}getValue(t,r,n){let a=this.isContext?n:this.isValue?t:r;return this.getter&&(a=this.getter(a||{})),this.map&&(a=this.map(a)),a}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}W.prototype.__isYupRef=!0;function Ye(){return Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ye.apply(this,arguments)}function m_(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Le(e){function t(r,n){let{value:a,path:s="",label:o,options:l,originalValue:c,sync:d}=r,f=m_(r,["value","path","label","options","originalValue","sync"]);const{name:p,test:h,params:m,message:v}=e;let{parent:y,context:S}=l;function b(F){return W.isRef(F)?F.getValue(a,y,S):F}function C(F={}){const X=Gs(Ye({value:a,originalValue:c,label:o,path:F.path||s},m,F.params),b),Ae=new P(P.formatError(F.message||v,X),a,X.path,F.type||p);return Ae.params=X,Ae}let I=Ye({path:s,parent:y,type:p,createError:C,resolve:b,options:l,originalValue:c},f);if(!d){try{Promise.resolve(h.call(I,a,I)).then(F=>{P.isError(F)?n(F):F?n(null,F):n(C())}).catch(n)}catch(F){n(F)}return}let R;try{var j;if(R=h.call(I,a,I),typeof((j=R)==null?void 0:j.then)=="function")throw new Error(`Validation test of type: "${I.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(F){n(F);return}P.isError(R)?n(R):R?n(null,R):n(C())}return t.OPTIONS=e,t}let g_=e=>e.substr(0,e.length-1).substr(1);function y_(e,t,r,n=r){let a,s,o;return t?(ft.forEach(t,(l,c,d)=>{let f=c?g_(l):l;if(e=e.resolve({context:n,parent:a,value:r}),e.innerType){let p=d?parseInt(f,10):0;if(r&&p>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${t}. because there is no value at that index. `);a=r,r=r&&r[p],e=e.innerType}if(!d){if(!e.fields||!e.fields[f])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${o} which is a type: "${e._type}")`);a=r,r=r&&r[f],e=e.fields[f]}s=f,o=c?"["+l+"]":"."+l}),{schema:e,parent:a,parentPath:s}):{parent:a,parentPath:t,schema:e}}class We{constructor(){this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const t=[];for(const r of this.list)t.push(r);for(const[,r]of this.refs)t.push(r.describe());return t}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}resolveAll(t){return this.toArray().reduce((r,n)=>r.concat(W.isRef(n)?t(n):n),[])}add(t){W.isRef(t)?this.refs.set(t.key,t):this.list.add(t)}delete(t){W.isRef(t)?this.refs.delete(t.key):this.list.delete(t)}clone(){const t=new We;return t.list=new Set(this.list),t.refs=new Map(this.refs),t}merge(t,r){const n=this.clone();return t.list.forEach(a=>n.add(a)),t.refs.forEach(a=>n.add(a)),r.list.forEach(a=>n.delete(a)),r.refs.forEach(a=>n.delete(a)),n}}function B(){return B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B.apply(this,arguments)}class k{constructor(t){this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new We,this._blacklist=new We,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(J.notType)}),this.type=(t==null?void 0:t.type)||"mixed",this.spec=B({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},t==null?void 0:t.spec)}get _type(){return this.type}_typeCheck(t){return!0}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeError=this._typeError,r._whitelistError=this._whitelistError,r._blacklistError=this._blacklistError,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.exclusiveTests=B({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=kt(B({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let n=t(this);return this._mutate=r,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,n=t.clone();const a=B({},r.spec,n.spec);return n.spec=a,n._typeError||(n._typeError=r._typeError),n._whitelistError||(n._whitelistError=r._whitelistError),n._blacklistError||(n._blacklistError=r._blacklistError),n._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),n.tests=r.tests,n.exclusiveTests=r.exclusiveTests,n.withMutation(s=>{t.tests.forEach(o=>{s.test(o.OPTIONS)})}),n.transforms=[...r.transforms,...n.transforms],n}isType(t){return this.spec.nullable&&t===null?!0:this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let n=r.conditions;r=r.clone(),r.conditions=[],r=n.reduce((a,s)=>s.resolve(a,t),r),r=r.resolve(t)}return r}cast(t,r={}){let n=this.resolve(B({value:t},r)),a=n._cast(t,r);if(t!==void 0&&r.assert!==!1&&n.isType(a)!==!0){let s=Ce(t),o=Ce(a);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${n._type}". 

attempted value: ${s} 
`+(o!==s?`result of cast: ${o}`:""))}return a}_cast(t,r){let n=t===void 0?t:this.transforms.reduce((a,s)=>s.call(this,a,t,this),t);return n===void 0&&(n=this.getDefault()),n}_validate(t,r={},n){let{sync:a,path:s,from:o=[],originalValue:l=t,strict:c=this.spec.strict,abortEarly:d=this.spec.abortEarly}=r,f=t;c||(f=this._cast(f,B({assert:!1},r)));let p={value:f,path:s,options:r,originalValue:l,schema:this,label:this.spec.label,sync:a,from:o},h=[];this._typeError&&h.push(this._typeError);let m=[];this._whitelistError&&m.push(this._whitelistError),this._blacklistError&&m.push(this._blacklistError),Bt({args:p,value:f,path:s,sync:a,tests:h,endEarly:d},v=>{if(v)return void n(v,f);Bt({tests:this.tests.concat(m),args:p,path:s,sync:a,value:f,endEarly:d},n)})}validate(t,r,n){let a=this.resolve(B({},r,{value:t}));return typeof n=="function"?a._validate(t,r,n):new Promise((s,o)=>a._validate(t,r,(l,c)=>{l?o(l):s(c)}))}validateSync(t,r){let n=this.resolve(B({},r,{value:t})),a;return n._validate(t,B({},r,{sync:!0}),(s,o)=>{if(s)throw s;a=o}),a}isValid(t,r){return this.validate(t,r).then(()=>!0,n=>{if(P.isError(n))return!1;throw n})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(n){if(P.isError(n))return!1;throw n}}_getDefault(){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this):kt(t)}getDefault(t){return this.resolve(t||{})._getDefault()}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){let r=this.clone();return r.spec.strict=t,r}_isPresent(t){return t!=null}defined(t=J.defined){return this.test({message:t,name:"defined",exclusive:!0,test(r){return r!==void 0}})}required(t=J.required){return this.clone({presence:"required"}).withMutation(r=>r.test({message:t,name:"required",exclusive:!0,test(n){return this.schema._isPresent(n)}}))}notRequired(){let t=this.clone({presence:"optional"});return t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t}nullable(t=!0){return this.clone({nullable:t!==!1})}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=J.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),a=Le(r),s=r.exclusive||r.name&&n.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(n.exclusiveTests[r.name]=!!r.exclusive),n.tests=n.tests.filter(o=>!(o.OPTIONS.name===r.name&&(s||o.OPTIONS.test===a.OPTIONS.test))),n.tests.push(a),n}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let n=this.clone(),a=Bs(t).map(s=>new W(s));return a.forEach(s=>{s.isSibling&&n.deps.push(s.key)}),n.conditions.push(new XE(a,r)),n}typeError(t){let r=this.clone();return r._typeError=Le({message:t,name:"typeError",test(n){return n!==void 0&&!this.schema.isType(n)?this.createError({params:{type:this.schema._type}}):!0}}),r}oneOf(t,r=J.oneOf){let n=this.clone();return t.forEach(a=>{n._whitelist.add(a),n._blacklist.delete(a)}),n._whitelistError=Le({message:r,name:"oneOf",test(a){if(a===void 0)return!0;let s=this.schema._whitelist,o=s.resolveAll(this.resolve);return o.includes(a)?!0:this.createError({params:{values:s.toArray().join(", "),resolved:o}})}}),n}notOneOf(t,r=J.notOneOf){let n=this.clone();return t.forEach(a=>{n._blacklist.add(a),n._whitelist.delete(a)}),n._blacklistError=Le({message:r,name:"notOneOf",test(a){let s=this.schema._blacklist,o=s.resolveAll(this.resolve);return o.includes(a)?this.createError({params:{values:s.toArray().join(", "),resolved:o}}):!0}}),n}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(){const t=this.clone(),{label:r,meta:n}=t.spec;return{meta:n,label:r,type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(s=>({name:s.OPTIONS.name,params:s.OPTIONS.params})).filter((s,o,l)=>l.findIndex(c=>c.name===s.name)===o)}}}k.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])k.prototype[`${e}At`]=function(t,r,n={}){const{parent:a,parentPath:s,schema:o}=y_(this,t,r,n.context);return o[e](a&&a[s],B({},n,{parent:a,path:t}))};for(const e of["equals","is"])k.prototype[e]=k.prototype.oneOf;for(const e of["not","nope"])k.prototype[e]=k.prototype.notOneOf;k.prototype.optional=k.prototype.notRequired;const b_=k;b_.prototype;const M=e=>e==null;let v_=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,E_=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,S_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,__=e=>M(e)||e===e.trim(),C_={}.toString();function Se(){return new Hs}class Hs extends k{constructor(){super({type:"string"}),this.withMutation(()=>{this.transform(function(t){if(this.isType(t)||Array.isArray(t))return t;const r=t!=null&&t.toString?t.toString():t;return r===C_?t:r})})}_typeCheck(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}_isPresent(t){return super._isPresent(t)&&!!t.length}length(t,r=U.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},test(n){return M(n)||n.length===this.resolve(t)}})}min(t,r=U.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},test(n){return M(n)||n.length>=this.resolve(t)}})}max(t,r=U.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},test(n){return M(n)||n.length<=this.resolve(t)}})}matches(t,r){let n=!1,a,s;return r&&(typeof r=="object"?{excludeEmptyString:n=!1,message:a,name:s}=r:a=r),this.test({name:s||"matches",message:a||U.matches,params:{regex:t},test:o=>M(o)||o===""&&n||o.search(t)!==-1})}email(t=U.email){return this.matches(v_,{name:"email",message:t,excludeEmptyString:!0})}url(t=U.url){return this.matches(E_,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=U.uuid){return this.matches(S_,{name:"uuid",message:t,excludeEmptyString:!1})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=U.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:__})}lowercase(t=U.lowercase){return this.transform(r=>M(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,test:r=>M(r)||r===r.toLowerCase()})}uppercase(t=U.uppercase){return this.transform(r=>M(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,test:r=>M(r)||r===r.toUpperCase()})}}Se.prototype=Hs.prototype;var $_=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function x_(e){var t=[1,4,5,6,7,10,11],r=0,n,a;if(a=$_.exec(e)){for(var s=0,o;o=t[s];++s)a[o]=+a[o]||0;a[2]=(+a[2]||1)-1,a[3]=+a[3]||1,a[7]=a[7]?String(a[7]).substr(0,3):0,(a[8]===void 0||a[8]==="")&&(a[9]===void 0||a[9]==="")?n=+new Date(a[1],a[2],a[3],a[4],a[5],a[6],a[7]):(a[8]!=="Z"&&a[9]!==void 0&&(r=a[10]*60+a[11],a[9]==="+"&&(r=0-r)),n=Date.UTC(a[1],a[2],a[3],a[4],a[5]+r,a[6],a[7]))}else n=Date.parse?Date.parse(e):NaN;return n}let Ys=new Date(""),w_=e=>Object.prototype.toString.call(e)==="[object Date]";class Ws extends k{constructor(){super({type:"date"}),this.withMutation(()=>{this.transform(function(t){return this.isType(t)?t:(t=x_(t),isNaN(t)?Ys:new Date(t))})})}_typeCheck(t){return w_(t)&&!isNaN(t.getTime())}prepareParam(t,r){let n;if(W.isRef(t))n=t;else{let a=this.cast(t);if(!this._typeCheck(a))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);n=a}return n}min(t,r=Pt.min){let n=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},test(a){return M(a)||a>=this.resolve(n)}})}max(t,r=Pt.max){let n=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},test(a){return M(a)||a<=this.resolve(n)}})}}Ws.INVALID_DATE=Ys;Ws.prototype;function T_(e,t,r,n){var a=-1,s=e==null?0:e.length;for(n&&s&&(r=e[++a]);++a<s;)r=t(r,e[a],a,e);return r}var I_=T_;function F_(e){return function(t){return e==null?void 0:e[t]}}var A_=F_,O_=A_,R_={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},k_=O_(R_),P_=k_,D_=P_,L_=xe,B_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,N_="\\u0300-\\u036f",U_="\\ufe20-\\ufe2f",M_="\\u20d0-\\u20ff",z_=N_+U_+M_,j_="["+z_+"]",Q_=RegExp(j_,"g");function q_(e){return e=L_(e),e&&e.replace(B_,D_).replace(Q_,"")}var G_=q_,V_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function H_(e){return e.match(V_)||[]}var Y_=H_,W_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function K_(e){return W_.test(e)}var X_=K_,Ks="\\ud800-\\udfff",Z_="\\u0300-\\u036f",J_="\\ufe20-\\ufe2f",eC="\\u20d0-\\u20ff",tC=Z_+J_+eC,Xs="\\u2700-\\u27bf",Zs="a-z\\xdf-\\xf6\\xf8-\\xff",rC="\\xac\\xb1\\xd7\\xf7",nC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",aC="\\u2000-\\u206f",sC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Js="A-Z\\xc0-\\xd6\\xd8-\\xde",iC="\\ufe0e\\ufe0f",ei=rC+nC+aC+sC,ti="[']",Tn="["+ei+"]",oC="["+tC+"]",ri="\\d+",lC="["+Xs+"]",ni="["+Zs+"]",ai="[^"+Ks+ei+ri+Xs+Zs+Js+"]",uC="\\ud83c[\\udffb-\\udfff]",cC="(?:"+oC+"|"+uC+")",dC="[^"+Ks+"]",si="(?:\\ud83c[\\udde6-\\uddff]){2}",ii="[\\ud800-\\udbff][\\udc00-\\udfff]",ae="["+Js+"]",fC="\\u200d",In="(?:"+ni+"|"+ai+")",pC="(?:"+ae+"|"+ai+")",Fn="(?:"+ti+"(?:d|ll|m|re|s|t|ve))?",An="(?:"+ti+"(?:D|LL|M|RE|S|T|VE))?",oi=cC+"?",li="["+iC+"]?",hC="(?:"+fC+"(?:"+[dC,si,ii].join("|")+")"+li+oi+")*",mC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",yC=li+oi+hC,bC="(?:"+[lC,si,ii].join("|")+")"+yC,vC=RegExp([ae+"?"+ni+"+"+Fn+"(?="+[Tn,ae,"$"].join("|")+")",pC+"+"+An+"(?="+[Tn,ae+In,"$"].join("|")+")",ae+"?"+In+"+"+Fn,ae+"+"+An,gC,mC,ri,bC].join("|"),"g");function EC(e){return e.match(vC)||[]}var SC=EC,_C=Y_,CC=X_,$C=xe,xC=SC;function wC(e,t,r){return e=$C(e),t=r?void 0:t,t===void 0?CC(e)?xC(e):_C(e):e.match(t)||[]}var TC=wC,IC=I_,FC=G_,AC=TC,OC="[']",RC=RegExp(OC,"g");function kC(e){return function(t){return IC(AC(FC(t).replace(RC,"")),e,"")}}var ui=kC,PC=ui,DC=PC(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),LC=DC;const On=O(LC);function BC(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s}var NC=BC,UC=NC;function MC(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:UC(e,t,r)}var zC=MC,jC="\\ud800-\\udfff",QC="\\u0300-\\u036f",qC="\\ufe20-\\ufe2f",GC="\\u20d0-\\u20ff",VC=QC+qC+GC,HC="\\ufe0e\\ufe0f",YC="\\u200d",WC=RegExp("["+YC+jC+VC+HC+"]");function KC(e){return WC.test(e)}var ci=KC;function XC(e){return e.split("")}var ZC=XC,di="\\ud800-\\udfff",JC="\\u0300-\\u036f",e$="\\ufe20-\\ufe2f",t$="\\u20d0-\\u20ff",r$=JC+e$+t$,n$="\\ufe0e\\ufe0f",a$="["+di+"]",Ut="["+r$+"]",Mt="\\ud83c[\\udffb-\\udfff]",s$="(?:"+Ut+"|"+Mt+")",fi="[^"+di+"]",pi="(?:\\ud83c[\\udde6-\\uddff]){2}",hi="[\\ud800-\\udbff][\\udc00-\\udfff]",i$="\\u200d",mi=s$+"?",gi="["+n$+"]?",o$="(?:"+i$+"(?:"+[fi,pi,hi].join("|")+")"+gi+mi+")*",l$=gi+mi+o$,u$="(?:"+[fi+Ut+"?",Ut,pi,hi,a$].join("|")+")",c$=RegExp(Mt+"(?="+Mt+")|"+u$+l$,"g");function d$(e){return e.match(c$)||[]}var f$=d$,p$=ZC,h$=ci,m$=f$;function g$(e){return h$(e)?m$(e):p$(e)}var y$=g$,b$=zC,v$=ci,E$=y$,S$=xe;function _$(e){return function(t){t=S$(t);var r=v$(t)?E$(t):void 0,n=r?r[0]:t.charAt(0),a=r?b$(r,1).join(""):t.slice(1);return n[e]()+a}}var C$=_$,$$=C$,x$=$$("toUpperCase"),w$=x$,T$=xe,I$=w$;function F$(e){return I$(T$(e).toLowerCase())}var A$=F$,O$=A$,R$=ui,k$=R$(function(e,t,r){return t=t.toLowerCase(),e+(r?O$(t):t)}),P$=k$;const D$=O(P$);var L$=ot,B$=Ns,N$=qs;function U$(e,t){var r={};return t=N$(t),B$(e,function(n,a,s){L$(r,t(n,a,s),n)}),r}var M$=U$;const z$=O(M$);var Er={exports:{}};Er.exports=function(e){return yi(j$(e),e)};Er.exports.array=yi;function yi(e,t){var r=e.length,n=new Array(r),a={},s=r,o=Q$(t),l=q$(e);for(t.forEach(function(d){if(!l.has(d[0])||!l.has(d[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)a[s]||c(e[s],s,new Set);return n;function c(d,f,p){if(p.has(d)){var h;try{h=", node was:"+JSON.stringify(d)}catch{h=""}throw new Error("Cyclic dependency"+h)}if(!l.has(d))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(d));if(!a[f]){a[f]=!0;var m=o.get(d)||new Set;if(m=Array.from(m),f=m.length){p.add(d);do{var v=m[--f];c(v,l.get(v),p)}while(f);p.delete(d)}n[--r]=d}}}function j$(e){for(var t=new Set,r=0,n=e.length;r<n;r++){var a=e[r];t.add(a[0]),t.add(a[1])}return Array.from(t)}function Q$(e){for(var t=new Map,r=0,n=e.length;r<n;r++){var a=e[r];t.has(a[0])||t.set(a[0],new Set),t.has(a[1])||t.set(a[1],new Set),t.get(a[0]).add(a[1])}return t}function q$(e){for(var t=new Map,r=0,n=e.length;r<n;r++)t.set(e[r],r);return t}var G$=Er.exports;const V$=O(G$);function H$(e,t=[]){let r=[],n=new Set,a=new Set(t.map(([o,l])=>`${o}-${l}`));function s(o,l){let c=ft.split(o)[0];n.add(c),a.has(`${l}-${c}`)||r.push([l,c])}for(const o in e)if(Ve(e,o)){let l=e[o];n.add(o),W.isRef(l)&&l.isSibling?s(l.path,o):Ls(l)&&"deps"in l&&l.deps.forEach(c=>s(c,o))}return V$.array(Array.from(n),r).reverse()}function Rn(e,t){let r=1/0;return e.some((n,a)=>{var s;if(((s=t.path)==null?void 0:s.indexOf(n))!==-1)return r=a,!0}),r}function bi(e){return(t,r)=>Rn(e,t)-Rn(e,r)}function se(){return se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},se.apply(this,arguments)}let kn=e=>Object.prototype.toString.call(e)==="[object Object]";function Y$(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(n=>r.indexOf(n)===-1)}const W$=bi([]);class vi extends k{constructor(t){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=W$,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{this.transform(function(n){if(typeof n=="string")try{n=JSON.parse(n)}catch{n=null}return this.isType(n)?n:null}),t&&this.shape(t)})}_typeCheck(t){return kn(t)||typeof t=="function"}_cast(t,r={}){var n;let a=super._cast(t,r);if(a===void 0)return this.getDefault();if(!this._typeCheck(a))return a;let s=this.fields,o=(n=r.stripUnknown)!=null?n:this.spec.noUnknown,l=this._nodes.concat(Object.keys(a).filter(p=>this._nodes.indexOf(p)===-1)),c={},d=se({},r,{parent:c,__validating:r.__validating||!1}),f=!1;for(const p of l){let h=s[p],m=Ve(a,p);if(h){let v,y=a[p];d.path=(r.path?`${r.path}.`:"")+p,h=h.resolve({value:y,context:r.context,parent:c});let S="spec"in h?h.spec:void 0,b=S==null?void 0:S.strict;if(S!=null&&S.strip){f=f||p in a;continue}v=!r.__validating||!b?h.cast(a[p],d):a[p],v!==void 0&&(c[p]=v)}else m&&!o&&(c[p]=a[p]);c[p]!==a[p]&&(f=!0)}return f?c:a}_validate(t,r={},n){let a=[],{sync:s,from:o=[],originalValue:l=t,abortEarly:c=this.spec.abortEarly,recursive:d=this.spec.recursive}=r;o=[{schema:this,value:l},...o],r.__validating=!0,r.originalValue=l,r.from=o,super._validate(t,r,(f,p)=>{if(f){if(!P.isError(f)||c)return void n(f,p);a.push(f)}if(!d||!kn(p)){n(a[0]||null,p);return}l=l||p;let h=this._nodes.map(m=>(v,y)=>{let S=m.indexOf(".")===-1?(r.path?`${r.path}.`:"")+m:`${r.path||""}["${m}"]`,b=this.fields[m];if(b&&"validate"in b){b.validate(p[m],se({},r,{path:S,from:o,strict:!0,parent:p,originalValue:l[m]}),y);return}y(null)});Bt({sync:s,tests:h,value:p,errors:a,endEarly:c,sort:this._sortErrors,path:r.path},n)})}clone(t){const r=super.clone(t);return r.fields=se({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),n=r.fields;for(let[a,s]of Object.entries(this.fields)){const o=n[a];o===void 0?n[a]=s:o instanceof k&&s instanceof k&&(n[a]=s.concat(o))}return r.withMutation(()=>r.shape(n,this._excludedEdges))}getDefaultFromShape(){let t={};return this._nodes.forEach(r=>{const n=this.fields[r];t[r]="default"in n?n.getDefault():void 0}),t}_getDefault(){if("default"in this.spec)return super._getDefault();if(this._nodes.length)return this.getDefaultFromShape()}shape(t,r=[]){let n=this.clone(),a=Object.assign(n.fields,t);return n.fields=a,n._sortErrors=bi(Object.keys(a)),r.length&&(Array.isArray(r[0])||(r=[r]),n._excludedEdges=[...n._excludedEdges,...r]),n._nodes=H$(a,n._excludedEdges),n}pick(t){const r={};for(const n of t)this.fields[n]&&(r[n]=this.fields[n]);return this.clone().withMutation(n=>(n.fields={},n.shape(r)))}omit(t){const r=this.clone(),n=r.fields;r.fields={};for(const a of t)delete n[a];return r.withMutation(()=>r.shape(n))}from(t,r,n){let a=ft.getter(t,!0);return this.transform(s=>{if(s==null)return s;let o=s;return Ve(s,t)&&(o=se({},s),n||delete o[t],o[r]=a(s)),o})}noUnknown(t=!0,r=Dt.noUnknown){typeof t=="string"&&(r=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:r,test(a){if(a==null)return!0;const s=Y$(this.schema,a);return!t||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,r=Dt.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>r&&z$(r,(n,a)=>t(a)))}camelCase(){return this.transformKeys(D$)}snakeCase(){return this.transformKeys(On)}constantCase(){return this.transformKeys(t=>On(t).toUpperCase())}describe(){let t=super.describe();return t.fields=Gs(this.fields,r=>r.describe()),t}}function Ue(e){return new vi(e)}Ue.prototype=vi.prototype;const K$={task:{title:"",description:"",mode:"import",status:"created",startTime:null,endTime:null,recordType:"",serializer:""},metadata:null,files:[]},X$=Ue({task:Ue({title:Se().required("Title is required"),recordType:Se().required("Record type is required"),serializer:Se().required("Serializer is required"),mode:Se().required("Mode is required")}),metadata:Ue().nullable()}),Z$=({onSubmit:e})=>{const[t,r]=g.useState(void 0),n=async a=>{try{await TE(a.task,a.metadata,a.files,{autoValidate:!!a.metadata,onProgress(s,o){r({[s]:o})}}),e==null||e()}catch(s){throw console.error("Error creating import task:",s),s}};return i.default.createElement(ne.BaseForm,{formik:{initialValues:K$,validationSchema:X$,onSubmit:n}},i.default.createElement(kE,{progress:t}))},Ei=()=>{const[e,t]=g.useState(!1),{refreshSearch:r}=ct(),n=g.useCallback(()=>{r(),t(!1)},[r]);return i.default.createElement(u.Modal,{closeIcon:!0,onClose:()=>t(!1),onOpen:()=>t(!0),open:e,trigger:i.default.createElement(u.Button,{color:"green",icon:!0,labelPosition:"left"},i.default.createElement(u.Icon,{name:"add"}),"New Import")},i.default.createElement(u.ModalHeader,null,"New Import Task"),i.default.createElement(u.ModalContent,null,i.default.createElement(Z$,{onSubmit:n})))},vt={searchBarRow:_({display:"flex !important",flexWrap:"wrap",alignItems:"center",gap:"1rem",paddingBlock:"0.5rem",minBlockSize:"3rem"}),facets:_({flex:"0 0 auto"}),search:_({flex:"1 1 auto",minInlineSize:"15rem"}),visuallyHidden:_({srOnly:!0})},J$=({appId:e="search"})=>{const{showImportModal:t}=ct().config;return i.default.createElement(E.default,{id:`${e}.SearchBarRow`},i.default.createElement("section",{className:vt.searchBarRow,"aria-label":"Records search and filters"},i.default.createElement("div",{className:vt.search},i.default.createElement(Iv,{autofocus:!0,actionProps:{icon:"search",content:"Search",className:"search","aria-label":"Submit search",type:"submit"},placeholder:"Search","aria-describedby":"search-instructions"})),t&&i.default.createElement("div",{className:vt.facets},i.default.createElement(Ei,null))))},e1=[{key:"pending",label:"Pending",value:"pending"},{key:"success",label:"Success",value:"success"},{key:"failed",label:"Failed",value:"failed"}],t1=({currentQueryState:e,updateQueryState:t,showFacets:r=!0})=>{var s;if(!r)return null;const n=((s=e.filters)==null?void 0:s.filter(o=>o[0]==="status").map(o=>o[1]))||[],a=(o,l)=>{var f;const c=((f=e.filters)==null?void 0:f.filter(p=>p[0]!=="status"))||[];let d=[];if(l){const p=new Set(n);p.add(o),d=Array.from(p).map(h=>["status",h])}else d=n.filter(p=>p!==o).map(p=>["status",p]);t({...e,filters:[...c,...d],page:1})};return i.default.createElement("div",null,e1.map(({key:o,label:l,value:c})=>c?i.default.createElement("div",{key:o,style:{marginBottom:"8px"}},i.default.createElement(u.Checkbox,{label:l,checked:n.includes(c),onChange:(d,f)=>a(c,f.checked??!1)})):null))},Pn=za(t1),r1=()=>{const{config:e}=ct();return i.default.createElement(u.Grid,null,i.default.createElement(u.Grid.Row,{verticalAlign:"middle"},i.default.createElement(u.Grid.Column,{width:4,textAlign:"left"},i.default.createElement(sv,{label:t=>i.default.createElement("div",null,t," item(s)")})),i.default.createElement(u.Grid.Column,{width:8,textAlign:"center"},i.default.createElement(hv,{options:{size:"mini"}})),i.default.createElement(u.Grid.Column,{width:4,textAlign:"right"},i.default.createElement(xv,{values:e.paginationOptions.resultsPerPage,label:t=>i.default.createElement("p",null,t," results per page")}))))},Sr=({config:e={},overriddenComponents:t={}})=>{var s,o,l,c,d;const r={...V,...e,initialQueryState:{...V.initialQueryState,...e.initialQueryState},layoutOptions:{...V.layoutOptions,...e.layoutOptions},paginationOptions:{...V.paginationOptions,...e.paginationOptions,resultsPerPage:((s=e.paginationOptions)==null?void 0:s.resultsPerPage)||V.paginationOptions.resultsPerPage},searchApi:{...V.searchApi,...e.searchApi,axios:{...V.searchApi.axios,...(o=e.searchApi)==null?void 0:o.axios,headers:{...V.searchApi.axios.headers,...(c=(l=e.searchApi)==null?void 0:l.axios)==null?void 0:c.headers}},invenio:{...V.searchApi.invenio,...(d=e.searchApi)==null?void 0:d.invenio}},showFacets:e.showFacets??!0,showImportModal:e.showImportModal??!0,showSearchFooter:e.showSearchFooter??!0},n=new pa(r.searchApi),a={[`${r.appId}.ResultsList.item`]:AE,[`${r.appId}.ResultsList.container`]:OE,[`${r.appId}.SearchFacets`]:Pn,...t};return i.default.createElement(Dn.OverridableContext.Provider,{value:a},i.default.createElement(qb,{appName:r.appId,searchApi:n,initialQueryState:r.initialQueryState},i.default.createElement(Nv,{config:r},i.default.createElement(J$,{appId:r.appId}),i.default.createElement(Sv,null,i.default.createElement(Pn,{showFacets:r.showFacets}),i.default.createElement(lv,null),i.default.createElement(Ka,null)),r.showSearchFooter&&i.default.createElement(r1,null))))},n1=e=>g.useMemo(()=>{const{totalRecords:t,validatedRecords:r,errorRecords:n,successRecords:a}=e,s=t>0?r/t*100:0,o=t>0?n/t*100:0,l=t>0?a/t*100:0;return[{color:"blue",icon:"check circle",title:"Validation",value:r,label:`of ${t} Validated`,progress:s,progressLabel:`${s.toFixed(1)}% Complete`},{color:"red",icon:"exclamation triangle",title:"Errors",value:n,label:"with Errors",progress:o,progressLabel:`${o.toFixed(1)}% of Total`},{color:"green",icon:"upload",title:"Import",value:a,label:"Successfully Imported",progress:l,progressLabel:`${l.toFixed(1)}% Complete`}]},[e]),Et={statistic:_({marginBlock:"1rem"}),progressLabel:_({marginBlockEnd:"0.5rem"}),progress:_({marginBlockEnd:"0.5rem"})},a1=({totalRecords:e=0,validatedRecords:t=0,errorRecords:r=0,successRecords:n=0,showWhenEmpty:a=!1,className:s="",style:o={}})=>{const l=n1({totalRecords:e,validatedRecords:t,errorRecords:r,successRecords:n});return e===0&&!a?null:i.default.createElement(u.Segment,{basic:!0,className:s,style:o},i.default.createElement(u.Grid,{columns:3,stackable:!0},l.map(c=>i.default.createElement(u.Grid.Column,{key:c.title},i.default.createElement(u.Card,{fluid:!0},i.default.createElement(u.Card.Content,null,i.default.createElement(u.Card.Header,{textAlign:"center"},c.title),i.default.createElement(u.Card.Description,{textAlign:"center"},i.default.createElement(u.Statistic,{size:"large",color:c.color,className:Et.statistic},i.default.createElement(u.Statistic.Value,null,c.value),i.default.createElement(u.Statistic.Label,null,c.label)),i.default.createElement(u.Segment,{basic:!0,textAlign:"center"},i.default.createElement(u.Segment.Inline,{basic:!0,size:"small",className:Et.progressLabel},c.progressLabel),i.default.createElement(u.Progress,{percent:c.progress,color:c.color,size:"small",className:Et.progress})))))))))},s1={container:_({paddingBlockStart:"1rem",display:"flex",flexDirection:"column",gap:"1rem"})},Si=g.createContext(void 0),i1=({taskId:e,children:t})=>i.default.createElement(Si.Provider,{value:{taskId:e}},i.default.createElement("div",{className:s1.container},t)),_i=()=>{const e=g.useContext(Si);if(!e)throw new Error("useTaskDetails must be used within a TaskDetailsProvider");return e},St={headerContainer:_({display:"flex",alignItems:"flex-start",gap:"0.5rem"}),headerContent:_({display:"flex",flexDirection:"column",alignItems:"flex-start"}),actionsContainer:_({display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",gap:"1rem"})},o1=({children:e})=>i.default.createElement(u.Table,{padded:!0,size:"small",compact:!0},i.default.createElement(u.TableHeader,null,i.default.createElement(u.TableRow,null,i.default.createElement(u.TableHeaderCell,null,"ID"),i.default.createElement(u.TableHeaderCell,null,"Title"),i.default.createElement(u.TableHeaderCell,null,"Status"),i.default.createElement(u.TableHeaderCell,null))),i.default.createElement(u.TableBody,null,e)),l1={headerContainer:_({display:"flex",alignItems:"center",justifyContent:"space-between"})},u1=({record:e})=>i.default.createElement(u.Segment,{basic:!0},i.default.createElement(u.List,null,i.default.createElement(u.List.Item,null,i.default.createElement(u.List.Icon,{name:"tag"}),i.default.createElement(u.List.Content,null,i.default.createElement(u.List.Header,null,"Record ID"),i.default.createElement(u.List.Description,null,e.id))),i.default.createElement(u.List.Item,null,i.default.createElement(u.List.Icon,{name:"calendar"}),i.default.createElement(u.List.Content,null,i.default.createElement(u.List.Header,null,"Created"),i.default.createElement(u.List.Description,null,Ge(e.created)))),i.default.createElement(u.List.Item,null,i.default.createElement(u.List.Icon,{name:"edit"}),i.default.createElement(u.List.Content,null,i.default.createElement(u.List.Header,null,"Updated"),i.default.createElement(u.List.Description,null,Ge(e.updated)))),e.generated_record_id&&i.default.createElement(u.List.Item,null,i.default.createElement(u.List.Icon,{name:"file alternate"}),i.default.createElement(u.List.Content,null,i.default.createElement(u.List.Header,null,"Generated Record ID"),i.default.createElement(u.List.Description,null,i.default.createElement("a",{href:`/records/${e.generated_record_id}`,target:"_blank",rel:"noopener noreferrer"},"/",e.generated_record_id)))))),c1=({record:e})=>i.default.createElement(u.Segment,{basic:!0},e.errors.map((t,r)=>i.default.createElement(u.Message,{key:`error-${r}-${t.type}`,negative:!0},i.default.createElement(u.Message.Header,null,t.type),i.default.createElement("p",null,i.default.createElement("strong",null,"Location:")," ",t.loc),i.default.createElement("p",null,i.default.createElement("strong",null,"Message:")," ",t.msg)))),d1={pathCell:_({wordBreak:"break-all"})},f1=({record:e})=>{var r,n;return(((r=e.record_files)==null?void 0:r.length)??0)>0||(((n=e.validated_record_files)==null?void 0:n.length)??0)>0?i.default.createElement(u.Segment,{basic:!0},e.record_files&&e.record_files.length>0&&i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Header,{as:"h4"},i.default.createElement(u.Icon,{name:"file"}),"File List"),i.default.createElement(u.List,{bulleted:!0},e.record_files.map(a=>i.default.createElement(u.List.Item,{key:`file-${a}`},i.default.createElement(u.List.Content,null,a))))),e.validated_record_files&&e.validated_record_files.length>0&&i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Header,{as:"h4"},i.default.createElement(u.Icon,{name:"checkmark"}),"Validated Files"),i.default.createElement(u.Table,{celled:!0},i.default.createElement(u.Table.Header,null,i.default.createElement(u.Table.Row,null,i.default.createElement(u.Table.HeaderCell,null,"File"),i.default.createElement(u.Table.HeaderCell,null,"Size"),i.default.createElement(u.Table.HeaderCell,null,"Origin"),i.default.createElement(u.Table.HeaderCell,null,"Path"))),i.default.createElement(u.Table.Body,null,e.validated_record_files.map((a,s)=>i.default.createElement(u.Table.Row,{key:`validated-${a.key}-${s}`},i.default.createElement(u.Table.Cell,null,i.default.createElement(u.Icon,{name:"file"}),a.key),i.default.createElement(u.Table.Cell,null,(a.size/1024).toFixed(2)," KB"),i.default.createElement(u.Table.Cell,null,a.origin),i.default.createElement(u.Table.Cell,{className:d1.pathCell},a.full_path))))))):i.default.createElement(u.Message,{info:!0},i.default.createElement(u.Message.Header,null,"No Files"),i.default.createElement("p",null,"No files are associated with this record."))},p1={valueCell:_({wordBreak:"break-word"})},h1=({record:e})=>i.default.createElement(u.Table,{celled:!0,striped:!0},i.default.createElement(u.Table.Header,null,i.default.createElement(u.Table.Row,null,i.default.createElement(u.Table.HeaderCell,null,"Field"),i.default.createElement(u.Table.HeaderCell,null,"Value"))),i.default.createElement(u.Table.Body,null,Object.entries(e.src_data).filter(([t,r])=>r&&r.trim()!=="").map(([t,r])=>i.default.createElement(u.Table.Row,{key:t},i.default.createElement(u.Table.Cell,null,i.default.createElement("strong",null,t)),i.default.createElement(u.Table.Cell,{className:p1.valueCell},r))))),m1=({record:e,open:t,onClose:r,initialTab:n=0})=>{const[a,s]=g.useState(n);g.useEffect(()=>{t&&s(n)},[t,n]);const o=(d,f)=>{const p=typeof f.activeIndex=="number"?f.activeIndex:0;s(p)},l=[{menuItem:{key:"basic",icon:"info circle",content:"Basic Info"},render:()=>i.default.createElement(u.Tab.Pane,null,i.default.createElement(u1,{record:e}))},{menuItem:{key:"source",icon:"database",content:"Source Data"},render:()=>i.default.createElement(u.Tab.Pane,null,i.default.createElement(h1,{record:e}))},...e.errors&&e.errors.length>0?[{menuItem:{key:"errors",icon:"exclamation triangle",content:`Errors (${e.errors.length})`},render:()=>i.default.createElement(u.Tab.Pane,null,i.default.createElement(c1,{record:e}))}]:[],{menuItem:{key:"files",icon:"file",content:"Files"},render:()=>i.default.createElement(u.Tab.Pane,null,i.default.createElement(f1,{record:e}))}],c=()=>{var d,f,p,h,m;return((f=(d=e.serializer_data)==null?void 0:d.metadata)==null?void 0:f.title)||((h=(p=e.transformed_data)==null?void 0:p.metadata)==null?void 0:h.title)||((m=e.src_data)==null?void 0:m.title)||`Record ${e.id}`};return i.default.createElement(u.Modal,{centered:!1,open:t,onClose:r,size:"large",closeIcon:!0},i.default.createElement(u.Modal.Header,null,i.default.createElement("div",{className:l1.headerContainer},i.default.createElement("div",null,i.default.createElement(u.Icon,{name:"file alternate outline"}),c()),i.default.createElement(Cs,{status:e.status}))),i.default.createElement(u.Modal.Content,{scrolling:!0},i.default.createElement(u.Tab,{panes:l,activeIndex:a,onTabChange:o})),i.default.createElement(u.Modal.Actions,null,i.default.createElement(u.Button,{onClick:r},i.default.createElement(u.Icon,{name:"close"}),"Close")))},be={idContainer:_({display:"flex",alignItems:"center",gap:"0.5rem"}),codeElement:_({fontSize:"0.9em",color:"#666"}),titleContainer:_({maxInlineSize:"18.75rem"}),noTitle:_({color:"#999"}),errorIcon:_({marginInlineStart:"0.5rem !important",cursor:"help"})},Ci=({result:e,index:t})=>{var v;const[r,n]=g.useState("idle"),[a,s]=g.useState(!1),[o,l]=g.useState(0);if(!e)return null;const c=async()=>{try{n("copying"),await navigator.clipboard.writeText(e.id),n("copied"),setTimeout(()=>{n("idle")},2e3)}catch{n("idle")}},d=e.errors&&e.errors.length>0,f=Is(e.status),p=()=>d?2:-1,h=y=>y==="red"?"times":y==="green"||y==="blue"?"check":"question",m=[...d?[{key:"view-errors",text:"View Errors",value:"view-errors",icon:"exclamation triangle",onClick:()=>{l(p()),s(!0)}}]:[],{key:"run",disabled:e.status==="success",text:"Run Record",value:"run",icon:"play",onClick:async()=>{try{await FE(e.id),console.log(`Record ${e.id} is being processed.`)}catch(y){console.error("Error running record:",y)}}},{key:"view-details",text:"View Details",value:"view-details",icon:"info circle",onClick:()=>{l(0),s(!0)}}];return i.default.createElement(u.TableRow,{key:t},i.default.createElement(u.TableCell,null,i.default.createElement("div",{className:be.idContainer},i.default.createElement("code",{className:be.codeElement},e.id.length>20?`${e.id.substring(0,20)}`:e.id),i.default.createElement(u.Popup,{content:r==="copied"?"Copied!":"Copy ID",trigger:i.default.createElement(u.Button,{size:"mini",circular:!0,icon:!0,loading:r==="copying",onClick:c,color:r==="copied"?"green":void 0},i.default.createElement(u.Icon,{name:r==="copied"?"check":"copy"})),position:"top center",size:"mini"}))),i.default.createElement(u.TableCell,null,i.default.createElement("div",{className:be.titleContainer},((v=e.src_data)==null?void 0:v.title)||i.default.createElement("em",{className:be.noTitle},"No Title Available"))),i.default.createElement(u.TableCell,null,i.default.createElement(u.Label,{color:f,size:"small"},i.default.createElement(u.Icon,{name:h(f)}),oe(e.status)),d&&i.default.createElement(u.Popup,{content:`${e.errors.length} error${e.errors.length>1?"s":""} found`,trigger:i.default.createElement(u.Icon,{name:"exclamation triangle",color:"red",className:be.errorIcon}),position:"top center",size:"mini"})),i.default.createElement(u.TableCell,{textAlign:"right"},i.default.createElement(u.Dropdown,{button:!0,className:"icon",floating:!0,labeled:!0,icon:"ellipsis horizontal",text:"Actions",size:"mini"},i.default.createElement(u.Dropdown.Menu,null,m.map(y=>i.default.createElement(u.Dropdown.Item,{key:y.key,icon:y.icon,text:y.text,disabled:y.disabled,onClick:y.onClick})))),i.default.createElement(m1,{record:e,open:a,onClose:()=>s(!1),initialTab:o})))},g1=()=>{const{taskId:e}=_i(),t={"search.SearchBarRow":()=>null,"search.ResultsList.container":o1,"search.ResultsList.item":Ci};return i.default.createElement("div",null,i.default.createElement(u.Header,{as:"h3"},"Task Records"),i.default.createElement(Sr,{config:{searchApi:{axios:{url:"/api/importer-records",withCredentials:!0}},initialQueryState:{hiddenParams:[["q",`task.id:${e}`]]},showFacets:!1,showImportModal:!1},overriddenComponents:t}))},Y={hiddenInput:_({display:"none"}),dropZone:_({minBlockSize:"7.5rem",border:"2px dashed #d4d4d5 !important",backgroundColor:"transparent !important",cursor:"pointer",opacity:1}),dropZoneActive:_({border:"2px dashed #2185d0 !important",backgroundColor:"#f8f9fa !important"}),dropZoneDisabled:_({cursor:"not-allowed",opacity:.6}),contentContainer:_({textAlign:"center",paddingBlock:"1.25rem",paddingInline:"1.25rem"}),textContainer:_({marginBlockStart:"0.625rem"}),smallText:_({fontSize:"0.75rem",color:"#666"}),selectedFilesText:_({fontSize:"0.75rem",color:"#2185d0",marginBlockStart:"0.5rem"})},y1=({fileInputRef:e,accept:t,maxFiles:r,maxTotalSize:n,disabled:a=!1,isDragOver:s,uploadFiles:o,onInputChange:l,onDragOver:c,onDragLeave:d,onDrop:f,onFileDialogOpen:p})=>i.default.createElement(g.Fragment,null,i.default.createElement("input",{ref:e,type:"file",multiple:!0,accept:t,onChange:l,className:Y.hiddenInput,disabled:a}),i.default.createElement(u.Segment,{placeholder:!0,className:xs("file-drop-zone",Y.dropZone,{[Y.dropZoneActive]:s,[Y.dropZoneDisabled]:a}),onDragOver:c,onDragLeave:d,onDrop:f,onClick:p},i.default.createElement("div",{className:Y.contentContainer},i.default.createElement(u.Icon,{name:"cloud upload",size:"huge",color:s?"blue":"grey"}),i.default.createElement("div",{className:Y.textContainer},i.default.createElement("p",null,i.default.createElement("strong",null,"Drop files here or click to select")),i.default.createElement("p",{className:Y.smallText},"Max files: ",r," | Max total: ",dt(n)),o.length>0&&i.default.createElement("p",{className:Y.selectedFilesText},i.default.createElement("strong",null,o.length," files selected "," ",yr(o)," total")))))),$i=({onUploadError:e}={})=>{const[t,r]=g.useState([]),[n]=g.useState(!1),a=g.useCallback((c,d,f)=>f&&c.size===0?"Empty files are not allowed":d&&!d.split(",").map(m=>m.trim()).some(m=>m.startsWith(".")?c.name.toLowerCase().endsWith(m.toLowerCase()):c.type.match(new RegExp(m.replace("*",".*"))))?`File type not accepted. Accepted types: ${d}`:null,[]),s=g.useCallback((c,d,f,p,h)=>{const m=[],v=[];for(const y of c){if(f&&t.length+m.length>=f){v.push(`Maximum ${f} files allowed`);break}const S=a(y,d,h);if(S){v.push(`${y.name}: ${S}`);continue}if(t.some(C=>C.file.name===y.name&&C.file.size===y.size)){v.push(`${y.name}: File already selected`);continue}if(p&&gr([...t,...m])+y.size>p){v.push(`Total size would exceed maximum of ${(p/1024/1024).toFixed(2)}MB`);break}m.push({file:y,id:`${y.name}-${y.size}-${Date.now()}`})}return v.length>0&&(e==null||e(v.join(", "))),r(y=>[...y,...m]),m},[t,a,e]),o=g.useCallback(c=>{r(d=>d.filter(f=>f.id!==c))},[]),l=g.useCallback(()=>{r([])},[]);return{uploadFiles:t,isUploading:n,addFiles:s,removeFile:o,clearFiles:l}},ve={headerContainer:_({display:"flex",justifyContent:"space-between",alignItems:"center",marginBlockEnd:"0.625rem"}),listItemContainer:_({display:"flex",justifyContent:"space-between",alignItems:"center"}),fileContentContainer:_({flex:"1 1 auto"}),fileInfoContainer:_({display:"flex",alignItems:"center",gap:"0.5rem"}),errorMessage:_({marginBlockStart:"0.3125rem"})},b1=({uploadFiles:e,isUploading:t,handleRemoveFile:r,handleClearFiles:n})=>i.default.createElement(u.Segment,null,i.default.createElement("div",{className:ve.headerContainer},i.default.createElement("strong",null,"Selected Files (",e.length,") "," ",yr(e)),i.default.createElement(u.Button,{size:"mini",basic:!0,icon:"trash",content:"Clear All",onClick:n,disabled:t})),i.default.createElement(u.List,{divided:!0},e.map(a=>i.default.createElement(u.List.Item,{key:a.id},i.default.createElement(u.List.Content,null,i.default.createElement("div",{className:ve.listItemContainer},i.default.createElement("div",{className:ve.fileContentContainer},i.default.createElement("div",{className:ve.fileInfoContainer},i.default.createElement(u.Icon,{name:"file"}),i.default.createElement("span",null,a.file.name),i.default.createElement(u.Label,{size:"mini",basic:!0},dt(a.file.size))),a.error&&i.default.createElement(u.Message,{negative:!0,size:"mini",className:ve.errorMessage},a.error)),i.default.createElement(u.Button,{size:"mini",basic:!0,icon:"close",onClick:()=>r(a.id),disabled:t}))))))),_r=({onChange:e,accept:t=".csv,.json,.xlsx,.txt",maxFiles:r=5,maxTotalSize:n=50*1024*1024,skipEmptyFiles:a=!0,disabled:s=!1,error:o})=>{const l=g.useRef(null),[c,d]=i.default.useState(!1),[f,p]=i.default.useState(null),{uploadFiles:h,isUploading:m,addFiles:v,removeFile:y,clearFiles:S}=$i({onUploadComplete:T=>{e(T)},onUploadError:T=>{console.error("Upload error:",T),p(T)}}),b=g.useCallback(T=>{if(!T||T.length===0)return;p(null);const pt=Array.from(T),re=v(pt,t,r,n,a);if(re.length>0){const wi=[...h,...re].map(Ti=>Ti.file);e(wi)}},[v,t,r,n,a,e,h]),C=g.useCallback(T=>{b(T.target.files),l.current&&(l.current.value="")},[b]),I=g.useCallback(T=>{T.preventDefault(),s||d(!0)},[s]),R=g.useCallback(T=>{T.preventDefault(),d(!1)},[]),j=g.useCallback(T=>{T.preventDefault(),d(!1),!s&&b(T.dataTransfer.files)},[s,b]),F=g.useCallback(()=>{var T;s||(T=l.current)==null||T.click()},[s]),X=g.useCallback(T=>{y(T),p(null);const pt=h.filter(re=>re.id!==T).map(re=>re.file);e(pt)},[y,h,e]),Ae=g.useCallback(()=>{S(),p(null),e([])},[S,e]);return i.default.createElement("div",null,i.default.createElement(y1,{fileInputRef:l,accept:t,maxFiles:r,maxTotalSize:n,isDragOver:c,disabled:s,uploadFiles:h,onInputChange:C,onDragOver:I,onDragLeave:R,onDrop:j,onFileDialogOpen:F}),(o||f)&&i.default.createElement(u.Message,{negative:!0,size:"small"},i.default.createElement(u.Icon,{name:"exclamation triangle"}),o||f),h.length>0&&i.default.createElement(b1,{uploadFiles:h,isUploading:m,handleRemoveFile:X,handleClearFiles:Ae}))},_t={selectedFileInfo:_({marginBlockStart:"0.5rem",color:"#666"}),fieldLabel:_({marginBlockEnd:"0.5rem",fontSize:"0.875rem",fontWeight:"bold"}),actionsContainer:_({display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"0.5rem"})},v1=()=>{const{taskId:e}=_i(),[t,r]=g.useState(null),[n,a]=g.useState([]),[s,o]=g.useState(!1),[l,c]=g.useState(null),d=m=>{var y;const v=((y=m.target.files)==null?void 0:y[0])||null;r(v||null)},f=m=>{a(m)},p=()=>{o(!1),r(null),a([]),c(null)},h=async()=>{if(!(!t&&n.length===0))try{await IE(e,t,n.length>0?n:void 0,{onProgress:(m,v)=>c({[m]:v}),onError:(m,v)=>{console.error(`Error during ${v}:`,m)}}),t&&await Rs(e,{autoExecute:!0,onProgress:(m,v)=>c({[m]:v}),onError:(m,v)=>{console.error(`Error during ${v}:`,m)}}),o(!1),r(null),a([])}catch(m){console.error("Error uploading content:",m)}};return i.default.createElement(u.Modal,{open:s,onOpen:()=>o(!0),onClose:p,size:"small",closeIcon:!0,trigger:i.default.createElement(u.Button,{icon:"upload",size:"tiny",content:"Upload Content"})},i.default.createElement(u.Header,{icon:!0},i.default.createElement(u.Icon,{name:"upload"}),"Upload Metadata & Files"),i.default.createElement(u.Modal.Content,null,i.default.createElement(u.Form,{onSubmit:h},i.default.createElement(u.Form.Field,null,i.default.createElement("label",{htmlFor:"fileInput"},"Select Metadata File (Optional)"),i.default.createElement("input",{id:"fileInput",type:"file",onChange:d,accept:".csv"}),t&&i.default.createElement("div",{className:_t.selectedFileInfo},"Selected: ",t.name)),i.default.createElement(u.Form.Field,null,i.default.createElement("div",{className:_t.fieldLabel},"Additional Files (Optional)"),i.default.createElement(_r,{value:n,onChange:f,accept:"*",maxTotalSize:10*1024*1024*1024,maxFiles:100})))),i.default.createElement(u.Modal.Actions,null,i.default.createElement("div",{className:_t.actionsContainer},l&&i.default.createElement(pr,{progress:l}),i.default.createElement(u.Button,{onClick:p,color:"grey",disabled:!!l},i.default.createElement(u.Icon,{name:"cancel"}),"Cancel"),i.default.createElement(u.Button,{onClick:h,color:"blue",loading:!!l,disabled:!t&&n.length===0},i.default.createElement(u.Icon,{name:"upload"}),"Upload"))))},xi=({taskId:e})=>{var h,m,v,y,S,b;const[t,r]=g.useState(null),{getStatus:n,isGettingStatus:a,runBulkImport:s,isBulkImporting:o,error:l}=Ps(e,{onStatusChangeSuccess:r});if(g.useEffect(()=>{n()},[n]),a||o)return i.default.createElement(hr,null);if(!t)return i.default.createElement(u.Message,{warning:!0,icon:!0},i.default.createElement(u.Icon,{name:"search"}),i.default.createElement(u.Message.Content,null,i.default.createElement(u.Message.Header,null,"Task Not Found"),"The requested task could not be found."));const c=((h=t.records_status)==null?void 0:h.total_records)||0,d=((m=t.records_status)==null?void 0:m.validated)||0,f=((v=t.records_status)==null?void 0:v.success)||0,p=(((y=t.records_status)==null?void 0:y["import failed"])||0)+(((S=t.records_status)==null?void 0:S["validation failed"])||0)+(((b=t.records_status)==null?void 0:b["serializer validation failed"])||0);return i.default.createElement(i1,{taskId:e},i.default.createElement(u.Container,{fluid:!0,verticalAlign:"top"},l&&i.default.createElement(u.Message,{negative:!0,icon:!0},i.default.createElement(u.Icon,{name:"exclamation triangle"}),i.default.createElement(u.Message.Content,null,i.default.createElement(u.Message.Header,null,"Error"),(l==null?void 0:l.message)||"An unknown error occurred")),i.default.createElement(u.Grid,null,i.default.createElement(u.Grid.Row,{verticalAlign:"top"},i.default.createElement(u.Grid.Column,{width:8,verticalAlign:"middle"},i.default.createElement("div",{className:St.headerContainer},i.default.createElement(u.Icon,{name:"tasks",circular:!0,size:"big"}),i.default.createElement("div",{className:St.headerContent},i.default.createElement(u.Header,{as:"h2"},i.default.createElement(u.Header.Content,null,t.title)),t.status&&i.default.createElement(mr,{size:"large",status:t.status},oe(t.status))))),i.default.createElement(u.Grid.Column,{width:8,textAlign:"right"},i.default.createElement("div",{className:St.actionsContainer},i.default.createElement("div",null,i.default.createElement(u.Button,{size:"tiny",color:"blue",icon:"refresh",content:"Refresh",onClick:()=>n(),loading:a}),i.default.createElement(v1,null),i.default.createElement(u.Button,{size:"tiny",color:"green",icon:"play",onClick:async()=>{await s(),await n()},loading:o,content:"Run Task"}))))),t.description&&i.default.createElement(u.Grid.Row,null,i.default.createElement(u.Grid.Column,{width:16},i.default.createElement(u.Message,{info:!0,icon:!0,size:"small"},i.default.createElement(u.Icon,{name:"info circle"}),i.default.createElement(u.Message.Content,null,i.default.createElement(u.Message.Header,null,"Notes"),t.description))))),c>0&&i.default.createElement(u.Segment,{basic:!0},i.default.createElement(a1,{totalRecords:c,validatedRecords:d,errorRecords:p,successRecords:f}))),i.default.createElement(g1,null))},E1={Search:Sr,TaskDetails:xi},S1={CREATED:"created",VALIDATING:"validating",SERIALIZER_VALIDATION_FAILED:"serializer validation failed",VALIDATION_FAILED:"validation failed",VALIDATED:"validated",IMPORT_FAILED:"import failed",IMPORTED:"success"},_1={CREATED:"created",VALIDATING:"validating",VALIDATION_FAILED:"validated with failures",VALIDATED:"validated",IMPORTING:"importing",IMPORT_FAILED:"imported with failures",SUCCESS:"success",DAMAGED:"damaged"},C1={CREATING_TASK:"Creating Task",UPLOADING_METADATA:"Uploading Metadata",UPLOADING_FILES:"Uploading Files",UPDATING_METADATA:"Updating Metadata",UPDATING_FILES:"Updating Files",VALIDATING:"Validating",EXECUTING:"Executing",UPDATING:"Updating"};exports.BulkImporter=E1;exports.FileUploader=_r;exports.ImportModal=Ei;exports.ImporterTaskStates=_1;exports.InvenioImporterRecordStatus=S1;exports.OrchestrationStepsEnum=C1;exports.ProgressLoading=pr;exports.Search=Sr;exports.Spinner=hr;exports.StatusIcon=Cs;exports.StatusLabel=mr;exports.TaskDetails=xi;exports.TaskRecordItem=Ci;exports.capitalizeFirstLetter=oe;exports.cn=xs;exports.createSearchApi=bE;exports.createSearchApiConfig=vE;exports.formatDate=Ge;exports.formatFileSize=dt;exports.getCsrfToken=Ts;exports.getStatusColor=Is;exports.getTotalSize=gr;exports.getTotalSizeFormatted=yr;exports.useFileUploader=$i;
